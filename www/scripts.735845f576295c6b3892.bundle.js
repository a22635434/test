var $namespace=function(e,t,i){var n;for(e=e.split(t||"."),i=i||window,t=0,n=e.length;t<n;t++)i=i[e[t]]=i[e[t]]||{};return i},$type=function(e,t){if(!e instanceof t)throw new SyntaxError};if(!$)var $=function(e){return document.getElementById(e)};if(Array.prototype.each||(Array.prototype.each=function(e){if("function"!=typeof e)throw"Illegal Argument for Array.each";for(var t=0;t<this.length;t++)e(this[t])}),Array.prototype.contains||(Array.prototype.contains=function(e){var t=!1;return this.each(function(i){(e.equals&&e.equals(i)||i==e)&&(t=!0)}),t}),Array.prototype.containsKey||(Array.prototype.containsKey=function(e){for(var t in this)if(t.toLowerCase()==e.toLowerCase())return!0;return!1}),Array.prototype.getCaseInsensitive||(Array.prototype.getCaseInsensitive=function(e){for(var t in this)if(t.toLowerCase()==e.toLowerCase())return this[t];return null}),String.prototype.charCodeAt||(String.prototype.charCodeAt=function(e){e=this.charAt(e);for(var t=0;65536>t;t++)if(String.fromCharCode(t)==e)return t;return 0}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return this.substr(this.length-e.length,e.length)==e}),!Exception){var Exception=function(e,t){this.cause=t,this.errorMessage=e};Exception.prototype=Error.prototype,Exception.prototype.getCause=function(){return this.cause},Exception.prototype.getMessage=function(){return this.message},Exception.prototype.getStackTrace=function(){if(this.callstack)return this.callstack;if(this.stack){for(var e=stack.split("\n"),t=0,i=e.length;t<i;t++)e[t].match(/^\s*[A-Za-z0-9\=+\$]+\(/)&&this.callstack.push(e[t]);this.callstack.shift()}else if(window.opera&&this.message){for(t=0,i=(e=this.message.split("\n")).length;t<i;t++)if(e[t].match(/^\s*[A-Za-z0-9\=+\$]+\(/)){var n=e[t];e[t+1]&&(n+=" at "+e[t+1],t++),this.callstack.push(n)}this.callstack.shift()}else for(e=arguments.callee.caller;e;)t=(t=e.toString()).substring(t.indexOf("function")+8,t.indexOf("("))||"anonymous",this.callstack.push(t),e=e.caller;return this.callstack},Exception.prototype.printStackTrace=function(e){var t=this.getMessage()+"|||"+this.getStackTrace().join("|||");if(this.cause&&this.cause.printStackTrace&&(t+="||||||Caused by "+this.cause.printStackTrace().replace("\n","|||")),!e)return e.replace("|||","\n");e.value?e.value=t.replace("|||","\n"):e.writeln?e.writeln(t.replace("|||","\n")):e.innerHTML?e.innerHTML=t.replace("|||","<br/>"):e.innerText?e.innerText=t.replace("|||","<br/>"):e.append?e.append(t.replace("|||","\n")):e instanceof Function&&e(t.replace("|||","\n"))}}if(!RuntimeException)var RuntimeException=Exception;if(!IllegalArgumentException)var IllegalArgumentException=Exception;if(!DateFormat){var DateFormat=function(e){var t={longMonths:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),longDays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),d:function(e){return(10>e.getDate()?"0":"")+e.getDate()},D:function(e){return t.shortDays[e.getDay()]},j:function(e){return e.getDate()},l:function(e){return t.longDays[e.getDay()]},N:function(e){return e.getDay()+1},S:function(e){return 1==e.getDate()%10&&11!=e.getDate()?"st":2==e.getDate()%10&&12!=e.getDate()?"nd":3==e.getDate()%10&&13!=e.getDate()?"rd":"th"},w:function(e){return e.getDay()},z:function(e){return"Not Yet Supported"},W:function(e){return"Not Yet Supported"},F:function(e){return t.longMonths[e.getMonth()]},m:function(e){return(9>e.getMonth()?"0":"")+(e.getMonth()+1)},M:function(e){return t.shortMonths[e.getMonth()]},n:function(e){return e.getMonth()+1},t:function(e){return"Not Yet Supported"},L:function(e){return 0==e.getFullYear()%4&&0!=e.getFullYear()%100||0==e.getFullYear()%400?"1":"0"},o:function(e){return"Not Supported"},Y:function(e){return e.getFullYear()},y:function(e){return(""+e.getFullYear()).substr(2)},a:function(e){return 12>e.getHours()?"am":"pm"},A:function(e){return 12>e.getHours()?"AM":"PM"},B:function(e){return"Not Yet Supported"},g:function(e){return e.getHours()%12||12},G:function(e){return e.getHours()},h:function(e){return(10>(e.getHours()%12||12)?"0":"")+(e.getHours()%12||12)},H:function(e){return(10>e.getHours()?"0":"")+e.getHours()},i:function(e){return(10>e.getMinutes()?"0":"")+e.getMinutes()},s:function(e){return(10>e.getSeconds()?"0":"")+e.getSeconds()},e:function(e){return"Not Yet Supported"},I:function(e){return"Not Supported"},O:function(e){return(0>-e.getTimezoneOffset()?"-":"+")+(10>Math.abs(e.getTimezoneOffset()/60)?"0":"")+Math.abs(e.getTimezoneOffset()/60)+"00"},P:function(e){return(0>-e.getTimezoneOffset()?"-":"+")+(10>Math.abs(e.getTimezoneOffset()/60)?"0":"")+Math.abs(e.getTimezoneOffset()/60)+":"+(10>Math.abs(e.getTimezoneOffset()%60)?"0":"")+Math.abs(e.getTimezoneOffset()%60)},T:function(e){var t=e.getMonth();e.setMonth(0);var i=e.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return e.setMonth(t),i},Z:function(e){return 60*-e.getTimezoneOffset()},c:function(e){return e.format("Y-m-d")+"T"+e.format("H:i:sP")},r:function(e){return e.toString()},U:function(e){return e.getTime()/1e3}};return{format:function(i){for(var n="",r=0;r<e.length;r++){var a=e.charAt(r);n=t[a]?n+t[a].call(i):n+a}return n}}};DateFormat.getDateInstance=function(){return new DateFormat("M/d/y h:i a")}}$namespace("org.owasp.esapi"),org.owasp.esapi.ESAPI=function(e){if(!e)throw new RuntimeException("Configuration Error - Unable to load $ESAPI_Properties Object");var t=null,i=null,n=null,r=null,a=null;return{properties:e,encoder:function(){if(!t){if(!e.encoder.Implementation)throw new RuntimeException("Configuration Error - $ESAPI.properties.encoder.Implementation object not found.");t=new e.encoder.Implementation}return t},logFactory:function(){if(!n){if(!e.logging.Implementation)throw new RuntimeException("Configuration Error - $ESAPI.properties.logging.Implementation object not found.");n=new e.logging.Implementation}return n},logger:function(e){return this.logFactory().getLogger(e)},locale:function(){return org.owasp.esapi.i18n.Locale.getLocale(e.localization.DefaultLocale)},resourceBundle:function(){if(!r){if(!e.localization.StandardResourceBundle)throw new RuntimeException("Configuration Error - $ESAPI.properties.localization.StandardResourceBundle not found.");r=new org.owasp.esapi.i18n.ObjectResourceBundle(e.localization.StandardResourceBundle)}return r},validator:function(){if(!i){if(!e.validation.Implementation)throw new RuntimeException("Configuration Error - $ESAPI.properties.validation.Implementation object not found.");i=new e.validation.Implementation}return i},httpUtilities:function(){return a||(a=new org.owasp.esapi.HTTPUtilities),a}}};var $ESAPI=null;with(org.owasp.esapi.ESAPI.initialize=function(){$ESAPI=new org.owasp.esapi.ESAPI(Base.esapi.properties)},$namespace("org.owasp.esapi"),org.owasp.esapi.Encoder=function(){},$namespace("org.owasp.esapi"),org.owasp.esapi.EncoderConstants={CHAR_LOWERS:"abcdefghijklmnopqrstuvwxyz".split(""),CHAR_UPPERS:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),CHAR_DIGITS:"0123456789".split(""),CHAR_SPECIALS:"!$*+-.=?@^_|~".split(""),CHAR_LETTERS:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),CHAR_ALNUM:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split("")},$namespace("org.owasp.esapi"),org.owasp.esapi.EnterpriseSecurityException=function(e,t,i){return{getMessage:(e=new Exception(e,i)).getMessage,getUserMessage:e.getMessage,getLogMessage:function(){return t},getStackTrace:e.getStackTrace,printStackTrace:e.printStackTrace}},$namespace("org.owasp.esapi"),org.owasp.esapi.HTTPUtilities=function(){var e=$ESAPI.logger("HTTPUtilities"),t=$ESAPI.resourceBundle(),i=org.owasp.esapi.Logger.EventType;return{addCookie:function(n){if($type(n,org.owasp.esapi.net.Cookie),"http:"!=window.top.location.protocol||"https:"!=window.top.location.protocol)throw new RuntimeException(t.getString("HTTPUtilities.Cookie.Protocol",{protocol:window.top.location.protocol}));var r=n.getName(),a=n.getValue(),o=n.getMaxAge(),s=n.getDomain(),l=n.getPath();n=n.getSecure();var c=new org.owasp.esapi.ValidationErrorList;$ESAPI.validator().getValidInput("cookie name",r,"HttpCookieName",50,!1,c),$ESAPI.validator().getValidInput("cookie value",a,"HttpCookieValue",5e3,!1,c),0==c.size()?(r=r+"="+escape(a),r=(r+=o?";expires="+new Date((new Date).getTime()+1e3*o).toGMTString():"")+(l?";path="+l:"")+(s?";domain="+s:""),r+=n||$ESAPI.properties.httputilities.cookies.ForceSecure?";secure":"",document.cookie=r):e.warning(i.SECURITY_FAILURE,t.getString("HTTPUtilities.Cookie.UnsafeData",{name:r,value:a}))},getCookie:function(e){for(var t=document.cookie.split("; "),i=0,n=t.length;i<n;i++){var r=t[i].split("=");if(r[0]==escape(e))return new org.owasp.esapi.net.Cookie(e,r[1]?unescape(r[1]):"")}return null},killAllCookies:function(){for(var e=document.cookie.split("; "),i=0,n=e.length;i<n;i++){var r=e[i].split("=");if(r=unescape(r[0]),!this.killCookie(r))throw new RuntimeException(t.getString("HTTPUtilities.Cookie.CantKill",{name:r}))}},killCookie:function(e){var i=this.getCookie(e);if(i){if(i.setMaxAge(-10),this.addCookie(i),this.getCookie(e))throw new RuntimeException(t.getString("HTTPUtilities.Cookie.CantKill",{name:e}));return!0}return!1},getRequestParameter:function(e){var t=window.top.location.search.substring(1),i=t.indexOf(e);return 0>i?null:(0>(e=t.indexOf("&",i+=e.length))&&(e=t.length),unescape(t.substring(i,e)))}}},$namespace("org.owasp.esapi"),org.owasp.esapi.IntrusionException=function(e,t,i){return{getMessage:(e=new org.owasp.esapi.EnterpriseSecurityException(e,t,i)).getMessage,getUserMessage:e.getMessage,getLogMessage:e.getLogMessage,getStackTrace:e.getStackTrace,printStackTrace:e.printStackTrace}},$namespace("org.owasp.esapi"),org.owasp.esapi.LogFactory=function(){return{getLogger:!1}},$namespace("org.owasp.esapi"),org.owasp.esapi.Logger=function(){return{setLevel:!1,fatal:!1,error:!1,isErrorEnabled:!1,warning:!1,isWarningEnabled:!1,info:!1,isInfoEnabled:!1,debug:!1,isDebugEnabled:!1,trace:!1,isTraceEnabled:!1}},org.owasp.esapi.Logger.EventType=function(e,t){return{isSuccess:function(){return t},toString:function(){return e}}},org.owasp.esapi.Logger)EventType.SECURITY_SUCCESS=new EventType("SECURITY SUCCESS",!0),EventType.SECURITY_FAILURE=new EventType("SECURITY FAILURE",!1),EventType.EVENT_SUCCESS=new EventType("EVENT SUCCESS",!0),EventType.EVENT_FAILURE=new EventType("EVENT FAILURE",!1),OFF=Number.MAX_VALUE,FATAL=1e3,ERROR=800,WARNING=600,INFO=400,DEBUG=200,TRACE=100,ALL=Number.MIN_VALUE;$namespace("org.owasp.esapi"),org.owasp.esapi.PreparedString=function(e,t,i){var n=[],r=[];return i||(i="?"),function(e){for(var t=0,a=0,o=0;o<e.length;o++)e.charAt(o)==i&&(a++,n.push(e.substr(t,o)),t=o+1);n.push(e.substr(t)),r=Array(a)}(e),{set:function(e,i,n){if(1>e||e>r.length)throw new IllegalArgumentException("Attempt to set parameter: "+e+" on a PreparedString with only "+r.length+" placeholders");n||(n=t),r[e-1]=n.encode([],i)},toString:function(){for(var e=0;e<r.length;e++)if(null==r[e])throw new RuntimeException("Attempt to render PreparedString without setting parameter "+(e+1));e="";for(var t=0,i=0;i<n.length;i++)e+=n[i],t<r.length&&(e+=r[t++]);return e}}},$namespace("org.owasp.esapi"),org.owasp.esapi.ValidationErrorList=function(){var e=[];return{addError:function(t,i){if(null==t)throw new RuntimeException("Context cannot be null: "+i.getLogMessage(),i);if(null==i)throw new RuntimeException("Context ("+t+") - Error cannot be null");if(e[t])throw new RuntimeException("Context ("+t+") already exists. must be unique.");e[t]=i},errors:function(){return e},isEmpty:function(){return 0==e.length},size:function(){return e.length}}},$namespace("org.owasp.esapi"),org.owasp.esapi.ValidationRule=function(){return{getValid:!1,setAllowNull:!1,getTypeName:!1,setTypeName:!1,setEncoder:!1,assertValid:!1,getSafe:!1,isValid:!1,whitelist:!1}},$namespace("org.owasp.esapi"),org.owasp.esapi.Validator=function(){return{addRule:!1,getRule:!1,getValidInput:!1,isValidDate:!1,getValidDate:!1,isValidSafeHTML:!1,getValidSafeHTML:!1,isValidCreditCard:!1,getValidCreditCard:!1,isValidFilename:!1,getValidFilename:!1,isValidNumber:!1,getValidNumber:!1,isValidPrintable:!1,getValidPrintable:!1}},$namespace("org.owasp.esapi.codecs.Base64"),org.owasp.esapi.codecs.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){if(!e)return null;for(var t,i,n,r,a,o="",s=0,l=org.owasp.esapi.codecs.UTF8.encode(e);s<l.length;)n=(t=l.charCodeAt(s++))>>2,t=(3&t)<<4|(e=l.charCodeAt(s++))>>4,r=(15&e)<<2|(i=l.charCodeAt(s++))>>6,a=63&i,isNaN(e)?r=a=64:isNaN(i)&&(a=64),o+=this._keyStr.charAt(n)+this._keyStr.charAt(t)+this._keyStr.charAt(r)+this._keyStr.charAt(a);return o},decode:function(e){if(!e)return null;for(var t,i,n,r,a="",o=0,s=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");o<s.length;)t=(t=this._keyStr.indexOf(s.charAt(o++)))<<2|(i=this._keyStr.indexOf(s.charAt(o++)))>>4,i=(15&i)<<4|(e=this._keyStr.indexOf(s.charAt(o++)))>>2,n=(3&e)<<6|(r=this._keyStr.indexOf(s.charAt(o++))),a+=String.fromCharCode(t),64!=e&&(a+=String.fromCharCode(i)),64!=r&&(a+=String.fromCharCode(n));return org.owasp.esapi.codecs.UTF8.decode(a)}},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.CSSCodec=function(){var e=new org.owasp.esapi.codecs.Codec;return{encode:e.encode,decode:e.decode,encodeCharacter:function(e,t){if(e.contains(t))return t;var i=org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric(t);return null==i?t:"\\"+i+" "},decodeCharacter:function(e){e.mark();var t=e.next();if(null==t||"\\"!=t)return e.reset(),null;if(null==(t=e.next()))return e.reset(),null;if(e.isHexDigit(t)){for(var i=0;6>i;i++){var n=e.next();if(null==n||32==n.charCodeAt(0))break;if(!e.isHexDigit(n)){input.pushback(n);break}t+=n}try{var r=parseInt(t,16);return String.fromCharCode(r)}catch(t){return e.reset(),null}}return t}}},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.Codec=function(){return{encode:function(e,t){for(var i="",n=0;n<t.length;n++){var r=t.charAt(n);i+=this.encodeCharacter(e,r)}return i},encodeCharacter:function(e,t){return t},decode:function(e){var t="";for(e=new org.owasp.esapi.codecs.PushbackString(e);e.hasNext();){var i=this.decodeCharacter(e);t=null!=i?t+i:t+e.next()}return t},decodeCharacter:function(e){return e.next()}}},org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric=function(e){return 256>e.charCodeAt(0)?org.owasp.esapi.codecs.Codec.hex[e.charCodeAt(0)]:e.charCodeAt(0).toString(16)},org.owasp.esapi.codecs.Codec.hex=[];for(var c=0;255>c;c++)org.owasp.esapi.codecs.Codec.hex[c]=48<=c&&57>=c||65<=c&&90>=c||97<=c&&122>=c?null:c.toString(16);var entityToCharacterMap=[];entityToCharacterMap["&quot"]="34",entityToCharacterMap["&amp"]="38",entityToCharacterMap["&lt"]="60",entityToCharacterMap["&gt"]="62",entityToCharacterMap["&nbsp"]="160",entityToCharacterMap["&iexcl"]="161",entityToCharacterMap["&cent"]="162",entityToCharacterMap["&pound"]="163",entityToCharacterMap["&curren"]="164",entityToCharacterMap["&yen"]="165",entityToCharacterMap["&brvbar"]="166",entityToCharacterMap["&sect"]="167",entityToCharacterMap["&uml"]="168",entityToCharacterMap["&copy"]="169",entityToCharacterMap["&ordf"]="170",entityToCharacterMap["&laquo"]="171",entityToCharacterMap["&not"]="172",entityToCharacterMap["&shy"]="173",entityToCharacterMap["&reg"]="174",entityToCharacterMap["&macr"]="175",entityToCharacterMap["&deg"]="176",entityToCharacterMap["&plusmn"]="177",entityToCharacterMap["&sup2"]="178",entityToCharacterMap["&sup3"]="179",entityToCharacterMap["&acute"]="180",entityToCharacterMap["&micro"]="181",entityToCharacterMap["&para"]="182",entityToCharacterMap["&middot"]="183",entityToCharacterMap["&cedil"]="184",entityToCharacterMap["&sup1"]="185",entityToCharacterMap["&ordm"]="186",entityToCharacterMap["&raquo"]="187",entityToCharacterMap["&frac14"]="188",entityToCharacterMap["&frac12"]="189",entityToCharacterMap["&frac34"]="190",entityToCharacterMap["&iquest"]="191",entityToCharacterMap["&Agrave"]="192",entityToCharacterMap["&Aacute"]="193",entityToCharacterMap["&Acirc"]="194",entityToCharacterMap["&Atilde"]="195",entityToCharacterMap["&Auml"]="196",entityToCharacterMap["&Aring"]="197",entityToCharacterMap["&AElig"]="198",entityToCharacterMap["&Ccedil"]="199",entityToCharacterMap["&Egrave"]="200",entityToCharacterMap["&Eacute"]="201",entityToCharacterMap["&Ecirc"]="202",entityToCharacterMap["&Euml"]="203",entityToCharacterMap["&Igrave"]="204",entityToCharacterMap["&Iacute"]="205",entityToCharacterMap["&Icirc"]="206",entityToCharacterMap["&Iuml"]="207",entityToCharacterMap["&ETH"]="208",entityToCharacterMap["&Ntilde"]="209",entityToCharacterMap["&Ograve"]="210",entityToCharacterMap["&Oacute"]="211",entityToCharacterMap["&Ocirc"]="212",entityToCharacterMap["&Otilde"]="213",entityToCharacterMap["&Ouml"]="214",entityToCharacterMap["&times"]="215",entityToCharacterMap["&Oslash"]="216",entityToCharacterMap["&Ugrave"]="217",entityToCharacterMap["&Uacute"]="218",entityToCharacterMap["&Ucirc"]="219",entityToCharacterMap["&Uuml"]="220",entityToCharacterMap["&Yacute"]="221",entityToCharacterMap["&THORN"]="222",entityToCharacterMap["&szlig"]="223",entityToCharacterMap["&agrave"]="224",entityToCharacterMap["&aacute"]="225",entityToCharacterMap["&acirc"]="226",entityToCharacterMap["&atilde"]="227",entityToCharacterMap["&auml"]="228",entityToCharacterMap["&aring"]="229",entityToCharacterMap["&aelig"]="230",entityToCharacterMap["&ccedil"]="231",entityToCharacterMap["&egrave"]="232",entityToCharacterMap["&eacute"]="233",entityToCharacterMap["&ecirc"]="234",entityToCharacterMap["&euml"]="235",entityToCharacterMap["&igrave"]="236",entityToCharacterMap["&iacute"]="237",entityToCharacterMap["&icirc"]="238",entityToCharacterMap["&iuml"]="239",entityToCharacterMap["&eth"]="240",entityToCharacterMap["&ntilde"]="241",entityToCharacterMap["&ograve"]="242",entityToCharacterMap["&oacute"]="243",entityToCharacterMap["&ocirc"]="244",entityToCharacterMap["&otilde"]="245",entityToCharacterMap["&ouml"]="246",entityToCharacterMap["&divide"]="247",entityToCharacterMap["&oslash"]="248",entityToCharacterMap["&ugrave"]="249",entityToCharacterMap["&uacute"]="250",entityToCharacterMap["&ucirc"]="251",entityToCharacterMap["&uuml"]="252",entityToCharacterMap["&yacute"]="253",entityToCharacterMap["&thorn"]="254",entityToCharacterMap["&yuml"]="255",entityToCharacterMap["&OElig"]="338",entityToCharacterMap["&oelig"]="339",entityToCharacterMap["&Scaron"]="352",entityToCharacterMap["&scaron"]="353",entityToCharacterMap["&Yuml"]="376",entityToCharacterMap["&fnof"]="402",entityToCharacterMap["&circ"]="710",entityToCharacterMap["&tilde"]="732",entityToCharacterMap["&Alpha"]="913",entityToCharacterMap["&Beta"]="914",entityToCharacterMap["&Gamma"]="915",entityToCharacterMap["&Delta"]="916",entityToCharacterMap["&Epsilon"]="917",entityToCharacterMap["&Zeta"]="918",entityToCharacterMap["&Eta"]="919",entityToCharacterMap["&Theta"]="920",entityToCharacterMap["&Iota"]="921",entityToCharacterMap["&Kappa"]="922",entityToCharacterMap["&Lambda"]="923",entityToCharacterMap["&Mu"]="924",entityToCharacterMap["&Nu"]="925",entityToCharacterMap["&Xi"]="926",entityToCharacterMap["&Omicron"]="927",entityToCharacterMap["&Pi"]="928",entityToCharacterMap["&Rho"]="929",entityToCharacterMap["&Sigma"]="931",entityToCharacterMap["&Tau"]="932",entityToCharacterMap["&Upsilon"]="933",entityToCharacterMap["&Phi"]="934",entityToCharacterMap["&Chi"]="935",entityToCharacterMap["&Psi"]="936",entityToCharacterMap["&Omega"]="937",entityToCharacterMap["&alpha"]="945",entityToCharacterMap["&beta"]="946",entityToCharacterMap["&gamma"]="947",entityToCharacterMap["&delta"]="948",entityToCharacterMap["&epsilon"]="949",entityToCharacterMap["&zeta"]="950",entityToCharacterMap["&eta"]="951",entityToCharacterMap["&theta"]="952",entityToCharacterMap["&iota"]="953",entityToCharacterMap["&kappa"]="954",entityToCharacterMap["&lambda"]="955",entityToCharacterMap["&mu"]="956",entityToCharacterMap["&nu"]="957",entityToCharacterMap["&xi"]="958",entityToCharacterMap["&omicron"]="959",entityToCharacterMap["&pi"]="960",entityToCharacterMap["&rho"]="961",entityToCharacterMap["&sigmaf"]="962",entityToCharacterMap["&sigma"]="963",entityToCharacterMap["&tau"]="964",entityToCharacterMap["&upsilon"]="965",entityToCharacterMap["&phi"]="966",entityToCharacterMap["&chi"]="967",entityToCharacterMap["&psi"]="968",entityToCharacterMap["&omega"]="969",entityToCharacterMap["&thetasym"]="977",entityToCharacterMap["&upsih"]="978",entityToCharacterMap["&piv"]="982",entityToCharacterMap["&ensp"]="8194",entityToCharacterMap["&emsp"]="8195",entityToCharacterMap["&thinsp"]="8201",entityToCharacterMap["&zwnj"]="8204",entityToCharacterMap["&zwj"]="8205",entityToCharacterMap["&lrm"]="8206",entityToCharacterMap["&rlm"]="8207",entityToCharacterMap["&ndash"]="8211",entityToCharacterMap["&mdash"]="8212",entityToCharacterMap["&lsquo"]="8216",entityToCharacterMap["&rsquo"]="8217",entityToCharacterMap["&sbquo"]="8218",entityToCharacterMap["&ldquo"]="8220",entityToCharacterMap["&rdquo"]="8221",entityToCharacterMap["&bdquo"]="8222",entityToCharacterMap["&dagger"]="8224",entityToCharacterMap["&Dagger"]="8225",entityToCharacterMap["&bull"]="8226",entityToCharacterMap["&hellip"]="8230",entityToCharacterMap["&permil"]="8240",entityToCharacterMap["&prime"]="8242",entityToCharacterMap["&Prime"]="8243",entityToCharacterMap["&lsaquo"]="8249",entityToCharacterMap["&rsaquo"]="8250",entityToCharacterMap["&oline"]="8254",entityToCharacterMap["&frasl"]="8260",entityToCharacterMap["&euro"]="8364",entityToCharacterMap["&image"]="8365",entityToCharacterMap["&weierp"]="8472",entityToCharacterMap["&real"]="8476",entityToCharacterMap["&trade"]="8482",entityToCharacterMap["&alefsym"]="8501",entityToCharacterMap["&larr"]="8592",entityToCharacterMap["&uarr"]="8593",entityToCharacterMap["&rarr"]="8594",entityToCharacterMap["&darr"]="8595",entityToCharacterMap["&harr"]="8596",entityToCharacterMap["&crarr"]="8629",entityToCharacterMap["&lArr"]="8656",entityToCharacterMap["&uArr"]="8657",entityToCharacterMap["&rArr"]="8658",entityToCharacterMap["&dArr"]="8659",entityToCharacterMap["&hArr"]="8660",entityToCharacterMap["&forall"]="8704",entityToCharacterMap["&part"]="8706",entityToCharacterMap["&exist"]="8707",entityToCharacterMap["&empty"]="8709",entityToCharacterMap["&nabla"]="8711",entityToCharacterMap["&isin"]="8712",entityToCharacterMap["&notin"]="8713",entityToCharacterMap["&ni"]="8715",entityToCharacterMap["&prod"]="8719",entityToCharacterMap["&sum"]="8721",entityToCharacterMap["&minus"]="8722",entityToCharacterMap["&lowast"]="8727",entityToCharacterMap["&radic"]="8730",entityToCharacterMap["&prop"]="8733",entityToCharacterMap["&infin"]="8734",entityToCharacterMap["&ang"]="8736",entityToCharacterMap["&and"]="8743",entityToCharacterMap["&or"]="8744",entityToCharacterMap["&cap"]="8745",entityToCharacterMap["&cup"]="8746",entityToCharacterMap["&int"]="8747",entityToCharacterMap["&there4"]="8756",entityToCharacterMap["&sim"]="8764",entityToCharacterMap["&cong"]="8773",entityToCharacterMap["&asymp"]="8776",entityToCharacterMap["&ne"]="8800",entityToCharacterMap["&equiv"]="8801",entityToCharacterMap["&le"]="8804",entityToCharacterMap["&ge"]="8805",entityToCharacterMap["&sub"]="8834",entityToCharacterMap["&sup"]="8835",entityToCharacterMap["&nsub"]="8836",entityToCharacterMap["&sube"]="8838",entityToCharacterMap["&supe"]="8839",entityToCharacterMap["&oplus"]="8853",entityToCharacterMap["&otimes"]="8855",entityToCharacterMap["&perp"]="8869",entityToCharacterMap["&sdot"]="8901",entityToCharacterMap["&lceil"]="8968",entityToCharacterMap["&rceil"]="8969",entityToCharacterMap["&lfloor"]="8970",entityToCharacterMap["&rfloor"]="8971",entityToCharacterMap["&lang"]="9001",entityToCharacterMap["&rang"]="9002",entityToCharacterMap["&loz"]="9674",entityToCharacterMap["&spades"]="9824",entityToCharacterMap["&clubs"]="9827",entityToCharacterMap["&hearts"]="9829",entityToCharacterMap["&diams"]="9830";var characterToEntityMap=[],entity;for(entity in entityToCharacterMap)characterToEntityMap[entityToCharacterMap[entity]]=entity;$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.HTMLEntityCodec=function(){var e=new org.owasp.esapi.codecs.Codec;return{encode:e.encode,decode:e.decode,encodeCharacter:function(e,t){if(e.contains(t))return t;var i=org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric(t);if(null==i)return t;var n=t.charCodeAt(0);return 31>=n&&"\t"!=t&&"\n"!=t&&"\r"!=t||127<=n&&159>=n||" "==t?" ":null!=(n=characterToEntityMap[n])?n+";":"&#x"+i+";"},decodeCharacter:function(e){e.mark();var t=e.next();if(null==t||"&"!=t)return e.reset(),null;if(null==(t=e.next()))return e.reset(),null;if("#"==t){var i;if(null==(t=e.peek()))i=null;else if("x"==t||"X"==t){for(e.next(),t="";e.hasNext();){var n=e.peek();if(!n.match(/[0-9A-Fa-f]/)){";"==n&&e.next();break}t+=n,e.next()}try{i=parseInt(t,16)}catch(e){i=null}}else{for(t="";e.hasNext();){if(!(n=e.peek()).match(/[0-9]/)){";"==n&&e.next();break}t+=n,e.next()}try{i=parseInt(t)}catch(e){i=null}}if(null!=i)return i}else if(t.match(/[A-Za-z]/)){for(e.pushback(t),i="";e.hasNext();)if((t=e.peek()).match(/[A-Za-z]/)){if(i+=t,e.next(),entityToCharacterMap.containsKey("&"+i)){e.peek(";")&&e.next();break}}else{if(";"!=t)break;e.next()}if(null!=(i=String.fromCharCode(entityToCharacterMap.getCaseInsensitive("&"+i))))return i}return e.reset(),null}}},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.JavascriptCodec=function(){return{encode:function(e,t){for(var i="",n=0;n<t.length;n++){var r=t.charAt(n);if(e.contains(r))i+=r;else if(null==org.owasp.esapi.codecs.Codec.getHexForNonAlphanumeric(r))i+=r;else{var a=r.charCodeAt(0).toString(16);256>r.charCodeAt(0)?i+="\\x"+(r="00".substr(a.length))+a.toUpperCase():i+="\\u"+(r="0000".substr(a.length))+a.toUpperCase()}}return i},decode:(new org.owasp.esapi.codecs.Codec).decode,decodeCharacter:function(e){if(e.mark(),null==(t=e.next())||"\\"!=t)return e.reset(),null;if(null==(t=e.next()))return e.reset(),null;if("b"==t)return 8;if("t"==t)return 9;if("n"==t)return 10;if("v"==t)return 11;if("f"==t)return 12;if("r"==t)return 13;if('"'==t)return 34;if("'"==t)return 39;if("\\"==t)return 92;if("x"==t.toLowerCase()){for(var t="",i=0;2>i;i++){var n=e.nextHex();if(null==n)return input.reset(),null;t+=n}try{return r=parseInt(t,16),String.fromCharCode(r)}catch(t){return e.reset(),null}}else if("u"==t.toLowerCase()){for(t="",i=0;4>i;i++){if(null==(n=e.nextHex()))return input.reset(),null;t+=n}try{var r=parseInt(t,16);return String.fromCharCode(r)}catch(t){return e.reset(),null}}else if(e.isOctalDigit(t)){i=e.next(),e.isOctalDigit(i)?(t+=i,i=e.next(),e.isOctalDigit(i)?t+=i:e.pushback(i)):e.pushback(i);try{return r=parseInt(t,8),String.fromCharCode(r)}catch(t){return e.reset(),null}}return t}}},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.PercentCodec=function(){var e=new org.owasp.esapi.codecs.Codec;return{encode:e.encode,decode:e.decode,encodeCharacter:function(e,t){if(-1<"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(t))return t;for(var i=org.owasp.esapi.codecs.UTF8.encode(t),n="",r=0;r<i.length;r++){var a,o="";if(-128>(a=i.charCodeAt(r))||127<a)throw new IllegalArgumentException("b is not a byte (was "+a+")");16>(a&=255)&&(o+="0"),n+="%"+(a=o+a.toString(16).toUpperCase())}return n},decodeCharacter:function(e){if(e.mark(),null==(t=e.next())||"%"!=t)return e.reset(),null;for(var t="",i=0;2>i;i++){var n=e.nextHex();null!=n&&(t+=n)}if(2==t.length)try{var r=parseInt(t,16);return String.fromCharCode(r)}catch(e){}return e.reset(),null}}},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.PushbackString=function(e){var t="",i="",n=0,r=0;return{pushback:function(e){t=e},index:function(){return n},hasNext:function(){return null!=t||!(null==e||0==e.length||n>=e.length)},next:function(){if(null!=t){var i=t;return t=null,i}return null==e||0==e.length||n>=e.length?null:e.charAt(n++)},nextHex:function(){var e=this.next();return this.isHexDigit(e)?e:null},nextOctal:function(){var e=this.next();return this.isOctalDigit(e)?e:null},isHexDigit:function(e){return null!=e&&("0"<=e&&"9">=e||"a"<=e&&"f">=e||"A"<=e&&"F">=e)},isOctalDigit:function(e){return null!=e&&"0"<=e&&"7">=e},peek:function(i){return i?null!=t&&t==i||!(null==e||0==e.length||n>=e.length)&&e.charAt(n)==i:null!=t?t:null==e||0==e.length||n>=e.length?null:e.charAt(n)},mark:function(){i=t,r=n},reset:function(){t=i,n=r},remainder:function(){var i=e.substr(n);return null!=t&&(i=t+i),i}}},$namespace("org.owasp.esapi.codecs"),org.owasp.esapi.codecs.UTF8={encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);128>n?t+=String.fromCharCode(n):(127<n&&2048>n?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t},decode:function(e){for(var t="",i=c=c1=c2=0;i<e.length;)128>(c=e.charCodeAt(i))?(t+=String.fromCharCode(c),i++):191<c&&224>c?(c2=e.charCodeAt(i+1),t+=String.fromCharCode((31&c)<<6|63&c2),i+=2):(c2=utftext.charCodeAt(i+1),c3=utftext.charCodeAt(i+2),string+=String.fromCharCode((15&c)<<12|(63&c2)<<6|63&c3),i+=3);return t}},$namespace("org.owasp.esapi.i18n"),org.owasp.esapi.i18n.ArrayResourceBundle=function(b,d,a,e){with(org.owasp.esapi.i18n)b=new ResourceBundle(b,d,e);return{getParent:b.getParent,getLocale:b.getLocale,getName:b.getName,getString:b.getString,getMessage:function(e){return a[e]}}},$namespace("org.owasp.esapi.i18n"),org.owasp.esapi.i18n.Locale=function(e,t,i){return{getLanguage:function(){return e},getCountry:function(){return t},getVariant:function(){return i},toString:function(){return e+(t?"-"+t+(i?"-"+i:""):"")}}},org.owasp.esapi.i18n.Locale.US=new org.owasp.esapi.i18n.Locale("en","US"),org.owasp.esapi.i18n.Locale.GB=new org.owasp.esapi.i18n.Locale("en","GB"),org.owasp.esapi.i18n.Locale.getLocale=function(e){return e=e.split("-"),new org.owasp.esapi.i18n.Locale(e[0],1<e.length?e[1]:"",2<e.length?e.length[2]:"")},org.owasp.esapi.i18n.Locale.getDefault=function(){var e=(navigator.language?navigator.language:navigator.userLanguage?navigator.userLanguage:"en-US").split("-");return new org.owasp.esapi.i18n.Locale(e[0],1<e.length?e[1]:"",2<e.length?e.length[2]:"")},$namespace("org.owasp.esapi.i18n"),org.owasp.esapi.i18n.ObjectResourceBundle=function(e,t){var i=new org.owasp.esapi.i18n.ResourceBundle(e.name,org.owasp.esapi.i18n.Locale.getLocale(e.locale),t),n=e.messages;return{getParent:i.getParent,getLocale:i.getLocale,getName:i.getName,getString:i.getString,getMessage:function(e){return n[e]}}},$namespace("org.owasp.esapi.i18n"),org.owasp.esapi.i18n.ResourceBundle=function(e,t,i){if(!e)throw new SyntaxError("Name required for implementations of org.owasp.esapi.i18n.ResourceBundle");if(!t)throw new SyntaxError("Locale required for implementations of org.owasp.esapi.i18n.ResourceBundle");return{getParent:function(){return i},getLocale:function(){return t},getName:function(){return e},getMessage:function(e){return e},getString:function(e,t){if(1>arguments.length)throw new IllegalArgumentException("No key passed to getString");var n=this.getMessage(e);if(!n)return i?i.getString(e,t):e;if(!n.match(/\{([A-Za-z]+)\}/)||!t)return n;for(var r="",a=0;;){var o=n.indexOf("{",a),s=n.indexOf("}",o);if(0>o){r+=n.substr(a,n.length-a);break}if(0<=o&&-1>s)throw new SyntaxError("Invalid Message - Unclosed Context Reference: "+n);r+=n.substring(a,o),r=t[a=n.substring(o+1,s)]?r+t[a]:r+n.substring(o,s+1),a=s+1}return r}}},org.owasp.esapi.i18n.ResourceBundle.getResourceBundle=function(b,d){var a=b+"_"+d.toString().replace("-","_");with(org.owasp.esapi.i18n)return ResourceBundle[a]instanceof Object?ResourceBundle[a]:new ResourceBundle[a]},$namespace("org.owasp.esapi.net"),org.owasp.esapi.net.Cookie=function(e,t){var i,n,r,a,o,s,l,c=$ESAPI.resourceBundle();if(!function(e){for(var t=0,i=e.length;t<i;t++){var n=e.charCodeAt(t),r=e.charAt(t);if(32>n||127<=n||-1!=",; ".indexOf(r))return!1}return!0}(e)||"comment"==e.toLowerCase()||"discard"==e.toLowerCase()||"domain"==e.toLowerCase()||"expires"==e.toLowerCase()||"max-age"==e.toLowerCase()||"path"==e.toLowerCase()||"secure"==e.toLowerCase()||"version"==e.toLowerCase()||"$"==e.charAt(0)){var u=c.getString("Cookie.Name",{name:e});throw new IllegalArgumentException(u)}return i=t,{setComment:function(e){n=e},getComment:function(){return n},setDomain:function(e){r=e.toLowerCase()},getDomain:function(){return r},setMaxAge:function(e){a=e},getMaxAge:function(){return a},setPath:function(e){o=e},getPath:function(){return o},setSecure:function(e){s=e},getSecure:function(){return s},getName:function(){return e},setValue:function(e){i=e},getValue:function(){return i},setVersion:function(e){if(0>e||1<e)throw new IllegalArgumentException(c.getString("Cookie.Version",{version:e}));l=e},getVersion:function(){return l}}},$namespace("org.owasp.esapi.reference.encoding"),org.owasp.esapi.reference.encoding.DefaultEncoder=function(e){var t=[],i=new org.owasp.esapi.codecs.HTMLEntityCodec,n=new org.owasp.esapi.codecs.JavascriptCodec,r=new org.owasp.esapi.codecs.CSSCodec,a=new org.owasp.esapi.codecs.PercentCodec;e?t=e:(t.push(i),t.push(n),t.push(r),t.push(a));var o=[",",".","-","_"," "],s=[",",".","-","_"],l=[],c=[",",".","_"];return{cananicalize:function(e,i){if(!e)return null;for(var n=e,r=null,a=1,o=0,s=!1;!s;)s=!0,t.each(function(e){n!=(n=e.decode(n))&&(null!=r&&r!=e&&a++,r=e,s&&o++,s=!1)});if(2<=o&&1<a){if(i)throw new org.owasp.esapi.IntrusionException("Input validation failure","Multiple ("+o+"x) and mixed encoding ("+a+"x) detected in "+e)}else if(2<=o){if(i)throw new org.owasp.esapi.IntrusionException("Input validation failure","Multiple ("+o+"x) encoding detected in "+e)}else if(1<a&&i)throw new org.owasp.esapi.IntrusionException("Input validation failure","Mixed ("+a+"x) encoding detected in "+e);return n},normalize:function(e){return e.replace(/[^\x00-\x7F]/g,"")},encodeForHTML:function(e){return e?i.encode(o,e):null},decodeForHTML:function(e){return e?i.decode(e):null},encodeForHTMLAttribute:function(e){return e?i.encode(s,e):null},encodeForCSS:function(e){return e?r.encode(l,e):null},encodeForJavaScript:function(e){return e?n.encode(c,e):null},encodeForJavascript:this.encodeForJavaScript,encodeForURL:function(e){return e?escape(e):null},decodeFromURL:function(e){return e?unescape(e):null},encodeForBase64:function(e){return e?org.owasp.esapi.codecs.Base64.encode(e):null},decodeFromBase64:function(e){return e?org.owasp.esapi.codecs.Base64.decode(e):null}}},$namespace("org.owasp.esapi.reference.logging"),org.owasp.esapi.reference.logging.Log4JSLogFactory=function(){return{getLogger:function(e){return new function(e){return{setLevel:function(e){},trace:function(e,t,i){this.log(10,e,t,i)},debug:function(e,t,i){this.log(20,e,t,i)},info:function(e,t,i){this.log(30,e,t,i)},warning:function(e,t,i){this.log(40,e,t,i)},error:function(e,t,i){this.log(50,e,t,i)},fatal:function(e,t,i){this.log(60,e,t,i)},log:function(e,t,i,n){},addAppender:function(e){},isLogUrl:function(){},setLogUrl:function(e){},isLogApplicationName:function(){},setLogApplicationName:function(e){},isEncodingRequired:function(){},setEncodingRequired:function(e){},setEncodingFunction:function(e){},isDebugEnabled:function(){},isErrorEnabled:function(){},isFatalEnabled:function(){},isInfoEnabled:function(){},isTraceEnabled:function(){},isWarningEnabled:function(){}}}("string"==typeof e?e:e.constructor.toString())}}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.BaseValidationRule=function(e,t,i){var n,r=$ESAPI.logger("Validation"),a=org.owasp.esapi.Logger.EventType,o=e,s=t||$ESAPI.encoder(),l=!1;return e=org.owasp.esapi.i18n.ResourceBundle,i=i||$ESAPI.locale(),$ESAPI.properties.validation.ResourceBundle&&(n=e.getResourceBundle($ESAPI.properties.validation.ResourceBundle,i)),n||(n=$ESAPI.resourceBundle(),r.info(a.EVENT_FAILURE,"No Validation ResourceBundle - Defaulting to "+n.getName()+"("+n.getLocale().toString()+")")),r.info(a.EVENT_SUCCESS,"Validation Rule Initialized with ResourceBundle: "+n.getName()),{setAllowNull:function(e){l=e},isAllowNull:function(){return l},getTypeName:function(){return o},setTypeName:function(e){o=e},setEncoder:function(e){s=e},getEncoder:function(){return s},assertValid:function(e,t){this.getValid(e,t)},getValid:function(e,t,i){i=null;try{i=this.getValidInput(e,t)}catch(i){return this.sanitize(e,t)}return i},getValidInput:function(e,t){return t},getSafe:function(e,t){var i=null;try{i=this.getValidInput(e,t)}catch(i){return this.sanitize(e,t)}return i},sanitize:function(e,t){return t},isValid:function(e,t){try{this.getValidInput(e,t)}catch(e){return!1}return!0},whitelist:function(e,t){for(var i="",n=0;n<e.length;n++){var r=e.charAt(n);t.contains(r)&&(i+=r)}return i},getUserMessage:function(e,t,i){return this.getMessage(e+".Usr",t+".Usr",i)},getLogMessage:function(e,t,i){return this.getMessage(e+".Log",t+".Log",i)},getMessage:function(e,t,i){return n.getString(e,i)?n.getString(e,i):n.getString(t,i)},validationException:function(e,t,i,n){throw new org.owasp.esapi.reference.validation.ValidationException(this.getUserMessage(e+"."+i,t+"."+i,n),this.getLogMessage(e+"."+i,t+"."+i,n),e)}}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.CreditCardValidationRule=function(e,t,i){var n=new org.owasp.esapi.reference.validation.BaseValidationRule(e,t,i),r=19;return ccRule=function(){var e=RegExp($ESAPI.properties.validation.CreditCard);return(e=new org.owasp.esapi.reference.validation.StringValidationRule("ccrule",n.getEncoder(),i,e)).setMaxLength(r),e.setAllowNull(!1),e}(),{getMaxCardLength:function(){return r},setMaxCardLength:function(e){r=e},setAllowNull:n.setAllowNull,isAllowNull:n.isAllowNull,getTypeName:n.getTypeName,setTypeName:n.setTypeName,setEncoder:n.setEncoder,getEncoder:n.getEncoder,assertValid:n.assertValid,getValid:n.getValid,getValidInput:function(e,t){if(!t||""==t.trim()){if(this.isAllowNull())return null;n.validationException(e,"CreditCard","Required",{context:e,input:t})}for(var i,r=(void 0).getValid(e,t),a="",s=0;o<r.length;s++)(i=r.charAt(s)).match(/[0-9]/)&&(a+=i);for(var l=i=0,c=(l=0,!1),u=a.length-1;0<=u;u--)l=parseInt(a.substring(u,s+1)),c&&9<(l*=2)&&(l-=9),i+=l,c=!c;return 0!=i%10&&n.validationException(e,"CreditCard","Invalid",{context:e,input:t}),r},getSafe:n.getSafe,sanitize:function(e,t){return this.whitelist(t,org.owasp.esapi.EncoderConstants.CHAR_DIGITS)},isValid:n.isValid,whitelist:n.whitelist}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.DateValidationRule=function(e,t,i){var n=new org.owasp.esapi.reference.validation.BaseValidationRule(e,t,i),r=DateFormat.getDateInstance(),a=function(e,t){if(!e||""==e.trim()){if(n.isAllowNull())return null;n.validationException(e,"Date","Required",{context:e,input:t,format:r})}var i=n.getEncoder().cananicalize(t);try{return r.parse(i)}catch(i){n.validationException(e,"Date","Invalid",{context:e,input:t,format:r})}};return{setDateFormat:function(e){if(!e)throw new IllegalArgumentException("DateValidationRule.setDateFormat requires a non-null DateFormat");r=e},setAllowNull:n.setAllowNull,isAllowNull:n.isAllowNull,getTypeName:n.getTypeName,setTypeName:n.setTypeName,setEncoder:n.setEncoder,getEncoder:n.getEncoder,assertValid:n.assertValid,getValid:n.getValid,getValidInput:function(e,t){return a(e,t)},getSafe:n.getSafe,sanitize:function(e,t){var i=new Date(0);try{i=a(e,t)}catch(e){}return i},isValid:n.isValid,whitelist:n.whitelist}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.DefaultValidator=function(e,t){var i=[],n=e||$ESAPI.encoder(),r=t||org.owasp.esapi.i18n.Locale.getDefault(),a=org.owasp.esapi.reference.validation;return{addRule:function(e){i[e.getName()]=e},getRule:function(e){return i[e]},isValidInput:function(e,t,i,n,r){try{return this.getValidInput(e,t,i,n,r),!0}catch(e){return!1}},getValidInput:function(e,t,i,a,o,s){var l=new org.owasp.esapi.reference.validation.StringValidationRule(i,n,r),c=RegExp($ESAPI.properties.validation[i]);if(!(c&&c instanceof RegExp))throw new IllegalArgumentException("Invalid Type: "+i+" not found.");l.addWhitelistPattern(c),l.setMaxLength(a),l.setAllowNull(o);try{return l.getValid(e,t)}catch(t){throw t instanceof c.ValidationErrorList&&s&&s.addError(e,t),t}},isValidDate:function(e,t,i,n){try{return this.getValidDate(e,t,i,n),!0}catch(e){return!1}},getValidDate:function(e,t,i,o,s){var l=new a.DateValidationRule(e,n,r);l.setAllowNull(o),l.setDateFormat(i);try{return l.getValid(e,t)}catch(t){throw t instanceof a.ValidationErrorList&&s&&s.addError(e,t),t}},getValidCreditCard:function(e,t,i,o){var s=new a.CreditCardValidationRule(e,n,r);s.setAllowNull(i);try{return s.getValid(e,t)}catch(t){throw t instanceof a.ValidationErrorList&&o&&o.addError(e,t),t}},isValidCreditCard:function(e,t,i){try{return this.getValidCreditCard(e,t,i),!0}catch(e){return!1}},getValidNumber:function(e,t,i,o,s,l){(o=new a.NumberValidationRule(e,n,r,o,s)).setAllowNull(i);try{return o.getValid(e,t)}catch(t){throw t instanceof a.ValidationErrorList&&l&&l.addError(e,t),t}},isValidNumber:function(e,t,i,n,r){try{return this.getValidNumber(e,t,i,n,r),!0}catch(e){return!1}},getValidInteger:function(e,t,i,o,s,l){(o=new a.IntegerValidationRule(e,n,r,o,s)).setAllowNull(i);try{return o.getValid(e,t)}catch(t){throw t instanceof a.ValidationErrorList&&l&&l.addError(e,t),t}},isValidInteger:function(e,t,i,n,r){try{return this.getValidInteger(e,t,i,n,r),!0}catch(e){return!1}}}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.IntegerValidationRule=function(e,t,i,n,r){var a=new org.owasp.esapi.reference.validation.BaseValidationRule(e,t,i),o=n||Number.MIN_VALUE,s=r||Number.MAX_VALUE;if(o>=s)throw new IllegalArgumentException("minValue must be less than maxValue");var l=function(e,t){if(!t||""==t.trim()){if(a.allowNull())return null;a.validationException(e,"Integer","Required",{context:e,input:t,minValue:o,maxValue:s})}var i=a.getEncoder().cananicalize(t);return"NaN"==(i=parseInt(i))&&a.validationException(e,"Integer","NaN",{context:e,input:t,minValue:o,maxValue:s}),i<o&&a.validationException(e,"Integer","MinValue",{context:e,input:t,minValue:o,maxValue:s}),i>s&&a.validationException(e,"Integer","MaxValue",{context:e,input:t,minValue:o,maxValue:s}),i};return{setMinValue:function(e){o=e},getMinValue:function(){return o},setMaxValue:function(e){s=e},getMaxValue:function(){return s},setAllowNull:a.setAllowNull,isAllowNull:a.isAllowNull,getTypeName:a.getTypeName,setTypeName:a.setTypeName,setEncoder:a.setEncoder,getEncoder:a.getEncoder,assertValid:a.assertValid,getValid:a.getValid,getValidInput:function(e,t){return l(e,t)},getSafe:a.getSafe,sanitize:function(e,t){var i=0;try{i=l(e,t)}catch(e){}return i},isValid:a.isValid,whitelist:a.whitelist}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.NumberValidationRule=function(e,t,i,n,r){var a=new org.owasp.esapi.reference.validation.BaseValidationRule(e,t,i),o=n||Number.MIN_VALUE,s=r||Number.MAX_VALUE;if(o>=s)throw new IllegalArgumentException("MinValue must be less that MaxValue");var l=function(e,t){if(!t||""==t.trim()){if(a.isAllowNull())return null;a.validationException(e,"Number","Required",{context:e,input:t,minValue:o,maxValue:s})}var i=a.getEncoder().cananicalize(t),n=0;try{n=parseFloat(i)}catch(i){a.validationException(e,"Number","Invalid",{context:e,input:t,minValue:o,maxValue:s})}return"NaN"==n&&a.validationException(e,"Number","NaN",{context:e,input:t,minValue:o,maxValue:s}),n<o&&a.validationException(e,"Number","MinValue",{context:e,input:t,minValue:o,maxValue:s}),n>s&&a.validationException(e,"Number","MaxValue",{context:e,input:t,minValue:o,maxValue:s}),n};return{setMinValue:function(e){o=e},getMinValue:function(){return o},setMaxValue:function(e){s=e},getMaxValue:function(){return s},setAllowNull:a.setAllowNull,isAllowNull:a.isAllowNull,getTypeName:a.getTypeName,setTypeName:a.setTypeName,setEncoder:a.setEncoder,getEncoder:a.getEncoder,assertValid:a.assertValid,getValid:a.getValid,getValidInput:function(e,t){return l(e,t)},getSafe:a.getSafe,sanitize:function(e,t){var i=0;try{i=l(e,t)}catch(e){}return i},isValid:a.isValid,whitelist:a.whitelist}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.StringValidationRule=function(e,t,i,n){var r=new org.owasp.esapi.reference.validation.BaseValidationRule(e,t,i),a=[],o=[],s=0,l=Number.MAX_VALUE,c=!0;if(n)if(n instanceof String)a.push(RegExp(n));else{if(!(n instanceof RegExp))throw new IllegalArgumentException("sWhiteListPattern must be a string containing RegExp or a RegExp Object");a.push(n)}var u=function(e,t,i){a.each(function(n){t.match(n)&&r.validationException(e,"String","Whitelist",{context:e,input:t,orig:i,pattern:n.toString(),minLength:s,maxLength:l,validateInputAndCanonical:c})})},h=function(e,t,i){o.each(function(n){t.match(n)&&r.validationException(e,"String","Blacklist",{context:e,input:t,orig:i,pattern:n.toString(),minLength:s,maxLength:l,validateInputAndCanonical:c})})},d=function(e,t,i){return t.length<s&&r.validationException(e,"String","MinLength",{context:e,input:t,orig:i,minLength:s,maxLength:l,validateInputAndCanonical:c}),t.length>l&&r.validationException(e,"String","MaxLength",{context:e,input:t,orig:i,minLength:s,maxLength:l,validateInputAndCanonical:c}),t},p=function(e,t,i){if(!t||""==t.trim()){if(r.isAllowNull())return null;r.validationException(e,"String","Required",{context:e,input:t,orig:i,minLength:s,maxLength:l,validateInputAndCanonical:c})}};return{addWhitelistPattern:function(e){if(e instanceof String)a.push(RegExp(e));else{if(!(e instanceof RegExp))throw new IllegalArgumentException("p must be a string containing RegExp or a RegExp Object");a.push(e)}},addBlacklistPattern:function(e){if(e instanceof String)o.push(RegExp(e));else{if(!(e instanceof RegExp))throw new IllegalArgumentException("p must be a string containing RegExp or a RegExp Object");o.push(e)}},setMinLength:function(e){s=e},getMinLength:function(){return s},setMaxLength:function(e){l=e},getMaxLength:function(){return l},setValidateInputAndCanonical:function(e){c=e},isValidateInputAndCanonical:function(){return c},setAllowNull:r.setAllowNull,isAllowNull:r.isAllowNull,getTypeName:r.getTypeName,setTypeName:r.setTypeName,setEncoder:r.setEncoder,getEncoder:r.getEncoder,assertValid:r.assertValid,getValid:r.getValid,getValidInput:function(e,t){var i;return null==p(e,t)?null:(c&&(d(e,t),u(e,t),h(e,t)),i=this.getEncoder().cananicalize(t),null==p(e,i,t)?null:(d(e,i,t),u(e,i,t),h(e,i,t),i))},getSafe:r.getSafe,sanitize:function(e,t){return this.whitelist(t,org.owasp.esapi.EncoderConstants.CHAR_ALNUM)},isValid:r.isValid,whitelist:r.whitelist}},$namespace("org.owasp.esapi.reference.validation"),org.owasp.esapi.reference.validation.ValidationException=function(e,t,i,n){var r,a;return i&&i instanceof Exception?(r=i,n&&n instanceof String&&(a=n)):i&&i instanceof String&&(a=i),{setContext:function(e){a=e},getContext:function(){return a},getMessage:(e=new org.owasp.esapi.EnterpriseSecurityException(e,t,r)).getMessage,getUserMessage:e.getMessage,getLogMessage:e.getLogMessage,getStackTrace:e.getStackTrace,printStackTrace:e.printStackTrace}},$namespace("Base.esapi.properties"),Base.esapi.properties={application:{Name:"ESAPI4JS Base Application"},httputilities:{cookies:{ForceSecure:!0}},logging:{Implementation:org.owasp.esapi.reference.logging.Log4JSLogFactory,Level:org.owasp.esapi.Logger.ERROR,Appenders:[],LogUrl:!1,LogApplicationName:!1,EncodingRequired:!0},encoder:{Implementation:org.owasp.esapi.reference.encoding.DefaultEncoder,AllowMultipleEncoding:!1},localization:{StandardResourceBundle:ESAPI_Standard_en_US,DefaultLocale:"en-US"},validation:{Implementation:org.owasp.esapi.reference.validation.DefaultValidator,AccountName:"^[a-zA-Z0-9]{3,20}$",SafeString:"[a-zA-Z0-9\\-_+]*",Email:"^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\\.[a-zA-Z]{2,4}$",IPAddress:"^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$",URL:"^(ht|f)tp(s?)\\:\\/\\/[0-9a-zA-Z]([-.\\w]*[0-9a-zA-Z])*(:(0-9)*)*(\\/?)([a-zA-Z0-9\\-\\.\\?\\,\\:\\'\\/\\\\\\+=&amp;%\\$#_]*)?$",CreditCard:"^(\\d{4}[- ]?){3}\\d{4}$",SSN:"^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$",HttpScheme:"^(http|https)$",HttpServerName:"^[a-zA-Z0-9_.\\-]*$",HttpParameterName:"^[a-zA-Z0-9_]{1,32}$",HttpParameterValue:"^[a-zA-Z0-9.\\-\\/+=_ ]*$",HttpCookieName:"^[a-zA-Z0-9\\-_]{1,32}$",HttpCookieValue:"^[a-zA-Z0-9\\-\\/+=_ ]*$"}};var ESAPI_Standard_en_US={name:"ESAPI Standard Messages - US English",locale:"en-US",messages:{Test:"This is test #{testnumber}","CreditCard.Required.Usr":"{context}: Input credit card required","CreditCard.Required.Log":"Input credit card required: context={context}, input={input}","CreditCard.Invalid.Usr":"{context}: Invalid credit card input","CreditCard.Invalid.Log":"Invalid credit card input: context={context}, input={input}","Date.Required.Usr":"{context}: Input date required in {format} format","Date.Required.Log":"Date required: context={context}, input={input}, format={format}","Date.Invalid.Usr":"{context}: Invalid date, please use {format} format","Date.Invalid.Log":"Invalid date: context={context}, input={input}, format={format}","Integer.Required.Usr":"{context}: Input number required","Integer.Required.Log":"Input number required: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Integer.NaN.Usr":"{context}: Invalid number","Integer.NaN.Log":"Invalid number: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Integer.MinValue.Usr":"{context}: Invalid number - Must be greater than {minValue}","Integer.MinValue.Log":"Invalid number: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Integer.MaxValue.Usr":"{context}: Invalid number - Must be less than {maxValue}","Integer.MaxValue.Log":"Invalid number: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Number.Required.Usr":"{context}: Input number required","Number.Required.Log":"Input number required: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Number.NaN.Usr":"{context}: Invalid number","Number.NaN.Log":"Invalid number: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Number.MinValue.Usr":"{context}: Invalid number - Must be greater than {minValue}","Number.MinValue.Log":"Invalid number: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","Number.MaxValue.Usr":"{context}: Invalid number - Must be less than {maxValue}","Number.MaxValue.Log":"Invalid number: context={context}, input={input}, minValue={minValue}, maxValue={maxValue}","String.Required.Usr":"{context}: Input required","String.Required.Log":"Input required: context={context}, input={input}, original={orig}","String.Whitelist.Usr":"{context}: Invalid input - Conform to regex {pattern}","String.Whitelist.Log":"Invalid input - Whitelist validation failed: context={context}, input={input}, original={orig}, pattern={pattern}","String.Blacklist.Usr":"{context}: Invalid input - Dangerous input matching {pattern} detected","String.Blacklist.Log":"Invalid input - Blacklist validation failed: context={context}, input={input}, original={orig}, pattern={pattern}","String.MinLength.Usr":"{context}: Invalid input - Minimum length is {minLength}","String.MinLength.Log":"Invalid input - Too short: context={context}, input={input}, original={orig}, minLength={minLength}","String.MaxLength.Usr":"{context}: Invalid input - Maximum length is {maxLength}","String.MaxLength.Log":"Invalid input - Too long: context={context}, input={input}, original={orig}, maxLength={maxLength}","HTTPUtilities.Cookie.Protocol":"Cookies disallowed on non http[s] requests. Current protocol: {protocol}","HTTPUtilities.Cookie.UnsafeData":"Attempt to add unsafe data to cookie (skip mode) - Cookie: {name}={value}","HTTPUtilities.Cookie.CantKill":"Unable to kill cookie named {name}","Cookie.Name":'Cookie name "{name}" is a reserved token',"Cookie.Version":'Cookie version "{version}" is not a valid version. Version must be 0 or 1.'}};!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=e,i.c=t,i.p="",i(0)}([function(e,t,i){i(28),e.exports=i(31)},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){(function(t){e.exports=t.jQuery=i(29)}).call(t,function(){return this}())},function(e,t,i){(function(t){e.exports=t.$=i(30)}).call(t,function(){return this}())},function(e,t,i){var n;!function(t,i){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!=typeof window?window:this,function(i,r){"use strict";var a=[],o=i.document,s=Object.getPrototypeOf,l=a.slice,c=a.concat,u=a.push,h=a.indexOf,d={},p=d.toString,f=d.hasOwnProperty,g=f.toString,m=g.call(Object),y={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},b=function(e){return null!=e&&e===e.window},C={type:!0,src:!0,noModule:!0};function S(e,t,i){var n,r=(t=t||o).createElement("script");if(r.text=e,i)for(n in C)i[n]&&(r[n]=i[n]);t.head.appendChild(r).parentNode.removeChild(r)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[p.call(e)]||"object":typeof e}var x=function(e,t){return new x.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function k(e){var t=!!e&&"length"in e&&e.length,i=w(e);return!v(e)&&!b(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}x.fn=x.prototype={jquery:"3.3.1",constructor:x,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:a.sort,splice:a.splice},x.extend=x.fn.extend=function(){var e,t,i,n,r,a,o=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"==typeof o||v(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=o[t],o!==(n=e[t])&&(c&&n&&(x.isPlainObject(n)||(r=Array.isArray(n)))?(r?(r=!1,a=i&&Array.isArray(i)?i:[]):a=i&&x.isPlainObject(i)?i:{},o[t]=x.extend(c,a,n)):void 0!==n&&(o[t]=n));return o},x.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==p.call(e)||(t=s(e))&&("function"!=typeof(i=f.call(t,"constructor")&&t.constructor)||g.call(i)!==m))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){S(e)},each:function(e,t){var i,n=0;if(k(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(k(Object(e))?x.merge(i,"string"==typeof e?[e]:e):u.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:h.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,a=e.length,o=!i;r<a;r++)!t(e[r],r)!==o&&n.push(e[r]);return n},map:function(e,t,i){var n,r,a=0,o=[];if(k(e))for(n=e.length;a<n;a++)null!=(r=t(e[a],a,i))&&o.push(r);else for(a in e)null!=(r=t(e[a],a,i))&&o.push(r);return c.apply([],o)},guid:1,support:y}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=a[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){d["[object "+t+"]"]=t.toLowerCase()});var E=function(e){var t,i,n,r,a,o,s,l,c,u,h,d,p,f,g,m,y,v,b,C="sizzle"+1*new Date,S=e.document,w=0,x=0,T=oe(),k=oe(),E=oe(),A=function(e,t){return e===t&&(h=!0),0},I={}.hasOwnProperty,D=[],B=D.pop,_=D.push,M=D.push,P=D.slice,L=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",O="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",U="\\["+R+"*("+O+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+R+"*\\]",V=":("+O+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",F=new RegExp(R+"+","g"),z=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),H=new RegExp("^"+R+"*,"+R+"*"),j=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),$=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),K=new RegExp(V),W=new RegExp("^"+O+"$"),G={ID:new RegExp("^#("+O+")"),CLASS:new RegExp("^\\.("+O+")"),TAG:new RegExp("^("+O+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},q=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),ee=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ne=function(){d()},re=ve(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{M.apply(D=P.call(S.childNodes),S.childNodes)}catch(e){M={apply:D.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function ae(e,t,n,r){var a,s,c,u,h,f,y,v=t&&t.ownerDocument,w=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return n;if(!r&&((t?t.ownerDocument||t:S)!==p&&d(t),t=t||p,g)){if(11!==w&&(h=Q.exec(e)))if(a=h[1]){if(9===w){if(!(c=t.getElementById(a)))return n;if(c.id===a)return n.push(c),n}else if(v&&(c=v.getElementById(a))&&b(t,c)&&c.id===a)return n.push(c),n}else{if(h[2])return M.apply(n,t.getElementsByTagName(e)),n;if((a=h[3])&&i.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(a)),n}if(i.qsa&&!E[e+" "]&&(!m||!m.test(e))){if(1!==w)v=t,y=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(te,ie):t.setAttribute("id",u=C),s=(f=o(e)).length;s--;)f[s]="#"+u+" "+ye(f[s]);y=f.join(","),v=J.test(e)&&ge(t.parentNode)||t}if(y)try{return M.apply(n,v.querySelectorAll(y)),n}catch(e){}finally{u===C&&t.removeAttribute("id")}}}return l(e.replace(z,"$1"),t,n,r)}function oe(){var e=[];return function t(i,r){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=r}}function se(e){return e[C]=!0,e}function le(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var i=e.split("|"),r=i.length;r--;)n.attrHandle[i[r]]=t}function ue(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function pe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&re(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function fe(e){return se(function(t){return t=+t,se(function(i,n){for(var r,a=e([],i.length,t),o=a.length;o--;)i[r=a[o]]&&(i[r]=!(n[r]=i[r]))})})}function ge(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(t in i=ae.support={},a=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},d=ae.setDocument=function(e){var t,r,o=e?e.ownerDocument||e:S;return o!==p&&9===o.nodeType&&o.documentElement?(f=(p=o).documentElement,g=!a(p),S!==p&&(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ne,!1):r.attachEvent&&r.attachEvent("onunload",ne)),i.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=le(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=X.test(p.getElementsByClassName),i.getById=le(function(e){return f.appendChild(e).id=C,!p.getElementsByName||!p.getElementsByName(C).length}),i.getById?(n.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var i,n,r,a=t.getElementById(e);if(a){if((i=a.getAttributeNode("id"))&&i.value===e)return[a];for(r=t.getElementsByName(e),n=0;a=r[n++];)if((i=a.getAttributeNode("id"))&&i.value===e)return[a]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;i=a[r++];)1===i.nodeType&&n.push(i);return n}return a},n.find.CLASS=i.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},y=[],m=[],(i.qsa=X.test(p.querySelectorAll))&&(le(function(e){f.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+R+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+C+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||m.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+R+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(i.matchesSelector=X.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&le(function(e){i.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),y.push("!=",V)}),m=m.length&&new RegExp(m.join("|")),y=y.length&&new RegExp(y.join("|")),t=X.test(f.compareDocumentPosition),b=t||X.test(f.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return h=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===p||e.ownerDocument===S&&b(S,e)?-1:t===p||t.ownerDocument===S&&b(S,t)?1:u?L(u,e)-L(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;var i,n=0,r=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!r||!a)return e===p?-1:t===p?1:r?-1:a?1:u?L(u,e)-L(u,t):0;if(r===a)return ue(e,t);for(i=e;i=i.parentNode;)o.unshift(i);for(i=t;i=i.parentNode;)s.unshift(i);for(;o[n]===s[n];)n++;return n?ue(o[n],s[n]):o[n]===S?-1:s[n]===S?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&d(e),t=t.replace($,"='$1']"),i.matchesSelector&&g&&!E[t+" "]&&(!y||!y.test(t))&&(!m||!m.test(t)))try{var n=v.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==p&&d(e),b(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==p&&d(e);var r=n.attrHandle[t.toLowerCase()],a=r&&I.call(n.attrHandle,t.toLowerCase())?r(e,t,!g):void 0;return void 0!==a?a:i.attributes||!g?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},ae.escape=function(e){return(e+"").replace(te,ie)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],r=0,a=0;if(h=!i.detectDuplicates,u=!i.sortStable&&e.slice(0),e.sort(A),h){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)e.splice(n[r],1)}return u=null,e},r=ae.getText=function(e){var t,i="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=r(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)i+=r(t);return i},(n=ae.selectors={cacheLength:50,createPseudo:se,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&K.test(i)&&(t=o(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var r=ae.attr(n,e);return null==r?"!="===t:!t||(r+="","="===t?r===i:"!="===t?r!==i:"^="===t?i&&0===r.indexOf(i):"*="===t?i&&r.indexOf(i)>-1:"$="===t?i&&r.slice(-i.length)===i:"~="===t?(" "+r.replace(F," ")+" ").indexOf(i)>-1:"|="===t&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,r){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var c,u,h,d,p,f,g=a!==o?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s,b=!1;if(m){if(a){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&v){for(b=(p=(c=(u=(h=(d=m)[C]||(d[C]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===w&&c[1])&&c[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===t){u[e]=[w,p,b];break}}else if(v&&(b=p=(c=(u=(h=(d=t)[C]||(d[C]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===w&&c[1]),!1===b)for(;(d=++p&&d&&d[g]||(b=p=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++b||(v&&((u=(h=d[C]||(d[C]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[w,b]),d!==t)););return(b-=r)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,t){var i,r=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return r[C]?r(t):r.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,i){for(var n,a=r(e,t),o=a.length;o--;)e[n=L(e,a[o])]=!(i[n]=a[o])}):function(e){return r(e,0,i)}):r}},pseudos:{not:se(function(e){var t=[],i=[],n=s(e.replace(z,"$1"));return n[C]?se(function(e,t,i,r){for(var a,o=n(e,null,r,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,r,a){return t[0]=e,n(t,null,a,i),t[0]=null,!i.pop()}}),has:se(function(e){return function(t){return ae(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:se(function(e){return W.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var i;do{if(i=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:pe(!1),disabled:pe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,i){return[i<0?i+t:i]}),even:fe(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:fe(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:fe(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:fe(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=de(t);function me(){}function ye(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function ve(e,t,i){var n=t.dir,r=t.next,a=r||n,o=i&&"parentNode"===a,s=x++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,r);return!1}:function(t,i,l){var c,u,h,d=[w,s];if(l){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(u=(h=t[C]||(t[C]={}))[t.uniqueID]||(h[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=u[a])&&c[0]===w&&c[1]===s)return d[2]=c[2];if(u[a]=d,d[2]=e(t,i,l))return!0}return!1}}function be(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function Ce(e,t,i,n,r){for(var a,o=[],s=0,l=e.length,c=null!=t;s<l;s++)(a=e[s])&&(i&&!i(a,n,r)||(o.push(a),c&&t.push(s)));return o}function Se(e,t,i,n,r,a){return n&&!n[C]&&(n=Se(n)),r&&!r[C]&&(r=Se(r,a)),se(function(a,o,s,l){var c,u,h,d=[],p=[],f=o.length,g=a||function(e,t,i){for(var n=0,r=t.length;n<r;n++)ae(e,t[n],i);return i}(t||"*",s.nodeType?[s]:s,[]),m=!e||!a&&t?g:Ce(g,d,e,s,l),y=i?r||(a?e:f||n)?[]:o:m;if(i&&i(m,y,s,l),n)for(c=Ce(y,p),n(c,[],s,l),u=c.length;u--;)(h=c[u])&&(y[p[u]]=!(m[p[u]]=h));if(a){if(r||e){if(r){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(m[u]=h);r(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=r?L(a,h):d[u])>-1&&(a[c]=!(o[c]=h))}}else y=Ce(y===o?y.splice(f,y.length):y),r?r(null,o,y,l):M.apply(o,y)})}function we(e){for(var t,i,r,a=e.length,o=n.relative[e[0].type],s=o||n.relative[" "],l=o?1:0,u=ve(function(e){return e===t},s,!0),h=ve(function(e){return L(t,e)>-1},s,!0),d=[function(e,i,n){var r=!o&&(n||i!==c)||((t=i).nodeType?u(e,i,n):h(e,i,n));return t=null,r}];l<a;l++)if(i=n.relative[e[l].type])d=[ve(be(d),i)];else{if((i=n.filter[e[l].type].apply(null,e[l].matches))[C]){for(r=++l;r<a&&!n.relative[e[r].type];r++);return Se(l>1&&be(d),l>1&&ye(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),i,l<r&&we(e.slice(l,r)),r<a&&we(e=e.slice(r)),r<a&&ye(e))}d.push(i)}return be(d)}return me.prototype=n.filters=n.pseudos,n.setFilters=new me,o=ae.tokenize=function(e,t){var i,r,a,o,s,l,c,u=k[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=n.preFilter;s;){for(o in i&&!(r=H.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(a=[])),i=!1,(r=j.exec(s))&&(i=r.shift(),a.push({value:i,type:r[0].replace(z," ")}),s=s.slice(i.length)),n.filter)!(r=G[o].exec(s))||c[o]&&!(r=c[o](r))||(i=r.shift(),a.push({value:i,type:o,matches:r}),s=s.slice(i.length));if(!i)break}return t?s.length:s?ae.error(e):k(e,l).slice(0)},s=ae.compile=function(e,t){var i,r=[],a=[],s=E[e+" "];if(!s){for(t||(t=o(e)),i=t.length;i--;)(s=we(t[i]))[C]?r.push(s):a.push(s);(s=E(e,function(e,t){var i=t.length>0,r=e.length>0,a=function(a,o,s,l,u){var h,f,m,y=0,v="0",b=a&&[],C=[],S=c,x=a||r&&n.find.TAG("*",u),T=w+=null==S?1:Math.random()||.1,k=x.length;for(u&&(c=o===p||o||u);v!==k&&null!=(h=x[v]);v++){if(r&&h){for(f=0,o||h.ownerDocument===p||(d(h),s=!g);m=e[f++];)if(m(h,o||p,s)){l.push(h);break}u&&(w=T)}i&&((h=!m&&h)&&y--,a&&b.push(h))}if(y+=v,i&&v!==y){for(f=0;m=t[f++];)m(b,C,o,s);if(a){if(y>0)for(;v--;)b[v]||C[v]||(C[v]=B.call(l));C=Ce(C)}M.apply(l,C),u&&!a&&C.length>0&&y+t.length>1&&ae.uniqueSort(l)}return u&&(w=T,c=S),b};return i?se(a):a}(a,r))).selector=e}return s},l=ae.select=function(e,t,i,r){var a,l,c,u,h,d="function"==typeof e&&e,p=!r&&o(e=d.selector||e);if(i=i||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&g&&n.relative[l[1].type]){if(!(t=(n.find.ID(c.matches[0].replace(Z,ee),t)||[])[0]))return i;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(a=G.needsContext.test(e)?0:l.length;a--&&!n.relative[u=(c=l[a]).type];)if((h=n.find[u])&&(r=h(c.matches[0].replace(Z,ee),J.test(l[0].type)&&ge(t.parentNode)||t))){if(l.splice(a,1),!(e=r.length&&ye(l)))return M.apply(i,r),i;break}}return(d||s(e,p))(r,t,!g,i,!t||J.test(e)&&ge(t.parentNode)||t),i},i.sortStable=C.split("").sort(A).join("")===C,i.detectDuplicates=!!h,d(),i.sortDetached=le(function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),i.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ce(N,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),ae}(i);x.find=E,x.expr=E.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=E.uniqueSort,x.text=E.getText,x.isXMLDoc=E.isXML,x.contains=E.contains,x.escapeSelector=E.escape;var A=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&x(e).is(i))break;n.push(e)}return n},I=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},D=x.expr.match.needsContext;function B(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var _=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(e,t,i){return v(t)?x.grep(e,function(e,n){return!!t.call(e,n,e)!==i}):t.nodeType?x.grep(e,function(e){return e===t!==i}):"string"!=typeof t?x.grep(e,function(e){return h.call(t,e)>-1!==i}):x.filter(t,e,i)}x.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?x.find.matchesSelector(n,e)?[n]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},x.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;t<n;t++)if(x.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)x.find(e,r[t],i);return n>1?x.uniqueSort(i):i},filter:function(e){return this.pushStack(M(this,e||[],!1))},not:function(e){return this.pushStack(M(this,e||[],!0))},is:function(e){return!!M(this,"string"==typeof e&&D.test(e)?x(e):e||[],!1).length}});var P,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||P,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(x.merge(this,x.parseHTML(n[1],(t=t instanceof x?t[0]:t)&&t.nodeType?t.ownerDocument||t:o,!0)),_.test(n[1])&&x.isPlainObject(t))for(n in t)v(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=o.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==i.ready?i.ready(e):e(x):x.makeArray(e,this)}).prototype=x.fn,P=x(o);var N=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}x.fn.extend({has:function(e){var t=x(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(x.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,a=[],o="string"!=typeof e&&x(e);if(!D.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&x.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(a.length>1?x.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?h.call(x(e),this[0]):h.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return A(e,"parentNode")},parentsUntil:function(e,t,i){return A(e,"parentNode",i)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return A(e,"nextSibling")},prevAll:function(e){return A(e,"previousSibling")},nextUntil:function(e,t,i){return A(e,"nextSibling",i)},prevUntil:function(e,t,i){return A(e,"previousSibling",i)},siblings:function(e){return I((e.parentNode||{}).firstChild,e)},children:function(e){return I(e.firstChild)},contents:function(e){return B(e,"iframe")?e.contentDocument:(B(e,"template")&&(e=e.content||e),x.merge([],e.childNodes))}},function(e,t){x.fn[e]=function(i,n){var r=x.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=x.filter(n,r)),this.length>1&&(R[e]||x.uniqueSort(r),N.test(e)&&r.reverse()),this.pushStack(r)}});var U=/[^\x20\t\r\n\f]+/g;function V(e){return e}function F(e){throw e}function z(e,t,i,n){var r;try{e&&v(r=e.promise)?r.call(e).done(t).fail(i):e&&v(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}x.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return x.each(e.match(U)||[],function(e,i){t[i]=!0}),t}(e):x.extend({},e);var t,i,n,r,a=[],o=[],s=-1,l=function(){for(r=r||e.once,n=t=!0;o.length;s=-1)for(i=o.shift();++s<a.length;)!1===a[s].apply(i[0],i[1])&&e.stopOnFalse&&(s=a.length,i=!1);e.memory||(i=!1),t=!1,r&&(a=i?[]:"")},c={add:function(){return a&&(i&&!t&&(s=a.length-1,o.push(i)),function t(i){x.each(i,function(i,n){v(n)?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==w(n)&&t(n)})}(arguments),i&&!t&&l()),this},remove:function(){return x.each(arguments,function(e,t){for(var i;(i=x.inArray(t,a,i))>-1;)a.splice(i,1),i<=s&&s--}),this},has:function(e){return e?x.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=o=[],a=i="",this},disabled:function(){return!a},lock:function(){return r=o=[],i||t||(a=i=""),this},locked:function(){return!!r},fireWith:function(e,i){return r||(i=[e,(i=i||[]).slice?i.slice():i],o.push(i),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},x.extend({Deferred:function(e){var t=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return x.Deferred(function(i){x.each(t,function(t,n){var r=v(e[n[4]])&&e[n[4]];a[n[1]](function(){var e=r&&r.apply(this,arguments);e&&v(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(e,n,r){var a=0;function o(e,t,n,r){return function(){var s=this,l=arguments,c=function(){var i,c;if(!(e<a)){if((i=n.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");v(c=i&&("object"==typeof i||"function"==typeof i)&&i.then)?r?c.call(i,o(a,t,V,r),o(a,t,F,r)):c.call(i,o(++a,t,V,r),o(a,t,F,r),o(a,t,V,t.notifyWith)):(n!==V&&(s=void 0,l=[i]),(r||t.resolveWith)(s,l))}},u=r?c:function(){try{c()}catch(i){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(i,u.stackTrace),e+1>=a&&(n!==F&&(s=void 0,l=[i]),t.rejectWith(s,l))}};e?u():(x.Deferred.getStackHook&&(u.stackTrace=x.Deferred.getStackHook()),i.setTimeout(u))}}return x.Deferred(function(i){t[0][3].add(o(0,i,v(r)?r:V,i.notifyWith)),t[1][3].add(o(0,i,v(e)?e:V)),t[2][3].add(o(0,i,v(n)?n:F))}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},a={};return x.each(t,function(e,i){var o=i[2],s=i[5];r[i[1]]=o.add,s&&o.add(function(){n=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(i[3].fire),a[i[0]]=function(){return a[i[0]+"With"](this===a?void 0:this,arguments),this},a[i[0]+"With"]=o.fireWith}),r.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,i=t,n=Array(i),r=l.call(arguments),a=x.Deferred(),o=function(e){return function(i){n[e]=this,r[e]=arguments.length>1?l.call(arguments):i,--t||a.resolveWith(n,r)}};if(t<=1&&(z(e,a.done(o(i)).resolve,a.reject,!t),"pending"===a.state()||v(r[i]&&r[i].then)))return a.then();for(;i--;)z(r[i],o(i),a.reject);return a.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&H.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},x.readyException=function(e){i.setTimeout(function(){throw e})};var j=x.Deferred();function $(){o.removeEventListener("DOMContentLoaded",$),i.removeEventListener("load",$),x.ready()}x.fn.ready=function(e){return j.then(e).catch(function(e){x.readyException(e)}),this},x.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==e&&--x.readyWait>0||j.resolveWith(o,[x]))}}),x.ready.then=j.then,"complete"===o.readyState||"loading"!==o.readyState&&!o.documentElement.doScroll?i.setTimeout(x.ready):(o.addEventListener("DOMContentLoaded",$),i.addEventListener("load",$));var K=function(e,t,i,n,r,a,o){var s=0,l=e.length,c=null==i;if("object"===w(i))for(s in r=!0,i)K(e,t,s,i[s],!0,a,o);else if(void 0!==n&&(r=!0,v(n)||(o=!0),c&&(o?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(x(e),i)})),t))for(;s<l;s++)t(e[s],i,o?n:n.call(e[s],s,t(e[s],i)));return r?e:c?t.call(e):l?t(e[0],i):a},W=/^-ms-/,G=/-([a-z])/g;function q(e,t){return t.toUpperCase()}function Y(e){return e.replace(W,"ms-").replace(G,q)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=x.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[Y(t)]=i;else for(n in t)r[Y(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Y(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(Y):(t=Y(t))in n?[t]:t.match(U)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||x.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!x.isEmptyObject(t)}};var J=new Q,Z=new Q,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ie(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(i)}catch(e){}Z.set(e,t,i)}else i=void 0;return i}x.extend({hasData:function(e){return Z.hasData(e)||J.hasData(e)},data:function(e,t,i){return Z.access(e,t,i)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,i){return J.access(e,t,i)},_removeData:function(e,t){J.remove(e,t)}}),x.fn.extend({data:function(e,t){var i,n,r,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(r=Z.get(a),1===a.nodeType&&!J.get(a,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&(n=Y(n.slice(5)),ie(a,n,r[n]));J.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Z.set(this,e)}):K(this,function(t){var i;if(a&&void 0===t)return void 0!==(i=Z.get(a,e))?i:void 0!==(i=ie(a,e))?i:void 0;this.each(function(){Z.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),x.extend({queue:function(e,t,i){var n;if(e)return n=J.get(e,t=(t||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=J.access(e,t,x.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){var i=x.queue(e,t=t||"fx"),n=i.length,r=i.shift(),a=x._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete a.stop,r.call(e,function(){x.dequeue(e,t)},a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return J.get(e,i)||J.access(e,i,{empty:x.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",i])})})}}),x.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?x.queue(this[0],e):void 0===t?this:this.each(function(){var i=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=x.Deferred(),a=this,o=this.length,s=function(){--n||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(i=J.get(a[o],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),ae=["Top","Right","Bottom","Left"],oe=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&x.contains(e.ownerDocument,e)&&"none"===x.css(e,"display")},se=function(e,t,i,n){var r,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in r=i.apply(e,n||[]),t)e.style[a]=o[a];return r};function le(e,t,i,n){var r,a,o=20,s=n?function(){return n.cur()}:function(){return x.css(e,t,"")},l=s(),c=i&&i[3]||(x.cssNumber[t]?"":"px"),u=(x.cssNumber[t]||"px"!==c&&+l)&&re.exec(x.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;o--;)x.style(e,t,u+c),(1-a)*(1-(a=s()/l||.5))<=0&&(o=0),u/=a;x.style(e,t,(u*=2)+c),i=i||[]}return i&&(u=+u||+l||0,r=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=u,n.end=r)),r}var ce={};function ue(e){var t,i=e.ownerDocument,n=e.nodeName,r=ce[n];return r||(t=i.body.appendChild(i.createElement(n)),r=x.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),ce[n]=r,r)}function he(e,t){for(var i,n,r=[],a=0,o=e.length;a<o;a++)(n=e[a]).style&&(i=n.style.display,t?("none"===i&&(r[a]=J.get(n,"display")||null,r[a]||(n.style.display="")),""===n.style.display&&oe(n)&&(r[a]=ue(n))):"none"!==i&&(r[a]="none",J.set(n,"display",i)));for(a=0;a<o;a++)null!=r[a]&&(e[a].style.display=r[a]);return e}x.fn.extend({show:function(){return he(this,!0)},hide:function(){return he(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){oe(this)?x(this).show():x(this).hide()})}});var de=/^(?:checkbox|radio)$/i,pe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,fe=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var i;return i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&B(e,t)?x.merge([e],i):i}function ye(e,t){for(var i=0,n=e.length;i<n;i++)J.set(e[i],"globalEval",!t||J.get(t[i],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var ve,be,Ce=/<|&#?\w+;/;function Se(e,t,i,n,r){for(var a,o,s,l,c,u,h=t.createDocumentFragment(),d=[],p=0,f=e.length;p<f;p++)if((a=e[p])||0===a)if("object"===w(a))x.merge(d,a.nodeType?[a]:a);else if(Ce.test(a)){for(o=o||h.appendChild(t.createElement("div")),s=(pe.exec(a)||["",""])[1].toLowerCase(),o.innerHTML=(l=ge[s]||ge._default)[1]+x.htmlPrefilter(a)+l[2],u=l[0];u--;)o=o.lastChild;x.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(t.createTextNode(a));for(h.textContent="",p=0;a=d[p++];)if(n&&x.inArray(a,n)>-1)r&&r.push(a);else if(c=x.contains(a.ownerDocument,a),o=me(h.appendChild(a),"script"),c&&ye(o),i)for(u=0;a=o[u++];)fe.test(a.type||"")&&i.push(a);return h}ve=o.createDocumentFragment().appendChild(o.createElement("div")),(be=o.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),ve.appendChild(be),y.checkClone=ve.cloneNode(!0).cloneNode(!0).lastChild.checked,ve.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ve.cloneNode(!0).lastChild.defaultValue;var we=o.documentElement,xe=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ke=/^([^.]*)(?:\.(.+)|)/;function Ee(){return!0}function Ae(){return!1}function Ie(){try{return o.activeElement}catch(e){}}function De(e,t,i,n,r,a){var o,s;if("object"==typeof t){for(s in"string"!=typeof i&&(n=n||i,i=void 0),t)De(e,s,i,n,t[s],a);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=Ae;else if(!r)return e;return 1===a&&(o=r,(r=function(e){return x().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=x.guid++)),e.each(function(){x.event.add(this,t,r,n,i)})}x.event={global:{},add:function(e,t,i,n,r){var a,o,s,l,c,u,h,d,p,f,g,m=J.get(e);if(m)for(i.handler&&(i=(a=i).handler,r=a.selector),r&&x.find.matchesSelector(we,r),i.guid||(i.guid=x.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(t){return"undefined"!=typeof x&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(U)||[""]).length;c--;)p=g=(s=ke.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p&&(h=x.event.special[p]||{},h=x.event.special[p=(r?h.delegateType:h.bindType)||p]||{},u=x.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&x.expr.match.needsContext.test(r),namespace:f.join(".")},a),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,f,o)||e.addEventListener&&e.addEventListener(p,o)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),x.event.global[p]=!0)},remove:function(e,t,i,n,r){var a,o,s,l,c,u,h,d,p,f,g,m=J.hasData(e)&&J.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(U)||[""]).length;c--;)if(p=g=(s=ke.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(h=x.event.special[p]||{},d=l[p=(n?h.delegateType:h.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=d.length;a--;)u=d[a],!r&&g!==u.origType||i&&i.guid!==u.guid||s&&!s.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(a,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,f,m.handle)||x.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)x.event.remove(e,p+t[c],i,n,!0);x.isEmptyObject(l)&&J.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,a,o,s=x.event.fix(e),l=new Array(arguments.length),c=(J.get(this,"events")||{})[s.type]||[],u=x.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(o=x.event.handlers.call(this,s,c),t=0;(r=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,i=0;(a=r.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(n=((x.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(e,t){var i,n,r,a,o,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(a=[],o={},i=0;i<l;i++)void 0===o[r=(n=t[i]).selector+" "]&&(o[r]=n.needsContext?x(r,this).index(c)>-1:x.find(r,this,null,[c]).length),o[r]&&a.push(n);a.length&&s.push({elem:c,handlers:a})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ie()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ie()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&B(this,"input"))return this.click(),!1},_default:function(e){return B(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},x.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},x.Event=function(e,t){if(!(this instanceof x.Event))return new x.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:Ae,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Ae,isPropagationStopped:Ae,isImmediatePropagationStopped:Ae,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&xe.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},x.event.addProp),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||x.contains(this,n))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),x.fn.extend({on:function(e,t,i,n){return De(this,e,t,i,n)},one:function(e,t,i,n){return De(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,x(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Ae),this.each(function(){x.event.remove(this,e,i,t)})}});var Be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,_e=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return B(e,"table")&&B(11!==t.nodeType?t:t.firstChild,"tr")&&x(e).children("tbody")[0]||e}function Ne(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Oe(e,t){var i,n,r,a,o,s,l,c;if(1===t.nodeType){if(J.hasData(e)&&(a=J.access(e),o=J.set(t,a),c=a.events))for(r in delete o.handle,o.events={},c)for(i=0,n=c[r].length;i<n;i++)x.event.add(t,r,c[r][i]);Z.hasData(e)&&(s=Z.access(e),l=x.extend({},s),Z.set(t,l))}}function Ue(e,t,i,n){t=c.apply([],t);var r,a,o,s,l,u,h=0,d=e.length,p=d-1,f=t[0],g=v(f);if(g||d>1&&"string"==typeof f&&!y.checkClone&&Me.test(f))return e.each(function(r){var a=e.eq(r);g&&(t[0]=f.call(this,r,a.html())),Ue(a,t,i,n)});if(d&&(a=(r=Se(t,e[0].ownerDocument,!1,e,n)).firstChild,1===r.childNodes.length&&(r=a),a||n)){for(s=(o=x.map(me(r,"script"),Ne)).length;h<d;h++)l=r,h!==p&&(l=x.clone(l,!0,!0),s&&x.merge(o,me(l,"script"))),i.call(e[h],l,h);if(s)for(u=o[o.length-1].ownerDocument,x.map(o,Re),h=0;h<s;h++)fe.test((l=o[h]).type||"")&&!J.access(l,"globalEval")&&x.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?x._evalUrl&&x._evalUrl(l.src):S(l.textContent.replace(Pe,""),u,l))}return e}function Ve(e,t,i){for(var n,r=t?x.filter(t,e):e,a=0;null!=(n=r[a]);a++)i||1!==n.nodeType||x.cleanData(me(n)),n.parentNode&&(i&&x.contains(n.ownerDocument,n)&&ye(me(n,"script")),n.parentNode.removeChild(n));return e}x.extend({htmlPrefilter:function(e){return e.replace(Be,"<$1></$2>")},clone:function(e,t,i){var n,r,a,o,s,l,c,u=e.cloneNode(!0),h=x.contains(e.ownerDocument,e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(o=me(u),n=0,r=(a=me(e)).length;n<r;n++)s=a[n],"input"===(c=(l=o[n]).nodeName.toLowerCase())&&de.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(i)for(a=a||me(e),o=o||me(u),n=0,r=a.length;n<r;n++)Oe(a[n],o[n]);else Oe(e,u);return(o=me(u,"script")).length>0&&ye(o,!h&&me(e,"script")),u},cleanData:function(e){for(var t,i,n,r=x.event.special,a=0;void 0!==(i=e[a]);a++)if(X(i)){if(t=i[J.expando]){if(t.events)for(n in t.events)r[n]?x.event.remove(i,n):x.removeEvent(i,n,t.handle);i[J.expando]=void 0}i[Z.expando]&&(i[Z.expando]=void 0)}}}),x.fn.extend({detach:function(e){return Ve(this,e,!0)},remove:function(e){return Ve(this,e)},text:function(e){return K(this,function(e){return void 0===e?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ue(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Ue(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ue(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ue(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return K(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!_e.test(e)&&!ge[(pe.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(x.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ue(this,arguments,function(t){var i=this.parentNode;x.inArray(this,e)<0&&(x.cleanData(me(this)),i&&i.replaceChild(t,this))},e)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var i,n=[],r=x(e),a=r.length-1,o=0;o<=a;o++)i=o===a?this:this.clone(!0),x(r[o])[t](i),u.apply(n,i.get());return this.pushStack(n)}});var Fe=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),ze=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},He=new RegExp(ae.join("|"),"i");function je(e,t,i){var n,r,a,o,s=e.style;return(i=i||ze(e))&&(""!==(o=i.getPropertyValue(t)||i[t])||x.contains(e.ownerDocument,e)||(o=x.style(e,t)),!y.pixelBoxStyles()&&Fe.test(o)&&He.test(t)&&(n=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=i.width,s.width=n,s.minWidth=r,s.maxWidth=a)),void 0!==o?o+"":o}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",we.appendChild(c).appendChild(u);var e=i.getComputedStyle(u);n="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",s=36===t(e.right),r=36===t(e.width),u.style.position="absolute",a=36===u.offsetWidth||"absolute",we.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,a,s,l,c=o.createElement("div"),u=o.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===u.style.backgroundClip,x.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),a}}))}();var Ke=/^(none|table(?!-c[ea]).+)/,We=/^--/,Ge={position:"absolute",visibility:"hidden",display:"block"},qe={letterSpacing:"0",fontWeight:"400"},Ye=["Webkit","Moz","ms"],Xe=o.createElement("div").style;function Qe(e){var t=x.cssProps[e];return t||(t=x.cssProps[e]=function(e){if(e in Xe)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=Ye.length;i--;)if((e=Ye[i]+t)in Xe)return e}(e)||e),t}function Je(e,t,i){var n=re.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function Ze(e,t,i,n,r,a){var o="width"===t?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===i&&(l+=x.css(e,i+ae[o],!0,r)),n?("content"===i&&(l-=x.css(e,"padding"+ae[o],!0,r)),"margin"!==i&&(l-=x.css(e,"border"+ae[o]+"Width",!0,r))):(l+=x.css(e,"padding"+ae[o],!0,r),"padding"!==i?l+=x.css(e,"border"+ae[o]+"Width",!0,r):s+=x.css(e,"border"+ae[o]+"Width",!0,r));return!n&&a>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))),l}function et(e,t,i){var n=ze(e),r=je(e,t,n),a="border-box"===x.css(e,"boxSizing",!1,n),o=a;if(Fe.test(r)){if(!i)return r;r="auto"}return o=o&&(y.boxSizingReliable()||r===e.style[t]),("auto"===r||!parseFloat(r)&&"inline"===x.css(e,"display",!1,n))&&(r=e["offset"+t[0].toUpperCase()+t.slice(1)],o=!0),(r=parseFloat(r)||0)+Ze(e,t,i||(a?"border":"content"),o,n,r)+"px"}function tt(e,t,i,n,r){return new tt.prototype.init(e,t,i,n,r)}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=je(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,s=Y(t),l=We.test(t),c=e.style;if(l||(t=Qe(s)),o=x.cssHooks[t]||x.cssHooks[s],void 0===i)return o&&"get"in o&&void 0!==(r=o.get(e,!1,n))?r:c[t];"string"==(a=typeof i)&&(r=re.exec(i))&&r[1]&&(i=le(e,t,r),a="number"),null!=i&&i==i&&("number"===a&&(i+=r&&r[3]||(x.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var r,a,o,s=Y(t);return We.test(t)||(t=Qe(s)),(o=x.cssHooks[t]||x.cssHooks[s])&&"get"in o&&(r=o.get(e,!0,i)),void 0===r&&(r=je(e,t,n)),"normal"===r&&t in qe&&(r=qe[t]),""===i||i?(a=parseFloat(r),!0===i||isFinite(a)?a||0:r):r}}),x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,i,n){if(i)return!Ke.test(x.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,n):se(e,Ge,function(){return et(e,t,n)})},set:function(e,i,n){var r,a=ze(e),o="border-box"===x.css(e,"boxSizing",!1,a),s=n&&Ze(e,t,n,o,a);return o&&y.scrollboxSize()===a.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-Ze(e,t,"border",!1,a)-.5)),s&&(r=re.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=x.css(e,t)),Je(0,i,s)}}}),x.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(je(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(i){for(var n=0,r={},a="string"==typeof i?i.split(" "):[i];n<4;n++)r[e+ae[n]+t]=a[n]||a[n-2]||a[0];return r}},"margin"!==e&&(x.cssHooks[e+t].set=Je)}),x.fn.extend({css:function(e,t){return K(this,function(e,t,i){var n,r,a={},o=0;if(Array.isArray(t)){for(n=ze(e),r=t.length;o<r;o++)a[t[o]]=x.css(e,t[o],!1,n);return a}return void 0!==i?x.style(e,t,i):x.css(e,t)},e,t,arguments.length>1)}}),x.Tween=tt,(tt.prototype={constructor:tt,init:function(e,t,i,n,r,a){this.elem=e,this.prop=i,this.easing=r||x.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(x.cssNumber[i]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,i=tt.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):tt.propHooks._default.set(this),this}}).init.prototype=tt.prototype,(tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[x.cssProps[e.prop]]&&!x.cssHooks[e.prop]?e.elem[e.prop]=e.now:x.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},x.fx=tt.prototype.init,x.fx.step={};var it,nt,rt=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function ot(){nt&&(!1===o.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(ot):i.setTimeout(ot,x.fx.interval),x.fx.tick())}function st(){return i.setTimeout(function(){it=void 0}),it=Date.now()}function lt(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=ae[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function ct(e,t,i){for(var n,r=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),a=0,o=r.length;a<o;a++)if(n=r[a].call(i,t,e))return n}function ut(e,t,i){var n,r,a=0,o=ut.prefilters.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=it||st(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),a=0,o=c.tweens.length;a<o;a++)c.tweens[a].run(n);return s.notifyWith(e,[c,n,i]),n<1&&o?i:(o||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},i),originalProperties:t,originalOptions:i,startTime:it||st(),duration:i.duration,tweens:[],createTween:function(t,i){var n=x.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)c.tweens[i].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var i,n,r,a,o;for(i in e)if(r=t[n=Y(i)],a=e[i],Array.isArray(a)&&(r=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),(o=x.cssHooks[n])&&"expand"in o)for(i in a=o.expand(a),delete e[n],a)i in e||(e[i]=a[i],t[i]=r);else t[n]=r}(u,c.opts.specialEasing);a<o;a++)if(n=ut.prefilters[a].call(c,e,u,c.opts))return v(n.stop)&&(x._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return x.map(u,ct,c),v(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),x.fx.timer(x.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}x.Animation=x.extend(ut,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return le(i.elem,e,re.exec(t),i),i}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(U);for(var i,n=0,r=e.length;n<r;n++)(ut.tweeners[i=e[n]]=ut.tweeners[i]||[]).unshift(t)},prefilters:[function(e,t,i){var n,r,a,o,s,l,c,u,h="width"in t||"height"in t,d=this,p={},f=e.style,g=e.nodeType&&oe(e),m=J.get(e,"fxshow");for(n in i.queue||(null==(o=x._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,x.queue(e,"fx").length||o.empty.fire()})})),t)if(rt.test(r=t[n])){if(delete t[n],a=a||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;g=!0}p[n]=m&&m[n]||x.style(e,n)}if((l=!x.isEmptyObject(t))||!x.isEmptyObject(p))for(n in h&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=m&&m.display)&&(c=J.get(e,"display")),"none"===(u=x.css(e,"display"))&&(c?u=c:(he([e],!0),c=e.style.display||c,u=x.css(e,"display"),he([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===x.css(e,"float")&&(l||(d.done(function(){f.display=c}),null==c&&(c="none"===(u=f.display)?"":u)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=J.access(e,"fxshow",{display:c}),a&&(m.hidden=!g),g&&he([e],!0),d.done(function(){for(n in g||he([e]),J.remove(e,"fxshow"),p)x.style(e,n,p[n])})),l=ct(g?m[n]:0,n,d),n in m||(m[n]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),x.speed=function(e,t,i){var n=e&&"object"==typeof e?x.extend({},e):{complete:i||!i&&t||v(e)&&e,duration:e,easing:i&&t||t&&!v(t)&&t};return x.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration=n.duration in x.fx.speeds?x.fx.speeds[n.duration]:x.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){v(n.old)&&n.old.call(this),n.queue&&x.dequeue(this,n.queue)},n},x.fn.extend({fadeTo:function(e,t,i,n){return this.filter(oe).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=x.isEmptyObject(e),a=x.speed(t,i,n),o=function(){var t=ut(this,x.extend({},e),a);(r||J.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=x.timers,o=J.get(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&at.test(r)&&n(o[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(i),t=!1,a.splice(r,1));!t&&i||x.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=J.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],a=x.timers,o=n?n.length:0;for(i.finish=!0,x.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),x.each(["toggle","show","hide"],function(e,t){var i=x.fn[t];x.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(lt(t,!0),e,n,r)}}),x.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),x.timers=[],x.fx.tick=function(){var e,t=0,i=x.timers;for(it=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||x.fx.stop(),it=void 0},x.fx.timer=function(e){x.timers.push(e),x.fx.start()},x.fx.interval=13,x.fx.start=function(){nt||(nt=!0,ot())},x.fx.stop=function(){nt=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,t){return e=x.fx&&x.fx.speeds[e]||e,this.queue(t=t||"fx",function(t,n){var r=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(r)}})},function(){var e=o.createElement("input"),t=o.createElement("select").appendChild(o.createElement("option"));e.type="checkbox",y.checkOn=""!==e.value,y.optSelected=t.selected,(e=o.createElement("input")).value="t",e.type="radio",y.radioValue="t"===e.value}();var ht,dt=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return K(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})}}),x.extend({attr:function(e,t,i){var n,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"==typeof e.getAttribute?x.prop(e,t,i):(1===a&&x.isXMLDoc(e)||(r=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?ht:void 0)),void 0!==i?null===i?void x.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:null==(n=x.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&B(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(U);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),ht={set:function(e,t,i){return!1===t?x.removeAttr(e,i):e.setAttribute(i,i),i}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var i=dt[t]||x.find.attr;dt[t]=function(e,t,n){var r,a,o=t.toLowerCase();return n||(a=dt[o],dt[o]=r,r=null!=i(e,t,n)?o:null,dt[o]=a),r}});var pt=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;function gt(e){return(e.match(U)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(U)||[]}x.fn.extend({prop:function(e,t){return K(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})}}),x.extend({prop:function(e,t,i){var n,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&x.isXMLDoc(e)||(r=x.propHooks[t=x.propFix[t]||t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(x.propHooks.selected={get:function(e){return null},set:function(e){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(e){var t,i,n,r,a,o,s,l=0;if(v(e))return this.each(function(t){x(this).addClass(e.call(this,t,mt(this)))});if((t=yt(e)).length)for(;i=this[l++];)if(r=mt(i),n=1===i.nodeType&&" "+gt(r)+" "){for(o=0;a=t[o++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");r!==(s=gt(n))&&i.setAttribute("class",s)}return this},removeClass:function(e){var t,i,n,r,a,o,s,l=0;if(v(e))return this.each(function(t){x(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;i=this[l++];)if(r=mt(i),n=1===i.nodeType&&" "+gt(r)+" "){for(o=0;a=t[o++];)for(;n.indexOf(" "+a+" ")>-1;)n=n.replace(" "+a+" "," ");r!==(s=gt(n))&&i.setAttribute("class",s)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):v(e)?this.each(function(i){x(this).toggleClass(e.call(this,i,mt(this),t),t)}):this.each(function(){var t,r,a,o;if(n)for(r=0,a=x(this),o=yt(e);t=o[r++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==i||((t=mt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+gt(mt(i))+" ").indexOf(t)>-1)return!0;return!1}});var vt=/\r/g;x.fn.extend({val:function(e){var t,i,n,r=this[0];return arguments.length?(n=v(e),this.each(function(i){var r;1===this.nodeType&&(null==(r=n?e.call(this,i,x(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=x.map(r,function(e){return null==e?"":e+""})),(t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=x.valHooks[r.type]||x.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(vt,""):null==i?"":i:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:gt(x.text(e))}},select:{get:function(e){var t,i,n,r=e.options,a=e.selectedIndex,o="select-one"===e.type,s=o?null:[],l=o?a+1:r.length;for(n=a<0?l:o?a:0;n<l;n++)if(((i=r[n]).selected||n===a)&&!i.disabled&&(!i.parentNode.disabled||!B(i.parentNode,"optgroup"))){if(t=x(i).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var i,n,r=e.options,a=x.makeArray(t),o=r.length;o--;)((n=r[o]).selected=x.inArray(x.valHooks.option.get(n),a)>-1)&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=x.inArray(x(e).val(),t)>-1}},y.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in i;var bt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};x.extend(x.event,{trigger:function(e,t,n,r){var a,s,l,c,u,h,d,p,g=[n||o],m=f.call(e,"type")?e.type:e,y=f.call(e,"namespace")?e.namespace.split("."):[];if(s=p=l=n=n||o,3!==n.nodeType&&8!==n.nodeType&&!bt.test(m+x.event.triggered)&&(m.indexOf(".")>-1&&(m=(y=m.split(".")).shift(),y.sort()),u=m.indexOf(":")<0&&"on"+m,(e=e[x.expando]?e:new x.Event(m,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:x.makeArray(t,[e]),d=x.event.special[m]||{},r||!d.trigger||!1!==d.trigger.apply(n,t))){if(!r&&!d.noBubble&&!b(n)){for(bt.test((c=d.delegateType||m)+m)||(s=s.parentNode);s;s=s.parentNode)g.push(s),l=s;l===(n.ownerDocument||o)&&g.push(l.defaultView||l.parentWindow||i)}for(a=0;(s=g[a++])&&!e.isPropagationStopped();)p=s,e.type=a>1?c:d.bindType||m,(h=(J.get(s,"events")||{})[e.type]&&J.get(s,"handle"))&&h.apply(s,t),(h=u&&s[u])&&h.apply&&X(s)&&(e.result=h.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,r||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(g.pop(),t)||!X(n)||u&&v(n[m])&&!b(n)&&((l=n[u])&&(n[u]=null),x.event.triggered=m,e.isPropagationStopped()&&p.addEventListener(m,Ct),n[m](),e.isPropagationStopped()&&p.removeEventListener(m,Ct),x.event.triggered=void 0,l&&(n[u]=l)),e.result}},simulate:function(e,t,i){var n=x.extend(new x.Event,i,{type:e,isSimulated:!0});x.event.trigger(n,null,t)}}),x.fn.extend({trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return x.event.trigger(e,t,i,!0)}}),y.focusin||x.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){x.event.simulate(t,e.target,x.event.fix(e))};x.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=J.access(n,t);r||n.addEventListener(e,i,!0),J.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=J.access(n,t)-1;r?J.access(n,t,r):(n.removeEventListener(e,i,!0),J.remove(n,t))}}});var St=i.location,wt=Date.now(),xt=/\?/;x.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+e),t};var Tt=/\[\]$/,kt=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function It(e,t,i,n){var r;if(Array.isArray(t))x.each(t,function(t,r){i||Tt.test(e)?n(e,r):It(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,i,n)});else if(i||"object"!==w(t))n(e,t);else for(r in t)It(e+"["+r+"]",t[r],i,n)}x.param=function(e,t){var i,n=[],r=function(e,t){var i=v(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){r(this.name,this.value)});else for(i in e)It(i,e[i],t,r);return n.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&At.test(this.nodeName)&&!Et.test(e)&&(this.checked||!de.test(e))}).map(function(e,t){var i=x(this).val();return null==i?null:Array.isArray(i)?x.map(i,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:i.replace(kt,"\r\n")}}).get()}});var Dt=/%20/g,Bt=/#.*$/,_t=/([?&])_=[^&]*/,Mt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,Lt=/^\/\//,Nt={},Rt={},Ot="*/".concat("*"),Ut=o.createElement("a");function Vt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,a=t.toLowerCase().match(U)||[];if(v(i))for(;n=a[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Ft(e,t,i,n){var r={},a=e===Rt;function o(s){var l;return r[s]=!0,x.each(e[s]||[],function(e,s){var c=s(t,i,n);return"string"!=typeof c||a||r[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}return o(t.dataTypes[0])||!r["*"]&&o("*")}function zt(e,t){var i,n,r=x.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&x.extend(!0,e,n),e}Ut.href=St.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ot,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,x.ajaxSettings),t):zt(x.ajaxSettings,e)},ajaxPrefilter:Vt(Nt),ajaxTransport:Vt(Rt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var n,r,a,s,l,c,u,h,d,p,f=x.ajaxSetup({},t=t||{}),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?x(g):x.event,y=x.Deferred(),v=x.Callbacks("once memory"),b=f.statusCode||{},C={},S={},w="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Mt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(e,t){return null==u&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,C[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)T.always(e[T.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||w;return n&&n.abort(t),k(0,t),this}};if(y.promise(T),f.url=((e||f.url||St.href)+"").replace(Lt,St.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(U)||[""],null==f.crossDomain){c=o.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Ut.protocol+"//"+Ut.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=x.param(f.data,f.traditional)),Ft(Nt,f,t,T),u)return T;for(d in(h=x.event&&f.global)&&0==x.active++&&x.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Pt.test(f.type),r=f.url.replace(Bt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Dt,"+")):(p=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(xt.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(_t,"$1"),p=(xt.test(r)?"&":"?")+"_="+wt+++p),f.url=r+p),f.ifModified&&(x.lastModified[r]&&T.setRequestHeader("If-Modified-Since",x.lastModified[r]),x.etag[r]&&T.setRequestHeader("If-None-Match",x.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ot+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(g,T,f)||u))return T.abort();if(w="abort",v.add(f.complete),T.done(f.success),T.fail(f.error),n=Ft(Rt,f,t,T)){if(T.readyState=1,h&&m.trigger("ajaxSend",[T,f]),u)return T;f.async&&f.timeout>0&&(l=i.setTimeout(function(){T.abort("timeout")},f.timeout));try{u=!1,n.send(C,k)}catch(e){if(u)throw e;k(-1,e)}}else k(-1,"No Transport");function k(e,t,o,s){var c,d,p,C,S,w=t;u||(u=!0,l&&i.clearTimeout(l),n=void 0,a=s||"",T.readyState=e>0?4:0,c=e>=200&&e<300||304===e,o&&(C=function(e,t,i){for(var n,r,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)a=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}o||(o=r)}a=a||o}if(a)return a!==l[0]&&l.unshift(a),i[a]}(f,T,o)),C=function(e,t,i,n){var r,a,o,s,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(a=u.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=u.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=c[l+" "+a]||c["* "+a]))for(r in c)if((s=r.split(" "))[1]===a&&(o=c[l+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[r]:!0!==c[r]&&(a=s[0],u.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(f,C,T,c),c?(f.ifModified&&((S=T.getResponseHeader("Last-Modified"))&&(x.lastModified[r]=S),(S=T.getResponseHeader("etag"))&&(x.etag[r]=S)),204===e||"HEAD"===f.type?w="nocontent":304===e?w="notmodified":(w=C.state,d=C.data,c=!(p=C.error))):(p=w,!e&&w||(w="error",e<0&&(e=0))),T.status=e,T.statusText=(t||w)+"",c?y.resolveWith(g,[d,w,T]):y.rejectWith(g,[T,w,p]),T.statusCode(b),b=void 0,h&&m.trigger(c?"ajaxSuccess":"ajaxError",[T,f,c?d:p]),v.fireWith(g,[T,w]),h&&(m.trigger("ajaxComplete",[T,f]),--x.active||x.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,i){return x.get(e,t,i,"json")},getScript:function(e,t){return x.get(e,void 0,t,"script")}}),x.each(["get","post"],function(e,t){x[t]=function(e,i,n,r){return v(i)&&(r=r||n,n=i,i=void 0),x.ajax(x.extend({url:e,type:t,dataType:r,data:i,success:n},x.isPlainObject(e)&&e))}}),x._evalUrl=function(e){return x.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},x.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return v(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=v(e);return this.each(function(i){x(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)},x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},jt=x.ajaxSettings.xhr();y.cors=!!jt&&"withCredentials"in jt,y.ajax=jt=!!jt,x.ajaxTransport(function(e){var t,n;if(y.cors||jt&&!e.crossDomain)return{send:function(r,a){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(o,r[o]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&i.setTimeout(function(){t&&n()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),x.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(e){var t,i;if(e.crossDomain)return{send:function(n,r){t=x("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){i&&i()}}});var $t,Kt=[],Wt=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||x.expando+"_"+wt++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(e,t,n){var r,a,o,s=!1!==e.jsonp&&(Wt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Wt,"$1"+r):!1!==e.jsonp&&(e.url+=(xt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||x.error(r+" was not called"),o[0]},e.dataTypes[0]="json",a=i[r],i[r]=function(){o=arguments},n.always(function(){void 0===a?x(i).removeProp(r):i[r]=a,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),o&&v(a)&&a(o[0]),o=a=void 0}),"script"}),y.createHTMLDocument=(($t=o.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$t.childNodes.length),x.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(y.createHTMLDocument?((n=(t=o.implementation.createHTMLDocument("")).createElement("base")).href=o.location.href,t.head.appendChild(n)):t=o),r=_.exec(e),a=!i&&[],r?[t.createElement(r[1])]:(r=Se([e],t,a),a&&a.length&&x(a).remove(),x.merge([],r.childNodes)));var n,r,a},x.fn.load=function(e,t,i){var n,r,a,o=this,s=e.indexOf(" ");return s>-1&&(n=gt(e.slice(s)),e=e.slice(0,s)),v(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),o.length>0&&x.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){a=arguments,o.html(n?x("<div>").append(x.parseHTML(e)).find(n):e)}).always(i&&function(e,t){o.each(function(){i.apply(this,a||[e.responseText,t,e])})}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.expr.pseudos.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length},x.offset={setOffset:function(e,t,i){var n,r,a,o,s,l,c=x.css(e,"position"),u=x(e),h={};"static"===c&&(e.style.position="relative"),s=u.offset(),a=x.css(e,"top"),l=x.css(e,"left"),("absolute"===c||"fixed"===c)&&(a+l).indexOf("auto")>-1?(o=(n=u.position()).top,r=n.left):(o=parseFloat(a)||0,r=parseFloat(l)||0),v(t)&&(t=t.call(e,i,x.extend({},s))),null!=t.top&&(h.top=t.top-s.top+o),null!=t.left&&(h.left=t.left-s.left+r),"using"in t?t.using.call(e,h):u.css(h)}},x.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){x.offset.setOffset(this,e,t)});var t,i,n=this[0];return n?n.getClientRects().length?{top:(t=n.getBoundingClientRect()).top+(i=n.ownerDocument.defaultView).pageYOffset,left:t.left+i.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],r={top:0,left:0};if("fixed"===x.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===x.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((r=x(e).offset()).top+=x.css(e,"borderTopWidth",!0),r.left+=x.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-x.css(n,"marginTop",!0),left:t.left-r.left-x.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===x.css(e,"position");)e=e.offsetParent;return e||we})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;x.fn[e]=function(n){return K(this,function(e,n,r){var a;if(b(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===r)return a?a[t]:e[n];a?a.scrollTo(i?a.pageXOffset:r,i?r:a.pageYOffset):e[n]=r},e,n,arguments.length)}}),x.each(["top","left"],function(e,t){x.cssHooks[t]=$e(y.pixelPosition,function(e,i){if(i)return i=je(e,t),Fe.test(i)?x(e).position()[t]+"px":i})}),x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){x.fn[n]=function(r,a){var o=arguments.length&&(i||"boolean"!=typeof r),s=i||(!0===r||!0===a?"margin":"border");return K(this,function(t,i,r){var a;return b(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===r?x.css(t,i,s):x.style(t,i,r,s)},t,o?r:void 0,o)}})}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){x.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),x.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),x.proxy=function(e,t){var i,n,r;if("string"==typeof t&&(i=e[t],t=e,e=i),v(e))return n=l.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(l.call(arguments)))}).guid=e.guid=e.guid||x.guid++,r},x.holdReady=function(e){e?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=B,x.isFunction=v,x.isWindow=b,x.camelCase=Y,x.type=w,x.now=Date.now,x.isNumeric=function(e){var t=x.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(n=(function(){return x}).apply(t,[]))||(e.exports=n);var Gt=i.jQuery,qt=i.$;return x.noConflict=function(e){return i.$===x&&(i.$=qt),e&&i.jQuery===x&&(i.jQuery=Gt),x},r||(i.jQuery=i.$=x),x})},function(e,t,i){"use strict";i(32),i(33),i(34),i(35),i(36),i(37),i(38),i(39),i(40),i(41),i(42),i(43),i(44),i(45);var n=i(46);window.Highcharts=n,i(47)(Highcharts),i(48),i(49),i(50),i(51),i(52),window.Sortable=i(53),i(54),i(55),i(56),i(57),i(58)},function(e,t){},function(e,t){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),function(e){"use strict";e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;return e(this).one("bsTransitionEnd",function(){i=!0}),setTimeout(function(){i||e(n).trigger(e.support.transition.end)},t),this},e(function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(e){"use strict";var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.VERSION="3.4.1",i.TRANSITION_DURATION=150,i.prototype.close=function(t){var n=e(this),r=n.attr("data-target");r||(r=(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),r="#"===r?[]:r;var a=e(document).find(r);function o(){a.detach().trigger("closed.bs.alert").remove()}t&&t.preventDefault(),a.length||(a=n.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o())};var n=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var n=e(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof t&&r[t].call(n)})},e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.bs.alert.data-api",t,i.prototype.close)}(jQuery),function(e){"use strict";var t=function(i,n){this.$element=e(i),this.options=e.extend({},t.DEFAULTS,n),this.isLoading=!1};function i(i){return this.each(function(){var n=e(this),r=n.data("bs.button");r||n.data("bs.button",r=new t(this,"object"==typeof i&&i)),"toggle"==i?r.toggle():i&&r.setState(i)})}t.VERSION="3.4.1",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var i="disabled",n=this.$element,r=n.is("input")?"val":"html",a=n.data();t+="Text",null==a.resetText&&n.data("resetText",n[r]()),setTimeout(e.proxy(function(){n[r](null==a[t]?this.options[t]:a[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=i,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var n=e(t.target).closest(".btn");i.call(n,"toggle"),e(t.target).is('input[type="radio"], input[type="checkbox"]')||(t.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(e){"use strict";var t=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};function i(i){return this.each(function(){var n=e(this),r=n.data("bs.carousel"),a=e.extend({},t.DEFAULTS,n.data(),"object"==typeof i&&i),o="string"==typeof i?i:a.slide;r||n.data("bs.carousel",r=new t(this,a)),"number"==typeof i?r.to(i):o?r[o]():a.interval&&r.pause().cycle()})}t.VERSION="3.4.1",t.TRANSITION_DURATION=600,t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},t.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},t.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);return("prev"==e&&0===i||"next"==e&&i==this.$items.length-1)&&!this.options.wrap?t:this.$items.eq((i+("prev"==e?-1:1))%this.$items.length)},t.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",this.$items.eq(e))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(!this.sliding)return this.slide("next")},t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},t.prototype.slide=function(i,n){var r=this.$element.find(".item.active"),a=n||this.getItemForDirection(i,r),o=this.interval,s="next"==i?"left":"right",l=this;if(a.hasClass("active"))return this.sliding=!1;var c=a[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=e(this.$indicators.children()[this.getItemIndex(a)]);h&&h.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(a.addClass(i),r.addClass(s),a.addClass(s),r.one("bsTransitionEnd",function(){a.removeClass([i,s].join(" ")).addClass("active"),r.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(r.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(d)),o&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=i,e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this};var r=function(t){var n=e(this),r=n.attr("href");r&&(r=r.replace(/.*(?=#[^\s]+$)/,""));var a=n.attr("data-target")||r,o=e(document).find(a);if(o.hasClass("carousel")){var s=e.extend({},o.data(),n.data()),l=n.attr("data-slide-to");l&&(s.interval=!1),i.call(o,s),l&&o.data("bs.carousel").to(l),t.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),function(e){"use strict";var t=function(i,n){this.$element=e(i),this.options=e.extend({},t.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+i.id+'"],[data-toggle="collapse"][data-target="#'+i.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function i(t){var i,n=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(document).find(n)}function n(i){return this.each(function(){var n=e(this),r=n.data("bs.collapse"),a=e.extend({},t.DEFAULTS,n.data(),"object"==typeof i&&i);!r&&a.toggle&&/show|hide/.test(i)&&(a.toggle=!1),r||n.data("bs.collapse",r=new t(this,a)),"string"==typeof i&&r[i]()})}t.VERSION="3.4.1",t.TRANSITION_DURATION=350,t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(i=r.data("bs.collapse"))&&i.transitioning)){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){r&&r.length&&(n.call(r,"hide"),i||r.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[o](this.$element[0][l])}}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var i=e.Event("hide.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]()),this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return r.call(this);this.$element[n](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},t.prototype.getParent=function(){return e(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,n){var r=e(n);this.addAriaAndCollapsedClass(i(r),r)},this)).end()},t.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var r=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var r=e(this);r.attr("data-target")||t.preventDefault();var a=i(r),o=a.data("bs.collapse")?"toggle":r.data();n.call(a,o)})}(jQuery),function(e){"use strict";var t=".dropdown-backdrop",i='[data-toggle="dropdown"]',n=function(t){e(t).on("click.bs.dropdown",this.toggle)};function r(t){var i=t.attr("data-target");i||(i=(i=t.attr("href"))&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n="#"!==i?e(document).find(i):null;return n&&n.length?n:t.parent()}function a(n){n&&3===n.which||(e(t).remove(),e(i).each(function(){var t=e(this),i=r(t),a={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target)||(i.trigger(n=e.Event("hide.bs.dropdown",a)),n.isDefaultPrevented()||(t.attr("aria-expanded","false"),i.removeClass("open").trigger(e.Event("hidden.bs.dropdown",a)))))}))}n.VERSION="3.4.1",n.prototype.toggle=function(t){var i=e(this);if(!i.is(".disabled, :disabled")){var n=r(i),o=n.hasClass("open");if(a(),!o){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",a);var s={relatedTarget:this};if(n.trigger(t=e.Event("show.bs.dropdown",s)),t.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},n.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var n=e(this);if(t.preventDefault(),t.stopPropagation(),!n.is(".disabled, :disabled")){var a=r(n),o=a.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&a.find(i).trigger("focus"),n.trigger("click");var s=a.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var l=s.index(t.target);38==t.which&&l>0&&l--,40==t.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var i=e(this),r=i.data("bs.dropdown");r||i.data("bs.dropdown",r=new n(this)),"string"==typeof t&&r[t].call(i)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",i,n.prototype.toggle).on("keydown.bs.dropdown.data-api",i,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),function(e){"use strict";var t=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function i(i,n){return this.each(function(){var r=e(this),a=r.data("bs.modal"),o=e.extend({},t.DEFAULTS,r.data(),"object"==typeof i&&i);a||r.data("bs.modal",a=new t(this,o)),"string"==typeof i?a[i](n):o.show&&a.show(n)})}t.VERSION="3.4.1",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(i){var n=this,r=e.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),n.$element.addClass("in"),n.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:i});r?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(t.TRANSITION_DURATION):n.$element.trigger("focus").trigger(a)}))},t.prototype.hide=function(i){i&&i.preventDefault(),i=e.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(i){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&r;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),this.$backdrop.addClass("in"),!i)return;a?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){n.removeBackdrop(),i&&i()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):o()}else i&&i()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var i=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",t+i),e(this.fixedContent).each(function(t,n){var r=n.style.paddingRight,a=e(n).css("padding-right");e(n).data("padding-right",r).css("padding-right",parseFloat(a)+i+"px")}))},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),e(this.fixedContent).each(function(t,i){var n=e(i).data("padding-right");e(i).removeData("padding-right"),i.style.paddingRight=n||""})},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=i,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),a=n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,""),o=e(document).find(a),s=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},o.data(),n.data());n.is("a")&&t.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),i.call(o,s,this)})}(jQuery),function(e){"use strict";var t=["sanitize","whiteList","sanitizeFn"],i=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],n=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,r=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function a(t,a){var o=t.nodeName.toLowerCase();if(-1!==e.inArray(o,a))return-1===e.inArray(o,i)||Boolean(t.nodeValue.match(n)||t.nodeValue.match(r));for(var s=e(a).filter(function(e,t){return t instanceof RegExp}),l=0,c=s.length;l<c;l++)if(o.match(s[l]))return!0;return!1}function o(t,i,n){if(0===t.length)return t;if(n&&"function"==typeof n)return n(t);if(!document.implementation||!document.implementation.createHTMLDocument)return t;var r=document.implementation.createHTMLDocument("sanitization");r.body.innerHTML=t;for(var o=e.map(i,function(e,t){return t}),s=e(r.body).find("*"),l=0,c=s.length;l<c;l++){var u=s[l],h=u.nodeName.toLowerCase();if(-1!==e.inArray(h,o))for(var d=e.map(u.attributes,function(e){return e}),p=[].concat(i["*"]||[],i[h]||[]),f=0,g=d.length;f<g;f++)a(d[f],p)||u.removeAttribute(d[f].nodeName);else u.parentNode.removeChild(u)}return r.body.innerHTML}var s=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};s.VERSION="3.4.1",s.TRANSITION_DURATION=150,s.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},s.prototype.init=function(t,i,n){if(this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(document).find(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),a=r.length;a--;){var o=r[a];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseleave":"focusout";this.$element.on(("hover"==o?"mouseenter":"focusin")+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},s.prototype.getDefaults=function(){return s.DEFAULTS},s.prototype.getOptions=function(i){var n=this.$element.data();for(var r in n)n.hasOwnProperty(r)&&-1!==e.inArray(r,t)&&delete n[r];return(i=e.extend({},this.getDefaults(),n,i)).delay&&"number"==typeof i.delay&&(i.delay={show:i.delay,hide:i.delay}),i.sanitize&&(i.template=o(i.template,i.whiteList,i.sanitizeFn)),i},s.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},s.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState)i.hoverState="in";else{if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)}},s.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},s.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)}},s.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var n=this,r=this.tip(),a=this.getUID(this.type);this.setContent(),r.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&r.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(o);c&&(o=o.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?r.appendTo(e(document).find(this.options.container)):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),h=r[0].offsetWidth,d=r[0].offsetHeight;if(c){var p=o,f=this.getPosition(this.$viewport);o="bottom"==o&&u.bottom+d>f.bottom?"top":"top"==o&&u.top-d<f.top?"bottom":"right"==o&&u.right+h>f.width?"left":"left"==o&&u.left-h<f.left?"right":o,r.removeClass(p).addClass(o)}var g=this.getCalculatedOffset(o,u,h,d);this.applyPlacement(g,o);var m=function(){var e=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==e&&n.leave(n)};e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",m).emulateTransitionEnd(s.TRANSITION_DURATION):m()}},s.prototype.applyPlacement=function(t,i){var n=this.tip(),r=n[0].offsetWidth,a=n[0].offsetHeight,o=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),t.top+=o,t.left+=s,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=a&&(t.top=t.top+a-c);var u=this.getViewportAdjustedDelta(i,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var h=/top|bottom/.test(i),d=h?2*u.left-r+l:2*u.top-a+c,p=h?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(d,n[0][p],h)},s.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},s.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();this.options.html?(this.options.sanitize&&(t=o(t,this.options.whiteList,this.options.sanitizeFn)),e.find(".tooltip-inner").html(t)):e.find(".tooltip-inner").text(t),e.removeClass("fade in top bottom left right")},s.prototype.hide=function(t){var i=this,n=e(this.$tip),r=e.Event("hide.bs."+this.type);function a(){"in"!=i.hoverState&&n.detach(),i.$element&&i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}if(this.$element.trigger(r),!r.isDefaultPrevented())return n.removeClass("in"),e.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",a).emulateTransitionEnd(s.TRANSITION_DURATION):a(),this.hoverState=null,this},s.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},s.prototype.hasContent=function(){return this.getTitle()},s.prototype.getPosition=function(t){var i=(t=t||this.$element)[0],n="BODY"==i.tagName,r=i.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var a=window.SVGElement&&i instanceof window.SVGElement,o=n?{top:0,left:0}:a?null:t.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},l=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,s,l,o)},s.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},s.prototype.getViewportAdjustedDelta=function(e,t,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var a=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-a-o.scroll,l=t.top+a-o.scroll+n;s<o.top?r.top=o.top-s:l>o.top+o.height&&(r.top=o.top+o.height-l)}else{var c=t.left-a,u=t.left+a+i;c<o.left?r.left=o.left-c:u>o.right&&(r.left=o.left+o.width-u)}return r},s.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},s.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},s.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},s.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},s.prototype.enable=function(){this.enabled=!0},s.prototype.disable=function(){this.enabled=!1},s.prototype.toggleEnabled=function(){this.enabled=!this.enabled},s.prototype.toggle=function(t){var i=this;t&&((i=e(t.currentTarget).data("bs."+this.type))||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},s.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})},s.prototype.sanitizeHtml=function(e){return o(e,this.options.whiteList,this.options.sanitizeFn)};var l=e.fn.tooltip;e.fn.tooltip=function(t){return this.each(function(){var i=e(this),n=i.data("bs.tooltip"),r="object"==typeof t&&t;!n&&/destroy|hide/.test(t)||(n||i.data("bs.tooltip",n=new s(this,r)),"string"==typeof t&&n[t]())})},e.fn.tooltip.Constructor=s,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=l,this}}(jQuery),function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.4.1",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),(t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype)).constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();if(this.options.html){var n=typeof i;this.options.sanitize&&(t=this.sanitizeHtml(t),"string"===n&&(i=this.sanitizeHtml(i))),e.find(".popover-title").html(t),e.find(".popover-content").children().detach().end()["string"===n?"html":"append"](i)}else e.find(".popover-title").text(t),e.find(".popover-content").children().detach().end().text(i);e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=function(i){return this.each(function(){var n=e(this),r=n.data("bs.popover"),a="object"==typeof i&&i;!r&&/destroy|hide/.test(i)||(r||n.data("bs.popover",r=new t(this,a)),"string"==typeof i&&r[i]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),function(e){"use strict";function t(i,n){this.$body=e(document.body),this.$scrollElement=e(i).is(document.body)?e(window):e(i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=e(this),r=n.data("bs.scrollspy");r||n.data("bs.scrollspy",r=new t(this,"object"==typeof i&&i)),"string"==typeof i&&r[i]()})}t.VERSION="3.4.1",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),r=t.data("target")||t.attr("href"),a=/^#./.test(r)&&e(r);return a&&a.length&&a.is(":visible")&&[[a[i]().top+n,r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),r=this.offsets,a=this.targets,o=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=n)return o!=(e=a[a.length-1])&&this.activate(e);if(o&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)o!=a[e]&&t>=r[e]&&(void 0===r[e+1]||t<r[e+1])&&this.activate(a[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var i=e(this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]').parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),function(e){"use strict";var t=function(t){this.element=e(t)};function i(i){return this.each(function(){var n=e(this),r=n.data("bs.tab");r||n.data("bs.tab",r=new t(this)),"string"==typeof i&&r[i]()})}t.VERSION="3.4.1",t.TRANSITION_DURATION=150,t.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=i.find(".active:last a"),a=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(a),t.trigger(o),!o.isDefaultPrevented()&&!a.isDefaultPrevented()){var s=e(document).find(n);this.activate(t.closest("li"),i),this.activate(s,s.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},t.prototype.activate=function(i,n,r){var a=n.find("> .active"),o=r&&e.support.transition&&(a.length&&a.hasClass("fade")||!!n.find("> .fade").length);function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?i.addClass("in"):i.removeClass("fade"),i.parent(".dropdown-menu").length&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}a.length&&o?a.one("bsTransitionEnd",s).emulateTransitionEnd(t.TRANSITION_DURATION):s(),a.removeClass("in")};var n=e.fn.tab;e.fn.tab=i,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this};var r=function(t){t.preventDefault(),i.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),function(e){"use strict";var t=function(i,n){this.options=e.extend({},t.DEFAULTS,n);var r=this.options.target===t.DEFAULTS.target?e(this.options.target):e(document).find(this.options.target);this.$target=r.on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(i),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function i(i){return this.each(function(){var n=e(this),r=n.data("bs.affix");r||n.data("bs.affix",r=new t(this,"object"==typeof i&&i)),"string"==typeof i&&r[i]()})}t.VERSION="3.4.1",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getState=function(e,t,i,n){var r=this.$target.scrollTop(),a=this.$element.offset(),o=this.$target.height();if(null!=i&&"top"==this.affixed)return r<i&&"top";if("bottom"==this.affixed)return null!=i?!(r+this.unpin<=a.top)&&"bottom":!(r+o<=e-n)&&"bottom";var s=null==this.affixed;return null!=i&&r<=i?"top":null!=n&&(s?r:a.top)+(s?o:t)>=e-n&&"bottom"},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var i=this.$element.height(),n=this.options.offset,r=n.top,a=n.bottom,o=Math.max(e(document).height(),e(document.body).height());"object"!=typeof n&&(a=r=n),"function"==typeof r&&(r=n.top(this.$element)),"function"==typeof a&&(a=n.bottom(this.$element));var s=this.getState(o,i,r,a);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),c=e.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:o-i-a})}};var n=e.fn.affix;e.fn.affix=i,e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),i.call(t,n)})})}(jQuery)},function(e,t){},function(e,t,i){var n,r,a,o;o=function(e,t){function i(){return new Date(Date.UTC.apply(Date,arguments))}function n(){var e=new Date;return i(e.getFullYear(),e.getMonth(),e.getDate())}function r(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function a(i,n){return function(){return n!==t&&e.fn.datepicker.deprecated(n),this[i].apply(this,arguments)}}function o(t){var i={};if(f[t]||(t=t.split("-")[0],f[t])){var n=f[t];return e.each(p,function(e,t){t in n&&(i[t]=n[t])}),i}}var s=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),i=0,n=this.length;i<n;i++)if(0<=this[i].valueOf()-t&&this[i].valueOf()-t<864e5)return i;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var e=new s;return e.replace(this),e}};return function(){var i=[];return i.push.apply(i,arguments),e.extend(i,t),i}}(),l=function(t,i){e.data(t,"datepicker",this),this._process_options(i),this.dates=new s,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=e(t),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=e(g.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(e,t){return Number(t)+1}),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};l.prototype={constructor:l,_resolveViewName:function(t){return e.each(g.viewModes,function(i,n){if(t===i||-1!==e.inArray(t,n.names))return t=i,!1}),t},_resolveDaysOfWeek:function(t){return e.isArray(t)||(t=t.split(/[,\s]*/)),e.map(t,Number)},_check_template:function(i){try{return i!==t&&""!==i&&((i.match(/[<>]/g)||[]).length<=0||e(i).length>0)}catch(e){return!1}},_process_options:function(t){this._o=e.extend({},this._o,t);var r=this.o=e.extend({},this._o),a=r.language;f[a]||(a=a.split("-")[0],f[a]||(a=d.language)),r.language=a,r.startView=this._resolveViewName(r.startView),r.minViewMode=this._resolveViewName(r.minViewMode),r.maxViewMode=this._resolveViewName(r.maxViewMode),r.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,r.startView)),!0!==r.multidate&&(r.multidate=Number(r.multidate)||!1,!1!==r.multidate&&(r.multidate=Math.max(0,r.multidate))),r.multidateSeparator=String(r.multidateSeparator),r.weekStart%=7,r.weekEnd=(r.weekStart+6)%7;var o=g.parseFormat(r.format);r.startDate!==-1/0&&(r.startDate=r.startDate?r.startDate instanceof Date?this._local_to_utc(this._zero_time(r.startDate)):g.parseDate(r.startDate,o,r.language,r.assumeNearbyYear):-1/0),r.endDate!==1/0&&(r.endDate=r.endDate?r.endDate instanceof Date?this._local_to_utc(this._zero_time(r.endDate)):g.parseDate(r.endDate,o,r.language,r.assumeNearbyYear):1/0),r.daysOfWeekDisabled=this._resolveDaysOfWeek(r.daysOfWeekDisabled||[]),r.daysOfWeekHighlighted=this._resolveDaysOfWeek(r.daysOfWeekHighlighted||[]),r.datesDisabled=r.datesDisabled||[],e.isArray(r.datesDisabled)||(r.datesDisabled=r.datesDisabled.split(",")),r.datesDisabled=e.map(r.datesDisabled,function(e){return g.parseDate(e,o,r.language,r.assumeNearbyYear)});var s=String(r.orientation).toLowerCase().split(/\s+/g),l=r.orientation.toLowerCase();if(s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)}),r.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===s.length)switch(s[0]){case"top":case"bottom":r.orientation.y=s[0];break;case"left":case"right":r.orientation.x=s[0]}else l=e.grep(s,function(e){return/^left|right$/.test(e)}),r.orientation.x=l[0]||"auto",l=e.grep(s,function(e){return/^top|bottom$/.test(e)}),r.orientation.y=l[0]||"auto";if(r.defaultViewDate instanceof Date||"string"==typeof r.defaultViewDate)r.defaultViewDate=g.parseDate(r.defaultViewDate,o,r.language,r.assumeNearbyYear);else if(r.defaultViewDate){var c=r.defaultViewDate.year||(new Date).getFullYear();r.defaultViewDate=i(c,r.defaultViewDate.month||0,r.defaultViewDate.day||1)}else r.defaultViewDate=n()},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var i,n,r=0;r<e.length;r++)2===e[r].length?(i=t,n=e[r][1]):3===e[r].length&&(i=e[r][1],n=e[r][2]),e[r][0].on(n,i)},_unapplyEvents:function(e){for(var i,n,r=0;r<e.length;r++)2===e[r].length?(n=t,i=e[r][1]):3===e[r].length&&(n=e[r][1],i=e[r][2]),e[r][0].off(i,n)},_buildEvents:function(){var t={keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this),paste:e.proxy(this.paste,this)};!0===this.o.showOnFocus&&(t.focus=e.proxy(this.show,this)),this._events=this.isInput?[[this.element,t]]:this.component&&this.inputField.length?[[this.inputField,t],[this.component,{click:e.proxy(this.show,this)}]]:[[this.element,{click:e.proxy(this.show,this),keydown:e.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":e.proxy(function(e){this.update(e.date)},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[this.picker,".prev, .next",{click:e.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:e.proxy(this.dayCellClick,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,i){var n=i||this.dates.get(-1),r=this._utc_to_local(n);this.element.trigger({type:t,date:r,viewMode:this.viewMode,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var i=this.dates.get(e);return g.formatDate(i,t,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&e(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var i;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&-1!==e.inArray("text/plain",t.originalEvent.clipboardData.types))i=t.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;i=window.clipboardData.getData("Text")}this.setDate(i),this.update(),t.preventDefault()},_utc_to_local:function(e){if(!e)return e;var t=new Date(e.getTime()+6e4*e.getTimezoneOffset());return t.getTimezoneOffset()!==e.getTimezoneOffset()&&(t=new Date(e.getTime()+6e4*t.getTimezoneOffset())),t},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&i(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return e!==t?new Date(e):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,e.map(t,this._utc_to_local)),this},setDate:a("setDates"),setUTCDate:a("setUTCDates"),remove:a("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var e=this.getFormattedDate();return this.inputField.val(e),this},getFormattedDate:function(i){i===t&&(i=this.o.format);var n=this.o.language;return e.map(this.dates,function(e){return g.formatDate(e,i,n)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this},setDaysOfWeekHighlighted:function(e){return this._process_options({daysOfWeekHighlighted:e}),this.update(),this},setDatesDisabled:function(e){return this._process_options({datesDisabled:e}),this.update(),this},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),i=this.picker.outerHeight(),n=e(this.o.container),r=n.width(),a="body"===this.o.container?e(document).scrollTop():n.scrollTop(),o=n.offset(),s=[0];this.element.parents().each(function(){var t=e(this).css("z-index");"auto"!==t&&0!==Number(t)&&s.push(Number(t))});var l=Math.max.apply(Math,s)+this.o.zIndexOffset,c=this.component?this.component.parent().offset():this.element.offset(),u=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),d=c.left-o.left,p=c.top-o.top;"body"!==this.o.container&&(p+=a),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(d-=t-h)):c.left<0?(this.picker.addClass("datepicker-orient-left"),d-=c.left-10):d+t>r?(this.picker.addClass("datepicker-orient-right"),d+=h-t):this.picker.addClass(this.o.rtl?"datepicker-orient-right":"datepicker-orient-left");var f=this.o.orientation.y;return"auto"===f&&(f=-a+p-i<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+f),"top"===f?p-=i+parseInt(this.picker.css("padding-top")):p+=u,this.picker.css(this.o.rtl?{top:p,right:r-(d+h),zIndex:l}:{top:p,left:d,zIndex:l}),this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),i=[],n=!1;return arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),i.push(t)},this)),n=!0):(i=(i=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=e.map(i,e.proxy(function(e){return g.parseDate(e,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),i=e.grep(i,e.proxy(function(e){return!this.dateWithinRange(e)||!e},this),!0),this.dates.replace(i),this.o.updateViewDate&&(this.viewDate=this.dates.length?new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?new Date(this.o.startDate):this.viewDate>this.o.endDate?new Date(this.o.endDate):this.o.defaultViewDate),n?(this.setValue(),this.element.change()):this.dates.length&&String(t)!==String(this.dates)&&n&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&t.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var t=this.o.weekStart,i="<tr>";for(this.o.calendarWeeks&&(i+='<th class="cw">&#160;</th>');t<this.o.weekStart+7;)i+='<th class="dow',-1!==e.inArray(t,this.o.daysOfWeekDisabled)&&(i+=" disabled"),i+='">'+f[this.o.language].daysMin[t++%7]+"</th>";i+="</tr>",this.picker.find(".datepicker-days thead").append(i)}},fillMonths:function(){for(var e=this._utc_to_local(this.viewDate),t="",i=0;i<12;i++)t+='<span class="month'+(e&&e.getMonth()===i?" focused":"")+'">'+f[this.o.language].monthsShort[i]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var i=[],a=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),s=n();return t.getUTCFullYear()<a||t.getUTCFullYear()===a&&t.getUTCMonth()<o?i.push("old"):(t.getUTCFullYear()>a||t.getUTCFullYear()===a&&t.getUTCMonth()>o)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&r(t,s)&&i.push("today"),-1!==this.dates.contains(t)&&i.push("active"),this.dateWithinRange(t)||i.push("disabled"),this.dateIsDisabled(t)&&i.push("disabled","disabled-date"),-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)&&i.push("highlighted"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&i.push("selected"),t.valueOf()===this.range[0]&&i.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&i.push("range-end")),i},_fill_yearsView:function(i,n,r,a,o,s,l){for(var c,u,h,d="",p=r/10,f=this.picker.find(i),g=Math.floor(a/r)*r,m=g+9*p,y=Math.floor(this.viewDate.getFullYear()/p)*p,v=e.map(this.dates,function(e){return Math.floor(e.getUTCFullYear()/p)*p}),b=g-p;b<=m+p;b+=p)c=[n],u=null,b===g-p?c.push("old"):b===m+p&&c.push("new"),-1!==e.inArray(b,v)&&c.push("active"),(b<o||b>s)&&c.push("disabled"),b===y&&c.push("focused"),l!==e.noop&&((h=l(new Date(b,0,1)))===t?h={}:"boolean"==typeof h?h={enabled:h}:"string"==typeof h&&(h={classes:h}),!1===h.enabled&&c.push("disabled"),h.classes&&(c=c.concat(h.classes.split(/\s+/))),h.tooltip&&(u=h.tooltip)),d+='<span class="'+c.join(" ")+'"'+(u?' title="'+u+'"':"")+">"+b+"</span>";f.find(".datepicker-switch").text(g+"-"+m),f.find("td").html(d)},fill:function(){var n,r,a=new Date(this.viewDate),o=a.getUTCFullYear(),s=a.getUTCMonth(),l=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,c=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,u=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,d=f[this.o.language].today||f.en.today||"",p=f[this.o.language].clear||f.en.clear||"",m=f[this.o.language].titleFormat||f.en.titleFormat;if(!isNaN(o)&&!isNaN(s)){this.picker.find(".datepicker-days .datepicker-switch").text(g.formatDate(a,m,this.o.language)),this.picker.find("tfoot .today").text(d).css("display",!0===this.o.todayBtn||"linked"===this.o.todayBtn?"table-cell":"none"),this.picker.find("tfoot .clear").text(p).css("display",!0===this.o.clearBtn?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var y=i(o,s,0),v=y.getUTCDate();y.setUTCDate(v-(y.getUTCDay()-this.o.weekStart+7)%7);var b=new Date(y);y.getUTCFullYear()<100&&b.setUTCFullYear(y.getUTCFullYear()),b.setUTCDate(b.getUTCDate()+42),b=b.valueOf();for(var C,S,w=[];y.valueOf()<b;){if((C=y.getUTCDay())===this.o.weekStart&&(w.push("<tr>"),this.o.calendarWeeks)){var x=new Date(+y+(this.o.weekStart-C-7)%7*864e5),T=new Date(Number(x)+(11-x.getUTCDay())%7*864e5),k=new Date(Number(k=i(T.getUTCFullYear(),0,1))+(11-k.getUTCDay())%7*864e5);w.push('<td class="cw">'+((T-k)/864e5/7+1)+"</td>")}(S=this.getClassNames(y)).push("day");var E=y.getUTCDate();this.o.beforeShowDay!==e.noop&&((r=this.o.beforeShowDay(this._utc_to_local(y)))===t?r={}:"boolean"==typeof r?r={enabled:r}:"string"==typeof r&&(r={classes:r}),!1===r.enabled&&S.push("disabled"),r.classes&&(S=S.concat(r.classes.split(/\s+/))),r.tooltip&&(n=r.tooltip),r.content&&(E=r.content)),S=e.isFunction(e.uniqueSort)?e.uniqueSort(S):e.unique(S),w.push('<td class="'+S.join(" ")+'"'+(n?' title="'+n+'"':"")+' data-date="'+y.getTime().toString()+'">'+E+"</td>"),n=null,C===this.o.weekEnd&&w.push("</tr>"),y.setUTCDate(y.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(w.join(""));var A=f[this.o.language].monthsTitle||f.en.monthsTitle||"Months",I=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?A:o).end().find("tbody span").removeClass("active");if(e.each(this.dates,function(e,t){t.getUTCFullYear()===o&&I.eq(t.getUTCMonth()).addClass("active")}),(o<l||o>u)&&I.addClass("disabled"),o===l&&I.slice(0,c).addClass("disabled"),o===u&&I.slice(h+1).addClass("disabled"),this.o.beforeShowMonth!==e.noop){var D=this;e.each(I,function(i,n){var r=new Date(o,i,1),a=D.o.beforeShowMonth(r);a===t?a={}:"boolean"==typeof a?a={enabled:a}:"string"==typeof a&&(a={classes:a}),!1!==a.enabled||e(n).hasClass("disabled")||e(n).addClass("disabled"),a.classes&&e(n).addClass(a.classes),a.tooltip&&e(n).prop("title",a.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,o,l,u,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,o,l,u,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,o,l,u,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var e,t,i=new Date(this.viewDate),n=i.getUTCFullYear(),r=i.getUTCMonth(),a=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,o=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,s=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,c=1;switch(this.viewMode){case 4:c*=10;case 3:c*=10;case 2:c*=10;case 1:e=Math.floor(n/c)*c<a,t=Math.floor(n/c)*c+c>s;break;case 0:e=n<=a&&r<o,t=n>=s&&r>l}this.picker.find(".prev").toggleClass("disabled",e),this.picker.find(".next").toggleClass("disabled",t)}},click:function(t){var r,a,o,s;t.preventDefault(),t.stopPropagation(),(r=e(t.target)).hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),r.hasClass("today")&&!r.hasClass("day")&&(this.setViewMode(0),this._setDate(n(),"linked"===this.o.todayBtn?null:"view")),r.hasClass("clear")&&this.clearDates(),r.hasClass("disabled")||(r.hasClass("month")||r.hasClass("year")||r.hasClass("decade")||r.hasClass("century"))&&(this.viewDate.setUTCDate(1),a=1,1===this.viewMode?(s=r.parent().find("span").index(r),o=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s)):(s=0,o=Number(r.text()),this.viewDate.setUTCFullYear(o)),this._trigger(g.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(i(o,s,a)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(t){var i=e(t.currentTarget).data("date"),n=new Date(i);this.o.updateViewDate&&(n.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),n.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(n)},navArrowsClick:function(t){var i=e(t.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(i*=12*g.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,i),this._trigger(g.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e||this.dates.clear(),-1!==t?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):!1===this.o.multidate?(this.dates.clear(),this.dates.push(e)):this.dates.push(e),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),(!t&&this.o.updateViewDate||"view"===t)&&(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),t&&"view"===t||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||t&&"date"!==t||this.hide()},moveDay:function(e,t){var i=new Date(e);return i.setUTCDate(e.getUTCDate()+t),i},moveWeek:function(e,t){return this.moveDay(e,7*t)},moveMonth:function(e,t){if(!function(e){return e&&!isNaN(e.getTime())}(e))return this.o.defaultViewDate;if(!t)return e;var i,n,r=new Date(e.valueOf()),a=r.getUTCDate(),o=r.getUTCMonth(),s=Math.abs(t);if(t=t>0?1:-1,1===s)n=-1===t?function(){return r.getUTCMonth()===o}:function(){return r.getUTCMonth()!==i},r.setUTCMonth(i=o+t),i=(i+12)%12;else{for(var l=0;l<s;l++)r=this.moveMonth(r,t);i=r.getUTCMonth(),r.setUTCDate(a),n=function(){return i!==r.getUTCMonth()}}for(;n();)r.setUTCDate(--a),r.setUTCMonth(i);return r},moveYear:function(e,t){return this.moveMonth(e,12*t)},moveAvailableDate:function(e,t,i){do{if(e=this[i](e,t),!this.dateWithinRange(e))return!1;i="moveDay"}while(this.dateIsDisabled(e));return e},weekOfDateIsDisabled:function(t){return-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(t){return this.weekOfDateIsDisabled(t)||e.grep(this.o.datesDisabled,function(e){return r(t,e)}).length>0},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":visible")){var t,i,n=!1,r=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault(),e.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;t=37===e.keyCode||38===e.keyCode?-1:1,0===this.viewMode?e.ctrlKey?(i=this.moveAvailableDate(r,t,"moveYear"))&&this._trigger("changeYear",this.viewDate):e.shiftKey?(i=this.moveAvailableDate(r,t,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===e.keyCode||39===e.keyCode?i=this.moveAvailableDate(r,t,"moveDay"):this.weekOfDateIsDisabled(r)||(i=this.moveAvailableDate(r,t,"moveWeek")):1===this.viewMode?(38!==e.keyCode&&40!==e.keyCode||(t*=4),i=this.moveAvailableDate(r,t,"moveMonth")):2===this.viewMode&&(38!==e.keyCode&&40!==e.keyCode||(t*=4),i=this.moveAvailableDate(r,t,"moveYear")),i&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),e.preventDefault());break;case 13:if(!this.o.forceParse)break;r=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(r),n=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),e.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}n&&(this._trigger(this.dates.length?"changeDate":"clearDate"),this.inputField.trigger("change"))}else 40!==e.keyCode&&27!==e.keyCode||(this.show(),e.stopPropagation())},setViewMode:function(e){this.viewMode=e,this.picker.children("div").hide().filter(".datepicker-"+g.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var c=function(t,i){e.data(t,"datepicker",this),this.element=e(t),this.inputs=e.map(i.inputs,function(e){return e.jquery?e[0]:e}),delete i.inputs,this.keepEmptyValues=i.keepEmptyValues,delete i.keepEmptyValues,h.call(e(this.inputs),i).on("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e.data(t,"datepicker")}),this.updateDates()};c.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,i){i.setRange(t)})},clearDates:function(){e.each(this.pickers,function(e,t){t.clearDates()})},dateUpdated:function(i){if(!this.updating){this.updating=!0;var n=e.data(i.target,"datepicker");if(n!==t){var r=n.getUTCDate(),a=this.keepEmptyValues,o=e.inArray(i.target,this.inputs),s=o-1,l=o+1,c=this.inputs.length;if(-1!==o){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t!==n&&a||t.setUTCDate(r)}),r<this.dates[s])for(;s>=0&&r<this.dates[s];)this.pickers[s--].setUTCDate(r);else if(r>this.dates[l])for(;l<c&&r>this.dates[l];)this.pickers[l++].setUTCDate(r);this.updateDates(),delete this.updating}}}},destroy:function(){e.map(this.pickers,function(e){e.destroy()}),e(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:a("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var u=e.fn.datepicker,h=function(i){var n,r=Array.apply(null,arguments);if(r.shift(),this.each(function(){var t=e(this),a=t.data("datepicker"),s="object"==typeof i&&i;if(!a){var u=function(t,i){function n(e,t){return t.toLowerCase()}var r=e(t).data(),a={},o=new RegExp("^"+i.toLowerCase()+"([A-Z])");for(var s in i=new RegExp("^"+i.toLowerCase()),r)i.test(s)&&(a[s.replace(o,n)]=r[s]);return a}(this,"date"),h=o(e.extend({},d,u,s).language),p=e.extend({},d,h,u,s);t.hasClass("input-daterange")||p.inputs?(e.extend(p,{inputs:p.inputs||t.find("input").toArray()}),a=new c(this,p)):a=new l(this,p),t.data("datepicker",a)}"string"==typeof i&&"function"==typeof a[i]&&(n=a[i].apply(a,r))}),n===t||n instanceof l||n instanceof c)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+i+" function)");return n};e.fn.datepicker=h;var d=e.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:e.noop,beforeShowMonth:e.noop,beforeShowYear:e.noop,beforeShowDecade:e.noop,beforeShowCentury:e.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},p=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=l;var f=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},g={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(e){if("function"==typeof e.toValue&&"function"==typeof e.toDisplay)return e;var t=e.replace(this.validParts,"\0").split("\0"),i=e.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(i,r,a,o){function s(){var e=this.slice(0,c[d].length),t=c[d].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(!i)return t;if(i instanceof Date)return i;if("string"==typeof r&&(r=g.parseFormat(r)),r.toValue)return r.toValue(i,r,a);var c,u,h,d,p,m={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},y={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(i in y&&(i=y[i]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(i)){for(c=i.match(/([\-+]\d+)([dmwy])/gi),i=new Date,d=0;d<c.length;d++)u=c[d].match(/([\-+]\d+)([dmwy])/i),h=Number(u[1]),p=m[u[2].toLowerCase()],i=l.prototype[p](i,h);return l.prototype._zero_utc_time(i)}c=i&&i.match(this.nonpunctuation)||[];var v,b,C={},S=["yyyy","yy","M","MM","m","mm","d","dd"],w={yyyy:function(e,t){return e.setUTCFullYear(o?function(e,t){return!0===t&&(t=10),e<100&&(e+=2e3)>(new Date).getFullYear()+t&&(e-=100),e}(t,o):t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;t<0;)t+=12;for(e.setUTCMonth(t%=12);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};w.yy=w.yyyy,w.M=w.MM=w.mm=w.m,w.dd=w.d,i=n();var x=r.parts.slice();if(c.length!==x.length&&(x=e(x).filter(function(t,i){return-1!==e.inArray(i,S)}).toArray()),c.length===x.length){var T,k,E;for(d=0,T=x.length;d<T;d++){if(v=parseInt(c[d],10),u=x[d],isNaN(v))switch(u){case"MM":b=e(f[a].months).filter(s),v=e.inArray(b[0],f[a].months)+1;break;case"M":b=e(f[a].monthsShort).filter(s),v=e.inArray(b[0],f[a].monthsShort)+1}C[u]=v}for(d=0;d<S.length;d++)(E=S[d])in C&&!isNaN(C[E])&&(k=new Date(i),w[E](k,C[E]),isNaN(k)||(i=k))}return i},formatDate:function(t,i,n){if(!t)return"";if("string"==typeof i&&(i=g.parseFormat(i)),i.toDisplay)return i.toDisplay(t,i,n);var r={d:t.getUTCDate(),D:f[n].daysShort[t.getUTCDay()],DD:f[n].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:f[n].monthsShort[t.getUTCMonth()],MM:f[n].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,t=[];for(var a=e.extend([],i.separators),o=0,s=i.parts.length;o<=s;o++)a.length&&t.push(a.shift()),t.push(r[i.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+d.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+d.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};g.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+g.headTemplate+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=g,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=u,this},e.fn.datepicker.version="1.8.0",e.fn.datepicker.deprecated=function(e){var t=window.console;t&&t.warn&&t.warn("DEPRECATED: "+e)},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=e(this);i.data("datepicker")||(t.preventDefault(),h.call(i,"show"))}),e(function(){h.call(e('[data-provide="datepicker-inline"]'))})},r=[i(28)],void 0===(a="function"==typeof(n=o)?n.apply(t,r):n)||(e.exports=a)},function(e,t){jQuery.fn.datepicker.dates["zh-TW"]={days:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],daysShort:["\u9031\u65e5","\u9031\u4e00","\u9031\u4e8c","\u9031\u4e09","\u9031\u56db","\u9031\u4e94","\u9031\u516d"],daysMin:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthsShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],today:"\u4eca\u5929",format:"yyyy\u5e74mm\u6708dd\u65e5",weekStart:1,clear:"\u6e05\u9664"}},function(e,t){},function(e,t,i){var n,r,a;a=function(e){!function(e){"use strict";var t=["sanitize","whiteList","sanitizeFn"],i=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],n=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,r=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function a(t,a){var o=t.nodeName.toLowerCase();if(-1!==e.inArray(o,a))return-1===e.inArray(o,i)||Boolean(t.nodeValue.match(n)||t.nodeValue.match(r));for(var s=e(a).filter(function(e,t){return t instanceof RegExp}),l=0,c=s.length;l<c;l++)if(o.match(s[l]))return!0;return!1}function o(e,t,i){if(i&&"function"==typeof i)return i(e);for(var n=Object.keys(t),r=0,o=e.length;r<o;r++)for(var s=e[r].querySelectorAll("*"),l=0,c=s.length;l<c;l++){var u=s[l],h=u.nodeName.toLowerCase();if(-1!==n.indexOf(h))for(var d=[].slice.call(u.attributes),p=[].concat(t["*"]||[],t[h]||[]),f=0,g=d.length;f<g;f++){var m=d[f];a(m,p)||u.removeAttribute(m.nodeName)}else u.parentNode.removeChild(u)}}"classList"in document.createElement("_")||function(t){if("Element"in t){var i="classList",n="prototype",r=t.Element[n],a=Object,o=function(){var t=e(this);return{add:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.addClass(e)},remove:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.removeClass(e)},toggle:function(e,i){return t.toggleClass(e,i)},contains:function(e){return t.hasClass(e)}}};if(a.defineProperty){var s={get:o,enumerable:!0,configurable:!0};try{a.defineProperty(r,i,s)}catch(t){void 0!==t.number&&-2146823252!==t.number||(s.enumerable=!1,a.defineProperty(r,i,s))}}else a[n].__defineGetter__&&r.__defineGetter__(i,o)}}(window);var s,l,c,u=document.createElement("_");if(u.classList.add("c1","c2"),!u.classList.contains("c2")){var h=DOMTokenList.prototype.add,d=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){Array.prototype.forEach.call(arguments,h.bind(this))},DOMTokenList.prototype.remove=function(){Array.prototype.forEach.call(arguments,d.bind(this))}}if(u.classList.toggle("c3",!1),u.classList.contains("c3")){var p=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:p.call(this,e)}}function f(e){var t,i=[],n=e.selectedOptions;if(e.multiple)for(var r=0,a=n.length;r<a;r++)i.push((t=n[r]).value||t.text);else i=e.value;return i}u=null,String.prototype.startsWith||(s=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),l={}.toString,c=function(e){if(null==this)throw new TypeError;var t=String(this);if(e&&"[object RegExp]"==l.call(e))throw new TypeError;var i=t.length,n=String(e),r=n.length,a=1<arguments.length?arguments[1]:void 0,o=a?Number(a):0;o!=o&&(o=0);var s=Math.min(Math.max(o,0),i);if(i<r+s)return!1;for(var c=-1;++c<r;)if(t.charCodeAt(s+c)!=n.charCodeAt(c))return!1;return!0},s?s(String.prototype,"startsWith",{value:c,configurable:!0,writable:!0}):String.prototype.startsWith=c),Object.keys||(Object.keys=function(e,t,i){for(t in i=[],e)i.hasOwnProperty.call(e,t)&&i.push(t);return i}),HTMLSelectElement.prototype.hasOwnProperty("selectedOptions")||Object.defineProperty(HTMLSelectElement.prototype,"selectedOptions",{get:function(){return this.querySelectorAll(":checked")}});var g={useDefault:!1,_set:e.valHooks.select.set};e.valHooks.select.set=function(t,i){return i&&!g.useDefault&&e(t).data("selected",!0),g._set.apply(this,arguments)};var m=null,y=function(){try{return new Event("change"),!0}catch(e){return!1}}();function v(e,t,i,n){for(var r=["content","subtext","tokens"],a=!1,o=0;o<r.length;o++){var s=r[o],l=e[s];if(l&&(l=l.toString(),"content"===s&&(l=l.replace(/<[^>]+>/g,"")),n&&(l=T(l)),l=l.toUpperCase(),a="contains"===i?0<=l.indexOf(t):l.startsWith(t)))break}return a}function b(e){return parseInt(e,10)||0}e.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent?(y?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),i.dispatchEvent(t)):i.fireEvent?((t=document.createEventObject()).eventType=e,i.fireEvent("on"+e,t)):this.trigger(e)};var C={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},S=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,w=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]","g");function x(e){return C[e]}function T(e){return(e=e.toString())&&e.replace(S,x).replace(w,"")}var k,E,A,I,D,B=(k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},E=function(e){return k[e]},A="(?:"+Object.keys(k).join("|")+")",I=RegExp(A),D=RegExp(A,"g"),function(e){return I.test(e=null==e?"":""+e)?e.replace(D,E):e}),_={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},M={success:!1,major:"3"};try{M.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split("."),M.major=M.full[0],M.success=!0}catch(e){console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",e)}var P=0,L=".bs.select",N={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title"},R={MENU:"."+N.MENU};"4"===M.major&&(N.DIVIDER="dropdown-divider",N.SHOW="show",N.BUTTONCLASS="btn-light",N.POPOVERHEADER="popover-header");var O={span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode("\xa0"),fragment:document.createDocumentFragment()};O.a.setAttribute("role","option"),O.subtext.className="text-muted",O.text=O.span.cloneNode(!1),O.text.className="text";var U=new RegExp("38|40"),V=new RegExp("^9$|27"),F=function(e,t,i){var n=O.li.cloneNode(!1);return e&&(1===e.nodeType||11===e.nodeType?n.appendChild(e):n.innerHTML=e),void 0!==t&&""!==t&&(n.className=t),null!=i&&n.classList.add("optgroup-"+i),n},z=function(e,t,i){var n=O.a.cloneNode(!0);return e&&(11===e.nodeType?n.appendChild(e):n.insertAdjacentHTML("beforeend",e)),void 0!==t&&""!==t&&(n.className=t),"4"===M.major&&n.classList.add("dropdown-item"),i&&n.setAttribute("style",i),n},H=function(e,t){var i,n,r=O.text.cloneNode(!1);if(e.optionContent)r.innerHTML=e.optionContent;else{if(r.textContent=e.text,e.optionIcon){var a=O.whitespace.cloneNode(!1);(n=(!0===t?O.i:O.span).cloneNode(!1)).className=e.iconBase+" "+e.optionIcon,O.fragment.appendChild(n),O.fragment.appendChild(a)}e.optionSubtext&&((i=O.subtext.cloneNode(!1)).textContent=e.optionSubtext,r.appendChild(i))}if(!0===t)for(;0<r.childNodes.length;)O.fragment.appendChild(r.childNodes[0]);else O.fragment.appendChild(r);return O.fragment},j=function(e){var t,i,n=O.text.cloneNode(!1);if(n.innerHTML=e.labelEscaped,e.labelIcon){var r=O.whitespace.cloneNode(!1);(i=O.span.cloneNode(!1)).className=e.iconBase+" "+e.labelIcon,O.fragment.appendChild(i),O.fragment.appendChild(r)}return e.labelSubtext&&((t=O.subtext.cloneNode(!1)).textContent=e.labelSubtext,n.appendChild(t)),O.fragment.appendChild(n),O.fragment},$=function(t,i){var n=this;g.useDefault||(e.valHooks.select.set=g._set,g.useDefault=!0),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.options=i,this.selectpicker={main:{map:{newIndex:{},originalIndex:{}}},current:{map:{}},search:{map:{}},view:{},keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){n.selectpicker.keydown.keyHistory=""},800)}}}},null===this.options.title&&(this.options.title=this.$element.attr("title"));var r=this.options.windowPadding;"number"==typeof r&&(this.options.windowPadding=[r,r,r,r]),this.val=$.prototype.val,this.render=$.prototype.render,this.refresh=$.prototype.refresh,this.setStyle=$.prototype.setStyle,this.selectAll=$.prototype.selectAll,this.deselectAll=$.prototype.deselectAll,this.destroy=$.prototype.destroy,this.remove=$.prototype.remove,this.show=$.prototype.show,this.hide=$.prototype.hide,this.init()};function K(i){var n,r=arguments,a=i;if([].shift.apply(r),!M.success){try{M.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".")}catch(i){M.full=$.BootstrapVersion.split(" ")[0].split(".")}M.major=M.full[0],M.success=!0,"4"===M.major&&(N.DIVIDER="dropdown-divider",N.SHOW="show",N.BUTTONCLASS="btn-light",$.DEFAULTS.style=N.BUTTONCLASS="btn-light",N.POPOVERHEADER="popover-header")}var o=this.each(function(){var i=e(this);if(i.is("select")){var o=i.data("selectpicker"),s="object"==typeof a&&a;if(o){if(s)for(var l in s)s.hasOwnProperty(l)&&(o.options[l]=s[l])}else{var c=i.data();for(var u in c)c.hasOwnProperty(u)&&-1!==e.inArray(u,t)&&delete c[u];var h=e.extend({},$.DEFAULTS,e.fn.selectpicker.defaults||{},c,s);h.template=e.extend({},$.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},c.template,s.template),i.data("selectpicker",o=new $(this,h))}"string"==typeof a&&(n=o[a]instanceof Function?o[a].apply(o,r):o.options[a])}});return void 0!==n?n:o}$.VERSION="1.13.7",$.BootstrapVersion=M.major,$.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:N.BUTTONCLASS,size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1,sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role","tabindex","style",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},"4"===M.major&&($.DEFAULTS.style="btn-light",$.DEFAULTS.iconBase="",$.DEFAULTS.tickIcon="bs-ok-default"),$.prototype={constructor:$,init:function(){var e=this,t=this.$element.attr("id");this.selectId=P++,this.$element[0].classList.add("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createDropdown(),this.$element.after(this.$newElement).prependTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(R.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element[0].classList.remove("bs-select-hidden"),!0===this.options.dropdownAlignRight&&this.$menu[0].classList.add(N.MENURIGHT),void 0!==t&&this.$button.attr("data-id",t),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.setStyle(),this.render(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide"+L,function(){if(e.isVirtual()){var t=e.$menuInner[0],i=t.firstChild.cloneNode(!1);t.replaceChild(i,t.firstChild),t.scrollTop=0}}),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(t){e.$menuInner.attr("aria-expanded",!1),e.$element.trigger("hide"+L,t)},"hidden.bs.dropdown":function(t){e.$element.trigger("hidden"+L,t)},"show.bs.dropdown":function(t){e.$menuInner.attr("aria-expanded",!0),e.$element.trigger("show"+L,t)},"shown.bs.dropdown":function(t){e.$element.trigger("shown"+L,t)}}),e.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){e.$button[0].classList.add("bs-invalid"),e.$element.on("shown"+L+".invalid",function(){e.$element.val(e.$element.val()).off("shown"+L+".invalid")}).on("rendered"+L,function(){this.validity.valid&&e.$button[0].classList.remove("bs-invalid"),e.$element.off("rendered"+L)}),e.$button.on("blur"+L,function(){e.$element.trigger("focus").trigger("blur"),e.$button.off("blur"+L)})}),setTimeout(function(){e.createLi(),e.$element.trigger("loaded"+L)})},createDropdown:function(){var t=this.multiple||this.options.showTick?" show-tick":"",i=this.autofocus?" autofocus":"",n="",r="",a="",o="";return this.options.header&&(n='<div class="'+N.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(r='<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+B(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>'),this.multiple&&this.options.actionsBox&&(a='<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn '+N.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+N.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(o='<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm '+N.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),e('<div class="dropdown bootstrap-select'+t+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+'data-toggle="dropdown"'+i+' role="button"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner"></div></div> </div>'+("4"===M.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+N.MENU+" "+("4"===M.major?"":N.SHOW)+'" role="combobox">'+n+r+a+'<div class="inner '+N.SHOW+'" role="listbox" aria-expanded="false" tabindex="-1"><ul class="'+N.MENU+" inner "+("4"===M.major?N.SHOW:"")+'"></ul></div>'+o+"</div></div>")},setPositionData:function(){this.selectpicker.view.canHighlight=[];for(var e=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],i=!0;"divider"===t.type?(i=!1,t.height=this.sizeInfo.dividerHeight):"optgroup-label"===t.type?(i=!1,t.height=this.sizeInfo.dropdownHeaderHeight):t.height=this.sizeInfo.liHeight,t.disabled&&(i=!1),this.selectpicker.view.canHighlight.push(i),t.position=(0===e?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.elements.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(t,i){i=i||0;var n=this;this.selectpicker.current=t?this.selectpicker.search:this.selectpicker.main;var r,a,s=[];function l(e,i){var l,c,u,h,d,p,f,g,m,y,v=n.selectpicker.current.elements.length,b=[],C=!0,S=n.isVirtual();n.selectpicker.view.scrollTop=e,!0===S&&n.sizeInfo.hasScrollBar&&n.$menu[0].offsetWidth>n.sizeInfo.totalMenuWidth&&(n.sizeInfo.menuWidth=n.$menu[0].offsetWidth,n.sizeInfo.totalMenuWidth=n.sizeInfo.menuWidth+n.sizeInfo.scrollBarWidth,n.$menu.css("min-width",n.sizeInfo.menuWidth)),l=Math.ceil(n.sizeInfo.menuInnerHeight/n.sizeInfo.liHeight*1.5),c=Math.round(v/l)||1;for(var w=0;w<c;w++){var x=(w+1)*l;if(w===c-1&&(x=v),b[w]=[w*l+(w?1:0),x],!v)break;void 0===d&&e<=n.selectpicker.current.data[x-1].position-n.sizeInfo.menuInnerHeight&&(d=w)}if(void 0===d&&(d=0),p=[n.selectpicker.view.position0,n.selectpicker.view.position1],u=Math.max(0,d-1),h=Math.min(c-1,d+1),n.selectpicker.view.position0=Math.max(0,b[u][0])||0,n.selectpicker.view.position1=Math.min(v,b[h][1])||0,f=p[0]!==n.selectpicker.view.position0||p[1]!==n.selectpicker.view.position1,void 0!==n.activeIndex&&(a=n.selectpicker.current.elements[n.selectpicker.current.map.newIndex[n.prevActiveIndex]],s=n.selectpicker.current.elements[n.selectpicker.current.map.newIndex[n.activeIndex]],r=n.selectpicker.current.elements[n.selectpicker.current.map.newIndex[n.selectedIndex]],i&&(n.activeIndex!==n.selectedIndex&&s&&s.length&&(s.classList.remove("active"),s.firstChild&&s.firstChild.classList.remove("active")),n.activeIndex=void 0),n.activeIndex&&n.activeIndex!==n.selectedIndex&&r&&r.length&&(r.classList.remove("active"),r.firstChild&&r.firstChild.classList.remove("active"))),void 0!==n.prevActiveIndex&&n.prevActiveIndex!==n.activeIndex&&n.prevActiveIndex!==n.selectedIndex&&a&&a.length&&(a.classList.remove("active"),a.firstChild&&a.firstChild.classList.remove("active")),(i||f)&&(g=n.selectpicker.view.visibleElements?n.selectpicker.view.visibleElements.slice():[],n.selectpicker.view.visibleElements=n.selectpicker.current.elements.slice(n.selectpicker.view.position0,n.selectpicker.view.position1),n.setOptionStatus(),(t||!1===S&&i)&&(C=!((m=g).length===(y=n.selectpicker.view.visibleElements).length&&m.every(function(e,t){return e===y[t]}))),(i||!0===S)&&C)){var T,k=n.$menuInner[0],E=document.createDocumentFragment(),A=k.firstChild.cloneNode(!1),I=!0===S?n.selectpicker.view.visibleElements:n.selectpicker.current.elements,D=[];k.replaceChild(A,k.firstChild),w=0;for(var B=I.length;w<B;w++){var _,M,P=I[w];n.options.sanitize&&(_=P.lastChild)&&(M=n.selectpicker.current.data[w+n.selectpicker.view.position0].data)&&M.content&&!M.sanitized&&(D.push(_),M.sanitized=!0),E.appendChild(P)}n.options.sanitize&&D.length&&o(D,n.options.whiteList,n.options.sanitizeFn),!0===S&&(T=n.selectpicker.view.position1>v-1?0:n.selectpicker.current.data[v-1].position-n.selectpicker.current.data[n.selectpicker.view.position1-1].position,k.firstChild.style.marginTop=(0===n.selectpicker.view.position0?0:n.selectpicker.current.data[n.selectpicker.view.position0-1].position)+"px",k.firstChild.style.marginBottom=T+"px"),k.firstChild.appendChild(E)}if(n.prevActiveIndex=n.activeIndex,n.options.liveSearch){if(t&&i){var L,N=0;n.selectpicker.view.canHighlight[N]||(N=1+n.selectpicker.view.canHighlight.slice(1).indexOf(!0)),L=n.selectpicker.view.visibleElements[N],n.selectpicker.view.currentActive&&(n.selectpicker.view.currentActive.classList.remove("active"),n.selectpicker.view.currentActive.firstChild&&n.selectpicker.view.currentActive.firstChild.classList.remove("active")),L&&(L.classList.add("active"),L.firstChild&&L.firstChild.classList.add("active")),n.activeIndex=n.selectpicker.current.map.originalIndex[N]}}else n.$menuInner.trigger("focus")}this.setPositionData(),l(i,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",function(e,t){n.noScroll||l(this.scrollTop,t),n.noScroll=!1}),e(window).off("resize"+L+"."+this.selectId+".createView").on("resize"+L+"."+this.selectId+".createView",function(){n.$newElement.hasClass(N.SHOW)&&l(n.$menuInner[0].scrollTop)})},setPlaceholder:function(){var t=!1;if(this.options.title&&!this.multiple){this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option")),t=!0;var i=this.$element[0],n=!1,r=!this.selectpicker.view.titleOption.parentNode;r&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",n=void 0===e(i.options[i.selectedIndex]).attr("selected")&&void 0===this.$element.data("selected")),(r||0!==this.selectpicker.view.titleOption.index)&&i.insertBefore(this.selectpicker.view.titleOption,i.firstChild),n&&(i.selectedIndex=0)}return t},createLi:function(){var e,t,i=this,n=i.options.iconBase,r=':not([hidden]):not([data-hidden="true"])',a=[],o=0,s=[],l=0,c=0,u=-1;this.options.hideDisabled&&(r+=":not(:disabled)"),(i.options.showTick||i.multiple)&&((e=O.span.cloneNode(!1)).className=n+" "+i.options.tickIcon+" check-mark",O.a.appendChild(e)),this.setPlaceholder()&&u--;for(var h=this.$element[0].options,d=0,p=h.length;d<p;d++){var f=h[d];if(u++,!f.classList.contains("bs-title-option")){var g,m,y,v,b={content:f.getAttribute("data-content"),tokens:f.getAttribute("data-tokens"),subtext:f.getAttribute("data-subtext"),icon:f.getAttribute("data-icon"),hidden:"true"===f.getAttribute("data-hidden"),divider:"true"===f.getAttribute("data-divider")},C=f.className||"",S=f.style.cssText,w=S?B(S):"",x=b.content,T=f.textContent,k=f.parentNode,E=f.nextElementSibling,A=f.previousElementSibling,I="OPTGROUP"===k.tagName,D=I&&k.disabled,_=f.disabled||D,M=A&&"OPTGROUP"===A.tagName,P={hidden:"true"===k.getAttribute("data-hidden")};if(!0===b.hidden||f.hidden||I&&(!0===P.hidden||k.hidden)||i.options.hideDisabled&&(_||D))g=f.prevHiddenIndex,E&&(E.prevHiddenIndex=void 0!==g?g:d),u--;else{if(E&&void 0!==E.prevHiddenIndex&&(E.prevHiddenIndex=void 0),I&&!0!==b.divider){var L=" "+k.className||"",R=f.previousElementSibling;if(void 0!==(g=f.prevHiddenIndex)&&(R=h[g].previousElementSibling),!R){l+=1,P.subtext=k.getAttribute("data-subtext"),P.icon=k.getAttribute("data-icon");var U=B(k.label),V=P.subtext,$=P.icon;0!==d&&0<a.length&&(u++,a.push(F(!1,N.DIVIDER,l+"div")),s.push({type:"divider",optID:l})),u++,y=j({labelEscaped:U,labelSubtext:V,labelIcon:$,iconBase:n}),a.push(F(y,"dropdown-header"+L,l)),s.push({content:U,subtext:V,type:"optgroup-label",optID:l}),c=u-1}m=H({text:T,optionContent:x,optionSubtext:b.subtext,optionIcon:b.icon,iconBase:n}),a.push(F(z(m,"opt "+C+L,w),"",l)),s.push({content:x||T,subtext:b.subtext,tokens:b.tokens,type:"option",optID:l,headerIndex:c,lastIndex:c+k.querySelectorAll("option"+r).length,originalIndex:d,data:b})}else!0===b.divider?(a.push(F(!1,N.DIVIDER)),s.push({type:"divider",originalIndex:d,data:b})):(i.options.hideDisabled&&(M?A.querySelectorAll("option:disabled").length===A.children.length&&(M=!1):void 0!==(g=f.prevHiddenIndex)&&(v=h[g].previousElementSibling)&&"OPTGROUP"===v.tagName&&!v.disabled&&v.querySelectorAll("option:disabled").length<v.children.length&&(M=!0)),M&&s.length&&"divider"!==s[s.length-1].type&&(u++,a.push(F(!1,N.DIVIDER,l+"div")),s.push({type:"divider",optID:l})),m=H({text:T,optionContent:x,optionSubtext:b.subtext,optionIcon:b.icon,iconBase:n}),a.push(F(z(m,C,w))),s.push({content:x||T,subtext:b.subtext,tokens:b.tokens,type:"option",originalIndex:d,data:b}));i.selectpicker.main.map.newIndex[d]=u,i.selectpicker.main.map.originalIndex[u]=d;var K=s[s.length-1];K.disabled=_;var W=0;K.content&&(W+=K.content.length),K.subtext&&(W+=K.subtext.length),b.icon&&(W+=1),o<W&&(o=W,t=a[a.length-1])}}}this.selectpicker.main.elements=a,this.selectpicker.main.data=s,this.selectpicker.current=this.selectpicker.main,this.selectpicker.view.widestOption=t},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){this.setPlaceholder();var e,t,i=this,n=this.$element[0].selectedOptions,r=n.length,a=this.$button[0],s=a.querySelector(".filter-option-inner-inner"),l=document.createTextNode(this.options.multipleSeparator),c=O.fragment.cloneNode(!1),u=!1;if(this.togglePlaceholder(),this.tabIndex(),"static"===this.options.selectedTextFormat)c=H({text:this.options.title},!0);else if((e=this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")&&1<r)&&(e=1<(t=this.options.selectedTextFormat.split(">")).length&&r>t[1]||1===t.length&&2<=r),!1===e){for(var h=0;h<r&&h<50;h++){var d=n[h],p={},f={content:d.getAttribute("data-content"),subtext:d.getAttribute("data-subtext"),icon:d.getAttribute("data-icon")};this.multiple&&0<h&&c.appendChild(l.cloneNode(!1)),d.title?p.text=d.title:f.content&&i.options.showContent?(p.optionContent=f.content.toString(),u=!0):(i.options.showIcon&&(p.optionIcon=f.icon,p.iconBase=this.options.iconBase),i.options.showSubtext&&!i.multiple&&f.subtext&&(p.optionSubtext=" "+f.subtext),p.text=d.textContent.trim()),c.appendChild(H(p,!0))}49<r&&c.appendChild(document.createTextNode("..."))}else{var g=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"])';this.options.hideDisabled&&(g+=":not(:disabled)");var m=this.$element[0].querySelectorAll("select > option"+g+", optgroup"+g+" option"+g).length,y="function"==typeof this.options.countSelectedText?this.options.countSelectedText(r,m):this.options.countSelectedText;c=H({text:y.replace("{0}",r.toString()).replace("{1}",m.toString())},!0)}if(null==this.options.title&&(this.options.title=this.$element.attr("title")),c.childNodes.length||(c=H({text:void 0!==this.options.title?this.options.title:this.options.noneSelectedText},!0)),a.title=c.textContent.replace(/<[^>]*>?/g,"").trim(),this.options.sanitize&&u&&o([c],i.options.whiteList,i.options.sanitizeFn),s.innerHTML="",s.appendChild(c),M.major<4&&this.$newElement[0].parentNode.classList.contains("input-group")){var v=a.querySelector(".filter-expand"),b=s.cloneNode(!0);b.className="filter-expand",v?a.replaceChild(b,v):a.appendChild(b)}this.$element.trigger("rendered"+L)},setStyle:function(e,t){var i,n=this.$button[0],r=this.options.style.split(" ");this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,"")),M.major<4&&this.$newElement[0].classList.add("bs3"),i=e?e.split(" "):r,"add"==t?n.classList.add.apply(n.classList,i):"remove"==t?n.classList.remove.apply(n.classList,i):(n.classList.remove.apply(n.classList,r),n.classList.add.apply(n.classList,i))},liHeight:function(t){if(t||!1!==this.options.size&&!this.sizeInfo){this.sizeInfo||(this.sizeInfo={});var i=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),a=document.createElement("ul"),o=document.createElement("li"),s=document.createElement("li"),l=document.createElement("li"),c=document.createElement("a"),u=document.createElement("span"),h=this.options.header&&0<this.$menu.find("."+N.POPOVERHEADER).length?this.$menu.find("."+N.POPOVERHEADER)[0].cloneNode(!0):null,d=this.options.liveSearch?document.createElement("div"):null,p=this.options.actionsBox&&this.multiple&&0<this.$menu.find(".bs-actionsbox").length?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,f=this.options.doneButton&&this.multiple&&0<this.$menu.find(".bs-donebutton").length?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,g=this.$element.find("option")[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,u.className="text",c.className="dropdown-item "+(g?g.className:""),i.className=this.$menu[0].parentNode.className+" "+N.SHOW,i.style.width=this.sizeInfo.selectWidth+"px","auto"===this.options.width&&(n.style.minWidth=0),n.className=N.MENU+" "+N.SHOW,r.className="inner "+N.SHOW,a.className=N.MENU+" inner "+("4"===M.major?N.SHOW:""),o.className=N.DIVIDER,s.className="dropdown-header",u.appendChild(document.createTextNode("\u200b")),c.appendChild(u),l.appendChild(c),s.appendChild(u.cloneNode(!0)),this.selectpicker.view.widestOption&&a.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),a.appendChild(l),a.appendChild(o),a.appendChild(s),h&&n.appendChild(h),d){var m=document.createElement("input");d.className="bs-searchbox",m.className="form-control",d.appendChild(m),n.appendChild(d)}p&&n.appendChild(p),r.appendChild(a),n.appendChild(r),f&&n.appendChild(f),i.appendChild(n),document.body.appendChild(i);var y,v=c.offsetHeight,C=s?s.offsetHeight:0,S=h?h.offsetHeight:0,w=d?d.offsetHeight:0,x=p?p.offsetHeight:0,T=f?f.offsetHeight:0,k=e(o).outerHeight(!0),E=!!window.getComputedStyle&&window.getComputedStyle(n),A=n.offsetWidth,I=E?null:e(n),D={vert:b(E?E.paddingTop:I.css("paddingTop"))+b(E?E.paddingBottom:I.css("paddingBottom"))+b(E?E.borderTopWidth:I.css("borderTopWidth"))+b(E?E.borderBottomWidth:I.css("borderBottomWidth")),horiz:b(E?E.paddingLeft:I.css("paddingLeft"))+b(E?E.paddingRight:I.css("paddingRight"))+b(E?E.borderLeftWidth:I.css("borderLeftWidth"))+b(E?E.borderRightWidth:I.css("borderRightWidth"))},B={vert:D.vert+b(E?E.marginTop:I.css("marginTop"))+b(E?E.marginBottom:I.css("marginBottom"))+2,horiz:D.horiz+b(E?E.marginLeft:I.css("marginLeft"))+b(E?E.marginRight:I.css("marginRight"))+2};r.style.overflowY="scroll",y=n.offsetWidth-A,document.body.removeChild(i),this.sizeInfo.liHeight=v,this.sizeInfo.dropdownHeaderHeight=C,this.sizeInfo.headerHeight=S,this.sizeInfo.searchHeight=w,this.sizeInfo.actionsHeight=x,this.sizeInfo.doneButtonHeight=T,this.sizeInfo.dividerHeight=k,this.sizeInfo.menuPadding=D,this.sizeInfo.menuExtras=B,this.sizeInfo.menuWidth=A,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=y,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var t,i=e(window),n=this.$newElement.offset(),r=e(this.options.container);this.options.container&&r.length&&!r.is("body")?((t=r.offset()).top+=parseInt(r.css("borderTopWidth")),t.left+=parseInt(r.css("borderLeftWidth"))):t={top:0,left:0};var a=this.options.windowPadding;this.sizeInfo.selectOffsetTop=n.top-t.top-i.scrollTop(),this.sizeInfo.selectOffsetBot=i.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-t.top-a[2],this.sizeInfo.selectOffsetLeft=n.left-t.left-i.scrollLeft(),this.sizeInfo.selectOffsetRight=i.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-t.left-a[1],this.sizeInfo.selectOffsetTop-=a[0],this.sizeInfo.selectOffsetLeft-=a[3]},setMenuSize:function(e){this.getSelectPosition();var t,i,n,r,a,o,s=this.sizeInfo.selectWidth,l=this.sizeInfo.liHeight,c=this.sizeInfo.headerHeight,u=this.sizeInfo.searchHeight,h=this.sizeInfo.actionsHeight,d=this.sizeInfo.doneButtonHeight,p=this.sizeInfo.dividerHeight,f=this.sizeInfo.menuPadding,g=0;if(this.options.dropupAuto&&this.$newElement.toggleClass(N.DROPUP,this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&l*this.selectpicker.current.elements.length+f.vert+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot),"auto"===this.options.size)i=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,n=(r=3<this.selectpicker.current.elements.length?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0)+c+u+h+d,o=Math.max(r-f.vert,0),this.$newElement.hasClass(N.DROPUP)&&(i=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert),t=(a=i)-c-u-h-d-f.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var m=0;m<this.options.size;m++)"divider"===this.selectpicker.current.data[m].type&&g++;t=(i=l*this.options.size+g*p+f.vert)-f.vert,a=i+c+u+h+d,n=o=""}"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(N.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-s),this.$menu.css({"max-height":a+"px",overflow:"hidden","min-height":n+"px"}),this.$menuInner.css({"max-height":t+"px","overflow-y":"auto","min-height":o+"px"}),this.sizeInfo.menuInnerHeight=Math.max(t,1),this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth,this.$menu.css("min-width",this.sizeInfo.totalMenuWidth)),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(t){if(this.liHeight(t),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var i,n=this,r=e(window),a=0;this.setMenuSize(),this.options.liveSearch&&this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return n.setMenuSize()}),"auto"===this.options.size?r.off("resize"+L+"."+this.selectId+".setMenuSize scroll"+L+"."+this.selectId+".setMenuSize").on("resize"+L+"."+this.selectId+".setMenuSize scroll"+L+"."+this.selectId+".setMenuSize",function(){return n.setMenuSize()}):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&r.off("resize"+L+"."+this.selectId+".setMenuSize scroll"+L+"."+this.selectId+".setMenuSize"),t?a=this.$menuInner[0].scrollTop:n.multiple||"number"==typeof(i=n.selectpicker.main.map.newIndex[n.$element[0].selectedIndex])&&!1!==n.options.size&&(a=(a=n.sizeInfo.liHeight*i)-n.sizeInfo.menuInnerHeight/2+n.sizeInfo.liHeight/2),n.createView(!1,a)}},setWidth:function(){var e=this;"auto"===this.options.width?requestAnimationFrame(function(){e.$menu.css("min-width","0"),e.$element.on("loaded"+L,function(){e.liHeight(),e.setMenuSize();var t=e.$newElement.clone().appendTo("body"),i=t.css("width","auto").children("button").outerWidth();t.remove(),e.sizeInfo.selectWidth=Math.max(e.sizeInfo.totalMenuWidth,i),e.$newElement.css("width",e.sizeInfo.selectWidth+"px")})}):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement[0].classList.remove("fit-width")},selectPosition:function(){this.$bsContainer=e('<div class="bs-container" />');var t,i,n,r=this,a=e(this.options.container),o=function(o){var s={},l=r.options.display||!!e.fn.dropdown.Constructor.Default&&e.fn.dropdown.Constructor.Default.display;r.$bsContainer.addClass(o.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(N.DROPUP,o.hasClass(N.DROPUP)),t=o.offset(),a.is("body")?i={top:0,left:0}:((i=a.offset()).top+=parseInt(a.css("borderTopWidth"))-a.scrollTop(),i.left+=parseInt(a.css("borderLeftWidth"))-a.scrollLeft()),n=o.hasClass(N.DROPUP)?0:o[0].offsetHeight,(M.major<4||"static"===l)&&(s.top=t.top-i.top+n,s.left=t.left-i.left),s.width=o[0].offsetWidth,r.$bsContainer.css(s)};this.$button.on("click.bs.dropdown.data-api",function(){r.isDisabled()||(o(r.$newElement),r.$bsContainer.appendTo(r.options.container).toggleClass(N.SHOW,!r.$button.hasClass(N.SHOW)).append(r.$menu))}),e(window).off("resize"+L+"."+this.selectId+" scroll"+L+"."+this.selectId).on("resize"+L+"."+this.selectId+" scroll"+L+"."+this.selectId,function(){r.$newElement.hasClass(N.SHOW)&&o(r.$newElement)}),this.$element.on("hide"+L,function(){r.$menu.data("height",r.$menu.height()),r.$bsContainer.detach()})},setOptionStatus:function(){var e=this,t=this.$element[0].options;if(e.noScroll=!1,e.selectpicker.view.visibleElements&&e.selectpicker.view.visibleElements.length)for(var i=0;i<e.selectpicker.view.visibleElements.length;i++){var n=e.selectpicker.current.map.originalIndex[i+e.selectpicker.view.position0],r=t[n];if(r){var a=this.selectpicker.main.map.newIndex[n],o=this.selectpicker.main.elements[a];e.setDisabled(n,r.disabled||"OPTGROUP"===r.parentNode.tagName&&r.parentNode.disabled,a,o),e.setSelected(n,r.selected,a,o)}}},setSelected:function(e,t,i,n){var r,a,o=void 0!==this.activeIndex,s=this.activeIndex===e||t&&!this.multiple&&!o;i||(i=this.selectpicker.main.map.newIndex[e]),n||(n=this.selectpicker.main.elements[i]),a=n.firstChild,t&&(this.selectedIndex=e),n.classList.toggle("selected",t),n.classList.toggle("active",s),s&&(this.selectpicker.view.currentActive=n,this.activeIndex=e),a&&(a.classList.toggle("selected",t),a.classList.toggle("active",s),a.setAttribute("aria-selected",t)),s||!o&&t&&void 0!==this.prevActiveIndex&&((r=this.selectpicker.main.elements[this.selectpicker.main.map.newIndex[this.prevActiveIndex]]).classList.remove("active"),r.firstChild&&r.firstChild.classList.remove("active"))},setDisabled:function(e,t,i,n){var r;i||(i=this.selectpicker.main.map.newIndex[e]),n||(n=this.selectpicker.main.elements[i]),r=n.firstChild,n.classList.toggle(N.DISABLED,t),r&&("4"===M.major&&r.classList.toggle(N.DISABLED,t),r.setAttribute("aria-disabled",t),r.setAttribute("tabindex",t?-1:0))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement[0].classList.add(N.DISABLED),this.$button.addClass(N.DISABLED).attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button[0].classList.contains(N.DISABLED)&&(this.$newElement[0].classList.remove(N.DISABLED),this.$button.removeClass(N.DISABLED).attr("aria-disabled",!1)),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.on("click",function(){return!e.isDisabled()})},togglePlaceholder:function(){var e=this.$element[0],t=e.selectedIndex,i=-1===t;i||e.options[t].value||(i=!0),this.$button.toggleClass("bs-placeholder",i)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var t=this,i=e(document);function n(){t.options.liveSearch?t.$searchbox.trigger("focus"):t.$menuInner.trigger("focus")}function r(){t.dropdown&&t.dropdown._popper&&t.dropdown._popper.state.isCreated?n():requestAnimationFrame(r)}i.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&i.data("spaceSelect")&&(e.preventDefault(),i.data("spaceSelect",!1))}),this.$newElement.on("show.bs.dropdown",function(){3<M.major&&!t.dropdown&&(t.dropdown=t.$button.data("bs.dropdown"),t.dropdown._menu=t.$menu[0])}),this.$button.on("click.bs.dropdown.data-api",function(){t.$newElement.hasClass(N.SHOW)||t.setSize()}),this.$element.on("shown"+L,function(){t.$menuInner[0].scrollTop!==t.selectpicker.view.scrollTop&&(t.$menuInner[0].scrollTop=t.selectpicker.view.scrollTop),3<M.major?requestAnimationFrame(r):n()}),this.$menuInner.on("click","li a",function(i,n){var r=e(this),a=t.isVirtual()?t.selectpicker.view.position0:0,o=t.selectpicker.current.map.originalIndex[r.parent().index()+a],s=f(t.$element[0]),l=t.$element.prop("selectedIndex"),c=!0;if(t.multiple&&1!==t.options.maxOptions&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!r.parent().hasClass(N.DISABLED)){var u=t.$element.find("option"),h=u.eq(o),d=h.prop("selected"),p=h.parent("optgroup"),g=p.find("option"),y=t.options.maxOptions,v=p.data("maxOptions")||!1;if(o===t.activeIndex&&(n=!0),n||(t.prevActiveIndex=t.activeIndex,t.activeIndex=void 0),t.multiple){if(h.prop("selected",!d),t.setSelected(o,!d),r.trigger("blur"),!1!==y||!1!==v){var b=y<u.filter(":selected").length,C=v<p.find("option:selected").length;if(y&&b||v&&C)if(y&&1==y){u.prop("selected",!1),h.prop("selected",!0);for(var S=0;S<u.length;S++)t.setSelected(S,!1);t.setSelected(o,!0)}else if(v&&1==v){for(p.find("option:selected").prop("selected",!1),h.prop("selected",!0),S=0;S<g.length;S++)t.setSelected(u.index(g[S]),!1);t.setSelected(o,!0)}else{var w="string"==typeof t.options.maxOptionsText?[t.options.maxOptionsText,t.options.maxOptionsText]:t.options.maxOptionsText,x="function"==typeof w?w(y,v):w,T=x[0].replace("{n}",y),k=x[1].replace("{n}",v),E=e('<div class="notify"></div>');x[2]&&(T=T.replace("{var}",x[2][1<y?0:1]),k=k.replace("{var}",x[2][1<v?0:1])),h.prop("selected",!1),t.$menu.append(E),y&&b&&(E.append(e("<div>"+T+"</div>")),c=!1,t.$element.trigger("maxReached"+L)),v&&C&&(E.append(e("<div>"+k+"</div>")),c=!1,t.$element.trigger("maxReachedGrp"+L)),setTimeout(function(){t.setSelected(o,!1)},10),E.delay(750).fadeOut(300,function(){e(this).remove()})}}}else u.prop("selected",!1),h.prop("selected",!0),t.setSelected(o,!0);!t.multiple||t.multiple&&1===t.options.maxOptions?t.$button.trigger("focus"):t.options.liveSearch&&t.$searchbox.trigger("focus"),c&&(s!=f(t.$element[0])&&t.multiple||l!=t.$element.prop("selectedIndex")&&!t.multiple)&&(m=[o,h.prop("selected"),s],t.$element.triggerNative("change"))}}),this.$menu.on("click","li."+N.DISABLED+" a, ."+N.POPOVERHEADER+", ."+N.POPOVERHEADER+" :not(.close)",function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),t.options.liveSearch&&!e(i.target).hasClass("close")?t.$searchbox.trigger("focus"):t.$button.trigger("focus"))}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.trigger("focus"):t.$button.trigger("focus")}),this.$menu.on("click","."+N.POPOVERHEADER+" .close",function(){t.$button.trigger("click")}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){t.options.liveSearch?t.$searchbox.trigger("focus"):t.$button.trigger("focus"),i.preventDefault(),i.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll()}),this.$element.on({change:function(){t.render(),t.$element.trigger("changed"+L,m),m=null},focus:function(){t.options.mobile||t.$button.trigger("focus")}})},liveSearchListener:function(){var e=this,t=document.createElement("li");this.$button.on("click.bs.dropdown.data-api",function(){e.$searchbox.val()&&e.$searchbox.val("")}),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var i=e.$searchbox.val();if(e.selectpicker.search.map.newIndex={},e.selectpicker.search.map.originalIndex={},e.selectpicker.search.elements=[],e.selectpicker.search.data=[],i){var n=[],r=i.toUpperCase(),a={},o=[],s=e._searchStyle(),l=e.options.liveSearchNormalize;l&&(r=T(r)),e._$lisSelected=e.$menuInner.find(".selected");for(var c=0;c<e.selectpicker.main.data.length;c++){var u=e.selectpicker.main.data[c];a[c]||(a[c]=v(u,r,s,l)),a[c]&&void 0!==u.headerIndex&&-1===o.indexOf(u.headerIndex)&&(0<u.headerIndex&&(a[u.headerIndex-1]=!0,o.push(u.headerIndex-1)),a[u.headerIndex]=!0,o.push(u.headerIndex),a[u.lastIndex+1]=!0),a[c]&&"optgroup-label"!==u.type&&o.push(c)}c=0;for(var h=o.length;c<h;c++){var d=o[c],p=(u=e.selectpicker.main.data[d],e.selectpicker.main.data[o[c-1]]);("divider"!==u.type||"divider"===u.type&&p&&"divider"!==p.type&&h-1!==c)&&(e.selectpicker.search.data.push(u),n.push(e.selectpicker.main.elements[d]),u.hasOwnProperty("originalIndex")&&(e.selectpicker.search.map.newIndex[u.originalIndex]=n.length-1,e.selectpicker.search.map.originalIndex[n.length-1]=u.originalIndex))}e.activeIndex=void 0,e.noScroll=!0,e.$menuInner.scrollTop(0),e.selectpicker.search.elements=n,e.createView(!0),n.length||(t.className="no-results",t.innerHTML=e.options.noneResultsText.replace("{0}",'"'+B(i)+'"'),e.$menuInner[0].firstChild.appendChild(t))}else e.$menuInner.scrollTop(0),e.createView(!1)})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(e){return void 0!==e?(this.$element.val(e).trigger("changed"+L,m),this.render(),m=null,this.$element):this.$element.val()},changeAll:function(e){if(this.multiple){void 0===e&&(e=!0);var t=this.$element[0],i=t.options,n=0,r=0,a=f(t);t.classList.add("bs-select-hidden");for(var o=0,s=this.selectpicker.current.elements.length;o<s;o++){var l=i[this.selectpicker.current.map.originalIndex[o]];l&&!l.disabled&&"divider"!==this.selectpicker.current.data[o].type&&(l.selected&&n++,(l.selected=e)&&r++)}t.classList.remove("bs-select-hidden"),n!==r&&(this.setOptionStatus(),this.togglePlaceholder(),m=[null,null,a],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e){(e=e||window.event)&&e.stopPropagation(),this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(t){var i,n,r,a,o,s=e(this),l=s.hasClass("dropdown-toggle"),c=s.closest(l?".dropdown":R.MENU).data("this"),u=c.findLis(),h=!1,d=9===t.which&&!l&&!c.options.selectOnTab,p=U.test(t.which)||d,f=c.$menuInner[0].scrollTop,g=c.isVirtual(),m=!0===g?c.selectpicker.view.position0:0;if(!(n=c.$newElement.hasClass(N.SHOW))&&(p||48<=t.which&&t.which<=57||96<=t.which&&t.which<=105||65<=t.which&&t.which<=90)&&(c.$button.trigger("click.bs.dropdown.data-api"),c.options.liveSearch))c.$searchbox.trigger("focus");else{if(27===t.which&&n&&(t.preventDefault(),c.$button.trigger("click.bs.dropdown.data-api").trigger("focus")),p){if(!u.length)return;void 0===(i=!0===g?u.index(u.filter(".active")):c.selectpicker.current.map.newIndex[c.activeIndex])&&(i=-1),-1!==i&&((r=c.selectpicker.current.elements[i+m]).classList.remove("active"),r.firstChild&&r.firstChild.classList.remove("active")),38===t.which?(-1!==i&&i--,i+m<0&&(i+=u.length),c.selectpicker.view.canHighlight[i+m]||-1==(i=c.selectpicker.view.canHighlight.slice(0,i+m).lastIndexOf(!0)-m)&&(i=u.length-1)):(40===t.which||d)&&(++i+m>=c.selectpicker.view.canHighlight.length&&(i=0),c.selectpicker.view.canHighlight[i+m]||(i=i+1+c.selectpicker.view.canHighlight.slice(i+m+1).indexOf(!0))),t.preventDefault();var y=m+i;38===t.which?0===m&&i===u.length-1?(c.$menuInner[0].scrollTop=c.$menuInner[0].scrollHeight,y=c.selectpicker.current.elements.length-1):h=(o=(a=c.selectpicker.current.data[y]).position-a.height)<f:(40===t.which||d)&&(0===i?y=c.$menuInner[0].scrollTop=0:h=f<(o=(a=c.selectpicker.current.data[y]).position-c.sizeInfo.menuInnerHeight)),(r=c.selectpicker.current.elements[y])&&(r.classList.add("active"),r.firstChild&&r.firstChild.classList.add("active")),c.activeIndex=c.selectpicker.current.map.originalIndex[y],c.selectpicker.view.currentActive=r,h&&(c.$menuInner[0].scrollTop=o),c.options.liveSearch?c.$searchbox.trigger("focus"):s.trigger("focus")}else if(!s.is("input")&&!V.test(t.which)||32===t.which&&c.selectpicker.keydown.keyHistory){var b,C,S=[];t.preventDefault(),c.selectpicker.keydown.keyHistory+=_[t.which],c.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(c.selectpicker.keydown.resetKeyHistory.cancel),c.selectpicker.keydown.resetKeyHistory.cancel=c.selectpicker.keydown.resetKeyHistory.start(),/^(.)\1+$/.test(C=c.selectpicker.keydown.keyHistory)&&(C=C.charAt(0));for(var w=0;w<c.selectpicker.current.data.length;w++){var x=c.selectpicker.current.data[w];v(x,C,"startsWith",!0)&&c.selectpicker.view.canHighlight[w]&&(x.index=w,S.push(x.originalIndex))}if(S.length){var T=0;u.removeClass("active").find("a").removeClass("active"),1===C.length&&(-1===(T=S.indexOf(c.activeIndex))||T===S.length-1?T=0:T++),h=0<f-(a=c.selectpicker.current.data[b=c.selectpicker.current.map.newIndex[S[T]]]).position?(o=a.position-a.height,!0):(o=a.position-c.sizeInfo.menuInnerHeight,a.position>f+c.sizeInfo.menuInnerHeight),(r=c.selectpicker.current.elements[b]).classList.add("active"),r.firstChild&&r.firstChild.classList.add("active"),c.activeIndex=S[T],r.firstChild.focus(),h&&(c.$menuInner[0].scrollTop=o),s.trigger("focus")}}n&&(32===t.which&&!c.selectpicker.keydown.keyHistory||13===t.which||9===t.which&&c.options.selectOnTab)&&(32!==t.which&&t.preventDefault(),c.options.liveSearch&&32===t.which||(c.$menuInner.find(".active a").trigger("click",!0),s.trigger("focus"),c.options.liveSearch||(t.preventDefault(),e(document).data("spaceSelect",!0))))}},mobile:function(){this.$element[0].classList.add("mobile-device")},refresh:function(){var t=e.extend({},this.options,this.$element.data());this.options=t,this.selectpicker.main.map.newIndex={},this.selectpicker.main.map.originalIndex={},this.checkDisabled(),this.setStyle(),this.render(),this.createLi(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed"+L)},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(L).removeData("selectpicker").removeClass("bs-select-hidden selectpicker"),e(window).off(L+"."+this.selectId)}};var W=e.fn.selectpicker;e.fn.selectpicker=K,e.fn.selectpicker.Constructor=$,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=W,this},e(document).off("keydown.bs.dropdown.data-api").on("keydown"+L,'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',$.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',function(e){e.stopPropagation()}),e(window).on("load"+L+".data-api",function(){e(".selectpicker").each(function(){var t=e(this);K.call(t,t.data())})})}(e)},void 0===this&&void 0!==window&&window,n=[i(28)],void 0===(r=(function(e){return a(e)}).apply(t,n))||(e.exports=r)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){(function(){(function(){var e,t,i,n,r,a=function(e,t){return function(){return e.apply(t,arguments)}},o=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};t=function(){function e(){}return e.prototype.extend=function(e,t){var i;for(i in t)null==e[i]&&(e[i]=t[i]);return e},e.prototype.isMobile=function(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)},e.prototype.addEvent=function(e,t,i){return null!=e.addEventListener?e.addEventListener(t,i,!1):null!=e.attachEvent?e.attachEvent("on"+t,i):e[t]=i},e.prototype.removeEvent=function(e,t,i){return null!=e.removeEventListener?e.removeEventListener(t,i,!1):null!=e.detachEvent?e.detachEvent("on"+t,i):delete e[t]},e.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},e}(),i=this.WeakMap||this.MozWeakMap||(i=function(){function e(){this.keys=[],this.values=[]}return e.prototype.get=function(e){var t,i,n,r;for(t=i=0,n=(r=this.keys).length;n>i;t=++i)if(r[t]===e)return this.values[t]},e.prototype.set=function(e,t){var i,n,r,a;for(i=n=0,r=(a=this.keys).length;r>n;i=++n)if(a[i]===e)return void(this.values[i]=t);return this.keys.push(e),this.values.push(t)},e}()),e=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(e=function(){function e(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return e.notSupported=!0,e.prototype.observe=function(){},e}()),n=this.getComputedStyle||function(e){return this.getPropertyValue=function(t){var i;return"float"===t&&(t="styleFloat"),r.test(t)&&t.replace(r,function(e,t){return t.toUpperCase()}),(null!=(i=e.currentStyle)?i[t]:void 0)||null},this},r=/(\-([a-z]){1})/g,this.WOW=function(){function r(e){null==e&&(e={}),this.scrollCallback=a(this.scrollCallback,this),this.scrollHandler=a(this.scrollHandler,this),this.start=a(this.start,this),this.scrolled=!0,this.config=this.util().extend(e,this.defaults),this.animationNameCache=new i}return r.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null},r.prototype.init=function(){var e;return this.element=window.document.documentElement,"interactive"===(e=document.readyState)||"complete"===e?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},r.prototype.start=function(){var t,i,n;if(this.stopped=!1,this.boxes=(function(){var e,t,i,n;for(n=[],e=0,t=(i=this.element.querySelectorAll("."+this.config.boxClass)).length;t>e;e++)n.push(i[e]);return n}).call(this),this.all=(function(){var e,t,i,n;for(n=[],e=0,t=(i=this.boxes).length;t>e;e++)n.push(i[e]);return n}).call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(t=0,i=(n=this.boxes).length;i>t;t++)this.applyStyle(n[t],!0);return this.disabled()||(this.util().addEvent(window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new e(function(e){return function(t){var i,n,r,a;for(a=[],n=0,r=t.length;r>n;n++)i=t[n],a.push((function(){var e,t,n,r;for(r=[],e=0,t=(n=i.addedNodes||[]).length;t>e;e++)r.push(this.doSync(n[e]));return r}).call(e));return a}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},r.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},r.prototype.sync=function(){return e.notSupported?this.doSync(this.element):void 0},r.prototype.doSync=function(e){var t,i,n,r,a;if(null==e&&(e=this.element),1===e.nodeType){for(a=[],i=0,n=(r=(e=e.parentNode||e).querySelectorAll("."+this.config.boxClass)).length;n>i;i++)o.call(this.all,t=r[i])<0?(this.boxes.push(t),this.all.push(t),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(t,!0),a.push(this.scrolled=!0)):a.push(void 0);return a}},r.prototype.show=function(e){return this.applyStyle(e),e.className=e.className+" "+this.config.animateClass,null!=this.config.callback?this.config.callback(e):void 0},r.prototype.applyStyle=function(e,t){var i,n,r,a;return n=e.getAttribute("data-wow-duration"),i=e.getAttribute("data-wow-delay"),r=e.getAttribute("data-wow-iteration"),this.animate((a=this,function(){return a.customStyle(e,t,n,i,r)}))},r.prototype.animate="requestAnimationFrame"in window?function(e){return window.requestAnimationFrame(e)}:function(e){return e()},r.prototype.resetStyle=function(){var e,t,i,n;for(n=[],e=0,t=(i=this.boxes).length;t>e;e++)n.push(i[e].style.visibility="visible");return n},r.prototype.customStyle=function(e,t,i,n,r){return t&&this.cacheAnimationName(e),e.style.visibility=t?"hidden":"visible",i&&this.vendorSet(e.style,{animationDuration:i}),n&&this.vendorSet(e.style,{animationDelay:n}),r&&this.vendorSet(e.style,{animationIterationCount:r}),this.vendorSet(e.style,{animationName:t?"none":this.cachedAnimationName(e)}),e},r.prototype.vendors=["moz","webkit"],r.prototype.vendorSet=function(e,t){var i,n,r;for(i in r=[],t)e[""+i]=n=t[i],r.push((function(){var t,r,a,o;for(o=[],t=0,r=(a=this.vendors).length;r>t;t++)o.push(e[""+a[t]+i.charAt(0).toUpperCase()+i.substr(1)]=n);return o}).call(this));return r},r.prototype.vendorCSS=function(e,t){var i,r,a,o,s;for(i=(r=n(e)).getPropertyCSSValue(t),a=0,o=(s=this.vendors).length;o>a;a++)i=i||r.getPropertyCSSValue("-"+s[a]+"-"+t);return i},r.prototype.animationName=function(e){var t;try{t=this.vendorCSS(e,"animation-name").cssText}catch(i){t=n(e).getPropertyValue("animation-name")}return"none"===t?"":t},r.prototype.cacheAnimationName=function(e){return this.animationNameCache.set(e,this.animationName(e))},r.prototype.cachedAnimationName=function(e){return this.animationNameCache.get(e)},r.prototype.scrollHandler=function(){return this.scrolled=!0},r.prototype.scrollCallback=function(){var e;return!this.scrolled||(this.scrolled=!1,this.boxes=(function(){var t,i,n,r;for(r=[],t=0,i=(n=this.boxes).length;i>t;t++)(e=n[t])&&(this.isVisible(e)?this.show(e):r.push(e));return r}).call(this),this.boxes.length||this.config.live)?void 0:this.stop()},r.prototype.offsetTop=function(e){for(var t;void 0===e.offsetTop;)e=e.parentNode;for(t=e.offsetTop;e=e.offsetParent;)t+=e.offsetTop;return t},r.prototype.isVisible=function(e){var t,i,n;return t=e.getAttribute("data-wow-offset")||this.config.offset,(n=window.pageYOffset)+Math.min(this.element.clientHeight,this.util().innerHeight())-t>=(i=this.offsetTop(e))&&i+e.clientHeight>=n},r.prototype.util=function(){return null!=this._util?this._util:this._util=new t},r.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},r}()}).call(this)}).call(window)},function(e,t){},function(e,t,i){var n,r,a,o;a=function(e,t,i){"use strict";function n(e){for(var t=e.holder,i=e.option,n=i.matrix,r=i.margin,a=i.radius,o=['<ul class="patt-wrap" style="padding:'+r+'px">'],s=0,l=n[0]*n[1];l>s;s++)o.push('<li class="patt-circ" style="margin:'+r+"px; width : "+2*a+"px; height : "+2*a+"px; -webkit-border-radius: "+a+"px; -moz-border-radius: "+a+"px; border-radius: "+a+'px; "><div class="patt-dots"></div></li>');o.push("</ul>"),t.html(o.join("")).css({width:n[1]*(2*a+2*r)+2*r+"px",height:n[0]*(2*a+2*r)+2*r+"px"}),e.pattCircle=e.holder.find(".patt-circ")}function r(e,t,i,n){var r=t-e,a=n-i;return{length:Math.ceil(Math.sqrt(r*r+a*a)),angle:Math.round(180*Math.atan2(a,r)/Math.PI)}}function a(){}function o(t,i){var r=this,s=r.token=Math.random(),h=c[s]=new a,d=h.holder=e(t);if(0!==d.length){h.object=r;var p={onDraw:l},f=(i=i||{}).matrix;f&&f[0]*f[1]>9&&(p.delimiter=","),i=h.option=e.extend({},o.defaults,p,i),n(h),d.addClass("patt-holder"),"static"==d.css("position")&&d.css("position","relative"),d.on("touchstart mousedown",function(e){u.call(this,e,r)});var g=i.mapper;h.mapperFunc="object"==typeof g?function(e){return g[e]}:"function"==typeof g?g:l,h.option.mapper=null}}var s=t.document,l=function(){},c={},u=function(t,i){t.preventDefault();var n=c[i.token];if(!n.disabled){n.option.patternVisible||n.holder.addClass("patt-hidden");var r="touchstart"==t.type?"touchmove":"mousemove",a="touchstart"==t.type?"touchend":"mouseup";e(this).on(r+".pattern-move",function(e){h.call(this,e,i)}),e(s).one(a,function(){d.call(this,t,i)});var o=n.holder.find(".patt-wrap")[0].getBoundingClientRect();n.wrapTop=o.top,n.wrapLeft=o.left,i.reset()}},h=function(t,i){t.preventDefault();var n=c[i.token],a=n.option,o=n.pattCircle,s=n.patternAry,l=n.getIdxFromPoint(t.clientX||t.originalEvent.touches[0].clientX,t.clientY||t.originalEvent.touches[0].clientY),u=l.idx,h=n.mapperFunc(u)||u;if(s.length>0){var d=r(n.lineX1,l.x,n.lineY1,l.y);n.line.css({width:d.length+10+"px",transform:"rotate("+d.angle+"deg)"})}if(u&&(a.allowRepeat&&s[s.length-1]!==h||-1===s.indexOf(h))){var p=e(o[u-1]);if(n.lastPosObj)for(var f=n.lastPosObj,g=f.i,m=f.j,y=l.i-f.i>0?1:-1,v=l.j-f.j>0?1:-1,b=Math.abs(l.i-g),C=Math.abs(l.j-m);0===b&&C>1||0===C&&b>1||C==b&&C>1;){g=b?g+y:g,m=C?m+v:m,b=Math.abs(l.i-g),C=Math.abs(l.j-m);var S=(m-1)*a.matrix[1]+g,w=n.mapperFunc(S)||S;(a.allowRepeat||-1==s.indexOf(w))&&(n.addDirectionClass({i:g,j:m}),n.markPoint(e(o[w-1]),w),n.addLine({i:g,j:m}))}n.lastPosObj&&n.addDirectionClass(l),n.markPoint(p,h),n.addLine(l),n.lastPosObj=l}},d=function(e,t){e.preventDefault();var i=c[t.token],n=i.option,r=i.patternAry.join(n.delimiter);i.holder.off(".pattern-move").removeClass("patt-hidden"),r&&(n.onDraw(r),i.line.remove(),i.rightPattern&&(r==i.rightPattern?i.onSuccess():(i.onError(),t.error())))};return a.prototype={constructor:a,getIdxFromPoint:function(e,t){var i=this.option,n=i.matrix,r=e-this.wrapLeft,a=t-this.wrapTop,o=null,s=i.margin,l=2*i.radius+2*s,c=Math.ceil(r/l),u=Math.ceil(a/l);return c<=n[1]&&u<=n[0]&&r%l>2*s&&a%l>2*s&&(o=(u-1)*n[1]+c),{idx:o,i:c,j:u,x:r,y:a}},markPoint:function(e,t){e.addClass("hovered"),this.patternAry.push(t),this.lastElm=e},addLine:function(t){var i=this,n=i.option,a=n.lineOnMove,o=n.margin,s=n.radius,l=(t.i-1)*(2*o+2*s)+2*o+s,c=(t.j-1)*(2*o+2*s)+2*o+s;if(i.patternAry.length>1){var u=r(i.lineX1,l,i.lineY1,c);i.line.css({width:u.length+10+"px",transform:"rotate("+u.angle+"deg)"}),a||i.line.show()}var h=e('<div class="patt-lines" style="top:'+(c-5)+"px; left:"+(l-5)+'px"></div>');i.line=h,i.lineX1=l,i.lineY1=c,i.holder.append(h),a||i.line.hide()},addDirectionClass:function(e){var t=this.lastElm,i=this.line,n=this.lastPosObj,r=[];e.j-n.j>0?r.push("s"):e.j-n.j<0&&r.push("n"),e.i-n.i>0?r.push("e"):e.i-n.i<0&&r.push("w"),(r=r.join("-"))&&t.add(i).addClass(r+" dir")}},o.prototype={constructor:o,option:function(e,t){var r=c[this.token],a=r.option;return t===i?a[e]:(a[e]=t,void(("margin"==e||"matrix"==e||"radius"==e)&&n(r)))},getPattern:function(){var e=c[this.token];return(e.patternAry||[]).join(e.option.delimiter)},setPattern:function(e){var t=c[this.token],i=t.option,n=i.matrix,r=i.margin,a=i.radius;if(i.enableSetPattern){"string"==typeof e&&(e=e.split(i.delimiter)),this.reset(),t.wrapLeft=0,t.wrapTop=0;for(var o=0;o<e.length;o++){var s=e[o]-1,u=s%n[1],d=Math.floor(s/n[1]);h.call(null,{clientX:u*(2*r+2*a)+2*r+a,clientY:d*(2*r+2*a)+2*r+a,preventDefault:l},this)}}},enable:function(){c[this.token].disabled=!1},disable:function(){c[this.token].disabled=!0},reset:function(){var e=c[this.token];e.pattCircle.removeClass("hovered dir s n w e s-w s-e n-w n-e"),e.holder.find(".patt-lines").remove(),e.patternAry=[],e.lastPosObj=null,e.holder.removeClass("patt-error")},error:function(){c[this.token].holder.addClass("patt-error")},checkForPattern:function(e,t,i){var n=c[this.token];n.rightPattern=e,n.onSuccess=t||l,n.onError=i||l}},o.defaults={matrix:[3,3],margin:20,radius:25,patternVisible:!0,lineOnMove:!0,delimiter:"",enableSetPattern:!1,allowRepeat:!1},o},o=Function("return this")()||(0,eval)("this"),n=[i(28)],void 0===(r=(function(e){return o.PatternLock=a(e,o)}).apply(t,n))||(e.exports=r)},function(e,t){"use strict";var i,n;i="undefined"!=typeof window?window:this,n=function(e){var t,i,n,r,a,o,s=function(){var e=window,t=e.document,i="http://www.w3.org/2000/svg",n=e.navigator&&e.navigator.userAgent||"",r=t&&t.createElementNS&&!!t.createElementNS(i,"svg").createSVGRect,a=/(edge|msie|trident)/i.test(n)&&!window.opera,o=!r,s=/Firefox/.test(n),l=s&&parseInt(n.split("Firefox/")[1],10)<4;return e.Highcharts?e.Highcharts.error(16,!0):{product:"Highcharts",version:"5.0.14",deg2rad:2*Math.PI/360,doc:t,hasBidiBug:l,hasTouch:t&&void 0!==t.documentElement.ontouchstart,isMS:a,isWebKit:/AppleWebKit/.test(n),isFirefox:s,isTouchDevice:/(Mobile|Android|Windows Phone)/.test(n),SVG_NS:i,chartCount:0,seriesTypes:{},symbolSizes:{},svg:r,vml:o,win:e,marginNames:["plotTop","marginRight","marginBottom","plotLeft"],noop:function(){},charts:[]}}();!function(e){var t,i,n=[],r=e.charts,a=e.doc,o=e.win;e.error=function(t,i){var n=e.isNumber(t)?"Highcharts error #"+t+": www.highcharts.com/errors/"+t:t;if(i)throw new Error(n);o.console&&console.log(n)},e.Fx=function(e,t,i){this.options=t,this.elem=e,this.prop=i},e.Fx.prototype={dSetter:function(){var e,t=this.paths[0],i=this.paths[1],n=[],r=this.now,a=t.length;if(1===r)n=this.toD;else if(a===i.length&&r<1)for(;a--;)e=parseFloat(t[a]),n[a]=isNaN(e)?t[a]:r*parseFloat(i[a]-e)+e;else n=i;this.elem.attr("d",n,null,!0)},update:function(){var e=this.elem,t=this.prop,i=this.now,n=this.options.step;this[t+"Setter"]?this[t+"Setter"]():e.attr?e.element&&e.attr(t,i,null,!0):e.style[t]=i+this.unit,n&&n.call(e,i,this)},run:function(e,t,i){var r,a=this,o=function(e){return!o.stopped&&a.step(e)};this.startTime=+new Date,this.start=e,this.end=t,this.unit=i,this.now=this.start,this.pos=0,o.elem=this.elem,o.prop=this.prop,o()&&1===n.push(o)&&(o.timerId=setInterval(function(){for(r=0;r<n.length;r++)n[r]()||n.splice(r--,1);n.length||clearInterval(o.timerId)},13))},step:function(t){var i,n,r=+new Date,a=this.options,o=this.elem,s=a.complete,l=a.duration,c=a.curAnim;return o.attr&&!o.element?i=!1:t||r>=l+this.startTime?(this.now=this.end,this.pos=1,this.update(),c[this.prop]=!0,n=!0,e.objectEach(c,function(e){!0!==e&&(n=!1)}),n&&s&&s.call(o),i=!1):(this.pos=a.easing((r-this.startTime)/l),this.now=this.start+(this.end-this.start)*this.pos,this.update(),i=!0),i},initPath:function(t,i,n){var r,a,o,s,l,c=t.startX,u=t.endX,h=(i=i||"").indexOf("C")>-1,d=h?7:3,p=i.split(" "),f=n.slice(),g=t.isArea,m=g?2:1;function y(e){var t,i;for(s=e.length;s--;)t="M"===e[s]||"L"===e[s],i=/[a-zA-Z]/.test(e[s+3]),t&&i&&e.splice(s+1,0,e[s+1],e[s+2],e[s+1],e[s+2])}function v(e,t,i){[].splice.apply(e,[i,0].concat(t))}function b(e,t){for(;e.length<a;)e[0]=t[a-e.length],v(e,e.slice(0,d),0),g&&(v(e,e.slice(e.length-d),e.length),s--);e[0]="M"}function C(e,t){for(var i=(a-e.length)/d;i>0&&i--;)(o=e.slice().splice(e.length/m-d,d*m))[0]=t[a-d-i*d],h&&(o[d-6]=o[d-2],o[d-5]=o[d-1]),v(e,o,e.length/m),g&&i--}if(h&&(y(p),y(f)),c&&u){for(s=0;s<c.length;s++){if(c[s]===u[0]){r=s;break}if(c[0]===u[u.length-c.length+s]){r=s,l=!0;break}}void 0===r&&(p=[])}return p.length&&e.isNumber(r)&&(a=f.length+r*m*d,l?(b(p,f),C(f,p)):(b(f,p),C(p,f))),[p,f]}},e.Fx.prototype.fillSetter=e.Fx.prototype.strokeSetter=function(){this.elem.attr(this.prop,e.color(this.start).tweenTo(e.color(this.end),this.pos),null,!0)},e.extend=function(e,t){var i;for(i in e||(e={}),t)e[i]=t[i];return e},e.merge=function(){var t,i,n=arguments,r={},a=function(t,i){return"object"!=typeof t&&(t={}),e.objectEach(i,function(n,r){t[r]=!e.isObject(n,!0)||e.isClass(n)||e.isDOMElement(n)?i[r]:a(t[r]||{},n)}),t};for(!0===n[0]&&(r=n[1],n=Array.prototype.slice.call(n,2)),i=n.length,t=0;t<i;t++)r=a(r,n[t]);return r},e.pInt=function(e,t){return parseInt(e,t||10)},e.isString=function(e){return"string"==typeof e},e.isArray=function(e){var t=Object.prototype.toString.call(e);return"[object Array]"===t||"[object Array Iterator]"===t},e.isObject=function(t,i){return!(!t||"object"!=typeof t||i&&e.isArray(t))},e.isDOMElement=function(t){return e.isObject(t)&&"number"==typeof t.nodeType},e.isClass=function(t){var i=t&&t.constructor;return!(!e.isObject(t,!0)||e.isDOMElement(t)||!i||!i.name||"Object"===i.name)},e.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.erase=function(e,t){for(var i=e.length;i--;)if(e[i]===t){e.splice(i,1);break}},e.defined=function(e){return void 0!==e&&null!==e},e.attr=function(t,i,n){var r;return e.isString(i)?e.defined(n)?t.setAttribute(i,n):t&&t.getAttribute&&(r=t.getAttribute(i)):e.defined(i)&&e.isObject(i)&&e.objectEach(i,function(e,i){t.setAttribute(i,e)}),r},e.splat=function(t){return e.isArray(t)?t:[t]},e.syncTimeout=function(e,t,i){if(t)return setTimeout(e,t,i);e.call(0,i)},e.pick=function(){var e,t,i=arguments,n=i.length;for(e=0;e<n;e++)if(void 0!==(t=i[e])&&null!==t)return t},e.css=function(t,i){e.isMS&&!e.svg&&i&&void 0!==i.opacity&&(i.filter="alpha(opacity="+100*i.opacity+")"),e.extend(t.style,i)},e.createElement=function(t,i,n,r,o){var s=a.createElement(t),l=e.css;return i&&e.extend(s,i),o&&l(s,{padding:0,border:"none",margin:0}),n&&l(s,n),r&&r.appendChild(s),s},e.extendClass=function(t,i){var n=function(){};return n.prototype=new t,e.extend(n.prototype,i),n},e.pad=function(e,t,i){return new Array((t||2)+1-String(e).length).join(i||0)+e},e.relativeLength=function(e,t,i){return/%$/.test(e)?t*parseFloat(e)/100+(i||0):parseFloat(e)},e.wrap=function(e,t,i){var n=e[t];e[t]=function(){var e,t=Array.prototype.slice.call(arguments),r=arguments,a=this;return a.proceed=function(){n.apply(a,arguments.length?arguments:r)},t.unshift(n),e=i.apply(this,t),a.proceed=null,e}},e.getTZOffset=function(t){var i=e.Date;return 6e4*(i.hcGetTimezoneOffset&&i.hcGetTimezoneOffset(t)||i.hcTimezoneOffset||0)},e.dateFormat=function(t,i,n){if(!e.defined(i)||isNaN(i))return e.defaultOptions.lang.invalidDate||"";t=e.pick(t,"%Y-%m-%d %H:%M:%S");var r=e.Date,a=new r(i-e.getTZOffset(i)),o=a[r.hcGetHours](),s=a[r.hcGetDay](),l=a[r.hcGetDate](),c=a[r.hcGetMonth](),u=a[r.hcGetFullYear](),h=e.defaultOptions.lang,d=h.weekdays,p=h.shortWeekdays,f=e.pad,g=e.extend({a:p?p[s]:d[s].substr(0,3),A:d[s],d:f(l),e:f(l,2," "),w:s,b:h.shortMonths[c],B:h.months[c],m:f(c+1),y:u.toString().substr(2,2),Y:u,H:f(o),k:o,I:f(o%12||12),l:o%12||12,M:f(a[r.hcGetMinutes]()),p:o<12?"AM":"PM",P:o<12?"am":"pm",S:f(a.getSeconds()),L:f(Math.round(i%1e3),3)},e.dateFormats);return e.objectEach(g,function(e,n){for(;-1!==t.indexOf("%"+n);)t=t.replace("%"+n,"function"==typeof e?e(i):e)}),n?t.substr(0,1).toUpperCase()+t.substr(1):t},e.formatSingle=function(t,i){var n,r=e.defaultOptions.lang;return/f$/.test(t)?(n=(n=t.match(/\.([0-9])/))?n[1]:-1,null!==i&&(i=e.numberFormat(i,n,r.decimalPoint,t.indexOf(",")>-1?r.thousandsSep:""))):i=e.dateFormat(t,i),i},e.format=function(t,i){for(var n,r,a,o,s,l,c,u="{",h=!1,d=[];t&&-1!==(c=t.indexOf(u));){if(n=t.slice(0,c),h){for(s=(a=(r=n.split(":")).shift().split(".")).length,l=i,o=0;o<s;o++)l=l[a[o]];r.length&&(l=e.formatSingle(r.join(":"),l)),d.push(l)}else d.push(n);t=t.slice(c+1),u=(h=!h)?"}":"{"}return d.push(t),d.join("")},e.getMagnitude=function(e){return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))},e.normalizeTickInterval=function(t,i,n,r,a){var o,s,l=t;for(o=t/(n=e.pick(n,1)),i||(i=a?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===r&&(1===n?i=e.grep(i,function(e){return e%1==0}):n<=.1&&(i=[1/n]))),s=0;s<i.length&&(l=i[s],!(a&&l*n>=t||!a&&o<=(i[s]+(i[s+1]||i[s]))/2));s++);return e.correctFloat(l*n,-Math.round(Math.log(.001)/Math.LN10))},e.stableSort=function(e,t){var i,n,r=e.length;for(n=0;n<r;n++)e[n].safeI=n;for(e.sort(function(e,n){return 0===(i=t(e,n))?e.safeI-n.safeI:i}),n=0;n<r;n++)delete e[n].safeI},e.arrayMin=function(e){for(var t=e.length,i=e[0];t--;)e[t]<i&&(i=e[t]);return i},e.arrayMax=function(e){for(var t=e.length,i=e[0];t--;)e[t]>i&&(i=e[t]);return i},e.destroyObjectProperties=function(t,i){e.objectEach(t,function(e,n){e&&e!==i&&e.destroy&&e.destroy(),delete t[n]})},e.discardElement=function(t){var i=e.garbageBin;i||(i=e.createElement("div")),t&&i.appendChild(t),i.innerHTML=""},e.correctFloat=function(e,t){return parseFloat(e.toPrecision(t||14))},e.setAnimation=function(t,i){i.renderer.globalAnimation=e.pick(t,i.options.chart.animation,!0)},e.animObject=function(t){return e.isObject(t)?e.merge(t):{duration:0}},e.timeUnits={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},e.numberFormat=function(t,i,n,r){i=+i;var a,o,s,l,c=e.defaultOptions.lang,u=((t=+t||0).toString().split(".")[1]||"").split("e")[0].length,h=t.toString().split("e");return-1===i?i=Math.min(u,20):e.isNumber(i)||(i=2),l=(Math.abs(h[1]?h[0]:t)+Math.pow(10,-Math.max(i,u)-1)).toFixed(i),o=(a=String(e.pInt(l))).length>3?a.length%3:0,n=e.pick(n,c.decimalPoint),r=e.pick(r,c.thousandsSep),s=t<0?"-":"",s+=o?a.substr(0,o)+r:"",s+=a.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+r),i&&(s+=n+l.slice(-i)),h[1]&&(s+="e"+h[1]),s},Math.easeInOutSine=function(e){return-.5*(Math.cos(Math.PI*e)-1)},e.getStyle=function(t,i,n){var r;return"width"===i?Math.min(t.offsetWidth,t.scrollWidth)-e.getStyle(t,"padding-left")-e.getStyle(t,"padding-right"):"height"===i?Math.min(t.offsetHeight,t.scrollHeight)-e.getStyle(t,"padding-top")-e.getStyle(t,"padding-bottom"):((r=o.getComputedStyle(t,void 0))&&(r=r.getPropertyValue(i),e.pick(n,!0)&&(r=e.pInt(r))),r)},e.inArray=function(e,t){return t.indexOf?t.indexOf(e):[].indexOf.call(t,e)},e.grep=function(e,t){return[].filter.call(e,t)},e.find=function(e,t){return[].find.call(e,t)},e.map=function(e,t){for(var i=[],n=0,r=e.length;n<r;n++)i[n]=t.call(e[n],e[n],n,e);return i},e.offset=function(e){var t=a.documentElement,i=e.getBoundingClientRect();return{top:i.top+(o.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(o.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}},e.stop=function(e,t){for(var i=n.length;i--;)n[i].elem!==e||t&&t!==n[i].prop||(n[i].stopped=!0)},e.each=function(e,t,i){return Array.prototype.forEach.call(e,t,i)},e.objectEach=function(e,t,i){for(var n in e)e.hasOwnProperty(n)&&t.call(i,e[n],n,e)},e.addEvent=function(t,i,n){var r=t.hcEvents=t.hcEvents||{};function a(e){e.target=e.srcElement||o,n.call(t,e)}return t.addEventListener?t.addEventListener(i,n,!1):t.attachEvent&&(t.hcEventsIE||(t.hcEventsIE={}),n.hcGetKey||(n.hcGetKey=e.uniqueKey()),t.hcEventsIE[n.hcGetKey]=a,t.attachEvent("on"+i,a)),r[i]||(r[i]=[]),r[i].push(n),function(){e.removeEvent(t,i,n)}},e.removeEvent=function(t,i,n){var r,a,o=t.hcEvents;function s(e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.attachEvent&&t.detachEvent("on"+e,i=t.hcEventsIE[i.hcGetKey])}function l(){var n,r;t.nodeName&&(i?(n={})[i]=!0:n=o,e.objectEach(n,function(e,t){if(o[t])for(r=o[t].length;r--;)s(t,o[t][r])}))}o&&(i?(r=o[i]||[],n?((a=e.inArray(n,r))>-1&&(r.splice(a,1),o[i]=r),s(i,n)):(l(),o[i]=[])):(l(),t.hcEvents={}))},e.fireEvent=function(t,i,n,r){var o,s,l,c,u,h=t.hcEvents;if(n=n||{},a.createEvent&&(t.dispatchEvent||t.fireEvent))(o=a.createEvent("Events")).initEvent(i,!0,!0),e.extend(o,n),t.dispatchEvent?t.dispatchEvent(o):t.fireEvent(i,o);else if(h)for(l=(s=h[i]||[]).length,n.target||e.extend(n,{preventDefault:function(){n.defaultPrevented=!0},target:t,type:i}),c=0;c<l;c++)(u=s[c])&&!1===u.call(t,n)&&n.preventDefault();r&&!n.defaultPrevented&&r(n)},e.animate=function(t,i,n){var r,a,o,s,l="";e.isObject(n)||(n={duration:(s=arguments)[2],easing:s[3],complete:s[4]}),e.isNumber(n.duration)||(n.duration=400),n.easing="function"==typeof n.easing?n.easing:Math[n.easing]||Math.easeInOutSine,n.curAnim=e.merge(i),e.objectEach(i,function(s,c){e.stop(t,c),o=new e.Fx(t,n,c),a=null,"d"===c?(o.paths=o.initPath(t,t.d,i.d),o.toD=i.d,r=0,a=1):t.attr?r=t.attr(c):(r=parseFloat(e.getStyle(t,c))||0,"opacity"!==c&&(l="px")),a||(a=s),a&&a.match&&a.match("px")&&(a=a.replace(/px/g,"")),o.run(r,a,l)})},e.seriesType=function(t,i,n,r,a){var o=e.getOptions(),s=e.seriesTypes;return o.plotOptions[t]=e.merge(o.plotOptions[i],n),s[t]=e.extendClass(s[i]||function(){},r),s[t].prototype.type=t,a&&(s[t].prototype.pointClass=e.extendClass(e.Point,a)),s[t]},e.uniqueKey=(t=Math.random().toString(36).substring(2,9),i=0,function(){return"highcharts-"+t+"-"+i++}),o.jQuery&&(o.jQuery.fn.highcharts=function(){var t=[].slice.call(arguments);if(this[0])return t[0]?(new(e[e.isString(t[0])?t.shift():"Chart"])(this[0],t[0],t[1]),this):r[e.attr(this[0],"data-highcharts-chart")]}),a&&!a.defaultView&&(e.getStyle=function(t,i){var n,r={width:"clientWidth",height:"clientHeight"}[i];return t.style[i]?e.pInt(t.style[i]):("opacity"===i&&(i="filter"),r?(t.style.zoom=1,Math.max(t[r]-2*e.getStyle(t,"padding"),0)):(n=t.currentStyle[i.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})],"filter"===i&&(n=n.replace(/alpha\(opacity=([0-9]+)\)/,function(e,t){return t/100})),""===n?1:e.pInt(n)))}),Array.prototype.forEach||(e.each=function(e,t,i){for(var n=0,r=e.length;n<r;n++)if(!1===t.call(i,e[n],n,e))return n}),Array.prototype.indexOf||(e.inArray=function(e,t){var i,n=0;if(t)for(i=t.length;n<i;n++)if(t[n]===e)return n;return-1}),Array.prototype.filter||(e.grep=function(e,t){for(var i=[],n=0,r=e.length;n<r;n++)t(e[n],n)&&i.push(e[n]);return i}),Array.prototype.find||(e.find=function(e,t){var i,n=e.length;for(i=0;i<n;i++)if(t(e[i],i))return e[i]})}(s),i=(t=s).each,n=t.isNumber,r=t.map,a=t.merge,o=t.pInt,t.Color=function(e){if(!(this instanceof t.Color))return new t.Color(e);this.init(e)},t.Color.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(e){return[o(e[1]),o(e[2]),o(e[3]),parseFloat(e[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(e){return[o(e[1]),o(e[2]),o(e[3]),1]}}],names:{none:"rgba(255,255,255,0)",white:"#ffffff",black:"#000000"},init:function(e){var i,n,a,o,s;if(this.input=e=this.names[e&&e.toLowerCase?e.toLowerCase():""]||e,e&&e.stops)this.stops=r(e.stops,function(e){return new t.Color(e[1])});else if(e&&"#"===e.charAt()&&(s=e.length,e=parseInt(e.substr(1),16),7===s?n=[(16711680&e)>>16,(65280&e)>>8,255&e,1]:4===s&&(n=[(3840&e)>>4|(3840&e)>>8,(240&e)>>4|240&e,(15&e)<<4|15&e,1])),!n)for(a=this.parsers.length;a--&&!n;)(i=(o=this.parsers[a]).regex.exec(e))&&(n=o.parse(i));this.rgba=n||[]},get:function(e){var t,r=this.input,o=this.rgba;return this.stops?((t=a(r)).stops=[].concat(t.stops),i(this.stops,function(i,n){t.stops[n]=[t.stops[n][0],i.get(e)]})):t=o&&n(o[0])?"rgb"===e||!e&&1===o[3]?"rgb("+o[0]+","+o[1]+","+o[2]+")":"a"===e?o[3]:"rgba("+o.join(",")+")":r,t},brighten:function(e){var t,r=this.rgba;if(this.stops)i(this.stops,function(t){t.brighten(e)});else if(n(e)&&0!==e)for(t=0;t<3;t++)r[t]+=o(255*e),r[t]<0&&(r[t]=0),r[t]>255&&(r[t]=255);return this},setOpacity:function(e){return this.rgba[3]=e,this},tweenTo:function(e,t){var i,n,r=this;return e.rgba.length?(r=r.rgba,n=((i=1!==(e=e.rgba)[3]||1!==r[3])?"rgba(":"rgb(")+Math.round(e[0]+(r[0]-e[0])*(1-t))+","+Math.round(e[1]+(r[1]-e[1])*(1-t))+","+Math.round(e[2]+(r[2]-e[2])*(1-t))+(i?","+(e[3]+(r[3]-e[3])*(1-t)):"")+")"):n=e.input||"none",n}},t.color=function(e){return new t.Color(e)},function(e){var t,i,n=e.addEvent,r=e.animate,a=e.attr,o=e.charts,s=e.color,l=e.css,c=e.createElement,u=e.defined,h=e.deg2rad,d=e.destroyObjectProperties,p=e.doc,f=e.each,g=e.extend,m=e.erase,y=e.grep,v=e.hasTouch,b=e.inArray,C=e.isArray,S=e.isFirefox,w=e.isMS,x=e.isObject,T=e.isString,k=e.isWebKit,E=e.merge,A=e.noop,I=e.objectEach,D=e.pick,B=e.pInt,_=e.removeEvent,M=e.stop,P=e.svg,L=e.SVG_NS,N=e.symbolSizes,R=e.win;t=e.SVGElement=function(){return this},g(t.prototype,{opacity:1,SVG_NS:L,textProps:["direction","fontSize","fontWeight","fontFamily","fontStyle","color","lineHeight","width","textAlign","textDecoration","textOverflow","textOutline"],init:function(e,t){this.element="span"===t?c(t):p.createElementNS(this.SVG_NS,t),this.renderer=e},animate:function(t,i,n){var a=e.animObject(D(i,this.renderer.globalAnimation,!0));return 0!==a.duration?(n&&(a.complete=n),r(this,t,a)):(this.attr(t,null,n),a.step&&a.step.call(this)),this},colorGradient:function(t,i,n){var r,a,o,s,l,c,h,d,p,g,m,y,v=this.renderer,b=[];t.radialGradient?a="radialGradient":t.linearGradient&&(a="linearGradient"),a&&(l=v.gradients,h=t.stops,g=n.radialReference,C(o=t[a])&&(t[a]=o={x1:o[0],y1:o[1],x2:o[2],y2:o[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===a&&g&&!u(o.gradientUnits)&&(o=E(o,v.getRadialAttr(g,s=o),{gradientUnits:"userSpaceOnUse"})),I(o,function(e,t){"id"!==t&&b.push(t,e)}),I(h,function(e){b.push(e)}),l[b=b.join(",")]?m=l[b].attr("id"):(o.id=m=e.uniqueKey(),l[b]=c=v.createElement(a).attr(o).add(v.defs),c.radAttr=s,c.stops=[],f(h,function(t){var i;0===t[1].indexOf("rgba")?(r=e.color(t[1]),d=r.get("rgb"),p=r.get("a")):(d=t[1],p=1),i=v.createElement("stop").attr({offset:t[0],"stop-color":d,"stop-opacity":p}).add(c),c.stops.push(i)})),n.setAttribute(i,y="url("+v.url+"#"+m+")"),n.gradient=b,t.toString=function(){return y})},applyTextOutline:function(t){var i,n,r,o,s,l,c=this.element;if(-1!==t.indexOf("contrast")&&(t=t.replace(/contrast/g,this.renderer.getContrast(c.style.fill))),t=t.split(" "),r=t[t.length-1],(o=t[0])&&"none"!==o&&e.svg){for(this.fakeTS=!0,i=[].slice.call(c.getElementsByTagName("tspan")),this.ySetter=this.xSetter,o=o.replace(/(^[\d\.]+)(.*?)$/g,function(e,t,i){return 2*t+i}),l=i.length;l--;)"highcharts-text-outline"===(n=i[l]).getAttribute("class")&&m(i,c.removeChild(n));s=c.firstChild,f(i,function(e,t){var i;0===t&&(e.setAttribute("x",c.getAttribute("x")),t=c.getAttribute("y"),e.setAttribute("y",t||0),null===t&&c.setAttribute("y",0)),i=e.cloneNode(1),a(i,{class:"highcharts-text-outline",fill:r,stroke:r,"stroke-width":o,"stroke-linejoin":"round"}),c.insertBefore(i,s)})}},attr:function(e,t,i,n){var r,a,o,s,l=this.element,c=this;return"string"==typeof e&&void 0!==t&&(r=e,(e={})[r]=t),"string"==typeof e?c=(this[e+"Getter"]||this._defaultGetter).call(this,e,l):(I(e,function(t,i){o=!1,n||M(this,i),this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)$/.test(i)&&(a||(this.symbolAttr(e),a=!0),o=!0),!this.rotation||"x"!==i&&"y"!==i||(this.doTransform=!0),o||((s=this[i+"Setter"]||this._defaultSetter).call(this,t,i,l),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(i)&&this.updateShadows(i,t,s))},this),this.afterSetters()),i&&i(),c},afterSetters:function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)},updateShadows:function(e,t,i){for(var n=this.shadows,r=n.length;r--;)i.call(n[r],"height"===e?Math.max(t-(n[r].cutHeight||0),0):"d"===e?this.d:t,e,n[r])},addClass:function(e,t){var i=this.attr("class")||"";return-1===i.indexOf(e)&&(t||(e=(i+(i?" ":"")+e).replace("  "," ")),this.attr("class",e)),this},hasClass:function(e){return-1!==b(e,(this.attr("class")||"").split(" "))},removeClass:function(e){return this.attr("class",(this.attr("class")||"").replace(e,""))},symbolAttr:function(e){var t=this;f(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(i){t[i]=D(e[i],t[i])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":"none")},crisp:function(e,t){var i,n=this,r={};return t=t||e.strokeWidth||0,i=Math.round(t)%2/2,e.x=Math.floor(e.x||n.x||0)+i,e.y=Math.floor(e.y||n.y||0)+i,e.width=Math.floor((e.width||n.width||0)-2*i),e.height=Math.floor((e.height||n.height||0)-2*i),u(e.strokeWidth)&&(e.strokeWidth=t),I(e,function(e,t){n[t]!==e&&(n[t]=r[t]=e)}),r},css:function(e){var t,i,n=this.styles,r={},o=this.element,s="",c=!n,u=["textOutline","textOverflow","width"];return e&&e.color&&(e.fill=e.color),n&&I(e,function(e,t){e!==n[t]&&(r[t]=e,c=!0)}),c&&(n&&(e=g(n,r)),t=this.textWidth=e&&e.width&&"auto"!==e.width&&"text"===o.nodeName.toLowerCase()&&B(e.width),this.styles=e,t&&!P&&this.renderer.forExport&&delete e.width,w&&!P?l(this.element,e):(i=function(e,t){return"-"+t.toLowerCase()},I(e,function(e,t){-1===b(t,u)&&(s+=t.replace(/([A-Z])/g,i)+":"+e+";")}),s&&a(o,"style",s)),this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),e&&e.textOutline&&this.applyTextOutline(e.textOutline))),this},strokeWidth:function(){return this["stroke-width"]||0},on:function(e,t){var i=this,n=i.element;return v&&"click"===e?(n.ontouchstart=function(e){i.touchEventFired=Date.now(),e.preventDefault(),t.call(n,e)},n.onclick=function(e){(-1===R.navigator.userAgent.indexOf("Android")||Date.now()-(i.touchEventFired||0)>1100)&&t.call(n,e)}):n["on"+e]=t,this},setRadialReference:function(e){var t=this.renderer.gradients[this.element.gradient];return this.element.radialReference=e,t&&t.radAttr&&t.animate(this.renderer.getRadialAttr(e,t.radAttr)),this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(e){return this.inverted=e,this.updateTransform(),this},updateTransform:function(){var e,t=this.translateX||0,i=this.translateY||0,n=this.scaleX,r=this.scaleY,a=this.inverted,o=this.rotation,s=this.element;a&&(t+=this.width,i+=this.height),e=["translate("+t+","+i+")"],a?e.push("rotate(90) scale(-1,1)"):o&&e.push("rotate("+o+" "+(s.getAttribute("x")||0)+" "+(s.getAttribute("y")||0)+")"),(u(n)||u(r))&&e.push("scale("+D(n,1)+" "+D(r,1)+")"),e.length&&s.setAttribute("transform",e.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,i){var n,r,a,o,s,l,c,u={},h=this.renderer,d=h.alignedObjects;return e?(this.alignOptions=e,this.alignByTranslate=t,i&&!T(i)||(this.alignTo=s=i||"renderer",m(d,this),d.push(this),i=null)):(e=this.alignOptions,t=this.alignByTranslate,s=this.alignTo),i=D(i,h[s],h),n=e.align,r=e.verticalAlign,a=(i.x||0)+(e.x||0),o=(i.y||0)+(e.y||0),"right"===n?l=1:"center"===n&&(l=2),l&&(a+=(i.width-(e.width||0))/l),u[t?"translateX":"x"]=Math.round(a),"bottom"===r?c=1:"middle"===r&&(c=2),c&&(o+=(i.height-(e.height||0))/c),u[t?"translateY":"y"]=Math.round(o),this[this.placed?"animate":"attr"](u),this.placed=!0,this.alignAttr=u,this},getBBox:function(e,t){var i,n,r,a,o,s,l,c,u=this.renderer,d=this.element,p=this.styles,m=this.textStr,y=u.cache,v=u.cacheKeys;if(o=(a=D(t,this.rotation))*h,s=p&&p.fontSize,void 0!==m&&(-1===(c=m.toString()).indexOf("<")&&(c=c.replace(/[0-9]/g,"0")),c+=["",a||0,s,p&&p.width,p&&p.textOverflow].join(",")),c&&!e&&(i=y[c]),!i){if(d.namespaceURI===this.SVG_NS||u.forExport){try{(l=this.fakeTS&&function(e){f(d.querySelectorAll(".highcharts-text-outline"),function(t){t.style.display=e})})&&l("none"),i=d.getBBox?g({},d.getBBox()):{width:d.offsetWidth,height:d.offsetHeight},l&&l("")}catch(e){}(!i||i.width<0)&&(i={width:0,height:0})}else i=this.htmlGetBBox();if(u.isSVG&&(n=i.width,r=i.height,p&&"11px"===p.fontSize&&17===Math.round(r)&&(i.height=r=14),a&&(i.width=Math.abs(r*Math.sin(o))+Math.abs(n*Math.cos(o)),i.height=Math.abs(r*Math.cos(o))+Math.abs(n*Math.sin(o)))),c&&i.height>0){for(;v.length>250;)delete y[v.shift()];y[c]||v.push(c),y[c]=i}}return i},show:function(e){return this.attr({visibility:e?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(e){var t=this;t.animate({opacity:0},{duration:e||0,complete:function(){t.attr({y:-9999})}})},add:function(e){var t,i=this.renderer,n=this.element;return e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,void 0!==this.textStr&&i.buildText(this),this.added=!0,(!e||e.handleZ||this.zIndex)&&(t=this.zIndexSetter()),t||(e?e.element:i.box).appendChild(n),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e,t,i=this,n=i.element||{},r=i.renderer.isSVG&&"SPAN"===n.nodeName&&i.parentGroup,a=n.ownerSVGElement;if(n.onclick=n.onmouseout=n.onmouseover=n.onmousemove=n.point=null,M(i),i.clipPath&&a&&(f(a.querySelectorAll("[clip-path]"),function(e){e.getAttribute("clip-path").indexOf(i.clipPath.element.id+")")>-1&&e.removeAttribute("clip-path")}),i.clipPath=i.clipPath.destroy()),i.stops){for(t=0;t<i.stops.length;t++)i.stops[t]=i.stops[t].destroy();i.stops=null}for(i.safeRemoveChild(n),i.destroyShadows();r&&r.div&&0===r.div.childNodes.length;)e=r.parentGroup,i.safeRemoveChild(r.div),delete r.div,r=e;return i.alignTo&&m(i.renderer.alignedObjects,i),I(i,function(e,t){delete i[t]}),null},shadow:function(e,t,i){var n,r,o,s,l,c,u=[],h=this.element;if(e){if(!this.shadows){for(s=D(e.width,3),l=(e.opacity||.15)/s,c=this.parentInverted?"(-1,-1)":"("+D(e.offsetX,1)+", "+D(e.offsetY,1)+")",n=1;n<=s;n++)r=h.cloneNode(0),o=2*s+1-2*n,a(r,{isShadow:"true",stroke:e.color||"#000000","stroke-opacity":l*n,"stroke-width":o,transform:"translate"+c,fill:"none"}),i&&(a(r,"height",Math.max(a(r,"height")-o,0)),r.cutHeight=o),t?t.element.appendChild(r):h.parentNode.insertBefore(r,h),u.push(r);this.shadows=u}}else this.destroyShadows();return this},destroyShadows:function(){f(this.shadows||[],function(e){this.safeRemoveChild(e)},this),this.shadows=void 0},xGetter:function(e){return"circle"===this.element.nodeName&&("x"===e?e="cx":"y"===e&&(e="cy")),this._defaultGetter(e)},_defaultGetter:function(e){var t=D(this[e],this.element?this.element.getAttribute(e):null,0);return/^[\-0-9\.]+$/.test(t)&&(t=parseFloat(t)),t},dSetter:function(e,t,i){e&&e.join&&(e=e.join(" ")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),this[t]!==e&&(i.setAttribute(t,e),this[t]=e)},dashstyleSetter:function(e){var t,i=this["stroke-width"];if("inherit"===i&&(i=1),e=e&&e.toLowerCase()){for(t=(e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace("8-4dash","8,4,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",")).length;t--;)e[t]=B(e[t])*i;e=e.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",e)}},alignSetter:function(e){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[e])},opacitySetter:function(e,t,i){this[t]=e,i.setAttribute(t,e)},titleSetter:function(e){var t=this.element.getElementsByTagName("title")[0];t||(t=p.createElementNS(this.SVG_NS,"title"),this.element.appendChild(t)),t.firstChild&&t.removeChild(t.firstChild),t.appendChild(p.createTextNode(String(D(e),"").replace(/<[^>]*>/g,"")))},textSetter:function(e){e!==this.textStr&&(delete this.bBox,this.textStr=e,this.added&&this.renderer.buildText(this))},fillSetter:function(e,t,i){"string"==typeof e?i.setAttribute(t,e):e&&this.colorGradient(e,t,i)},visibilitySetter:function(e,t,i){"inherit"===e?i.removeAttribute(t):this[t]!==e&&i.setAttribute(t,e),this[t]=e},zIndexSetter:function(e,t){var i,n,r,a,o,s=this.renderer,l=this.parentGroup,c=(l||s).element||s.box,h=this.element,d=this.added;if(u(e)&&(h.zIndex=e,this[t]===(e=+e)&&(d=!1),this[t]=e),d){for((e=this.zIndex)&&l&&(l.handleZ=!0),i=c.childNodes,o=0;o<i.length&&!a;o++)r=(n=i[o]).zIndex,n!==h&&(B(r)>e||!u(e)&&u(r)||e<0&&!u(r)&&c!==s.box)&&(c.insertBefore(h,n),a=!0);a||c.appendChild(h)}return a},_defaultSetter:function(e,t,i){i.setAttribute(t,e)}}),t.prototype.yGetter=t.prototype.xGetter,t.prototype.translateXSetter=t.prototype.translateYSetter=t.prototype.rotationSetter=t.prototype.verticalAlignSetter=t.prototype.scaleXSetter=t.prototype.scaleYSetter=function(e,t){this[t]=e,this.doTransform=!0},t.prototype["stroke-widthSetter"]=t.prototype.strokeSetter=function(e,i,n){this[i]=e,this.stroke&&this["stroke-width"]?(t.prototype.fillSetter.call(this,this.stroke,"stroke",n),n.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===i&&0===e&&this.hasStroke&&(n.removeAttribute("stroke"),this.hasStroke=!1)},i=e.SVGRenderer=function(){this.init.apply(this,arguments)},g(i.prototype,{Element:t,SVG_NS:L,init:function(e,t,i,r,o,s){var c,u,h,d;c=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}).css(this.getStyle(r)),e.appendChild(u=c.element),-1===e.innerHTML.indexOf("xmlns")&&a(u,"xmlns",this.SVG_NS),this.isSVG=!0,this.box=u,this.boxWrapper=c,this.alignedObjects=[],this.url=(S||k)&&p.getElementsByTagName("base").length?R.location.href.replace(/#.*?$/,"").replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(p.createTextNode("Created with Highcharts 5.0.14")),this.defs=this.createElement("defs").add(),this.allowHTML=s,this.forExport=o,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(t,i,!1),S&&e.getBoundingClientRect&&((h=function(){l(e,{left:0,top:0}),d=e.getBoundingClientRect(),l(e,{left:Math.ceil(d.left)-d.left+"px",top:Math.ceil(d.top)-d.top+"px"})})(),this.unSubPixelFix=n(R,"resize",h))},getStyle:function(e){return this.style=g({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e),this.style},setStyle:function(e){this.boxWrapper.css(this.getStyle(e))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),d(this.gradients||{}),this.gradients=null,e&&(this.defs=e.destroy()),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:A,getRadialAttr:function(e,t){return{cx:e[0]-e[2]/2+t.cx*e[2],cy:e[1]-e[2]/2+t.cy*e[2],r:t.r*e[2]}},getSpanWidth:function(e,t){var i=e.getBBox(!0).width;return!P&&this.forExport&&(i=this.measureSpanWidth(t.firstChild.data,e.styles)),i},applyEllipsis:function(e,t,i,n){var r,a,o,s=e.rotation,l=0,c=i.length,u=function(e){t.removeChild(t.firstChild),e&&t.appendChild(p.createTextNode(e))};if(e.rotation=0,o=(a=this.getSpanWidth(e,t))>n){for(;l<=c;)r=Math.ceil((l+c)/2),u(i.substring(0,r)+"\u2026"),a=this.getSpanWidth(e,t),l===c?l=c+1:a>n?c=r-1:l=r;0===c&&u("")}return e.rotation=s,o},buildText:function(e){var t,i,n,r,o,s,c,u=e.element,h=this,d=h.forExport,g=D(e.textStr,"").toString(),m=-1!==g.indexOf("<"),v=u.childNodes,b=a(u,"x"),C=e.styles,S=e.textWidth,w=C&&C.lineHeight,x=C&&C.textOutline,T=C&&"ellipsis"===C.textOverflow,k=C&&"nowrap"===C.whiteSpace,E=C&&C.fontSize,A=v.length,I=S&&!e.added&&this.box,_=function(e){var t;return t=/(px|em)$/.test(e&&e.style.fontSize)?e.style.fontSize:E||h.style.fontSize||12,w?B(w):h.fontMetrics(t,e.getAttribute("style")?e:u).h},M=function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">")};if((s=[g,T,k,w,x,E,S].join(","))!==e.textCache){for(e.textCache=s;A--;)u.removeChild(v[A]);m||x||T||S||-1!==g.indexOf(" ")?(i=/<.*class="([^"]+)".*>/,n=/<.*style="([^"]+)".*>/,r=/<.*href="([^"]+)".*>/,I&&I.appendChild(u),t=m?g.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[g],t=y(t,function(e){return""!==e}),f(t,function(t,s){var g,m=0;t=t.replace(/^\s+|\s+$/g,"").replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),g=t.split("|||"),f(g,function(t){if(""!==t||1===g.length){var f,y,v={},C=p.createElementNS(h.SVG_NS,"tspan");if(i.test(t)&&(f=t.match(i)[1],a(C,"class",f)),n.test(t)&&(y=t.match(n)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),a(C,"style",y)),r.test(t)&&!d&&(a(C,"onclick",'location.href="'+t.match(r)[1]+'"'),l(C,{cursor:"pointer"}))," "!==(t=M(t.replace(/<(.|\n)*?>/g,"")||" "))){if(C.appendChild(p.createTextNode(t)),m?v.dx=0:s&&null!==b&&(v.x=b),a(C,v),u.appendChild(C),!m&&c&&(!P&&d&&l(C,{display:"block"}),a(C,"dy",_(C))),S){var w,x,E=t.replace(/([^\^])-/g,"$1- ").split(" "),A=g.length>1||s||E.length>1&&!k,I=[],D=_(C),B=e.rotation;for(T&&(o=h.applyEllipsis(e,C,t,S));!T&&A&&(E.length||I.length);)e.rotation=0,w=(x=h.getSpanWidth(e,C))>S,void 0===o&&(o=w),w&&1!==E.length?(C.removeChild(C.firstChild),I.unshift(E.pop())):(E=I,I=[],E.length&&!k&&(C=p.createElementNS(L,"tspan"),a(C,{dy:D,x:b}),y&&a(C,"style",y),u.appendChild(C)),x>S&&(S=x)),E.length&&C.appendChild(p.createTextNode(E.join(" ").replace(/- /g,"-")));e.rotation=B}m++}}}),c=c||u.childNodes.length}),o&&e.attr("title",e.textStr),I&&I.removeChild(u),x&&e.applyTextOutline&&e.applyTextOutline(x)):u.appendChild(p.createTextNode(M(g)))}},getContrast:function(e){return(e=s(e).rgba)[0]+e[1]+e[2]>510?"#000000":"#FFFFFF"},button:function(e,t,i,r,a,o,s,l,c){var u,h,d,p,f=this.label(e,t,i,c,null,null,null,null,"button"),m=0;return f.attr(E({padding:8,r:2},a)),a=E({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontWeight:"normal"}},a),u=a.style,delete a.style,o=E(a,{fill:"#e6e6e6"},o),h=o.style,delete o.style,s=E(a,{fill:"#e6ebf5",style:{color:"#000000",fontWeight:"bold"}},s),d=s.style,delete s.style,l=E(a,{style:{color:"#cccccc"}},l),p=l.style,delete l.style,n(f.element,w?"mouseover":"mouseenter",function(){3!==m&&f.setState(1)}),n(f.element,w?"mouseout":"mouseleave",function(){3!==m&&f.setState(m)}),f.setState=function(e){1!==e&&(f.state=m=e),f.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][e||0]),f.attr([a,o,s,l][e||0]).css([u,h,d,p][e||0])},f.attr(a).css(g({cursor:"default"},u)),f.on("click",function(e){3!==m&&r.call(f,e)})},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=Math.round(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=Math.round(e[2])+t%2/2),e},path:function(e){var t={fill:"none"};return C(e)?t.d=e:x(e)&&g(t,e),this.createElement("path").attr(t)},circle:function(e,t,i){var n=x(e)?e:{x:e,y:t,r:i},r=this.createElement("circle");return r.xSetter=r.ySetter=function(e,t,i){i.setAttribute("c"+t,e)},r.attr(n)},arc:function(e,t,i,n,r,a){var o,s;return x(e)?(t=(s=e).y,i=s.r,n=s.innerR,r=s.start,a=s.end,e=s.x):s={innerR:n,start:r,end:a},(o=this.symbol("arc",e,t,i,i,s)).r=i,o},rect:function(e,t,i,n,r,o){r=x(e)?e.r:r;var s=this.createElement("rect"),l=x(e)?e:void 0===e?{}:{x:e,y:t,width:Math.max(i,0),height:Math.max(n,0)};return void 0!==o&&(l.strokeWidth=o,l=s.crisp(l)),l.fill="none",r&&(l.r=r),s.rSetter=function(e,t,i){a(i,{rx:e,ry:e})},s.attr(l)},setSize:function(e,t,i){var n=this.alignedObjects,r=n.length;for(this.width=e,this.height=t,this.boxWrapper.animate({width:e,height:t},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:D(i,!0)?void 0:0});r--;)n[r].align()},g:function(e){var t=this.createElement("g");return e?t.attr({class:"highcharts-"+e}):t},image:function(e,t,i,n,r){var a,o={preserveAspectRatio:"none"};return arguments.length>1&&g(o,{x:t,y:i,width:n,height:r}),(a=this.createElement("image").attr(o)).element.setAttributeNS?a.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):a.element.setAttribute("hc-svg-href",e),a},symbol:function(e,t,i,n,r,a){var s,h,d,m=this,y=/^url\((.*?)\)$/,v=y.test(e),b=!v&&(this.symbols[e]?e:"circle"),C=b&&this.symbols[b],S=u(t)&&C&&C.call(this.symbols,Math.round(t),Math.round(i),n,r,a);return"minimize"==b&&(S=u(t)&&C&&C.call(this.symbols,t-25,i,32,32,a)),C?((s=this.path(S)).attr("fill","none"),g(s,{symbolName:b,x:t,y:i,width:n,height:r}),a&&g(s,a)):v&&(h=e.match(y)[1],(s=this.image(h)).imgwidth=D(N[h]&&N[h].width,a&&a.width),s.imgheight=D(N[h]&&N[h].height,a&&a.height),d=function(){s.attr({width:s.width,height:s.height})},f(["width","height"],function(e){s[e+"Setter"]=function(e,t){var i={},n=this["img"+t],r="width"===t?"translateX":"translateY";this[t]=e,u(n)&&(this.element&&this.element.setAttribute(t,n),this.alignByTranslate||(i[r]=((this[t]||0)-n)/2,this.attr(i)))}}),u(t)&&s.attr({x:t,y:i}),s.isImg=!0,u(s.imgwidth)&&u(s.imgheight)?d():(s.attr({width:0,height:0}),c("img",{onload:function(){var e=o[m.chartIndex];0===this.width&&(l(this,{position:"absolute",top:"-999em"}),p.body.appendChild(this)),N[h]={width:this.width,height:this.height},s.imgwidth=this.width,s.imgheight=this.height,s.element&&d(),this.parentNode&&this.parentNode.removeChild(this),m.imgCount--,!m.imgCount&&e&&e.onload&&e.onload()},src:h}),this.imgCount++)),s},symbols:{circle:function(e,t,i,n){return this.arc(e+i/2,t+n/2,i/2,n/2,{start:0,end:2*Math.PI,open:!1})},square:function(e,t,i,n){return["M",e,t,"L",e+i,t,e+i,t+n,e,t+n,"Z"]},triangle:function(e,t,i,n){return["M",e+i/2,t,"L",e+i,t+n,e,t+n,"Z"]},"triangle-down":function(e,t,i,n){return["M",e,t,"L",e+i,t,e+i/2,t+n,"Z"]},minimize:function(e,t,i,n){return["M",(e+=16)+i,t,"L",e+i/2+i/20,t+n/2-n/20,e+i/2+i/20,t+n/8,e+i/2+i/20,t+n/2-n/20,e+i-i/8,t+n/2-n/20,e+i/2+i/20,t+n/2-n/20,e+i,t,"Z","M",e,t+n,"L",e+i/2-i/20,t+n/2+n/20,e+i/8,t+n/2+n/20,e+i/2-i/20,t+n/2+n/20,e+i/2-i/8,t+n-n/20,e+i/2-i/20,t+n/2+n/20,e,t+n,"Z"]},diamond:function(e,t,i,n){return["M",e+i/2,t,"L",e+i,t+n/2,e+i/2,t+n,e,t+n/2,"Z"]},arc:function(e,t,i,n,r){var a,o=r.start,s=r.r||i,l=r.r||n||i,c=Math.abs(r.end-r.start-2*Math.PI)<.001,h=r.end-.001,d=r.innerR,p=D(r.open,c),f=Math.cos(o),g=Math.sin(o),m=Math.cos(h),y=Math.sin(h),v=r.end-o-Math.PI<.001?0:1;return a=["M",e+s*f,t+l*g,"A",s,l,0,v,1,e+s*m,t+l*y],u(d)&&a.push(p?"M":"L",e+d*m,t+d*y,"A",d,d,0,v,0,e+d*f,t+d*g),a.push(p?"":"Z"),a},callout:function(e,t,i,n,r){var a,o=Math.min(r&&r.r||0,i,n),s=o+6,l=r&&r.anchorX,c=r&&r.anchorY;return a=["M",e+o,t,"L",e+i-o,t,"C",e+i,t,e+i,t,e+i,t+o,"L",e+i,t+n-o,"C",e+i,t+n,e+i,t+n,e+i-o,t+n,"L",e+o,t+n,"C",e,t+n,e,t+n,e,t+n-o,"L",e,t+o,"C",e,t,e,t,e+o,t],l&&l>i?c>t+s&&c<t+n-s?a.splice(13,3,"L",e+i,c-6,e+i+6,c,e+i,c+6,e+i,t+n-o):a.splice(13,3,"L",e+i,n/2,l,c,e+i,n/2,e+i,t+n-o):l&&l<0?c>t+s&&c<t+n-s?a.splice(33,3,"L",e,c+6,e-6,c,e,c-6,e,t+o):a.splice(33,3,"L",e,n/2,l,c,e,n/2,e,t+o):c&&c>n&&l>e+s&&l<e+i-s?a.splice(23,3,"L",l+6,t+n,l,t+n+6,l-6,t+n,e+o,t+n):c&&c<0&&l>e+s&&l<e+i-s&&a.splice(3,3,"L",l-6,t,l,t-6,l+6,t,i-o,t),a}},clipRect:function(t,i,n,r){var a,o=e.uniqueKey(),s=this.createElement("clipPath").attr({id:o}).add(this.defs);return(a=this.rect(t,i,n,r,0).add(s)).id=o,a.clipPath=s,a.count=0,a},text:function(e,t,i,n){var r,a=!P&&this.forExport,o={};return!n||!this.allowHTML&&this.forExport?(o.x=Math.round(t||0),i&&(o.y=Math.round(i)),(e||0===e)&&(o.text=e),r=this.createElement("text").attr(o),a&&r.css({position:"absolute"}),n||(r.xSetter=function(e,t,i){var n,r,a=i.getElementsByTagName("tspan"),o=i.getAttribute(t);for(r=0;r<a.length;r++)(n=a[r]).getAttribute(t)===o&&n.setAttribute(t,e);i.setAttribute(t,e)}),r):this.html(e,t,i)},fontMetrics:function(e,t){var i;return{h:i=(e=/px/.test(e=e||t&&t.style&&t.style.fontSize||this.style&&this.style.fontSize)?B(e):/em/.test(e)?parseFloat(e)*(t?this.fontMetrics(null,t.parentNode).f:16):12)<24?e+3:Math.round(1.2*e),b:Math.round(.8*i),f:e}},rotCorr:function(e,t,i){var n=e;return t&&i&&(n=Math.max(n*Math.cos(t*h),4)),{x:-e/3*Math.sin(t*h),y:n}},label:function(i,n,r,a,o,s,l,c,h){var d,p,m,y,v,b,C,S,w,x,T,k,A,I=this,D=I.g("button"!==h&&"label"),B=D.text=I.text("",0,0,l).attr({zIndex:1}),M=0,P=3,L=0,N={},R=/^url\((.*?)\)$/.test(a),O=R;h&&D.addClass("highcharts-"+h),O=R,x=function(){return(S||0)%2/2},T=function(){var e,t=B.element.style,i={};p=(void 0===m||void 0===y||C)&&u(B.textStr)&&B.getBBox(),D.width=(m||p.width||0)+2*P+L,D.height=(y||p.height||0)+2*P,w=P+I.fontMetrics(t&&t.fontSize,B).b,O&&(d||(D.box=d=I.symbols[a]||R?I.symbol(a):I.rect(),d.addClass(("button"===h?"":"highcharts-label-box")+(h?" highcharts-"+h+"-box":"")),d.add(D),e=x(),i.x=e,i.y=(c?-w:0)+e),i.width=Math.round(D.width),i.height=Math.round(D.height),d.attr(g(i,N)),N={})},k=function(){var e,t=L+P;e=c?0:w,u(m)&&p&&("center"===C||"right"===C)&&(t+={center:.5,right:1}[C]*(m-p.width)),t===B.x&&e===B.y||(B.attr("x",t),void 0!==e&&B.attr("y",e)),B.x=t,B.y=e},A=function(e,t){d?d.attr(e,t):N[e]=t},D.onAdd=function(){B.add(D),D.attr({text:i||0===i?i:"",x:n,y:r}),d&&u(o)&&D.attr({anchorX:o,anchorY:s})},D.widthSetter=function(t){m=e.isNumber(t)?t:null},D.heightSetter=function(e){y=e},D["text-alignSetter"]=function(e){C=e},D.paddingSetter=function(e){u(e)&&e!==P&&(P=D.padding=e,k())},D.paddingLeftSetter=function(e){u(e)&&e!==L&&(L=e,k())},D.alignSetter=function(e){(e={left:0,center:.5,right:1}[e])!==M&&(M=e,p&&D.attr({x:v}))},D.textSetter=function(e){void 0!==e&&B.textSetter(e),T(),k()},D["stroke-widthSetter"]=function(e,t){e&&(O=!0),S=this["stroke-width"]=e,A(t,e)},D.strokeSetter=D.fillSetter=D.rSetter=function(e,t){"r"!==t&&("fill"===t&&e&&(O=!0),D[t]=e),A(t,e)},D.anchorXSetter=function(e,t){o=D.anchorX=e,A(t,Math.round(e)-x()-v)},D.anchorYSetter=function(e,t){s=D.anchorY=e,A(t,e-b)},D.xSetter=function(e){D.x=e,M&&(e-=M*((m||p.width)+2*P)),v=Math.round(e),D.attr("translateX",v)},D.ySetter=function(e){b=D.y=Math.round(e),D.attr("translateY",b)};var U=D.css;return g(D,{css:function(e){if(e){var t={};e=E(e),f(D.textProps,function(i){void 0!==e[i]&&(t[i]=e[i],delete e[i])}),B.css(t)}return U.call(D,e)},getBBox:function(){return{width:p.width+2*P,height:p.height+2*P,x:p.x-P,y:p.y-P}},shadow:function(e){return e&&(T(),d&&d.shadow(e)),D},destroy:function(){_(D.element,"mouseenter"),_(D.element,"mouseleave"),B&&(B=B.destroy()),d&&(d=d.destroy()),t.prototype.destroy.call(D),D=I=T=k=A=null}})}}),e.Renderer=i}(s),function(e){var t=s.attr,i=s.createElement,n=s.css,r=s.defined,a=s.each,o=s.extend,l=s.isFirefox,c=s.isMS,u=s.isWebKit,h=s.pInt,d=s.SVGRenderer,p=s.win,f=s.wrap;o(s.SVGElement.prototype,{htmlCss:function(e){var t=e&&"SPAN"===this.element.tagName&&e.width;return t&&(delete e.width,this.textWidth=t,this.updateTransform()),e&&"ellipsis"===e.textOverflow&&(e.whiteSpace="nowrap",e.overflow="hidden"),this.styles=o(this.styles,e),n(this.element,e),this},htmlGetBBox:function(){var e=this.element;return"text"===e.nodeName&&(e.style.position="absolute"),{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var e=this.renderer,t=this.element,i=this.translateX||0,o=this.translateY||0,s=this.x||0,l=this.y||0,c=this.textAlign||"left",d={left:0,center:.5,right:1}[c],p=this.styles;if(n(t,{marginLeft:i,marginTop:o}),this.shadows&&a(this.shadows,function(e){n(e,{marginLeft:i+1,marginTop:o+1})}),this.inverted&&a(t.childNodes,function(i){e.invertChild(i,t)}),"SPAN"===t.tagName){var f,g=this.rotation,m=h(this.textWidth),y=p&&p.whiteSpace,v=[g,c,t.innerHTML,this.textWidth,this.textAlign].join(",");v!==this.cTT&&(f=e.fontMetrics(t.style.fontSize).b,r(g)&&this.setSpanRotation(g,d,f),n(t,{width:"",whiteSpace:y||"nowrap"}),t.offsetWidth>m&&/[ \-]/.test(t.textContent||t.innerText)&&n(t,{width:m+"px",display:"block",whiteSpace:y||"normal"}),this.getSpanCorrection(t.offsetWidth,f,d,g,c)),n(t,{left:s+(this.xCorr||0)+"px",top:l+(this.yCorr||0)+"px"}),u&&(f=t.offsetHeight),this.cTT=v}}else this.alignOnAdd=!0},setSpanRotation:function(e,t,i){var r={},a=c?"-ms-transform":u?"-webkit-transform":l?"MozTransform":p.opera?"-o-transform":"";r[a]=r.transform="rotate("+e+"deg)",r[a+(l?"Origin":"-origin")]=r.transformOrigin=100*t+"% "+i+"px",n(this.element,r)},getSpanCorrection:function(e,t,i){this.xCorr=-e*i,this.yCorr=-t}}),o(d.prototype,{html:function(e,n,r){var s=this.createElement("span"),l=s.element,c=s.renderer,u=c.isSVG,h=function(e,t){a(["opacity","visibility"],function(i){f(e,i+"Setter",function(e,i,n,r){e.call(this,i,n,r),t[n]=i})})};return s.textSetter=function(e){e!==l.innerHTML&&delete this.bBox,l.innerHTML=this.textStr=e,s.htmlUpdateTransform()},u&&h(s,s.element.style),s.xSetter=s.ySetter=s.alignSetter=s.rotationSetter=function(e,t){"align"===t&&(t="textAlign"),s[t]=e,s.htmlUpdateTransform()},s.attr({text:e,x:Math.round(n),y:Math.round(r)}).css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize,position:"absolute"}),l.style.whiteSpace="nowrap",s.css=s.htmlCss,u&&(s.add=function(e){var n,r,u=c.box.parentNode,d=[];if(this.parentGroup=e,e){if(!(n=e.div)){for(r=e;r;)d.push(r),r=r.parentGroup;a(d.reverse(),function(e){var r,a=t(e.element,"class");a&&(a={className:a}),n=e.div=e.div||i("div",a,{position:"absolute",left:(e.translateX||0)+"px",top:(e.translateY||0)+"px",display:e.display,opacity:e.opacity,pointerEvents:e.styles&&e.styles.pointerEvents},n||u),r=n.style,o(e,{classSetter:function(e){this.element.setAttribute("class",e),n.className=e},on:function(){return d[0].div&&s.on.apply({element:d[0].div},arguments),e},translateXSetter:function(t,i){r.left=t+"px",e[i]=t,e.doTransform=!0},translateYSetter:function(t,i){r.top=t+"px",e[i]=t,e.doTransform=!0}}),h(e,r)})}}else n=u;return n.appendChild(l),s.added=!0,s.alignOnAdd&&s.htmlUpdateTransform(),s}),s}})}(),function(e){var t,i,n,r=e.createElement,a=e.css,o=e.defined,s=e.deg2rad,l=e.discardElement,c=e.doc,u=e.each,h=e.erase,d=e.extend,p=e.extendClass,f=e.isArray,g=e.isNumber,m=e.isObject,y=e.merge,v=e.noop,b=e.pick,C=e.pInt,S=e.SVGElement,w=e.SVGRenderer,x=e.win;e.svg||((n={docMode8:c&&8===c.documentMode,init:function(e,t){var i=["<",t,' filled="f" stroked="f"'],n=["position: ","absolute",";"],a="div"===t;("shape"===t||a)&&n.push("left:0;top:0;width:1px;height:1px;"),n.push("visibility: ",a?"hidden":"visible"),i.push(' style="',n.join(""),'"/>'),t&&(i=a||"span"===t||"img"===t?i.join(""):e.prepVML(i),this.element=r(i)),this.renderer=e},add:function(e){var t=this.renderer,i=this.element,n=e&&e.inverted,r=e?e.element||e:t.box;return e&&(this.parentGroup=e),n&&t.invertChild(i,r),r.appendChild(i),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this.className&&this.attr("class",this.className),this},updateTransform:S.prototype.htmlUpdateTransform,setSpanRotation:function(){var e=this.rotation,t=Math.cos(e*s),i=Math.sin(e*s);a(this.element,{filter:e?["progid:DXImageTransform.Microsoft.Matrix(M11=",t,", M12=",-i,", M21=",i,", M22=",t,", sizingMethod='auto expand')"].join(""):"none"})},getSpanCorrection:function(e,t,i,n,r){var o,l=n?Math.cos(n*s):1,c=n?Math.sin(n*s):0,u=b(this.elemHeight,this.element.offsetHeight),h=r&&"left"!==r;this.xCorr=l<0&&-e,this.yCorr=c<0&&-u,this.xCorr+=c*t*((o=l*c<0)?1-i:i),this.yCorr-=l*t*(n?o?i:1-i:1),h&&(this.xCorr-=e*i*(l<0?-1:1),n&&(this.yCorr-=u*i*(c<0?-1:1)),a(this.element,{textAlign:r}))},pathToVML:function(e){for(var t=e.length,i=[];t--;)g(e[t])?i[t]=Math.round(10*e[t])-5:"Z"===e[t]?i[t]="x":(i[t]=e[t],!e.isArc||"wa"!==e[t]&&"at"!==e[t]||(i[t+5]===i[t+7]&&(i[t+7]+=e[t+7]>e[t+5]?1:-1),i[t+6]===i[t+8]&&(i[t+8]+=e[t+8]>e[t+6]?1:-1)));return i.join(" ")||"x"},clip:function(e){var t,i,n=this;return e?(h(t=e.members,n),t.push(n),n.destroyClip=function(){h(t,n)},i=e.getCSS(n)):(n.destroyClip&&n.destroyClip(),i={clip:n.docMode8?"inherit":"rect(auto)"}),n.css(i)},css:S.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&l(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),S.prototype.destroy.apply(this)},on:function(e,t){return this.element["on"+e]=function(){var e=x.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,t){var i;return 9!==(i=(e=e.split(/[ ,]/)).length)&&11!==i||(e[i-4]=e[i-2]=C(e[i-2])-10*t),e.join(" ")},shadow:function(e,t,i){var n,a,o,s,l,c,u=[],h=this.element,d=this.renderer,p=h.style,f=h.path;if(f&&"string"!=typeof f.value&&(f="x"),s=f,e){for(l=b(e.width,3),c=(e.opacity||.15)/l,n=1;n<=3;n++)o=2*l+1-2*n,i&&(s=this.cutOffPath(f.value,o+.5)),a=r(d.prepVML(['<shape isShadow="true" strokeweight="',o,'" filled="false" path="',s,'" coordsize="10 10" style="',h.style.cssText,'" />']),null,{left:C(p.left)+b(e.offsetX,1),top:C(p.top)+b(e.offsetY,1)}),i&&(a.cutOff=o+1),r(d.prepVML(['<stroke color="',e.color||"#000000",'" opacity="',c*n,'"/>']),null,null,a),t?t.element.appendChild(a):h.parentNode.insertBefore(a,h),u.push(a);this.shadows=u}return this},updateShadows:v,setAttr:function(e,t){this.docMode8?this.element[e]=t:this.element.setAttribute(e,t)},classSetter:function(e){(this.added?this.element:this).className=e},dashstyleSetter:function(e,t,i){(i.getElementsByTagName("stroke")[0]||r(this.renderer.prepVML(["<stroke/>"]),null,null,i))[t]=e||"solid",this[t]=e},dSetter:function(e,t,i){var n,r=this.shadows;if(this.d=(e=e||[]).join&&e.join(" "),i.path=e=this.pathToVML(e),r)for(n=r.length;n--;)r[n].path=r[n].cutOff?this.cutOffPath(e,r[n].cutOff):e;this.setAttr(t,e)},fillSetter:function(e,t,i){var n=i.nodeName;"SPAN"===n?i.style.color=e:"IMG"!==n&&(i.filled="none"!==e,this.setAttr("fillcolor",this.renderer.color(e,i,t,this)))},"fill-opacitySetter":function(e,t,i){r(this.renderer.prepVML(["<",t.split("-")[0],' opacity="',e,'"/>']),null,null,i)},opacitySetter:v,rotationSetter:function(e,t,i){var n=i.style;this[t]=n[t]=e,n.left=-Math.round(Math.sin(e*s)+1)+"px",n.top=Math.round(Math.cos(e*s))+"px"},strokeSetter:function(e,t,i){this.setAttr("strokecolor",this.renderer.color(e,i,t,this))},"stroke-widthSetter":function(e,t,i){i.stroked=!!e,this[t]=e,g(e)&&(e+="px"),this.setAttr("strokeweight",e)},titleSetter:function(e,t){this.setAttr(t,e)},visibilitySetter:function(e,t,i){"inherit"===e&&(e="visible"),this.shadows&&u(this.shadows,function(i){i.style[t]=e}),"DIV"===i.nodeName&&(e="hidden"===e?"-999em":0,this.docMode8||(i.style[t]=e?"visible":"hidden"),t="top"),i.style[t]=e},xSetter:function(e,t,i){this[t]=e,"x"===t?t="left":"y"===t&&(t="top"),this.updateClipping?(this[t]=e,this.updateClipping()):i.style[t]=e},zIndexSetter:function(e,t,i){i.style[t]=e}})["stroke-opacitySetter"]=n["fill-opacitySetter"],e.VMLElement=n=p(S,n),n.prototype.ySetter=n.prototype.widthSetter=n.prototype.heightSetter=n.prototype.xSetter,i={Element:n,isIE8:x.navigator.userAgent.indexOf("MSIE 8.0")>-1,init:function(e,t,i){var n,r,a;if(this.alignedObjects=[],r=(n=this.createElement("div").css({position:"relative"})).element,e.appendChild(n.element),this.isVML=!0,this.box=r,this.boxWrapper=n,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(t,i,!1),!c.namespaces.hcv){c.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),a="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{c.createStyleSheet().cssText=a}catch(e){c.styleSheets[0].cssText+=a}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,t,i,n){var r=this.createElement(),a=m(e);return d(r,{members:[],count:0,left:(a?e.x:e)+1,top:(a?e.y:t)+1,width:(a?e.width:i)-1,height:(a?e.height:n)-1,getCSS:function(e){var t=e.element,i=t.nodeName,n=e.inverted,r=this.top-("shape"===i?t.offsetTop:0),a=this.left,o=a+this.width,s=r+this.height,l={clip:"rect("+Math.round(n?a:r)+"px,"+Math.round(n?s:o)+"px,"+Math.round(n?o:s)+"px,"+Math.round(n?r:a)+"px)"};return!n&&e.docMode8&&"DIV"===i&&d(l,{width:o+"px",height:s+"px"}),l},updateClipping:function(){u(r.members,function(e){e.element&&e.css(r.getCSS(e))})}})},color:function(t,i,n,a){var o,s,l,c=this,h=/^rgba/,d="none";if(t&&t.linearGradient?l="gradient":t&&t.radialGradient&&(l="pattern"),l){var p,f,g,m,y,v,b,C,S=t.linearGradient||t.radialGradient,w="",x=t.stops,T=[],k=function(){s=['<fill colors="'+T.join(",")+'" opacity="',m,'" o:opacity2="',g,'" type="',l,'" ',w,'focus="100%" method="any" />'],r(c.prepVML(s),null,null,i)};if(C=x[x.length-1],(b=x[0])[0]>0&&x.unshift([0,b[1]]),C[0]<1&&x.push([1,C[1]]),u(x,function(t,i){h.test(t[1])?(o=e.color(t[1]),p=o.get("rgb"),f=o.get("a")):(p=t[1],f=1),T.push(100*t[0]+"% "+p),i?(m=f,y=p):(g=f,v=p)}),"fill"===n)if("gradient"===l)w='angle="'+(90-180*Math.atan(((S.y2||S[3]||0)-(S.y1||S[1]||0))/((S.x2||S[2]||0)-(S.x1||S[0]||0)))/Math.PI)+'"',k();else{var E,A=S.r,I=2*A,D=2*A,B=S.cx,_=S.cy,M=i.radialReference,P=function(){M&&(E=a.getBBox(),B+=(M[0]-E.x)/E.width-.5,_+=(M[1]-E.y)/E.height-.5,I*=M[2]/E.width,D*=M[2]/E.height),w='src="'+e.getOptions().global.VMLRadialGradientURL+'" size="'+I+","+D+'" origin="0.5,0.5" position="'+B+","+_+'" color2="'+v+'" ',k()};a.added?P():a.onAdd=P,d=y}else d=p}else if(h.test(t)&&"IMG"!==i.tagName)o=e.color(t),a[n+"-opacitySetter"](o.get("a"),n,i),d=o.get("rgb");else{var L=i.getElementsByTagName(n);L.length&&(L[0].opacity=1,L[0].type="solid"),d=t}return d},prepVML:function(e){var t="display:inline-block;behavior:url(#default#VML);",i=this.isIE8;return e=e.join(""),i?-1===(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />')).indexOf('style="')?e.replace("/>",' style="'+t+'" />'):e.replace('style="','style="'+t):e.replace("<","<hcv:")},text:w.prototype.html,path:function(e){var t={coordsize:"10 10"};return f(e)?t.d=e:m(e)&&d(t,e),this.createElement("shape").attr(t)},circle:function(e,t,i){var n=this.symbol("circle");return m(e)&&(i=e.r,t=e.y,e=e.x),n.isCircle=!0,n.r=i,n.attr({x:e,y:t})},g:function(e){var t;return e&&(t={className:"highcharts-"+e,class:"highcharts-"+e}),this.createElement("div").attr(t)},image:function(e,t,i,n,r){var a=this.createElement("img").attr({src:e});return arguments.length>1&&a.attr({x:t,y:i,width:n,height:r}),a},createElement:function(e){return"rect"===e?this.symbol(e):w.prototype.createElement.call(this,e)},invertChild:function(e,t){var i=this,n=t.style,r="IMG"===e.tagName&&e.style;a(e,{flip:"x",left:C(n.width)-(r?C(r.top):1),top:C(n.height)-(r?C(r.left):1),rotation:-90}),u(e.childNodes,function(t){i.invertChild(t,e)})},symbols:{arc:function(e,t,i,n,r){var a,o=r.start,s=r.end,l=r.r||i||n,c=r.innerR,u=Math.cos(o),h=Math.sin(o),d=Math.cos(s),p=Math.sin(s);return s-o==0?["x"]:(a=["wa",e-l,t-l,e+l,t+l,e+l*u,t+l*h,e+l*d,t+l*p],r.open&&!c&&a.push("e","M",e,t),a.push("at",e-c,t-c,e+c,t+c,e+c*d,t+c*p,e+c*u,t+c*h,"x","e"),a.isArc=!0,a)},circle:function(e,t,i,n,r){return r&&o(r.r)&&(i=n=2*r.r),r&&r.isCircle&&(e-=i/2,t-=n/2),["wa",e,t,e+i,t+n,e+i,t+n/2,e+i,t+n/2,"e"]},rect:function(e,t,i,n,r){return w.prototype.symbols[o(r)&&r.r?"callout":"square"].call(0,e,t,i,n,r)}}},e.VMLRenderer=t=function(){this.init.apply(this,arguments)},t.prototype=y(w.prototype,i),e.Renderer=t),w.prototype.measureSpanWidth=function(e,t){var i,n=c.createElement("span"),r=c.createTextNode(e);return n.appendChild(r),a(n,t),this.box.appendChild(n),i=n.offsetWidth,l(n),i}}(s),function(e){var t=e.color,i=e.each,n=e.getTZOffset,r=e.isTouchDevice,a=e.merge,o=e.pick,s=e.svg,l=e.win;function c(){var t,r=e.defaultOptions.global,a=r.useUTC,s=a?"getUTC":"get",c=a?"setUTC":"set";e.Date=t=r.Date||l.Date,t.hcTimezoneOffset=a&&r.timezoneOffset,t.hcGetTimezoneOffset=function(){var t=e.defaultOptions.global,i=l.moment;if(t.timezone){if(i)return function(e){return-i.tz(e,t.timezone).utcOffset()};e.error(25)}return t.useUTC&&t.getTimezoneOffset}(),t.hcMakeTime=function(e,i,r,s,l,c){var u;return a?(u=t.UTC.apply(0,arguments),u+=n(u)):u=new t(e,i,o(r,1),o(s,0),o(l,0),o(c,0)).getTime(),u},i(["Minutes","Hours","Day","Date","Month","FullYear"],function(e){t["hcGet"+e]=s+e}),i(["Milliseconds","Seconds","Minutes","Hours","Date","Month","FullYear"],function(e){t["hcSet"+e]=c+e})}e.defaultOptions={colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" "),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,VMLRadialGradientURL:"http://code.highcharts.com/5.0.14/gfx/vml-radial-gradient.png"},chart:{borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}},width:null,height:null,borderColor:"#335cad",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},plotOptions:{},labels:{style:{position:"absolute",color:"#333333"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{activeColor:"#003399",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#cccccc"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:s,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",padding:8,snap:r?25:10,backgroundColor:t("#f7f7f7").setOpacity(.85).get(),borderWidth:1,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,style:{color:"#333333",cursor:"default",fontSize:"12px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"9px"},text:"Highcharts.com"}},e.setOptions=function(t){return e.defaultOptions=a(!0,e.defaultOptions,t),c(),e.defaultOptions},e.getOptions=function(){return e.defaultOptions},e.defaultPlotOptions=e.defaultOptions.plotOptions,c()}(s),function(e){var t=e.correctFloat,i=e.defined,n=e.destroyObjectProperties,r=e.isNumber,a=e.merge,o=e.pick,s=e.deg2rad;e.Tick=function(e,t,i,n){this.axis=e,this.pos=t,this.type=i||"",this.isNew=!0,this.isNewLabel=!0,i||n||this.addLabel()},e.Tick.prototype={addLabel:function(){var e,n,r=this.axis,s=r.options,l=r.chart,c=r.categories,u=this.pos,h=s.labels,d=r.tickPositions,p=u===d[0],f=u===d[d.length-1],g=c?o(c[u],r.names[u],u):u,m=this.label,y=d.info;r.isDatetimeAxis&&y&&(n=s.dateTimeLabelFormats[y.higherRanks[u]||y.unitName]),this.isFirst=p,this.isLast=f,e=r.labelFormatter.call({axis:r,chart:l,isFirst:p,isLast:f,dateTimeLabelFormat:n,value:r.isLog?t(r.lin2log(g)):g,pos:u}),i(m)?m&&m.attr({text:e}):(this.label=m=i(e)&&h.enabled?l.renderer.text(e,0,0,h.useHTML).css(a(h.style)).add(r.labelGroup):null,this.labelLength=m&&m.getBBox().width,this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(e){var t,i=this.axis,n=e.x,r=i.chart.chartWidth,a=i.chart.spacing,l=o(i.labelLeft,Math.min(i.pos,a[3])),c=o(i.labelRight,Math.max(i.pos+i.len,r-a[1])),u=this.label,h=this.rotation,d={left:0,center:.5,right:1}[i.labelAlign],p=u.getBBox().width,f=i.getSlotWidth(),g=f,m=d,y=1,v={};h?h<0&&n-d*p<l?t=Math.round(n/Math.cos(h*s)-l):h>0&&n+d*p>c&&(t=Math.round((r-n)/Math.cos(h*s))):(n-d*p<l?g=e.x+g*(1-d)-l:n+(1-d)*p>c&&(g=c-e.x+g*d,y=-1),(g=Math.min(f,g))<f&&"center"===i.labelAlign&&(e.x+=y*(f-g-m*(f-Math.min(p,g)))),(p>g||i.autoRotation&&(u.styles||{}).width)&&(t=g)),t&&(v.width=t,(i.options.labels.style||{}).textOverflow||(v.textOverflow="ellipsis"),u.css(v))},getPosition:function(e,t,i,n){var r=this.axis,a=r.chart,o=n&&a.oldChartHeight||a.chartHeight;return{x:e?r.translate(t+i,null,null,n)+r.transB:r.left+r.offset+(r.opposite?(n&&a.oldChartWidth||a.chartWidth)-r.right-r.left:0),y:e?o-r.bottom+r.offset-(r.opposite?r.height:0):o-r.translate(t+i,null,null,n)-r.transB}},getLabelPosition:function(e,t,n,r,a,o,l,c){var u,h=this.axis,d=h.transA,p=h.reversed,f=h.staggerLines,g=h.tickRotCorr||{x:0,y:0},m=a.y;return i(m)||(m=0===h.side?n.rotation?-8:-n.getBBox().height:2===h.side?g.y+8:Math.cos(n.rotation*s)*(g.y-n.getBBox(!1,0).height/2)),e=e+a.x+g.x-(o&&r?o*d*(p?-1:1):0),t=t+m-(o&&!r?o*d*(p?1:-1):0),f&&(u=l/(c||1)%f,h.opposite&&(u=f-u-1),t+=u*(h.labelOffset/f)),{x:e,y:Math.round(t)}},getMarkPath:function(e,t,i,n,r,a){return a.crispLine(["M",e,t,"L",e+(r?0:-i),t+(r?i:0)],n)},renderGridLine:function(e,t,i){var n,r=this.axis,a=r.options,o=this.gridLine,s={},l=this.pos,c=this.type,u=r.tickmarkOffset,h=r.chart.renderer,d=c?c+"Grid":"grid",p=a[d+"LineWidth"],f=a[d+"LineDashStyle"];o||(s.stroke=a[d+"LineColor"],s["stroke-width"]=p,f&&(s.dashstyle=f),c||(s.zIndex=1),e&&(s.opacity=0),this.gridLine=o=h.path().attr(s).addClass("highcharts-"+(c?c+"-":"")+"grid-line").add(r.gridGroup)),!e&&o&&(n=r.getPlotLinePath(l+u,o.strokeWidth()*i,e,!0))&&o[this.isNew?"attr":"animate"]({d:n,opacity:t})},renderMark:function(e,t,i){var n=this.axis,r=n.options,a=n.chart.renderer,s=this.type,l=s?s+"Tick":"tick",c=n.tickSize(l),u=this.mark,h=!u,d=e.x,p=e.y,f=o(r[l+"Width"],!s&&n.isXAxis?1:0),g=r[l+"Color"];c&&(n.opposite&&(c[0]=-c[0]),h&&(this.mark=u=a.path().addClass("highcharts-"+(s?s+"-":"")+"tick").add(n.axisGroup),u.attr({stroke:g,"stroke-width":f})),u[h?"attr":"animate"]({d:this.getMarkPath(d,p,c[0],u.strokeWidth()*i,n.horiz,a),opacity:t}))},renderLabel:function(e,t,i,n){var a=this.axis,s=a.horiz,l=a.options,c=this.label,u=l.labels,h=u.step,d=a.tickmarkOffset,p=!0,f=e.x,g=e.y;c&&r(f)&&(c.xy=e=this.getLabelPosition(f,g,c,s,u,d,n,h),this.isFirst&&!this.isLast&&!o(l.showFirstLabel,1)||this.isLast&&!this.isFirst&&!o(l.showLastLabel,1)?p=!1:!s||a.isRadial||u.step||u.rotation||t||0===i||this.handleOverflow(e),h&&n%h&&(p=!1),p&&r(e.y)?(e.opacity=i,c[this.isNewLabel?"attr":"animate"](e),this.isNewLabel=!1):(c.attr("y",-9999),this.isNewLabel=!0),this.isNew=!1)},render:function(e,t,i){var n=this.axis,r=n.horiz,a=this.getPosition(r,this.pos,n.tickmarkOffset,t),s=r&&a.x===n.pos+n.len||!r&&a.y===n.pos?-1:1;i=o(i,1),this.isActive=!0,this.renderGridLine(t,i,s),this.renderMark(a,i,s),this.renderLabel(a,t,i,e)},destroy:function(){n(this,this.axis)}}}(s);var l,c,u,h=function(e){var t=e.addEvent,i=e.animObject,n=e.arrayMax,r=e.arrayMin,a=e.color,o=e.correctFloat,s=e.defaultOptions,l=e.defined,c=e.deg2rad,u=e.destroyObjectProperties,h=e.each,d=e.extend,p=e.fireEvent,f=e.format,g=e.getMagnitude,m=e.grep,y=e.inArray,v=e.isArray,b=e.isNumber,C=e.isString,S=e.merge,w=e.normalizeTickInterval,x=e.objectEach,T=e.pick,k=e.removeEvent,E=e.splat,A=e.syncTimeout,I=e.Tick,D=function(){this.init.apply(this,arguments)};return e.extend(D.prototype,{defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,labels:{enabled:!0,style:{color:"#666666",cursor:"default",fontSize:"11px"},x:0},minPadding:.01,maxPadding:.01,minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#666666"}},type:"linear",minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#ccd6eb",lineWidth:1,gridLineColor:"#e6e6e6",tickColor:"#ccd6eb"},defaultYAxisOptions:{endOnTick:!0,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{allowOverlap:!1,enabled:!1,formatter:function(){return e.numberFormat(this.total,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"#000000",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},defaultLeftAxisOptions:{labels:{x:-15},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},init:function(e,i){var n=i.isX,r=this;r.chart=e,r.horiz=e.inverted&&!r.isZAxis?!n:n,r.isXAxis=n,r.coll=r.coll||(n?"xAxis":"yAxis"),r.opposite=i.opposite,r.side=i.side||(r.horiz?r.opposite?0:2:r.opposite?1:3),r.setOptions(i);var a=this.options,o=a.type,s="datetime"===o;r.labelFormatter=a.labels.formatter||r.defaultLabelFormatter,r.userOptions=i,r.minPixelPadding=0,r.reversed=a.reversed,r.visible=!1!==a.visible,r.zoomEnabled=!1!==a.zoomEnabled,r.hasNames="category"===o||!0===a.categories,r.categories=a.categories||r.hasNames,r.names=r.names||[],r.plotLinesAndBandsGroups={},r.isLog="logarithmic"===o,r.isDatetimeAxis=s,r.positiveValuesOnly=r.isLog&&!r.allowNegativeLog,r.isLinked=l(a.linkedTo),r.ticks={},r.labelEdge=[],r.minorTicks={},r.plotLinesAndBands=[],r.alternateBands={},r.len=0,r.minRange=r.userMinRange=a.minRange||a.maxZoom,r.range=a.range,r.offset=a.offset||0,r.stacks={},r.oldStacks={},r.stacksTouched=0,r.max=null,r.min=null,r.crosshair=T(a.crosshair,E(e.options.tooltip.crosshairs)[n?0:1],!1);var c=r.options.events;-1===y(r,e.axes)&&(n?e.axes.splice(e.xAxis.length,0,r):e.axes.push(r),e[r.coll].push(r)),r.series=r.series||[],e.inverted&&!r.isZAxis&&n&&void 0===r.reversed&&(r.reversed=!0),x(c,function(e,i){t(r,i,e)}),r.lin2log=a.linearToLogConverter||r.lin2log,r.isLog&&(r.val2lin=r.log2lin,r.lin2val=r.lin2log)},setOptions:function(e){this.options=S(this.defaultOptions,"yAxis"===this.coll&&this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],S(s[this.coll],e))},defaultLabelFormatter:function(){var t,i,n=this.axis,r=this.value,a=n.categories,o=this.dateTimeLabelFormat,l=s.lang,c=l.numericSymbols,u=l.numericSymbolMagnitude||1e3,h=c&&c.length,d=n.options.labels.format,p=n.isLog?Math.abs(r):n.tickInterval;if(d)i=f(d,this);else if(a)i=r;else if(o)i=e.dateFormat(o,r);else if(h&&p>=1e3)for(;h--&&void 0===i;)p>=(t=Math.pow(u,h+1))&&10*r%t==0&&null!==c[h]&&0!==r&&(i=e.numberFormat(r/t,-1)+c[h]);return void 0===i&&(i=Math.abs(r)>=1e4?e.numberFormat(r,-1):e.numberFormat(r,-1,void 0,"")),i},getSeriesExtremes:function(){var e=this,t=e.chart;e.hasVisibleSeries=!1,e.dataMin=e.dataMax=e.threshold=null,e.softThreshold=!e.isXAxis,e.buildStacks&&e.buildStacks(),h(e.series,function(i){if(i.visible||!t.options.chart.ignoreHiddenSeries){var a,o,s,c=i.options,u=c.threshold;e.hasVisibleSeries=!0,e.positiveValuesOnly&&u<=0&&(u=null),e.isXAxis?(a=i.xData).length&&(o=r(a),b(o)||o instanceof Date||(a=m(a,function(e){return b(e)}),o=r(a)),e.dataMin=Math.min(T(e.dataMin,a[0]),o),e.dataMax=Math.max(T(e.dataMax,a[0]),n(a))):(i.getExtremes(),s=i.dataMax,l(o=i.dataMin)&&l(s)&&(e.dataMin=Math.min(T(e.dataMin,o),o),e.dataMax=Math.max(T(e.dataMax,s),s)),l(u)&&(e.threshold=u),c.softThreshold&&!e.positiveValuesOnly||(e.softThreshold=!1))}})},translate:function(e,t,i,n,r,a){var o,s=this.linkedParent||this,l=1,c=0,u=n?s.oldTransA:s.transA,h=n?s.oldMin:s.min,d=s.minPixelPadding,p=(s.isOrdinal||s.isBroken||s.isLog&&r)&&s.lin2val;return u||(u=s.transA),i&&(l*=-1,c=s.len),s.reversed&&(c-=(l*=-1)*(s.sector||s.len)),t?(e=e*l+c,o=(e-=d)/u+h,p&&(o=s.lin2val(o))):(p&&(e=s.val2lin(e)),o=l*(e-h)*u+c+l*d+(b(a)?u*a:0)),o},toPixels:function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(e,t,i,n,r){var a,o,s,l,c,u=this.chart,h=this.left,d=this.top,p=i&&u.oldChartHeight||u.chartHeight,f=i&&u.oldChartWidth||u.chartWidth,g=this.transB,m=function(e,t,i){return(e<t||e>i)&&(n?e=Math.min(Math.max(t,e),i):c=!0),e};return r=T(r,this.translate(e,null,null,i)),a=s=Math.round(r+g),o=l=Math.round(p-r-g),b(r)?this.horiz?(o=d,l=p-this.bottom,a=s=m(a,h,h+this.width)):(a=h,s=f-this.right,o=l=m(o,d,d+this.height)):c=!0,c&&!n?null:u.renderer.crispLine(["M",a,o,"L",s,l],t||1)},getLinearTickPositions:function(e,t,i){var n,r,a=o(Math.floor(t/e)*e),s=o(Math.ceil(i/e)*e),l=[];if(this.single)return[t];for(n=a;n<=s&&(l.push(n),(n=o(n+e))!==r);)r=n;return l},getMinorTickPositions:function(){var e,t=this,i=t.options,n=t.tickPositions,r=t.minorTickInterval,a=[],o=t.pointRangePadding||0,s=t.min-o,l=t.max+o,c=l-s;if(c&&c/r<t.len/3)if(t.isLog)h(this.paddedTicks,function(e,i,n){i&&a.push.apply(a,t.getLogTickPositions(r,n[i-1],n[i],!0))});else if(t.isDatetimeAxis&&"auto"===i.minorTickInterval)a=a.concat(t.getTimeTicks(t.normalizeTimeTickInterval(r),s,l,i.startOfWeek));else for(e=s+(n[0]-s)%r;e<=l&&e!==a[0];e+=r)a.push(e);return 0!==a.length&&t.trimTicks(a),a},adjustForMinRange:function(){var e,t,i,a,o,s,c,u,d,p=this.options,f=this.min,g=this.max;this.isXAxis&&void 0===this.minRange&&!this.isLog&&(l(p.min)||l(p.max)?this.minRange=null:(h(this.series,function(e){for(s=e.xData,a=e.xIncrement?1:s.length-1;a>0;a--)o=s[a]-s[a-1],(void 0===i||o<i)&&(i=o)}),this.minRange=Math.min(5*i,this.dataMax-this.dataMin))),g-f<this.minRange&&(t=this.dataMax-this.dataMin>=this.minRange,c=[f-(e=((d=this.minRange)-g+f)/2),T(p.min,f-e)],t&&(c[2]=this.isLog?this.log2lin(this.dataMin):this.dataMin),u=[(f=n(c))+d,T(p.max,f+d)],t&&(u[2]=this.isLog?this.log2lin(this.dataMax):this.dataMax),(g=r(u))-f<d&&(c[0]=g-d,c[1]=T(p.min,g-d),f=n(c))),this.min=f,this.max=g},getClosest:function(){var e;return this.categories?e=1:h(this.series,function(t){var i=t.closestPointRange,n=t.visible||!t.chart.options.chart.ignoreHiddenSeries;!t.noSharedTooltip&&l(i)&&n&&(e=l(e)?Math.min(e,i):i)}),e},nameToX:function(e){var t,i=v(this.categories),n=i?this.categories:this.names,r=e.options.x;return e.series.requireSorting=!1,l(r)||(r=!1===this.options.uniqueNames?e.series.autoIncrement():y(e.name,n)),-1===r?i||(t=n.length):t=r,void 0!==t&&(this.names[t]=e.name),t},updateNames:function(){var e=this;this.names.length>0&&(this.names.length=0,this.minRange=this.userMinRange,h(this.series||[],function(t){t.xIncrement=null,t.points&&!t.isDirtyData||(t.processData(),t.generatePoints()),h(t.points,function(i,n){var r;i.options&&void 0!==(r=e.nameToX(i))&&r!==i.x&&(i.x=r,t.xData[n]=r)})}))},setAxisTranslation:function(e){var t,i,n=this,r=n.max-n.min,a=n.axisPointRange||0,o=0,s=0,l=n.linkedParent,c=!!n.categories,u=n.transA,d=n.isXAxis;(d||c||a)&&(t=n.getClosest(),l?(o=l.minPointOffset,s=l.pointRangePadding):h(n.series,function(e){var i=c?1:d?T(e.options.pointRange,t,0):n.axisPointRange||0,r=e.options.pointPlacement;a=Math.max(a,i),n.single||(o=Math.max(o,C(r)?0:i/2),s=Math.max(s,"on"===r?0:i))}),n.minPointOffset=o*=i=n.ordinalSlope&&t?n.ordinalSlope/t:1,n.pointRangePadding=s*=i,n.pointRange=Math.min(a,r),d&&(n.closestPointRange=t)),e&&(n.oldTransA=u),n.translationSlope=n.transA=u=n.options.staticScale||n.len/(r+s||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=u*o},minFromRange:function(){return this.max-this.range},setTickInterval:function(t){var i,n,r,a,s,c,u,d=this,f=d.chart,m=d.options,y=d.isLog,v=d.log2lin,C=d.isDatetimeAxis,S=d.isXAxis,x=d.isLinked,k=m.maxPadding,E=m.minPadding,A=m.tickInterval,I=m.tickPixelInterval,D=d.categories,B=d.threshold,_=d.softThreshold;C||D||x||this.getTickAmount(),c=T(d.userMin,m.min),u=T(d.userMax,m.max),x?(d.linkedParent=f[d.coll][m.linkedTo],n=d.linkedParent.getExtremes(),d.min=T(n.min,n.dataMin),d.max=T(n.max,n.dataMax),m.type!==d.linkedParent.options.type&&e.error(11,1)):(!_&&l(B)&&(d.dataMin>=B?(a=B,E=0):d.dataMax<=B&&(s=B,k=0)),d.min=T(c,a,d.dataMin),d.max=T(u,s,d.dataMax)),y&&(d.positiveValuesOnly&&!t&&Math.min(d.min,T(d.dataMin,d.min))<=0&&e.error(10,1),d.min=o(v(d.min),15),d.max=o(v(d.max),15)),d.range&&l(d.max)&&(d.userMin=d.min=c=Math.max(d.dataMin,d.minFromRange()),d.userMax=u=d.max,d.range=null),p(d,"foundExtremes"),d.beforePadding&&d.beforePadding(),d.adjustForMinRange(),D||d.axisPointRange||d.usePercentage||x||!l(d.min)||!l(d.max)||(i=d.max-d.min)&&(!l(c)&&E&&(d.min-=i*E),!l(u)&&k&&(d.max+=i*k)),b(m.softMin)&&(d.min=Math.min(d.min,m.softMin)),b(m.softMax)&&(d.max=Math.max(d.max,m.softMax)),b(m.floor)&&(d.min=Math.max(d.min,m.floor)),b(m.ceiling)&&(d.max=Math.min(d.max,m.ceiling)),_&&l(d.dataMin)&&(B=B||0,!l(c)&&d.min<B&&d.dataMin>=B?d.min=B:!l(u)&&d.max>B&&d.dataMax<=B&&(d.max=B)),d.tickInterval=d.min===d.max||void 0===d.min||void 0===d.max?1:x&&!A&&I===d.linkedParent.options.tickPixelInterval?A=d.linkedParent.tickInterval:T(A,this.tickAmount?(d.max-d.min)/Math.max(this.tickAmount-1,1):void 0,D?1:(d.max-d.min)*I/Math.max(d.len,I)),S&&!t&&h(d.series,function(e){e.processData(d.min!==d.oldMin||d.max!==d.oldMax)}),d.setAxisTranslation(!0),d.beforeSetTickPositions&&d.beforeSetTickPositions(),d.postProcessTickInterval&&(d.tickInterval=d.postProcessTickInterval(d.tickInterval)),d.pointRange&&!A&&(d.tickInterval=Math.max(d.pointRange,d.tickInterval)),r=T(m.minTickInterval,d.isDatetimeAxis&&d.closestPointRange),!A&&d.tickInterval<r&&(d.tickInterval=r),C||y||A||(d.tickInterval=w(d.tickInterval,null,g(d.tickInterval),T(m.allowDecimals,!(d.tickInterval>.5&&d.tickInterval<5&&d.max>1e3&&d.max<9999)),!!this.tickAmount)),this.tickAmount||(d.tickInterval=d.unsquish()),this.setTickPositions()},setTickPositions:function(){var e,t=this.options,i=t.tickPositions,n=t.tickPositioner,r=t.startOnTick,a=t.endOnTick;this.tickmarkOffset=this.categories&&"between"===t.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===t.minorTickInterval&&this.tickInterval?this.tickInterval/5:t.minorTickInterval,this.single=this.min===this.max&&l(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==t.allowDecimals),this.tickPositions=e=i&&i.slice(),e||((e=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,t.units),this.min,this.max,t.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max)).length>this.len&&(e=[e[0],e.pop()]),this.tickPositions=e,n&&(n=n.apply(this,[this.min,this.max]))&&(this.tickPositions=e=n)),this.paddedTicks=e.slice(0),this.trimTicks(e,r,a),this.isLinked||(this.single&&e.length<2&&(this.min-=.5,this.max+=.5),i||n||this.adjustTickAmount())},trimTicks:function(e,t,i){var n=e[0],r=e[e.length-1],a=this.minPointOffset||0;if(!this.isLinked){if(t&&n!==-1/0)this.min=n;else for(;this.min-a>e[0];)e.shift();if(i)this.max=r;else for(;this.max+a<e[e.length-1];)e.pop();0===e.length&&l(n)&&e.push((r+n)/2)}},alignToOthers:function(){var e,t={};return!1===this.chart.options.chart.alignTicks||!1===this.options.alignTicks||this.isLog||h(this.chart[this.coll],function(i){var n=i.options,r=[i.horiz?n.left:n.top,n.width,n.height,n.pane].join(",");i.series.length&&(t[r]?e=!0:t[r]=1)}),e},getTickAmount:function(){var e=this.options,t=e.tickAmount,i=e.tickPixelInterval;!l(e.tickInterval)&&this.len<i&&!this.isRadial&&!this.isLog&&e.startOnTick&&e.endOnTick&&(t=2),!t&&this.alignToOthers()&&(t=Math.ceil(this.len/i)+1),t<4&&(this.finalTickAmt=t,t=5),this.tickAmount=t},adjustTickAmount:function(){var e,t,i=this.tickInterval,n=this.tickPositions,r=this.tickAmount,a=this.finalTickAmt,s=n&&n.length;if(s<r){for(;n.length<r;)n.push(o(n[n.length-1]+i));this.transA*=(s-1)/(r-1),this.max=n[n.length-1]}else s>r&&(this.tickInterval*=2,this.setTickPositions());if(l(a)){for(e=t=n.length;e--;)(3===a&&e%2==1||a<=2&&e>0&&e<t-1)&&n.splice(e,1);this.finalTickAmt=void 0}},setScale:function(){var e,t;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),t=this.len!==this.oldAxisLength,h(this.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(e=!0)}),t||e||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax||this.alignToOthers()?(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=t||this.min!==this.oldMin||this.max!==this.oldMax)):this.cleanStacks&&this.cleanStacks()},setExtremes:function(e,t,i,n,r){var a=this,o=a.chart;i=T(i,!0),h(a.series,function(e){delete e.kdTree}),r=d(r,{min:e,max:t}),p(a,"setExtremes",r,function(){a.userMin=e,a.userMax=t,a.eventArgs=r,i&&o.redraw(n)})},zoom:function(e,t){var i=this.dataMin,n=this.dataMax,r=this.options,a=Math.min(i,T(r.min,i)),o=Math.max(n,T(r.max,n));return e===this.min&&t===this.max||(this.allowZoomOutside||(l(i)&&(e<a&&(e=a),e>o&&(e=o)),l(n)&&(t<a&&(t=a),t>o&&(t=o))),this.displayBtn=void 0!==e||void 0!==t,this.setExtremes(e,t,!1,void 0,{trigger:"zoom"})),!0},setAxisSize:function(){var t=this.chart,i=this.options,n=i.offsets||[0,0,0,0],r=this.horiz,a=this.width=Math.round(e.relativeLength(T(i.width,t.plotWidth-n[3]+n[1]),t.plotWidth)),o=this.height=Math.round(e.relativeLength(T(i.height,t.plotHeight-n[0]+n[2]),t.plotHeight)),s=this.top=Math.round(e.relativeLength(T(i.top,t.plotTop+n[0]),t.plotHeight,t.plotTop)),l=this.left=Math.round(e.relativeLength(T(i.left,t.plotLeft+n[3]),t.plotWidth,t.plotLeft));this.bottom=t.chartHeight-o-s,this.right=t.chartWidth-a-l,this.len=Math.max(r?a:o,0),this.pos=r?l:s},getExtremes:function(){var e=this.isLog,t=this.lin2log;return{min:e?o(t(this.min)):this.min,max:e?o(t(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(e){var t=this.isLog,i=this.lin2log,n=t?i(this.min):this.min,r=t?i(this.max):this.max;return null===e?e=n:n>e?e=n:r<e&&(e=r),this.translate(e,0,1,0,1)},autoLabelAlign:function(e){var t=(T(e,0)-90*this.side+720)%360;return t>15&&t<165?"right":t>195&&t<345?"left":"center"},tickSize:function(e){var t=this.options,i=t[e+"Length"],n=T(t[e+"Width"],"tick"===e&&this.isXAxis?1:0);if(n&&i)return"inside"===t[e+"Position"]&&(i=-i),[i,n]},labelMetrics:function(){var e=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style&&this.options.labels.style.fontSize,this.ticks[e]&&this.ticks[e].label)},unsquish:function(){var e,t,i,n=this.options.labels,r=this.horiz,a=this.tickInterval,o=a,s=this.len/(((this.categories?1:0)+this.max-this.min)/a),u=n.rotation,d=this.labelMetrics(),p=Number.MAX_VALUE,f=function(e){var t=e/(s||1);return(t=t>1?Math.ceil(t):1)*a};return r?(i=!n.staggerLines&&!n.step&&(l(u)?[u]:s<T(n.autoRotationLimit,80)&&n.autoRotation))&&h(i,function(i){var n;(i===u||i&&i>=-90&&i<=90)&&(n=(t=f(Math.abs(d.h/Math.sin(c*i))))+Math.abs(i/360))<p&&(p=n,e=i,o=t)}):n.step||(o=f(d.h)),this.autoRotation=i,this.labelRotation=T(e,u),o},getSlotWidth:function(){var e=this.chart,t=this.horiz,i=this.options.labels,n=Math.max(this.tickPositions.length-(this.categories?0:1),1),r=e.margin[3];return t&&(i.step||0)<2&&!i.rotation&&(this.staggerLines||1)*this.len/n||!t&&(r&&r-e.spacing[3]||.33*e.chartWidth)},renderUnsquish:function(){var e,t,i,n,r=this.chart,a=r.renderer,o=this.tickPositions,s=this.ticks,l=this.options.labels,c=this.horiz,u=this.getSlotWidth(),d=Math.max(1,Math.round(u-2*(l.padding||5))),p={},f=this.labelMetrics(),g=l.style&&l.style.textOverflow,m=0;if(C(l.rotation)||(p.rotation=l.rotation||0),h(o,function(e){(e=s[e])&&e.labelLength>m&&(m=e.labelLength)}),this.maxLabelLength=m,this.autoRotation)m>d&&m>f.h?p.rotation=this.labelRotation:this.labelRotation=0;else if(u&&(e={width:d+"px"},!g))for(e.textOverflow="clip",i=o.length;!c&&i--;)(t=s[n=o[i]].label)&&(t.styles&&"ellipsis"===t.styles.textOverflow?t.css({textOverflow:"clip"}):s[n].labelLength>u&&t.css({width:u+"px"}),t.getBBox().height>this.len/o.length-(f.h-f.f)&&(t.specCss={textOverflow:"ellipsis"}));p.rotation&&(e={width:(m>.5*r.chartHeight?.33*r.chartHeight:r.chartHeight)+"px"},g||(e.textOverflow="ellipsis")),this.labelAlign=l.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(p.align=this.labelAlign),h(o,function(t){var i=s[t],n=i&&i.label;n&&(n.attr(p),e&&n.css(S(e,n.specCss)),delete n.specCss,i.rotation=p.rotation)}),this.tickRotCorr=a.rotCorr(f.b,this.labelRotation||0,0!==this.side)},hasData:function(){return this.hasVisibleSeries||l(this.min)&&l(this.max)&&!!this.tickPositions},addTitle:function(e){var t,i=this.opposite,n=this.options.title;this.axisTitle||((t=n.textAlign)||(t=(this.horiz?{low:"left",middle:"center",high:"right"}:{low:i?"right":"left",middle:"center",high:i?"left":"right"})[n.align]),this.axisTitle=this.chart.renderer.text(n.text,0,0,n.useHTML).attr({zIndex:7,rotation:n.rotation||0,align:t}).addClass("highcharts-axis-title").css(n.style).add(this.axisGroup),this.axisTitle.isNew=!0),n.style.width||this.isRadial||this.axisTitle.css({width:this.len}),this.axisTitle[e?"show":"hide"](!0)},generateTick:function(e){var t=this.ticks;t[e]?t[e].addLabel():t[e]=new I(this,e)},getOffset:function(){var e,t,i,n,r,a,o=this,s=o.chart,c=s.renderer,u=o.options,d=o.tickPositions,p=o.ticks,f=o.horiz,g=o.side,m=s.inverted&&!o.isZAxis?[1,0,3,2][g]:g,y=0,v=0,b=u.title,C=u.labels,S=0,w=s.axisOffset,k=s.clipOffset,E=[-1,1,1,-1][g],A=u.className,I=o.axisParent,D=this.tickSize("tick");e=o.hasData(),o.showAxis=t=e||T(u.showEmpty,!0),o.staggerLines=o.horiz&&C.staggerLines,o.axisGroup||(o.gridGroup=c.g("grid").attr({zIndex:u.gridZIndex||1}).addClass("highcharts-"+this.coll.toLowerCase()+"-grid "+(A||"")).add(I),o.axisGroup=c.g("axis").attr({zIndex:u.zIndex||2}).addClass("highcharts-"+this.coll.toLowerCase()+" "+(A||"")).add(I),o.labelGroup=c.g("axis-labels").attr({zIndex:C.zIndex||7}).addClass("highcharts-"+o.coll.toLowerCase()+"-labels "+(A||"")).add(I)),e||o.isLinked?(h(d,function(e,t){o.generateTick(e,t)}),o.renderUnsquish(),!1===C.reserveSpace||0!==g&&2!==g&&{1:"left",3:"right"}[g]!==o.labelAlign&&"center"!==o.labelAlign||h(d,function(e){S=Math.max(p[e].getLabelSize(),S)}),o.staggerLines&&(o.labelOffset=(S*=o.staggerLines)*(o.opposite?-1:1))):x(p,function(e,t){e.destroy(),delete p[t]}),b&&b.text&&!1!==b.enabled&&(o.addTitle(t),t&&!1!==b.reserveSpace&&(o.titleOffset=y=o.axisTitle.getBBox()[f?"height":"width"],v=l(i=b.offset)?0:T(b.margin,f?5:10))),o.renderLine(),o.offset=E*T(u.offset,w[g]),o.tickRotCorr=o.tickRotCorr||{x:0,y:0},a=0===g?-o.labelMetrics().h:2===g?o.tickRotCorr.y:0,n=Math.abs(S)+v,S&&(n-=a,n+=E*(f?T(C.y,o.tickRotCorr.y+8*E):C.x)),o.axisTitleMargin=T(i,n),w[g]=Math.max(w[g],o.axisTitleMargin+y+E*o.offset,n,e&&d.length&&D?D[0]+E*o.offset:0),r=2*Math.floor(o.axisLine.strokeWidth()/2),u.offset>0&&(r-=2*u.offset),k[m]=Math.max(k[m]||r,r)},getLinePath:function(e){var t=this.chart,i=this.opposite,n=this.offset,r=this.horiz,a=this.left+(i?this.width:0)+n,o=t.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(e*=-1),t.renderer.crispLine(["M",r?this.left:a,r?o:this.top,"L",r?t.chartWidth-this.right:a,r?o:t.chartHeight-this.bottom],e)},renderLine:function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},getTitlePosition:function(){var e=this.horiz,t=this.left,i=this.top,n=this.len,r=this.options.title,a=e?t:i,o=this.opposite,s=this.offset,l=r.x||0,c=r.y||0,u=this.axisTitle,h=this.chart.renderer.fontMetrics(r.style&&r.style.fontSize,u),d=Math.max(u.getBBox(null,0).height-h.h-1,0),p={low:a+(e?0:n),middle:a+n/2,high:a+(e?n:0)}[r.align],f=(e?i+this.height:t)+(e?1:-1)*(o?-1:1)*this.axisTitleMargin+[-d,d,h.f,-d][this.side];return{x:e?p+l:f+(o?this.width:0)+s+l,y:e?f+c-(o?this.height:0)+s:p+c}},renderMinorTick:function(e){var t=this.chart.hasRendered&&b(this.oldMin),i=this.minorTicks;i[e]||(i[e]=new I(this,e,"minor")),t&&i[e].isNew&&i[e].render(null,!0),i[e].render(null,!1,1)},renderTick:function(e,t){var i=this.isLinked,n=this.ticks,r=this.chart.hasRendered&&b(this.oldMin);(!i||e>=this.min&&e<=this.max)&&(n[e]||(n[e]=new I(this,e)),r&&n[e].isNew&&n[e].render(t,!0,.1),n[e].render(t))},render:function(){var t,n,r=this,a=r.chart,o=r.options,s=r.isLog,l=r.lin2log,c=r.isLinked,u=r.tickPositions,d=r.axisTitle,p=r.ticks,f=r.minorTicks,g=r.alternateBands,m=o.stackLabels,y=o.alternateGridColor,v=r.tickmarkOffset,C=r.axisLine,S=r.showAxis,w=i(a.renderer.globalAnimation);if(r.labelEdge.length=0,r.overlap=!1,h([p,f,g],function(e){x(e,function(e){e.isActive=!1})}),(r.hasData()||c)&&(r.minorTickInterval&&!r.categories&&h(r.getMinorTickPositions(),function(e){r.renderMinorTick(e)}),u.length&&(h(u,function(e,t){r.renderTick(e,t)}),v&&(0===r.min||r.single)&&(p[-1]||(p[-1]=new I(r,-1,null,!0)),p[-1].render(-1))),y&&h(u,function(i,o){n=void 0!==u[o+1]?u[o+1]+v:r.max-v,o%2==0&&i<r.max&&n<=r.max+(a.polar?-v:v)&&(g[i]||(g[i]=new e.PlotLineOrBand(r)),t=i+v,g[i].options={from:s?l(t):t,to:s?l(n):n,color:y},g[i].render(),g[i].isActive=!0)}),r._addedPlotLB||(h((o.plotLines||[]).concat(o.plotBands||[]),function(e){r.addPlotBandOrLine(e)}),r._addedPlotLB=!0)),h([p,f,g],function(e){var t,i=[],n=w.duration;x(e,function(e,t){e.isActive||(e.render(t,!1,0),e.isActive=!1,i.push(t))}),A(function(){for(t=i.length;t--;)e[i[t]]&&!e[i[t]].isActive&&(e[i[t]].destroy(),delete e[i[t]])},e!==g&&a.hasRendered&&n?n:0)}),C&&(C[C.isPlaced?"animate":"attr"]({d:this.getLinePath(C.strokeWidth())}),C.isPlaced=!0,C[S?"show":"hide"](!0)),d&&S){var T=r.getTitlePosition();b(T.y)?(d[d.isNew?"attr":"animate"](T),d.isNew=!1):(d.attr("y",-9999),d.isNew=!0)}m&&m.enabled&&r.renderStackTotals(),r.isDirty=!1},redraw:function(){this.visible&&(this.render(),h(this.plotLinesAndBands,function(e){e.render()})),h(this.series,function(e){e.isDirty=!0})},keepProps:["extKey","hcEvents","names","series","userMax","userMin"],destroy:function(e){var t,i,n=this,r=n.stacks,a=n.plotLinesAndBands;if(e||k(n),x(r,function(e,t){u(e),r[t]=null}),h([n.ticks,n.minorTicks,n.alternateBands],function(e){u(e)}),a)for(i=a.length;i--;)a[i].destroy();for(t in h(["stackTotalGroup","axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross"],function(e){n[e]&&(n[e]=n[e].destroy())}),n.plotLinesAndBandsGroups)n.plotLinesAndBandsGroups[t]=n.plotLinesAndBandsGroups[t].destroy();x(n,function(e,t){-1===y(t,n.keepProps)&&delete n[t]})},drawCrosshair:function(e,t){var i,n,r,o=this.crosshair,s=T(o.snap,!0),c=this.cross;if(e||(e=this.cross&&this.cross.e),this.crosshair&&!1!==(l(t)||!s)){if(s?l(t)&&(n=this.isXAxis?t.plotX:this.len-t.plotY):n=e&&(this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos),l(n)&&(i=this.getPlotLinePath(t&&(this.isXAxis?t.x:T(t.stackY,t.y)),null,null,null,n)||null),!l(i))return void this.hideCrosshair();r=this.categories&&!this.isRadial,c||(this.cross=c=this.chart.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(r?"category ":"thin ")+o.className).attr({zIndex:T(o.zIndex,2)}).add(),c.attr({stroke:o.color||(r?a("#ccd6eb").setOpacity(.25).get():"#cccccc"),"stroke-width":T(o.width,1)}),o.dashStyle&&c.attr({dashstyle:o.dashStyle})),c.show().attr({d:i}),r&&!o.width&&c.attr({"stroke-width":this.transA}),this.cross.e=e}else this.hideCrosshair()},hideCrosshair:function(){this.cross&&this.cross.hide()}}),e.Axis=D,D}(s);return function(e){var t=s.Axis,i=s.Date,n=s.dateFormat,r=s.defaultOptions,a=s.defined,o=s.each,l=s.extend,c=s.getMagnitude,u=s.getTZOffset,h=s.normalizeTickInterval,d=s.pick,p=s.timeUnits;t.prototype.getTimeTicks=function(e,t,s,c){var h,f,g,m,y=[],v={},b=r.global.useUTC,C=new i(t-Math.max(u(t),u(s))),S=i.hcMakeTime,w=e.unitRange,x=e.count;if(a(t)){C[i.hcSetMilliseconds](w>=p.second?0:x*Math.floor(C.getMilliseconds()/x)),w>=p.second&&C[i.hcSetSeconds](w>=p.minute?0:x*Math.floor(C.getSeconds()/x)),w>=p.minute&&C[i.hcSetMinutes](w>=p.hour?0:x*Math.floor(C[i.hcGetMinutes]()/x)),w>=p.hour&&C[i.hcSetHours](w>=p.day?0:x*Math.floor(C[i.hcGetHours]()/x)),w>=p.day&&C[i.hcSetDate](w>=p.month?1:x*Math.floor(C[i.hcGetDate]()/x)),w>=p.month&&(C[i.hcSetMonth](w>=p.year?0:x*Math.floor(C[i.hcGetMonth]()/x)),f=C[i.hcGetFullYear]()),w>=p.year&&C[i.hcSetFullYear](f-=f%x),w===p.week&&C[i.hcSetDate](C[i.hcGetDate]()-C[i.hcGetDay]()+d(c,1)),f=C[i.hcGetFullYear]();var T=C[i.hcGetMonth](),k=C[i.hcGetDate](),E=C[i.hcGetHours]();(i.hcTimezoneOffset||i.hcGetTimezoneOffset)&&(m=(!b||!!i.hcGetTimezoneOffset)&&(s-t>4*p.month||u(t)!==u(s)),C=C.getTime(),g=u(C),C=new i(C+g));var A=C.getTime();for(h=1;A<s;)y.push(A),w===p.year?A=S(f+h*x,0):w===p.month?A=S(f,T+h*x):!m||w!==p.day&&w!==p.week?m&&w===p.hour?A=S(f,T,k,E+h*x,0,0,g)-g:A+=w*x:A=S(f,T,k+h*x*(w===p.day?1:7)),h++;y.push(A),w<=p.hour&&y.length<1e4&&o(y,function(e){e%18e5==0&&"000000000"===n("%H%M%S%L",e)&&(v[e]="day")})}return y.info=l(e,{higherRanks:v,totalRange:w*x}),y},t.prototype.normalizeTimeTickInterval=function(e,t){var i,n=t||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],r=n[n.length-1],a=p[r[0]],o=r[1];for(i=0;i<n.length&&(a=p[(r=n[i])[0]],o=r[1],!(n[i+1]&&e<=(a*o[o.length-1]+p[n[i+1][0]])/2));i++);return a===p.year&&e<5*a&&(o=[1,2,5]),{unitRange:a,count:h(e/a,o,"year"===r[0]?Math.max(c(e/a),1):1),unitName:r[0]}}}(),function(e){var t=s.Axis,i=s.getMagnitude,n=s.map,r=s.normalizeTickInterval,a=s.pick;t.prototype.getLogTickPositions=function(e,t,o,s){var l=this.options,c=this.len,u=this.lin2log,h=this.log2lin,d=[];if(s||(this._minorAutoInterval=null),e>=.5)e=Math.round(e),d=this.getLinearTickPositions(e,t,o);else if(e>=.08){var p,f,g,m,y,v,b,C=Math.floor(t);for(p=e>.3?[1,2,4]:e>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],f=C;f<o+1&&!b;f++)for(m=p.length,g=0;g<m&&!b;g++)(y=h(u(f)*p[g]))>t&&(!s||v<=o)&&void 0!==v&&d.push(v),v>o&&(b=!0),v=y}else{var S=u(t),w=u(o),x=l[s?"minorTickInterval":"tickInterval"];e=a("auto"===x?null:x,this._minorAutoInterval,l.tickPixelInterval/(s?5:1)*(w-S)/((s?c/this.tickPositions.length:c)||1)),e=r(e,null,i(e)),d=n(this.getLinearTickPositions(e,S,w),h),s||(this._minorAutoInterval=e/5)}return s||(this.tickInterval=e),d},t.prototype.log2lin=function(e){return Math.log(e)/Math.LN10},t.prototype.lin2log=function(e){return Math.pow(10,e)}}(),function(e,t){var i=e.arrayMax,n=e.arrayMin,r=e.defined,a=e.destroyObjectProperties,o=e.each,s=e.erase,l=e.merge,c=e.pick;e.PlotLineOrBand=function(e,t){this.axis=e,t&&(this.options=t,this.id=t.id)},e.PlotLineOrBand.prototype={render:function(){var t,i=this,n=i.axis,a=n.horiz,o=i.options,s=o.label,u=i.label,h=o.to,d=o.from,p=o.value,f=r(d)&&r(h),g=r(p),m=i.svgElem,y=!m,v=[],b=o.color,C=c(o.zIndex,0),S=o.events,w={class:"highcharts-plot-"+(f?"band ":"line ")+(o.className||"")},x={},T=n.chart.renderer,k=f?"bands":"lines",E=n.log2lin;if(n.isLog&&(d=E(d),h=E(h),p=E(p)),g?(w={stroke:b,"stroke-width":o.width},o.dashStyle&&(w.dashstyle=o.dashStyle)):f&&(b&&(w.fill=b),o.borderWidth&&(w.stroke=o.borderColor,w["stroke-width"]=o.borderWidth)),x.zIndex=C,(t=n.plotLinesAndBandsGroups[k+="-"+C])||(n.plotLinesAndBandsGroups[k]=t=T.g("plot-"+k).attr(x).add()),y&&(i.svgElem=m=T.path().attr(w).add(t)),g)v=n.getPlotLinePath(p,m.strokeWidth());else{if(!f)return;v=n.getPlotBandPath(d,h,o)}return y&&v&&v.length?(m.attr({d:v}),S&&e.objectEach(S,function(e,t){m.on(t,function(e){S[t].apply(i,[e])})})):m&&(v?(m.show(),m.animate({d:v})):(m.hide(),u&&(i.label=u=u.destroy()))),s&&r(s.text)&&v&&v.length&&n.width>0&&n.height>0&&!v.flat?(s=l({align:a&&f&&"center",x:a?!f&&4:10,verticalAlign:!a&&f&&"middle",y:a?f?16:10:f?6:-4,rotation:a&&!f&&90},s),this.renderLabel(s,v,f,C)):u&&u.hide(),i},renderLabel:function(e,t,r,a){var o,s,l,c,u,h=this.label,d=this.axis.chart.renderer;h||((o={align:e.textAlign||e.align,rotation:e.rotation,class:"highcharts-plot-"+(r?"band":"line")+"-label "+(e.className||"")}).zIndex=a,this.label=h=d.text(e.text,0,0,e.useHTML).attr(o).add(),h.css(e.style)),s=[t[1],t[4],r?t[6]:t[1]],l=[t[2],t[5],r?t[7]:t[2]],c=n(s),u=n(l),h.align(e,!1,{x:c,y:u,width:i(s)-c,height:i(l)-u}),h.show()},destroy:function(){s(this.axis.plotLinesAndBands,this),delete this.axis,a(this)}},e.extend(t.prototype,{getPlotBandPath:function(e,t){var i=this.getPlotLinePath(t,null,null,!0),n=this.getPlotLinePath(e,null,null,!0),r=this.horiz,a=1;return n&&i?((e<this.min&&t<this.min||e>this.max&&t>this.max)&&(n.flat=n.toString()===i.toString(),a=0),n.push(r&&i[4]===n[4]?i[4]+a:i[4],r||i[5]!==n[5]?i[5]:i[5]+a,r&&i[1]===n[1]?i[1]+a:i[1],r||i[2]!==n[2]?i[2]:i[2]+a)):n=null,n},addPlotBand:function(e){return this.addPlotBandOrLine(e,"plotBands")},addPlotLine:function(e){return this.addPlotBandOrLine(e,"plotLines")},addPlotBandOrLine:function(t,i){var n=new e.PlotLineOrBand(this,t).render(),r=this.userOptions;return n&&(i&&(r[i]=r[i]||[],r[i].push(t)),this.plotLinesAndBands.push(n)),n},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,i=this.options,n=this.userOptions,r=t.length;r--;)t[r].id===e&&t[r].destroy();o([i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]],function(t){for(r=t.length;r--;)t[r].id===e&&s(t,t[r])})},removePlotBand:function(e){this.removePlotBandOrLine(e)},removePlotLine:function(e){this.removePlotBandOrLine(e)}})}(s,h),function(e){var t=e.dateFormat,i=e.each,n=e.extend,r=e.format,a=e.isNumber,o=e.map,s=e.merge,l=e.pick,c=e.splat,u=e.syncTimeout,h=e.timeUnits;e.Tooltip=function(){this.init.apply(this,arguments)},e.Tooltip.prototype={init:function(e,t){this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=t.split&&!e.inverted,this.shared=t.shared||this.split},cleanSplit:function(e){i(this.chart.series,function(t){var i=t&&t.tt;i&&(!i.isActive||e?t.tt=i.destroy():i.isActive=!1)})},getLabel:function(){var e=this.chart.renderer,t=this.options;return this.label||(this.split?this.label=e.g("tooltip"):(this.label=e.label("",0,0,t.shape||"callout",null,null,t.useHTML,null,"tooltip").attr({padding:t.padding,r:t.borderRadius}),this.label.attr({fill:t.backgroundColor,"stroke-width":t.borderWidth}).css(t.style).shadow(t.shadow)),this.label.attr({zIndex:8}).add()),this.label},update:function(e){this.destroy(),s(!0,this.chart.options.tooltip.userOptions,e),this.init(this.chart,s(!0,this.options,e))},destroy:function(){this.label&&(this.label=this.label.destroy()),this.split&&this.tt&&(this.cleanSplit(this.chart,!0),this.tt=this.tt.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,t,i,r){var a=this,o=a.now,s=!1!==a.options.animation&&!a.isHidden&&(Math.abs(e-o.x)>1||Math.abs(t-o.y)>1),l=a.followPointer||a.len>1;n(o,{x:s?(2*o.x+e)/3:e,y:s?(o.y+t)/2:t,anchorX:l?void 0:s?(2*o.anchorX+i)/3:i,anchorY:l?void 0:s?(o.anchorY+r)/2:r}),a.getLabel().attr(o),s&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){a&&a.move(e,t,i,r)},32))},hide:function(e){var t=this;clearTimeout(this.hideTimer),e=l(e,this.options.hideDelay,500),this.isHidden||(this.hideTimer=u(function(){t.getLabel()[e?"fadeOut":"hide"](),t.isHidden=!0},e))},getAnchor:function(e,t){var n,r,a,s=this.chart,l=s.inverted,u=s.plotTop,h=s.plotLeft,d=0,p=0;return n=(e=c(e))[0].tooltipPos,this.followPointer&&t&&(void 0===t.chartX&&(t=s.pointer.normalize(t)),n=[t.chartX-s.plotLeft,t.chartY-u]),n||(i(e,function(e){r=e.series.yAxis,a=e.series.xAxis,d+=e.plotX+(!l&&a?a.left-h:0),p+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!l&&r?r.top-u:0)}),d/=e.length,p/=e.length,n=[l?s.plotWidth-p:d,this.shared&&!l&&e.length>1&&t?t.chartY-u:l?s.plotHeight-d:p]),o(n,Math.round)},getPosition:function(e,t,i){var n,r=this.chart,a=this.distance,o={},s=i.h||0,c=["y",r.chartHeight,t,i.plotY+r.plotTop,r.plotTop,r.plotTop+r.plotHeight],u=["x",r.chartWidth,e,i.plotX+r.plotLeft,r.plotLeft,r.plotLeft+r.plotWidth],h=!this.followPointer&&l(i.ttBelow,!r.inverted==!!i.negative),d=function(e){var t=c;c=u,u=t,n=e},p=function(){!1!==(function(e,t,i,n,r,l){var c=i<n-a,u=n+a+i<t,d=n-a-i,p=n+a;if(h&&u)o[e]=p;else if(!h&&c)o[e]=d;else if(c)o[e]=Math.min(l-i,d-s<0?d:d-s);else{if(!u)return!1;o[e]=Math.max(r,p+s+i>t?p:p+s)}}).apply(0,c)?!1!==(function(e,t,i,n){var r;return n<a||n>t-a?r=!1:o[e]=n<i/2?1:n>t-i/2?t-i-2:n-i/2,r}).apply(0,u)||n||(d(!0),p()):n?o.x=o.y=0:(d(!0),p())};return(r.inverted||this.len>1)&&d(),p(),o},defaultFormatter:function(e){var t,i=this.points||c(this);return(t=(t=[e.tooltipFooterHeaderFormatter(i[0])]).concat(e.bodyFormatter(i))).push(e.tooltipFooterHeaderFormatter(i[0],!0)),t},refresh:function(e,t){var n,r,a,o,s,u,h=this.options,d=e,p={},f=[],g=h.formatter||this.defaultFormatter,m=this.shared;h.enabled&&(clearTimeout(this.hideTimer),this.followPointer=c(d)[0].series.tooltipOptions.followPointer,r=(o=this.getAnchor(d,t))[0],a=o[1],!m||d.series&&d.series.noSharedTooltip?p=d.getLabelConfig():(i(d,function(e){e.setState("hover"),f.push(e.getLabelConfig())}),(p={x:d[0].category,y:d[0].y}).points=f,d=d[0]),this.len=f.length,s=g.call(p,this),this.distance=l((u=d.series).tooltipOptions.distance,16),!1===s?this.hide():(n=this.getLabel(),this.isHidden&&n.attr({opacity:1}).show(),this.split?this.renderSplit(s,e):(h.style.width||n.css({width:this.chart.spacingBox.width}),n.attr({text:s&&s.join?s.join(""):s}),n.removeClass(/highcharts-color-[\d]+/g).addClass("highcharts-color-"+l(d.colorIndex,u.colorIndex)),n.attr({stroke:h.borderColor||d.color||u.color||"#666666"}),this.updatePosition({plotX:r,plotY:a,negative:d.negative,ttBelow:d.ttBelow,h:o[2]||0})),this.isHidden=!1))},renderSplit:function(t,n){var r=this,a=[],o=this.chart,s=o.renderer,c=!0,u=this.options,h=0,d=this.getLabel();i(t.slice(0,n.length+1),function(e,t){if(!1!==e){var i,p,f,g,m=n[t-1]||{isHeader:!0,plotX:n[0].plotX},y=m.series||r,v=y.tt,b=m.series||{},C="highcharts-color-"+l(m.colorIndex,b.colorIndex,"none");v||(y.tt=v=s.label(null,null,null,"callout").addClass("highcharts-tooltip-box "+C).attr({padding:u.padding,r:u.borderRadius,fill:u.backgroundColor,stroke:u.borderColor||m.color||b.color||"#333333","stroke-width":u.borderWidth}).add(d)),v.isActive=!0,v.attr({text:e}),v.css(u.style).shadow(u.shadow),g=(f=v.getBBox()).width+v.strokeWidth(),m.isHeader?(h=f.height,p=Math.max(0,Math.min(m.plotX+o.plotLeft-g/2,o.chartWidth-g))):p=m.plotX+o.plotLeft-l(u.distance,16)-g,p<0&&(c=!1),i=(m.series&&m.series.yAxis&&m.series.yAxis.pos)+(m.plotY||0),i-=o.plotTop,a.push({target:m.isHeader?o.plotHeight+h:i,rank:m.isHeader?1:0,size:y.tt.getBBox().height+1,point:m,x:p,tt:v})}}),this.cleanSplit(),e.distribute(a,o.plotHeight+h),i(a,function(e){var t=e.point,i=t.series;e.tt.attr({visibility:void 0===e.pos?"hidden":"inherit",x:c||t.isHeader?e.x:t.plotX+o.plotLeft+l(u.distance,16),y:e.pos+o.plotTop,anchorX:t.isHeader?t.plotX+o.plotLeft:t.plotX+i.xAxis.pos,anchorY:t.isHeader?e.pos+o.plotTop-15:t.plotY+i.yAxis.pos})})},updatePosition:function(e){var t=this.chart,i=this.getLabel(),n=(this.options.positioner||this.getPosition).call(this,i.width,i.height,e);this.move(Math.round(n.x),Math.round(n.y||0),e.plotX+t.plotLeft,e.plotY+t.plotTop)},getDateFormat:function(e,i,n,r){var a,o,s=t("%m-%d %H:%M:%S.%L",i),l="01-01 00:00:00.000",c={millisecond:15,second:12,minute:9,hour:6,day:3},u="millisecond";for(o in h){if(e===h.week&&+t("%w",i)===n&&s.substr(6)===l.substr(6)){o="week";break}if(h[o]>e){o=u;break}if(c[o]&&s.substr(c[o])!==l.substr(c[o]))break;"week"!==o&&(u=o)}return o&&(a=r[o]),a},getXDateFormat:function(e,t,i){var n=t.dateTimeLabelFormats,r=i&&i.closestPointRange;return(r?this.getDateFormat(r,e.x,i.options.startOfWeek,n):n.day)||n.year},tooltipFooterHeaderFormatter:function(e,t){var i=t?"footer":"header",n=e.series,o=n.tooltipOptions,s=o.xDateFormat,l=n.xAxis,c=l&&"datetime"===l.options.type&&a(e.key),u=o[i+"Format"];return c&&!s&&(s=this.getXDateFormat(e,o,l)),c&&s&&(u=u.replace("{point.key}","{point.key:"+s+"}")),r(u,{point:e,series:n})},bodyFormatter:function(e){return o(e,function(e){var t=e.series.tooltipOptions;return(t.pointFormatter||e.point.tooltipFormatter).call(e.point,t.pointFormat)})}}}(s),function(e){var t=e,i=t.addEvent,n=t.attr,r=t.charts,a=t.color,o=t.css,s=t.defined,l=t.each,c=t.extend,u=t.find,h=t.fireEvent,d=t.isObject,p=t.offset,f=t.pick,g=t.removeEvent,m=t.splat,y=t.Tooltip,v=t.win;e.Pointer=function(e,t){this.init(e,t)},e.Pointer.prototype={init:function(e,t){this.options=t,this.chart=e,this.runChartClick=t.chart.events&&!!t.chart.events.click,this.pinchDown=[],this.lastValidTouch={},y&&(e.tooltip=new y(e,t.tooltip),this.followTouchMove=f(t.tooltip.followTouchMove,!0)),this.setDOMEvents()},zoomOption:function(e){var t,i,n=this.chart,r=n.options.chart,a=r.zoomType||"",o=n.inverted;/touch/.test(e.type)&&(a=f(r.pinchType,a)),this.zoomX=t=/x/.test(a),this.zoomY=i=/y/.test(a),this.zoomHor=t&&!o||i&&o,this.zoomVert=i&&!o||t&&o,this.hasZoom=t||i},normalize:function(e,t){var i,n,r;return(e=e||v.event).target||(e.target=e.srcElement),r=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e,t||(this.chartPosition=t=p(this.chart.container)),void 0===r.pageX?(i=Math.max(e.x,e.clientX-t.left),n=e.y):(i=r.pageX-t.left,n=r.pageY-t.top),c(e,{chartX:Math.round(i),chartY:Math.round(n)})},getCoordinates:function(e){var t={xAxis:[],yAxis:[]};return l(this.chart.axes,function(i){t[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(e[i.horiz?"chartX":"chartY"])})}),t},findNearestKDPoint:function(e,t,i){var n;return l(e,function(e){var r,a,o,s,l,c=!(e.noSharedTooltip&&t)&&e.options.findNearestPointBy.indexOf("y")<0,u=e.searchPoint(i,c);d(u,!0)&&(!d(n,!0)||(o=(r=n).distX-(a=u).distX,s=r.dist-a.dist,l=(a.series.group&&a.series.group.zIndex)-(r.series.group&&r.series.group.zIndex),(0!==o&&t?o:0!==s?s:0!==l?l:r.series.index>a.series.index?-1:1)>0))&&(n=u)}),n},getPointFromEvent:function(e){for(var t,i=e.target;i&&!t;)t=i.point,i=i.parentNode;return t},getChartCoordinatesFromPoint:function(e,t){var i=e.series,n=i.xAxis,r=i.yAxis;if(n&&r)return t?{chartX:n.len+n.pos-e.clientX,chartY:r.len+r.pos-e.plotY}:{chartX:e.clientX+n.pos,chartY:e.plotY+r.pos}},getHoverData:function(e,i,n,r,a,o){var s,c=[],h=i,p=!(!r||!e),g=function(e){return e.visible&&!(!a&&e.directTouch)&&f(e.options.enableMouseTracking,!0)},m=h&&!h.stickyTracking?[h]:t.grep(n,function(e){return g(e)&&e.stickyTracking});return h=(s=p?e:this.findNearestKDPoint(m,a,o))&&s.series,s&&(a&&!h.noSharedTooltip?(m=t.grep(n,function(e){return g(e)&&!e.noSharedTooltip}),l(m,function(e){var t=u(e.points,function(e){return e.x===s.x});d(t)&&!t.isNull&&c.push(t)})):c.push(s)),{hoverPoint:s,hoverSeries:h,hoverPoints:c}},addCommas:function(e){for(var t=(e+="").split("."),i=t[0],n=t.length>1?"."+t[1]:"",r=/(\d+)(\d{3})/;r.test(i);)i=i.replace(r,"$1,$2");return i+n},runPointActions:function(e,i){var n,r,a=this.chart,o=a.series,s=a.tooltip,c=!!s&&s.shared,u=i||a.hoverPoint,h=u&&u.series||a.hoverSeries,d=this.getHoverData(u,h,o,!!i||h&&h.directTouch&&this.isDirectTouch,c,e);if(void 0!=a.userOptions.custom_highchart&&"undefined"!=typeof d.hoverPoint){if(3==a.userOptions.custom_highchart.chartType){if(o[2].points.indexOf(d.hoverPoint)<0)return!1;var p=a.userOptions.custom_highchart.tradeTimes[d.hoverPoint.index][1]}var g=a.userOptions.custom_highchart;g.clickCallback&&g.clickCallback(d.hoverPoints);var m=new Date(d.hoverPoint.x);if(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),void 0!=g.date_format?$(g.date_target).text(t.dateFormat(g.date_format,m)):$(g.date_target).text(t.dateFormat("%Y/%m/%d",m)),3==a.userOptions.custom_highchart.chartType)$(g.date_target).hide(),$(a.userOptions.custom_highchart.label1_target).html('<i class="fa fa-minus dot color1"></i>'+a.userOptions.custom_highchart.label1_name),$(a.userOptions.custom_highchart.label2_target).html('<i class="fa fa-circle-o dot color2"></i>'+a.userOptions.custom_highchart.label2_name+"<br>\u60a8\u65bc "+t.dateFormat("%Y/%m/%d",m)+" \u6709 "+p+" \u7b46\u63db\u532f\u7d00\u9304");else if(4==a.userOptions.custom_highchart.chartType){var y=[a.userOptions.custom_highchart.rawData[0].name,a.userOptions.custom_highchart.rawData[1].name],v=[a.userOptions.custom_highchart.rawData[0].data[d.hoverPoint.index][1],a.userOptions.custom_highchart.rawData[1].data[d.hoverPoint.index][1]],b=[this.addCommas(v[0]),this.addCommas(v[1])],C=d.hoverPoint.x;1==C.toString().length&&(C="0"+C);var S=new Date(a.userOptions.custom_highchart.rawData[0].year,d.hoverPoint.x,0);$(a.userOptions.custom_highchart.label1_target).html('<i class="fa fa-minus dot color1"></i>'+y[0]+" - "+y[1]),$(a.userOptions.custom_highchart.label2_target).html('<i class="fa fa-circle dot color1"></i>'+C+"/01~"+C+"/"+S.getDate()+"<br> "+y[0]+" "+b[0]+" "+y[1]+" "+b[1]+"<br> "+y[0]+"-"+y[1]+" "+this.addCommas(v[0]-v[1]))}else if(d.hoverPoints.length>1){var w=Number(d.hoverPoints[0].y).toFixed(a.userOptions.custom_highchart.fixed_places),x=Number(d.hoverPoints[1].y).toFixed(a.userOptions.custom_highchart.fixed_places);void 0!=a.userOptions.custom_highchart.thousands_seperator&&1==a.userOptions.custom_highchart.thousands_seperator&&(w=this.addCommas(w),x=this.addCommas(x)),$(a.userOptions.custom_highchart.label1_target).html('<i class="fa fa-circle dot color1"></i>'+a.userOptions.custom_highchart.label1_name+" "+w+a.userOptions.custom_highchart.axisy_unit),$(a.userOptions.custom_highchart.label2_target).html('<i class="fa fa-circle dot color2"></i>'+a.userOptions.custom_highchart.label2_name+" "+x+a.userOptions.custom_highchart.axisy_unit)}else w=Number(d.hoverPoints[0].y).toFixed(a.userOptions.custom_highchart.fixed_places),void 0!=a.userOptions.custom_highchart.thousands_seperator&&1==a.userOptions.custom_highchart.thousands_seperator&&(w=this.addCommas(w)),$(a.userOptions.custom_highchart.label1_target).html('<i class="fa fa-circle dot color1"></i>'+a.userOptions.custom_highchart.label1_name+" "+w+a.userOptions.custom_highchart.axisy_unit)}u=d.hoverPoint,r=d.hoverPoints,h=d.hoverSeries,n=c&&h&&!h.noSharedTooltip,u&&(this.reset(!1,0),l(a.hoverPoints||[],function(e){-1===t.inArray(e,r)&&e.setState()}),l(r||[],function(e){e.setState("hover")}),a.hoverSeries!==h&&h.onMouseOver(),a.hoverPoint&&a.hoverPoint.firePointEvent("mouseOut"),u.firePointEvent("mouseOver"),a.hoverPoints=r,a.hoverPoint=u,s&&s.refresh(n?r:u,e)),l(a.axes,function(i){var n=f(i.crosshair.snap,!0),a=n?t.find(r,function(e){return e.series[i.coll]===i}):void 0;a||!n?i.drawCrosshair(e,a):i.hideCrosshair()})},reset:function(e,t){var i=this.chart,n=i.hoverSeries,r=i.hoverPoint,a=i.hoverPoints,o=i.tooltip,s=o&&o.shared?a:r;e&&s&&l(m(s),function(t){t.series.isCartesian&&void 0===t.plotX&&(e=!1)}),e?o&&s&&(o.refresh(s),r&&(r.setState(r.state,!0),l(i.axes,function(e){e.crosshair&&e.drawCrosshair(null,r)}))):(r&&r.onMouseOut(),a&&l(a,function(e){e.setState()}),n&&n.onMouseOut(),o&&o.hide(t),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),l(i.axes,function(e){e.hideCrosshair()}),this.hoverX=i.hoverPoints=i.hoverPoint=null)},scaleGroups:function(e,t){var i,n=this.chart;l(n.series,function(r){i=e||r.getPlotBox(),r.xAxis&&r.xAxis.zoomEnabled&&r.group&&(r.group.attr(i),r.markerGroup&&(r.markerGroup.attr(i),r.markerGroup.clip(t?n.clipRect:null)),r.dataLabelsGroup&&r.dataLabelsGroup.attr(i))}),n.clipRect.attr(t||n.clipBox)},dragStart:function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,t.mouseDownY=this.mouseDownY=e.chartY},drag:function(e){var t,i,n=this.chart,r=n.options.chart,o=e.chartX,s=e.chartY,l=this.zoomHor,c=this.zoomVert,u=n.plotLeft,h=n.plotTop,d=n.plotWidth,p=n.plotHeight,f=this.selectionMarker,g=this.mouseDownX,m=this.mouseDownY,y=r.panKey&&e[r.panKey+"Key"];f&&f.touch||(o<u?o=u:o>u+d&&(o=u+d),s<h?s=h:s>h+p&&(s=h+p),this.hasDragged=Math.sqrt(Math.pow(g-o,2)+Math.pow(m-s,2)),this.hasDragged>10&&(t=n.isInsidePlot(g-u,m-h),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&t&&!y&&(f||(this.selectionMarker=f=n.renderer.rect(u,h,l?1:d,c?1:p,0).attr({fill:r.selectionMarkerFill||a("#335cad").setOpacity(.25).get(),class:"highcharts-selection-marker",zIndex:7}).add())),f&&l&&(i=o-g,f.attr({width:Math.abs(i),x:(i>0?0:i)+g})),f&&c&&(i=s-m,f.attr({height:Math.abs(i),y:(i>0?0:i)+m})),t&&!f&&r.panning&&n.pan(e,r.panning)))},drop:function(e){var t=this,i=this.chart,n=this.hasPinched;if(this.selectionMarker){var r,a={originalEvent:e,xAxis:[],yAxis:[]},u=this.selectionMarker,d=u.attr?u.attr("x"):u.x,p=u.attr?u.attr("y"):u.y,f=u.attr?u.attr("width"):u.width,g=u.attr?u.attr("height"):u.height;(this.hasDragged||n)&&(l(i.axes,function(i){if(i.zoomEnabled&&s(i.min)&&(n||t[{xAxis:"zoomX",yAxis:"zoomY"}[i.coll]])){var o=i.horiz,l="touchend"===e.type?i.minPixelPadding:0,c=i.toValue((o?d:p)+l),u=i.toValue((o?d+f:p+g)-l);a[i.coll].push({axis:i,min:Math.min(c,u),max:Math.max(c,u)}),r=!0}}),r&&h(i,"selection",a,function(e){i.zoom(c(e,n?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups()}i&&(o(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),this.zoomOption(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(e){},onDocumentMouseMove:function(e){},onContainerMouseLeave:function(e){},onContainerMouseMove:function(e){var i=this.chart;if(void 0!=i.userOptions.custom_highchart&&i.userOptions.custom_highchart.ismobile)return!1;if(s(t.hoverChartIndex)&&r[t.hoverChartIndex]&&r[t.hoverChartIndex].mouseIsDown||(t.hoverChartIndex=i.index),(e=this.normalize(e)).returnValue=!1,"mousedown"===i.mouseIsDown&&this.drag(e),void 0!=i.userOptions.custom_highchart&&i.userOptions.custom_highchart.fullchart){i.getChartSize();var n=i.chartHeight,a=e.chartX;e.chartX=e.chartY,e.chartY=n-a,this.runPointActions(e)}else!this.inClass(e.target,"highcharts-tracker")&&!i.isInsidePlot(e.chartX-i.plotLeft,e.chartY-i.plotTop)||i.openMenu||this.runPointActions(e)},inClass:function(e,t){for(var i;e;){if(i=n(e,"class")){if(-1!==i.indexOf(t))return!0;if(-1!==i.indexOf("highcharts-container"))return!1}e=e.parentNode}},onTrackerMouseOut:function(e){var t=this.chart.hoverSeries,i=e.relatedTarget||e.toElement;this.isDirectTouch=!1,!t||!i||t.stickyTracking||this.inClass(i,"highcharts-tooltip")||this.inClass(i,"highcharts-series-"+t.index)&&this.inClass(i,"highcharts-tracker")||t.onMouseOut()},onContainerClick:function(e){var t=this.chart,i=t.hoverPoint,n=t.plotLeft,r=t.plotTop;if(void 0!=t.userOptions.custom_highchart&&t.userOptions.custom_highchart.ismobile)return!1;if(e=this.normalize(e),void 0!=t.userOptions.custom_highchart&&t.userOptions.custom_highchart.fullchart){t.getChartSize();var a=t.chartHeight,o=e.chartX;e.chartX=e.chartY,e.chartY=a-o}t.cancelClick||(i&&this.inClass(e.target,"highcharts-tracker")?(h(i.series,"click",c(e,{point:i})),t.hoverPoint&&i.firePointEvent("click",e)):(c(e,this.getCoordinates(e)),t.isInsidePlot(e.chartX-n,e.chartY-r)&&(h(t,"click",e),this.runPointActions(e))))},setDOMEvents:function(){var e=this,n=e.chart.container,r=n.ownerDocument;n.onmousedown=function(t){e.onContainerMouseDown(t)},n.onmousemove=function(t){e.onContainerMouseMove(t)},n.onclick=function(t){e.onContainerClick(t)},i(n,"mouseleave",e.onContainerMouseLeave),1===t.chartCount&&i(r,"mouseup",e.onDocumentMouseUp),t.hasTouch&&(n.ontouchstart=function(t){e.onContainerTouchStart(t)},n.ontouchmove=function(t){e.onContainerTouchMove(t)},1===t.chartCount&&i(r,"touchend",e.onDocumentTouchEnd))},destroy:function(){var e=this,i=this.chart.container.ownerDocument;e.unDocMouseMove&&e.unDocMouseMove(),g(e.chart.container,"mouseleave",e.onContainerMouseLeave),t.chartCount||(g(i,"mouseup",e.onDocumentMouseUp),t.hasTouch&&g(i,"touchend",e.onDocumentTouchEnd)),clearInterval(e.tooltipTimeout),t.objectEach(e,function(t,i){e[i]=null})}}}(s),function(e){var t=e.each,i=e.extend,n=e.map,r=e.noop,a=e.pick;i(e.Pointer.prototype,{pinchTranslate:function(e,t,i,n,r,a){this.zoomHor&&this.pinchTranslateDirection(!0,e,t,i,n,r,a),this.zoomVert&&this.pinchTranslateDirection(!1,e,t,i,n,r,a)},pinchTranslateDirection:function(e,t,i,n,r,a,o,s){var l,c,u,h,d,p,f=this.chart,g=e?"x":"y",m=e?"X":"Y",y="chart"+m,v=e?"width":"height",b=f["plot"+(e?"Left":"Top")],C=s||1,S=f.inverted,w=f.bounds[e?"h":"v"],x=1===t.length,T=t[0][y],k=i[0][y],E=!x&&t[1][y],A=!x&&i[1][y],I=function(){!x&&Math.abs(T-E)>20&&(C=s||Math.abs(k-A)/Math.abs(T-E)),u=(b-k)/C+T,l=f["plot"+(e?"Width":"Height")]/C};I(),(c=u)<w.min?(c=w.min,h=!0):c+l>w.max&&(c=w.max-l,h=!0),h?(k-=.8*(k-o[g][0]),x||(A-=.8*(A-o[g][1])),I()):o[g]=[k,A],S||(a[g]=u-b,a[v]=l),p=S?e?"scaleY":"scaleX":"scale"+m,d=S?1/C:C,r[v]=l,r[g]=c,n[p]=C,n["translate"+m]=d*b+(k-d*T)},pinch:function(e){var o=this,s=o.chart,l=o.pinchDown,c=e.touches,u=c.length,h=o.lastValidTouch,d=o.hasZoom,p=o.selectionMarker,f={},g=1===u&&(o.inClass(e.target,"highcharts-tracker")&&s.runTrackerClick||o.runChartClick),m={};if(u>1&&(o.initiated=!0),d&&o.initiated&&!g&&e.preventDefault(),n(c,function(e){return o.normalize(e)}),"touchstart"===e.type)t(c,function(e,t){l[t]={chartX:e.chartX,chartY:e.chartY}}),h.x=[l[0].chartX,l[1]&&l[1].chartX],h.y=[l[0].chartY,l[1]&&l[1].chartY],t(s.axes,function(e){if(e.zoomEnabled){var t=s.bounds[e.horiz?"h":"v"],i=e.minPixelPadding,n=e.toPixels(a(e.options.min,e.dataMin)),r=e.toPixels(a(e.options.max,e.dataMax)),o=Math.min(n,r),l=Math.max(n,r);t.min=Math.min(e.pos,o-i),t.max=Math.max(e.pos+e.len,l+i)}}),o.res=!0;else if(o.followTouchMove&&1===u){if(o.normalize(e),void 0!=s.userOptions.custom_highchart&&s.userOptions.custom_highchart.fullchart){s.getChartSize();var y=s.chartHeight,v=e.chartX;e.chartX=e.chartY,e.chartY=y-v}this.runPointActions(e)}else l.length&&(p||(o.selectionMarker=p=i({destroy:r,touch:!0},s.plotBox)),o.pinchTranslate(l,c,f,p,m,h),o.hasPinched=d,o.scaleGroups(f,m),o.res&&(o.res=!1,this.reset(!1,0)))},touch:function(t,i){var n,r,o=this.chart;if(e.hoverChartIndex=o.index,1===t.touches.length){if(t=this.normalize(t),void 0!=o.userOptions.custom_highchart&&this.chart.userOptions.custom_highchart.fullchart){o.getChartSize();var s=o.chartHeight,l=t.chartX;t.chartX=t.chartY,t.chartY=s-l}o.isInsidePlot(t.chartX-o.plotLeft,t.chartY-o.plotTop)&&!o.openMenu&&(i&&this.runPointActions(t),"touchmove"===t.type&&(n=!!(r=this.pinchDown)[0]&&Math.sqrt(Math.pow(r[0].chartX-t.chartX,2)+Math.pow(r[0].chartY-t.chartY,2))>=4),a(n,!0)&&this.pinch(t))}else 2===t.touches.length&&this.pinch(t)},onContainerTouchStart:function(e){this.zoomOption(e),this.touch(e,!0)},onContainerTouchMove:function(e){this.touch(e)},onDocumentTouchEnd:function(e){}})}(s),function(e){var t=e.addEvent,i=e.charts,n=e.css,r=e.doc,a=e.noop,o=e.Pointer,s=e.removeEvent,l=e.win,c=e.wrap;if(!e.hasTouch&&(l.PointerEvent||l.MSPointerEvent)){var u={},h=!!l.PointerEvent,d=function(t,n,r,o){var s;"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!i[e.hoverChartIndex]||(o(t),i[e.hoverChartIndex].pointer[n]({type:r,target:t.currentTarget,preventDefault:a,touches:(s=[],s.item=function(e){return this[e]},e.objectEach(u,function(e){s.push({pageX:e.pageX,pageY:e.pageY,target:e.target})}),s)}))};(0,e.extend)(o.prototype,{onContainerPointerDown:function(e){d(e,"onContainerTouchStart","touchstart",function(e){u[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}})},onContainerPointerMove:function(e){d(e,"onContainerTouchMove","touchmove",function(e){u[e.pointerId]={pageX:e.pageX,pageY:e.pageY},u[e.pointerId].target||(u[e.pointerId].target=e.currentTarget)})},onDocumentPointerUp:function(e){},batchMSEvents:function(e){e(this.chart.container,h?"pointerdown":"MSPointerDown",this.onContainerPointerDown),e(this.chart.container,h?"pointermove":"MSPointerMove",this.onContainerPointerMove),e(r,h?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),c(o.prototype,"init",function(e,t,i){e.call(this,t,i),this.hasZoom&&n(t.container,{"-ms-touch-action":"none","touch-action":"none"})}),c(o.prototype,"setDOMEvents",function(e){e.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(t)}),c(o.prototype,"destroy",function(e){this.batchMSEvents(s),e.call(this)})}}(s),function(e){var t=e,i=t.addEvent,n=t.css,r=t.discardElement,a=t.defined,o=t.each,s=t.isFirefox,l=t.marginNames,c=t.merge,u=t.pick,h=t.setAnimation,d=t.stableSort,p=t.win,f=t.wrap;e.Legend=function(e,t){this.init(e,t)},e.Legend.prototype={init:function(e,t){this.chart=e,this.setOptions(t),t.enabled&&(this.render(),i(this.chart,"endResize",function(){this.legend.positionCheckboxes()}))},setOptions:function(e){var t=u(e.padding,8);this.options=e,this.itemStyle=e.itemStyle,this.itemHiddenStyle=c(this.itemStyle,e.itemHiddenStyle),this.itemMarginTop=e.itemMarginTop||0,this.padding=t,this.initialItemY=t-5,this.maxItemWidth=0,this.itemHeight=0,this.symbolWidth=u(e.symbolWidth,16),this.pages=[]},update:function(e,t){var i=this.chart;this.setOptions(c(!0,this.options,e)),this.destroy(),i.isDirtyLegend=i.isDirtyBox=!0,u(t,!0)&&i.redraw()},colorizeItem:function(e,t){e.legendGroup[t?"removeClass":"addClass"]("highcharts-legend-item-hidden");var i=e.legendItem,n=e.legendLine,r=e.legendSymbol,a=this.itemHiddenStyle.color,o=t?this.options.itemStyle.color:a,s=t&&e.color||a,l=e.options&&e.options.marker,c={fill:s};i&&i.css({fill:o,color:o}),n&&n.attr({stroke:s}),r&&(l&&r.isMarker&&(c=e.pointAttribs(),t||(c.stroke=c.fill=a)),r.attr(c))},positionItem:function(e){var t=this.options,i=e._legendItemPos,n=i[0],r=i[1],a=e.checkbox,o=e.legendGroup;o&&o.element&&o.translate(t.rtl?this.legendWidth-n-2*t.symbolPadding-4:n,r),a&&(a.x=n,a.y=r)},destroyItem:function(e){var t=e.checkbox;o(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&(e[t]=e[t].destroy())}),t&&r(e.checkbox)},destroy:function(){function e(e){this[e]&&(this[e]=this[e].destroy())}o(this.getAllItems(),function(t){o(["legendItem","legendGroup"],e,t)}),o(["clipRect","up","down","pager","nav","box","title","group"],e,this),this.display=null},positionCheckboxes:function(e){var t,i=this.group&&this.group.alignAttr,r=this.clipHeight||this.legendHeight,a=this.titleHeight;i&&(t=i.translateY,o(this.allItems,function(o){var s,l=o.checkbox;l&&n(l,{left:i.translateX+o.checkboxOffset+l.x-20+"px",top:(s=t+a+l.y+(e||0)+3)+"px",display:s>t-6&&s<t+r-6?"":"none"})}))},renderTitle:function(){var e,t=this.options,i=this.padding,n=t.title,r=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,i-3,i-4,null,null,null,t.useHTML,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),r=(e=this.title.getBBox()).height,this.offsetWidth=e.width,this.contentGroup.attr({translateY:r})),this.titleHeight=r},setText:function(e){var i=this.options;e.legendItem.attr({text:i.labelFormat?t.format(i.labelFormat,e):i.labelFormatter.call(e)})},renderItem:function(e){var t,i,n,r=this.chart,a=r.renderer,o=this.options,s="horizontal"===o.layout,l=this.symbolWidth,h=o.symbolPadding,d=this.itemStyle,p=this.itemHiddenStyle,f=this.padding,g=s?u(o.itemDistance,20):0,m=!o.rtl,y=o.width,v=o.itemMarginBottom||0,b=this.itemMarginTop,C=e.legendItem,S=!e.series,w=!S&&e.series.drawLegendSymbol?e.series:e,x=w.options,T=this.createCheckboxForItem&&x&&x.showCheckbox,k=l+h+g+(T?20:0),E=o.useHTML,A=e.options.className;C||(e.legendGroup=a.g("legend-item").addClass("highcharts-"+w.type+"-series highcharts-color-"+e.colorIndex+(A?" "+A:"")+(S?" highcharts-series-"+e.index:"")).attr({zIndex:1}).add(this.scrollGroup),e.legendItem=C=a.text("",m?l+h:-h,this.baseline||0,E).css(c(e.visible?d:p)).attr({align:m?"left":"right",zIndex:2}).add(e.legendGroup),this.baseline||(this.fontMetrics=a.fontMetrics(d.fontSize,C),this.baseline=this.fontMetrics.f+3+b,C.attr("y",this.baseline)),this.symbolHeight=o.symbolHeight||this.fontMetrics.f,w.drawLegendSymbol(this,e),this.setItemEvents&&this.setItemEvents(e,C,E),T&&this.createCheckboxForItem(e)),this.colorizeItem(e,e.visible),d.width||C.css({width:(o.itemWidth||o.width||r.spacingBox.width)-k}),this.setText(e),i=C.getBBox(),n=e.checkboxOffset=o.itemWidth||e.legendItemWidth||i.width+k,this.itemHeight=t=Math.round(e.legendItemHeight||i.height||this.symbolHeight),s&&this.itemX-f+n>(y||r.spacingBox.width-2*f-o.x)&&(this.itemX=f,this.itemY+=b+this.lastLineHeight+v,this.lastLineHeight=0),this.maxItemWidth=Math.max(this.maxItemWidth,n),this.lastItemY=b+this.itemY+v,this.lastLineHeight=Math.max(t,this.lastLineHeight),e._legendItemPos=[this.itemX,this.itemY],s?this.itemX+=n:(this.itemY+=b+t+v,this.lastLineHeight=t),this.offsetWidth=y||Math.max((s?this.itemX-f-(e.checkbox?0:g):n)+f,this.offsetWidth)},getAllItems:function(){var e=[];return o(this.chart.series,function(t){var i=t&&t.options;t&&u(i.showInLegend,!a(i.linkedTo)&&void 0,!0)&&(e=e.concat(t.legendItems||("point"===i.legendType?t.data:t)))}),e},adjustMargins:function(e,t){var i=this.chart,n=this.options,r=n.align.charAt(0)+n.verticalAlign.charAt(0)+n.layout.charAt(0);n.floating||o([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(o,s){o.test(r)&&!a(e[s])&&(i[l[s]]=Math.max(i[l[s]],i.legend[(s+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][s]*n[s%2?"x":"y"]+u(n.margin,12)+t[s]))})},render:function(){var e,t,i,n,r=this,a=r.chart,s=a.renderer,l=r.group,u=r.box,h=r.options,p=r.padding;r.itemX=p,r.itemY=r.initialItemY,r.offsetWidth=0,r.lastItemY=0,l||(r.group=l=s.g("legend").attr({zIndex:7}).add(),r.contentGroup=s.g().attr({zIndex:1}).add(l),r.scrollGroup=s.g().add(r.contentGroup)),r.renderTitle(),e=r.getAllItems(),d(e,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),h.reversed&&e.reverse(),r.allItems=e,r.display=t=!!e.length,r.lastLineHeight=0,o(e,function(e){r.renderItem(e)}),i=(h.width||r.offsetWidth)+p,n=r.handleOverflow(n=r.lastItemY+r.lastLineHeight+r.titleHeight),n+=p,u||(r.box=u=s.rect().addClass("highcharts-legend-box").attr({r:h.borderRadius}).add(l),u.isNew=!0),u.attr({stroke:h.borderColor,"stroke-width":h.borderWidth||0,fill:h.backgroundColor||"none"}).shadow(h.shadow),i>0&&n>0&&(u[u.isNew?"attr":"animate"](u.crisp({x:0,y:0,width:i,height:n},u.strokeWidth())),u.isNew=!1),u[t?"show":"hide"](),r.legendWidth=i,r.legendHeight=n,o(e,function(e){r.positionItem(e)}),t&&l.align(c(h,{width:i,height:n}),!0,"spacingBox"),a.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t,i,n=this,r=this.chart,a=r.renderer,s=this.options,l=s.y,c=this.padding,h=r.spacingBox.height+("top"===s.verticalAlign?-l:l)-c,d=s.maxHeight,p=this.clipRect,f=s.navigation,g=u(f.animation,!0),m=f.arrowSize||12,y=this.nav,v=this.pages,b=this.allItems,C=function(e){"number"==typeof e?p.attr({height:e}):p&&(n.clipRect=p.destroy(),n.contentGroup.clip()),n.contentGroup.div&&(n.contentGroup.div.style.clip=e?"rect("+c+"px,9999px,"+(c+e)+"px,0)":"auto")};return"horizontal"!==s.layout||"middle"===s.verticalAlign||s.floating||(h/=2),d&&(h=Math.min(h,d)),v.length=0,e>h&&!1!==f.enabled?(this.clipHeight=t=Math.max(h-20-this.titleHeight-c,0),this.currentPage=u(this.currentPage,1),this.fullHeight=e,o(b,function(e,n){var r=e._legendItemPos[1],a=Math.round(e.legendItem.getBBox().height),o=v.length;(!o||r-v[o-1]>t&&(i||r)!==v[o-1])&&(v.push(i||r),o++),n===b.length-1&&r+a-v[o-1]>t&&v.push(r),r!==i&&(i=r)}),p||(p=n.clipRect=a.clipRect(0,c,9999,0),n.contentGroup.clip(p)),C(t),y||(this.nav=y=a.g().attr({zIndex:1}).add(this.group),this.up=a.symbol("triangle",0,0,m,m).on("click",function(){n.scroll(-1,g)}).add(y),this.pager=a.text("",15,10).addClass("highcharts-legend-navigation").css(f.style).add(y),this.down=a.symbol("triangle-down",0,0,m,m).on("click",function(){n.scroll(1,g)}).add(y)),n.scroll(0),e=h):y&&(C(),this.nav=y.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(e,t){var i,n=this.pages,r=n.length,a=this.currentPage+e,o=this.clipHeight,s=this.options.navigation,l=this.pager,c=this.padding;a>r&&(a=r),a>0&&(void 0!==t&&h(t,this.chart),this.nav.attr({translateX:c,translateY:o+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({class:1===a?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),l.attr({text:a+"/"+r}),this.down.attr({x:18+this.pager.getBBox().width,class:a===r?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),this.up.attr({fill:1===a?s.inactiveColor:s.activeColor}).css({cursor:1===a?"default":"pointer"}),this.down.attr({fill:a===r?s.inactiveColor:s.activeColor}).css({cursor:a===r?"default":"pointer"}),this.scrollGroup.animate({translateY:i=-n[a-1]+this.initialItemY}),this.currentPage=a,this.positionCheckboxes(i))}},t.LegendSymbolMixin={drawRectangle:function(e,t){var i=e.symbolHeight,n=e.options.squareSymbol;t.legendSymbol=this.chart.renderer.rect(n?(e.symbolWidth-i)/2:0,e.baseline-i+1,n?i:e.symbolWidth,i,u(e.options.symbolRadius,i/2)).addClass("highcharts-point").attr({zIndex:3}).add(t.legendGroup)},drawLineMarker:function(e){var t,i,n=this.options,r=n.marker,a=e.symbolWidth,o=e.symbolHeight,s=o/2,l=this.chart.renderer,h=this.legendGroup,d=e.baseline-Math.round(.3*e.fontMetrics.b),p={};p={"stroke-width":n.lineWidth||0},n.dashStyle&&(p.dashstyle=n.dashStyle),this.legendLine=l.path(["M",0,d,"L",a,d]).addClass("highcharts-graph").attr(p).add(h),r&&!1!==r.enabled&&(t=Math.min(u(r.radius,s),s),0===this.symbol.indexOf("url")&&(r=c(r,{width:o,height:o}),t=0),this.legendSymbol=i=l.symbol(this.symbol,a/2-t,d-t,2*t,2*t,r).addClass("highcharts-point").add(h),i.isMarker=!0)}},(/Trident\/7\.0/.test(p.navigator.userAgent)||s)&&f(e.Legend.prototype,"positionItem",function(e,t){var i=this,n=function(){t._legendItemPos&&e.call(i,t)};n(),setTimeout(n)})}(s),function(e){var t=e.addEvent,i=e.animate,n=e.animObject,r=e.attr,a=e.doc,o=e.Axis,s=e.createElement,l=e.defaultOptions,c=e.discardElement,u=e.charts,h=e.css,d=e.defined,p=e.each,f=e.extend,g=e.find,m=e.fireEvent,y=e.getStyle,v=e.grep,b=e.isNumber,C=e.isObject,S=e.isString,w=e.Legend,x=e.marginNames,T=e.merge,k=e.objectEach,E=e.Pointer,A=e.pick,I=e.pInt,D=e.removeEvent,B=e.seriesTypes,_=e.splat,M=e.svg,P=e.syncTimeout,L=e.win,N=e.Renderer,R=e.Chart=function(){this.getArgs.apply(this,arguments)};e.chart=function(e,t,i){return new R(e,t,i)},f(R.prototype,{callbacks:[],getArgs:function(){var e=[].slice.call(arguments);(S(e[0])||e[0].nodeName)&&(this.renderTo=e.shift()),this.init(e[0],e[1])},init:function(i,n){var r,a,o=i.series,s=i.plotOptions||{};for(a in i.series=null,(r=T(l,i)).plotOptions)r.plotOptions[a].tooltip=s[a]&&T(s[a].tooltip)||void 0;r.tooltip.userOptions=i.chart&&i.chart.forExport&&i.tooltip.userOptions||i.tooltip,r.series=i.series=o,this.userOptions=i;var c=r.chart,h=c.events;this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.callback=n,this.isResizing=0,this.options=r,this.axes=[],this.series=[],this.hasCartesianSeries=c.showAxes;var d=this;d.index=u.length,u.push(d),e.chartCount++,h&&k(h,function(e,i){t(d,i,e)}),d.xAxis=[],d.yAxis=[],d.pointCount=d.colorCounter=d.symbolCounter=0,d.firstRender()},initSeries:function(t){var i,n=this.options.chart,r=B[t.type||n.type||n.defaultSeriesType];return r||e.error(17,!0),(i=new r).init(this,t),i},orderSeries:function(e){for(var t=this.series,i=e||0;i<t.length;i++)t[i]&&(t[i].index=i,t[i].name=t[i].name||"Series "+(t[i].index+1))},isInsidePlot:function(e,t,i){var n=i?t:e,r=i?e:t;return n>=0&&n<=this.plotWidth&&r>=0&&r<=this.plotHeight},redraw:function(t){var i,n,r,a,o=this.axes,s=this.series,l=this.pointer,c=this.legend,u=this.isDirtyLegend,h=this.hasCartesianSeries,d=this.isDirtyBox,g=this.renderer,y=g.isHidden(),v=[];for(this.setResponsive&&this.setResponsive(!1),e.setAnimation(t,this),y&&this.temporaryDisplay(),this.layOutTitles(),r=s.length;r--;)if((a=s[r]).options.stacking&&(i=!0,a.isDirty)){n=!0;break}if(n)for(r=s.length;r--;)(a=s[r]).options.stacking&&(a.isDirty=!0);p(s,function(e){e.isDirty&&"point"===e.options.legendType&&(e.updateTotals&&e.updateTotals(),u=!0),e.isDirtyData&&m(e,"updatedData")}),u&&c.options.enabled&&(c.render(),this.isDirtyLegend=!1),i&&this.getStacks(),h&&p(o,function(e){e.updateNames(),e.setScale()}),this.getMargins(),h&&(p(o,function(e){e.isDirty&&(d=!0)}),p(o,function(e){var t=e.min+","+e.max;e.extKey!==t&&(e.extKey=t,v.push(function(){m(e,"afterSetExtremes",f(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(d||i)&&e.redraw()})),d&&this.drawChartBox(),m(this,"predraw"),p(s,function(e){(d||e.isDirty)&&e.visible&&e.redraw(),e.isDirtyData=!1}),l&&l.reset(!0),g.draw(),m(this,"redraw"),m(this,"render"),y&&this.temporaryDisplay(!0),p(v,function(e){e.call()})},get:function(e){var t,i,n=this.series;function r(t){return t.id===e||t.options&&t.options.id===e}for(t=g(this.axes,r)||g(this.series,r),i=0;!t&&i<n.length;i++)t=g(n[i].points||[],r);return t},getAxes:function(){var e,t=this,i=this.options,n=i.xAxis=_(i.xAxis||{}),r=i.yAxis=_(i.yAxis||{});p(n,function(e,t){e.index=t,e.isX=!0}),p(r,function(e,t){e.index=t}),e=n.concat(r),p(e,function(e){new o(t,e)})},getSelectedPoints:function(){var e=[];return p(this.series,function(t){e=e.concat(v(t.data||[],function(e){return e.selected}))}),e},getSelectedSeries:function(){return v(this.series,function(e){return e.selected})},setTitle:function(e,t,i){var n,r,a=this,o=a.options;n=o.title=T({style:{color:"#333333",fontSize:o.isStock?"16px":"18px"}},o.title,e),r=o.subtitle=T({style:{color:"#666666"}},o.subtitle,t),p([["title",e,n],["subtitle",t,r]],function(e,t){var i=e[0],n=a[i],r=e[2];n&&e[1]&&(a[i]=n=n.destroy()),r&&r.text&&!n&&(a[i]=a.renderer.text(r.text,0,0,r.useHTML).attr({align:r.align,class:"highcharts-"+i,zIndex:r.zIndex||4}).add(),a[i].update=function(e){a.setTitle(!t&&e,t&&e)},a[i].css(r.style))}),a.layOutTitles(i)},layOutTitles:function(e){var t,i=0,n=this.renderer,r=this.spacingBox;p(["title","subtitle"],function(e){var t,a=this[e],o=this.options[e],s="title"===e?-3:o.verticalAlign?0:i+2;a&&(t=n.fontMetrics(t=o.style.fontSize,a).b,a.css({width:(o.width||r.width+o.widthAdjust)+"px"}).align(f({y:s+t},o),!1,"spacingBox"),o.floating||o.verticalAlign||(i=Math.ceil(i+a.getBBox(o.useHTML).height)))},this),t=this.titleOffset!==i,this.titleOffset=i,!this.isDirtyBox&&t&&(this.isDirtyBox=t,this.hasRendered&&A(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this.options.chart,i=t.width,n=t.height,r=this.renderTo;d(i)||(this.containerWidth=y(r,"width")),d(n)||(this.containerHeight=y(r,"height")),this.chartWidth=Math.max(0,i||this.containerWidth||600),this.chartHeight=Math.max(0,e.relativeLength(n,this.chartWidth)||this.containerHeight||400)},temporaryDisplay:function(t){var i,n=this.renderTo;if(t)for(;n&&n.style;)n.hcOrigStyle&&(e.css(n,n.hcOrigStyle),delete n.hcOrigStyle),n.hcOrigDetached&&(a.body.removeChild(n),n.hcOrigDetached=!1),n=n.parentNode;else for(;n&&n.style&&(a.body.contains(n)||(n.hcOrigDetached=!0,a.body.appendChild(n)),("none"===y(n,"display",!1)||n.hcOricDetached)&&(n.hcOrigStyle={display:n.style.display,height:n.style.height,overflow:n.style.overflow},i={display:"block",overflow:"hidden"},n!==this.renderTo&&(i.height=0),e.css(n,i),n.offsetWidth||n.style.setProperty("display","block","important")),(n=n.parentNode)!==a.body););},setClassName:function(e){this.container.className="highcharts-container "+(e||"")},getContainer:function(){var t,i,n,o,l,c=this.options,h=c.chart,d=this.renderTo,p=e.uniqueKey();d||(this.renderTo=d=h.renderTo),S(d)&&(this.renderTo=d=a.getElementById(d)),d||e.error(13,!0),o=I(r(d,"data-highcharts-chart")),b(o)&&u[o]&&u[o].hasRendered&&u[o].destroy(),r(d,"data-highcharts-chart",this.index),d.innerHTML="",h.skipClone||d.offsetWidth||this.temporaryDisplay(),this.getChartSize(),l=f({position:"relative",overflow:"hidden",width:(i=this.chartWidth)+"px",height:(n=this.chartHeight)+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},h.style),t=s("div",{id:p},l,d),this.container=t,this._cursor=t.style.cursor,this.renderer=new(e[h.renderer]||N)(t,i,n,null,h.forExport,c.exporting&&c.exporting.allowHTML),this.setClassName(h.className),this.renderer.setStyle(h.style),this.renderer.chartIndex=this.index},getMargins:function(e){var t=this.spacing,i=this.margin,n=this.titleOffset;this.resetMargins(),n&&!d(i[0])&&(this.plotTop=Math.max(this.plotTop,n+this.options.title.margin+t[0])),this.legend.display&&this.legend.adjustMargins(i,t),this.extraMargin&&(this[this.extraMargin.type]=(this[this.extraMargin.type]||0)+this.extraMargin.value),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),e||this.getAxisMargins()},getAxisMargins:function(){var e=this,t=e.axisOffset=[0,0,0,0],i=e.margin;e.hasCartesianSeries&&p(e.axes,function(e){e.visible&&e.getOffset()}),p(x,function(n,r){d(i[r])||(e[n]+=t[r])}),e.setChartSize()},reflow:function(e){var t=this,i=t.options.chart,n=t.renderTo,r=d(i.width)&&d(i.height),o=i.width||y(n,"width"),s=i.height||y(n,"height"),l=e?e.target:L;r||t.isPrinting||!o||!s||l!==L&&l!==a||(o===t.containerWidth&&s===t.containerHeight||(clearTimeout(t.reflowTimeout),t.reflowTimeout=P(function(){t.container&&t.setSize(void 0,void 0,!1)},e?100:0)),t.containerWidth=o,t.containerHeight=s)},initReflow:function(){var e,i=this;e=t(L,"resize",function(e){i.reflow(e)}),t(i,"destroy",e)},setSize:function(t,r,a){var o,s=this,l=s.renderer;s.isResizing+=1,e.setAnimation(a,s),s.oldChartHeight=s.chartHeight,s.oldChartWidth=s.chartWidth,void 0!==t&&(s.options.chart.width=t),void 0!==r&&(s.options.chart.height=r),s.getChartSize(),((o=l.globalAnimation)?i:h)(s.container,{width:s.chartWidth+"px",height:s.chartHeight+"px"},o),s.setChartSize(!0),l.setSize(s.chartWidth,s.chartHeight,a),p(s.axes,function(e){e.isDirty=!0,e.setScale()}),s.isDirtyLegend=!0,s.isDirtyBox=!0,s.layOutTitles(),s.getMargins(),s.redraw(a),s.oldChartHeight=null,m(s,"resize"),P(function(){s&&m(s,"endResize",null,function(){s.isResizing-=1})},n(o).duration)},setChartSize:function(e){var t,i,n,r,a,o,s,l=this.inverted,c=this.renderer,u=this.chartWidth,h=this.chartHeight,d=this.options.chart,f=this.spacing,g=this.clipOffset;function m(e){var t=g[e]||0;return Math.max(s||t,t)/2}this.plotLeft=n=Math.round(this.plotLeft),this.plotTop=r=Math.round(this.plotTop),this.plotWidth=a=Math.max(0,Math.round(u-n-this.marginRight)),this.plotHeight=o=Math.max(0,Math.round(h-r-this.marginBottom)),this.plotSizeX=l?o:a,this.plotSizeY=l?a:o,this.plotBorderWidth=d.plotBorderWidth||0,this.spacingBox=c.spacingBox={x:f[3],y:f[0],width:u-f[3]-f[1],height:h-f[0]-f[2]},this.plotBox=c.plotBox={x:n,y:r,width:a,height:o},s=2*Math.floor(this.plotBorderWidth/2),t=Math.ceil(m(3)),i=Math.ceil(m(0)),this.clipBox={x:t,y:i,width:Math.floor(this.plotSizeX-m(1)-t),height:Math.max(0,Math.floor(this.plotSizeY-m(2)-i))},e||p(this.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this,t=e.options.chart;p(["margin","spacing"],function(i){var n=t[i],r=C(n)?n:[n,n,n,n];p(["Top","Right","Bottom","Left"],function(n,a){e[i][a]=A(t[i+n],r[a])})}),p(x,function(t,i){e[t]=A(e.margin[i],e.spacing[i])}),e.axisOffset=[0,0,0,0],e.clipOffset=[]},drawChartBox:function(){var e,t,i,n=this.options.chart,r=this.renderer,a=this.chartWidth,o=this.chartHeight,s=this.chartBackground,l=this.plotBackground,c=this.plotBorder,u=this.plotBGImage,h=n.backgroundColor,d=n.plotBackgroundColor,p=n.plotBackgroundImage,f=this.plotLeft,g=this.plotTop,m=this.plotWidth,y=this.plotHeight,v=this.plotBox,b=this.clipRect,C=this.clipBox,S="animate";s||(this.chartBackground=s=r.rect().addClass("highcharts-background").add(),S="attr"),t=(e=n.borderWidth||0)+(n.shadow?8:0),i={fill:h||"none"},(e||s["stroke-width"])&&(i.stroke=n.borderColor,i["stroke-width"]=e),s.attr(i).shadow(n.shadow),s[S]({x:t/2,y:t/2,width:a-t-e%2,height:o-t-e%2,r:n.borderRadius}),S="animate",l||(S="attr",this.plotBackground=l=r.rect().addClass("highcharts-plot-background").add()),l[S](v),l.attr({fill:d||"none"}).shadow(n.plotShadow),p&&(u?u.animate(v):this.plotBGImage=r.image(p,f,g,m,y).add()),b?b.animate({width:C.width,height:C.height}):this.clipRect=r.clipRect(C),S="animate",c||(S="attr",this.plotBorder=c=r.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),c.attr({stroke:n.plotBorderColor,"stroke-width":n.plotBorderWidth||0,fill:"none"}),c[S](c.crisp({x:f,y:g,width:m,height:y},-c.strokeWidth())),this.isDirtyBox=!1},propFromSeries:function(){var e,t,i,n=this,r=n.options.chart,a=n.options.series;p(["inverted","angular","polar"],function(o){for(e=B[r.type||r.defaultSeriesType],i=r[o]||e&&e.prototype[o],t=a&&a.length;!i&&t--;)(e=B[a[t].type])&&e.prototype[o]&&(i=!0);n[o]=i})},linkSeries:function(){var e=this,t=e.series;p(t,function(e){e.linkedSeries.length=0}),p(t,function(t){var i=t.options.linkedTo;S(i)&&(i=":previous"===i?e.series[t.index-1]:e.get(i))&&i.linkedParent!==t&&(i.linkedSeries.push(t),t.linkedParent=i,t.visible=A(t.options.visible,i.options.visible,t.visible))})},renderSeries:function(){p(this.series,function(e){e.translate(),e.render()})},renderLabels:function(){var e=this,t=e.options.labels;t.items&&p(t.items,function(i){var n=f(t.style,i.style),r=I(n.left)+e.plotLeft,a=I(n.top)+e.plotTop+12;delete n.left,delete n.top,e.renderer.text(i.html,r,a).attr({zIndex:2}).css(n).add()})},render:function(){var e,t,i,n,r=this.axes,a=this.renderer,o=this.options;this.setTitle(),this.legend=new w(this,o.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),e=this.plotWidth,t=this.plotHeight=this.plotHeight-21,p(r,function(e){e.setScale()}),this.getAxisMargins(),n=t/this.plotHeight>1.05,((i=e/this.plotWidth>1.1)||n)&&(p(r,function(e){(e.horiz&&i||!e.horiz&&n)&&e.setTickInterval(!0)}),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries&&p(r,function(e){e.visible&&e.render()}),this.seriesGroup||(this.seriesGroup=a.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0},addCredits:function(e){var t=this;(e=T(!0,this.options.credits,e)).enabled&&!this.credits&&(this.credits=this.renderer.text(e.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){e.href&&(L.location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position),this.credits.update=function(e){t.credits=t.credits.destroy(),t.addCredits(e)})},destroy:function(){var t,i=this,n=i.axes,r=i.series,a=i.container,o=a&&a.parentNode;for(m(i,"destroy"),i.renderer.forExport?e.erase(u,i):u[i.index]=void 0,e.chartCount--,i.renderTo.removeAttribute("data-highcharts-chart"),D(i),t=n.length;t--;)n[t]=n[t].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),t=r.length;t--;)r[t]=r[t].destroy();p(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(e){var t=i[e];t&&t.destroy&&(i[e]=t.destroy())}),a&&(a.innerHTML="",D(a),o&&c(a)),k(i,function(e,t){delete i[t]})},isReadyToRender:function(){var e=this;return!(!M&&L==L.top&&"complete"!==a.readyState&&(a.attachEvent("onreadystatechange",function(){a.detachEvent("onreadystatechange",e.firstRender),"complete"===a.readyState&&e.firstRender()}),1))},firstRender:function(){var e=this,t=e.options;e.isReadyToRender()&&(e.getContainer(),m(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),p(t.series||[],function(t){e.initSeries(t)}),e.linkSeries(),m(e,"beforeRender"),E&&(e.pointer=new E(e,t)),e.render(),!e.renderer.imgCount&&e.onload&&e.onload(),e.temporaryDisplay(!0))},onload:function(){p([this.callback].concat(this.callbacks),function(e){e&&void 0!==this.index&&e.apply(this,[this])},this),m(this,"load"),m(this,"render"),d(this.index)&&!1!==this.options.chart.reflow&&this.initReflow(),this.onload=null}})}(s),function(e){var t,i=e.each,n=e.extend,r=e.erase,a=e.fireEvent,o=e.format,s=e.isArray,l=e.isNumber,c=e.pick,u=e.removeEvent;e.Point=t=function(){},e.Point.prototype={init:function(e,t,i){var n,r,a=e.chart.options.chart.colorCount;return this.series=e,this.color=e.color,this.applyOptions(t,i),e.options.colorByPoint?(n=e.options.colors||e.chart.options.colors,this.color=this.color||n[e.colorCounter],a=n.length,r=e.colorCounter,e.colorCounter++,e.colorCounter===a&&(e.colorCounter=0)):r=e.colorIndex,this.colorIndex=c(this.colorIndex,r),e.chart.pointCount++,this},applyOptions:function(e,i){var r=this.series,a=r.options.pointValKey||r.pointValKey;return e=t.prototype.optionsToObject.call(this,e),n(this,e),this.options=this.options?n(this.options,e):e,e.group&&delete this.group,a&&(this.y=this[a]),this.isNull=c(this.isValid&&!this.isValid(),null===this.x||!l(this.y,!0)),this.selected&&(this.state="select"),"name"in this&&void 0===i&&r.xAxis&&r.xAxis.hasNames&&(this.x=r.xAxis.nameToX(this)),void 0===this.x&&r&&(this.x=void 0===i?r.autoIncrement(this):i),this},optionsToObject:function(e){var t,i={},n=this.series,r=n.options.keys,a=r||n.pointArrayMap||["y"],o=a.length,c=0,u=0;if(l(e)||null===e)i[a[0]]=e;else if(s(e))for(!r&&e.length>o&&("string"==(t=typeof e[0])?i.name=e[0]:"number"===t&&(i.x=e[0]),c++);u<o;)r&&void 0===e[c]||(i[a[u]]=e[c]),c++,u++;else"object"==typeof e&&(i=e,e.dataLabels&&(n._hasPointLabels=!0),e.marker&&(n._hasPointMarkers=!0));return i},getClassName:function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")},getZone:function(){var e,t=this.series,i=t.zones,n=t.zoneAxis||"y",r=0;for(e=i[r];this[n]>=e.value;)e=i[++r];return e&&e.color&&!this.options.color&&(this.color=e.color),e},destroy:function(){var e,t=this.series.chart,i=t.hoverPoints;for(e in t.pointCount--,i&&(this.setState(),r(i,this),i.length||(t.hoverPoints=null)),this===t.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(u(this),this.destroyElements()),this.legendItem&&t.legend.destroyItem(this),this)this[e]=null},destroyElements:function(){for(var e,t=["graphic","dataLabel","dataLabelUpper","connector","shadowGroup"],i=6;i--;)this[e=t[i]]&&(this[e]=this[e].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(e){var t=this.series,n=t.tooltipOptions,r=c(n.valueDecimals,""),a=n.valuePrefix||"",s=n.valueSuffix||"";return i(t.pointArrayMap||["y"],function(t){t="{point."+t,(a||s)&&(e=e.replace(t+"}",a+t+"}"+s)),e=e.replace(t+"}",t+":,."+r+"f}")}),o(e,{point:this,series:this.series})},firePointEvent:function(e,t,i){var n=this,r=this.series.options;(r.point.events[e]||n.options&&n.options.events&&n.options.events[e])&&this.importEvents(),"click"===e&&r.allowPointSelect&&(i=function(e){n.select&&n.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),a(this,e,t,i)},visible:!0}}(s),function(e){var t=e.addEvent,i=e.animObject,n=e.arrayMax,r=e.arrayMin,a=e.correctFloat,o=e.Date,s=e.defaultOptions,l=e.defaultPlotOptions,c=e.defined,u=e.each,h=e.erase,d=e.extend,p=e.fireEvent,f=e.grep,g=e.isArray,m=e.isNumber,y=e.isString,v=e.merge,b=e.objectEach,C=e.pick,S=e.removeEvent,w=e.splat,x=e.SVGElement,T=e.syncTimeout,k=e.win;e.Series=e.seriesType("line",null,{lineWidth:2,allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{lineWidth:0,lineColor:"#ffffff",radius:4,states:{hover:{animation:{duration:0},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":e.numberFormat(this.y,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,softThreshold:!0,states:{hover:{animation:{duration:0},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},{isCartesian:!0,pointClass:e.Point,sorted:!0,requireSorting:!0,directTouch:!1,axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],coll:"series",init:function(e,i){var n,r,a=this,o=e.series;a.chart=e,a.options=i=a.setOptions(i),a.linkedSeries=[],a.bindAxes(),d(a,{name:i.name,state:"",visible:!1!==i.visible,selected:!0===i.selected}),b(n=i.events,function(e,i){t(a,i,e)}),(n&&n.click||i.point&&i.point.events&&i.point.events.click||i.allowPointSelect)&&(e.runTrackerClick=!0),a.getColor(),a.getSymbol(),u(a.parallelArrays,function(e){a[e+"Data"]=[]}),a.setData(i.data,!1),a.isCartesian&&(e.hasCartesianSeries=!0),o.length&&(r=o[o.length-1]),a._i=C(r&&r._i,-1)+1,e.orderSeries(this.insert(o))},insert:function(e){var t,i=this.options.index;if(m(i)){for(t=e.length;t--;)if(i>=C(e[t].options.index,e[t]._i)){e.splice(t+1,0,this);break}-1===t&&e.unshift(this),t+=1}else e.push(this);return C(t,e.length-1)},bindAxes:function(){var t,i=this,n=i.options,r=i.chart;u(i.axisTypes||[],function(a){u(r[a],function(e){(n[a]===(t=e.options).index||void 0!==n[a]&&n[a]===t.id||void 0===n[a]&&0===t.index)&&(i.insert(e.series),i[a]=e,e.isDirty=!0)}),i[a]||i.optionalAxis===a||e.error(18,!0)})},updateParallelArrays:function(e,t){var i=e.series,n=arguments,r=m(t)?function(n){var r="y"===n&&i.toYData?i.toYData(e):e[n];i[n+"Data"][t]=r}:function(e){Array.prototype[t].apply(i[e+"Data"],Array.prototype.slice.call(n,2))};u(i.parallelArrays,r)},autoIncrement:function(){var e,t,i=this.options,n=this.xIncrement,r=i.pointIntervalUnit;return n=C(n,i.pointStart,0),this.pointInterval=t=C(this.pointInterval,i.pointInterval,1),r&&(e=new o(n),"day"===r?e=+e[o.hcSetDate](e[o.hcGetDate]()+t):"month"===r?e=+e[o.hcSetMonth](e[o.hcGetMonth]()+t):"year"===r&&(e=+e[o.hcSetFullYear](e[o.hcGetFullYear]()+t)),t=e-n),this.xIncrement=n+t,n},setOptions:function(e){var t,i,n=this.chart,r=n.options,a=r.plotOptions,o=(n.userOptions||{}).plotOptions||{},l=a[this.type];return this.userOptions=e,t=v(l,a.series,e),this.tooltipOptions=v(s.tooltip,s.plotOptions.series&&s.plotOptions.series.tooltip,s.plotOptions[this.type].tooltip,r.tooltip.userOptions,a.series&&a.series.tooltip,a[this.type].tooltip,e.tooltip),this.stickyTracking=C(e.stickyTracking,o[this.type]&&o[this.type].stickyTracking,o.series&&o.series.stickyTracking,!(!this.tooltipOptions.shared||this.noSharedTooltip)||t.stickyTracking),null===l.marker&&delete t.marker,this.zoneAxis=t.zoneAxis,i=this.zones=(t.zones||[]).slice(),!t.negativeColor&&!t.negativeFillColor||t.zones||i.push({value:t[this.zoneAxis+"Threshold"]||t.threshold||0,className:"highcharts-negative",color:t.negativeColor,fillColor:t.negativeFillColor}),i.length&&c(i[i.length-1].value)&&i.push({color:this.color,fillColor:this.fillColor}),t},getCyclic:function(e,t,i){var n,r,a=this.chart,o=this.userOptions,s=e+"Index",l=e+"Counter",u=i?i.length:C(a.options.chart[e+"Count"],a[e+"Count"]);t||(r=C(o[s],o["_"+s]),c(r)?n=r:(a.series.length||(a[l]=0),o["_"+s]=n=a[l]%u,a[l]+=1),i&&(t=i[n])),void 0!==n&&(this[s]=n),this[e]=t},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||l[this.type].color,this.chart.options.colors)},getSymbol:function(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)},drawLegendSymbol:e.LegendSymbolMixin.drawLineMarker,setData:function(t,i,n,r){var a,o,s,l=this,c=l.points,h=c&&c.length||0,d=l.options,p=l.chart,f=null,v=l.xAxis,b=d.turboThreshold,S=this.xData,w=this.yData,x=l.pointArrayMap,T=x&&x.length;if(a=(t=t||[]).length,i=C(i,!0),!1!==r&&a&&h===a&&!l.cropped&&!l.hasGroupedData&&l.visible)u(t,function(e,t){c[t].update&&e!==d.data[t]&&c[t].update(e,!1,null,!1)});else{if(l.xIncrement=null,l.colorCounter=0,u(this.parallelArrays,function(e){l[e+"Data"].length=0}),b&&a>b){for(o=0;null===f&&o<a;)f=t[o],o++;if(m(f))for(o=0;o<a;o++)S[o]=this.autoIncrement(),w[o]=t[o];else if(g(f))if(T)for(o=0;o<a;o++)S[o]=(s=t[o])[0],w[o]=s.slice(1,T+1);else for(o=0;o<a;o++)S[o]=(s=t[o])[0],w[o]=s[1];else e.error(12)}else for(o=0;o<a;o++)void 0!==t[o]&&(l.pointClass.prototype.applyOptions.apply(s={series:l},[t[o]]),l.updateParallelArrays(s,o));for(y(w[0])&&e.error(14,!0),l.data=[],l.options.data=l.userOptions.data=t,o=h;o--;)c[o]&&c[o].destroy&&c[o].destroy();v&&(v.minRange=v.userMinRange),l.isDirty=p.isDirtyBox=!0,l.isDirtyData=!!c,n=!1}"point"===d.legendType&&(this.processData(),this.generatePoints()),i&&p.redraw(n)},processData:function(t){var i,n,r,a,o,s,l,c,u=this.xData,h=this.yData,d=u.length,p=0,f=this.xAxis,g=this.options,m=g.cropThreshold,y=this.getExtremesFromAll||g.getExtremesFromAll,v=this.isCartesian,b=f&&f.val2lin,C=f&&f.isLog;if(v&&!this.isDirty&&!f.isDirty&&!this.yAxis.isDirty&&!t)return!1;for(f&&(l=(s=f.getExtremes()).min,c=s.max),v&&this.sorted&&!y&&(!m||d>m||this.forceCrop)&&(u[d-1]<l||u[0]>c?(u=[],h=[]):(u[0]<l||u[d-1]>c)&&(u=(i=this.cropData(this.xData,this.yData,l,c)).xData,h=i.yData,p=i.start,n=!0)),o=u.length||1;--o;)(r=C?b(u[o])-b(u[o-1]):u[o]-u[o-1])>0&&(void 0===a||r<a)?a=r:r<0&&this.requireSorting&&e.error(15);this.cropped=n,this.cropStart=p,this.processedXData=u,this.processedYData=h,this.closestPointRange=a},cropData:function(e,t,i,n){var r,a,o=e.length,s=0,l=o,c=C(this.cropShoulder,1);for(r=0;r<o;r++)if(e[r]>=i){s=Math.max(0,r-c);break}for(a=r;a<o;a++)if(e[a]>n){l=a+c;break}return{xData:e.slice(s,l),yData:t.slice(s,l),start:s,end:l}},generatePoints:function(){var e,t,i,n,r=this.options,a=r.data,o=this.data,s=this.processedXData,l=this.processedYData,c=this.pointClass,u=s.length,h=this.cropStart||0,d=this.hasGroupedData,p=r.keys,f=[];if(!o&&!d){var g=[];g.length=a.length,o=this.data=g}for(p&&d&&(this.options.keys=!1),n=0;n<u;n++)t=h+n,d?(i=(new c).init(this,[s[n]].concat(w(l[n])))).dataGroup=this.groupMap[n]:(i=o[t])||void 0===a[t]||(o[t]=i=(new c).init(this,a[t],s[n])),i&&(i.index=t,f[n]=i);if(this.options.keys=p,o&&(u!==(e=o.length)||d))for(n=0;n<e;n++)n!==h||d||(n+=u),o[n]&&(o[n].destroyElements(),o[n].plotX=void 0);this.data=o,this.points=f},getExtremes:function(e){var t,i,a,o,s,l=this.yAxis,c=this.processedXData,u=[],h=0,d=this.xAxis.getExtremes(),p=d.min,f=d.max;for(t=(e=e||this.stackedYData||this.processedYData||[]).length,o=0;o<t;o++)if(i=c[o],(m(a=e[o],!0)||g(a))&&(!l.positiveValuesOnly||a.length||a>0)&&(this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(c[o]||i)>=p&&(c[o]||i)<=f))if(s=a.length)for(;s--;)null!==a[s]&&(u[h++]=a[s]);else u[h++]=a;this.dataMin=r(u),this.dataMax=n(u)},translate:function(){this.processedXData||this.processData(),this.generatePoints();var e,t,i,n,r,o=this.options,s=o.stacking,l=this.xAxis,u=l.categories,h=this.yAxis,d=this.points,p=d.length,f=!!this.modifyValue,g=o.pointPlacement,y="between"===g||m(g),v=o.threshold,b=o.startFromThreshold?v:0,S=Number.MAX_VALUE;for("between"===g&&(g=.5),m(g)&&(g*=C(o.pointRange||l.pointRange)),e=0;e<p;e++){var w,x,T=d[e],k=T.x,E=T.y,A=T.low,I=s&&h.stacks[(this.negStacks&&E<(b?0:v)?"-":"")+this.stackKey];h.positiveValuesOnly&&null!==E&&E<=0&&(T.isNull=!0),T.plotX=t=a(Math.min(Math.max(-1e5,l.translate(k,0,0,0,1,g,"flags"===this.type)),1e5)),s&&this.visible&&!T.isNull&&I&&I[k]&&(r=this.getStackIndicator(r,k,this.index),E=(x=(w=I[k]).points[r.key])[1],(A=x[0])===b&&r.key===I[k].base&&(A=C(v,h.min)),h.positiveValuesOnly&&A<=0&&(A=null),T.total=T.stackTotal=w.total,T.percentage=w.total&&T.y/w.total*100,T.stackY=E,w.setOffset(this.pointXOffset||0,this.barW||0)),T.yBottom=c(A)?h.translate(A,0,1,0,1):null,f&&(E=this.modifyValue(E,T)),T.plotY=i="number"==typeof E&&E!==1/0?Math.min(Math.max(-1e5,h.translate(E,0,1,0,1)),1e5):void 0,T.isInside=void 0!==i&&i>=0&&i<=h.len&&t>=0&&t<=l.len,T.clientX=y?a(l.translate(k,0,0,0,1,g)):t,T.negative=T.y<(v||0),T.category=u&&void 0!==u[T.x]?u[T.x]:T.x,T.isNull||(void 0!==n&&(S=Math.min(S,Math.abs(t-n))),n=t),T.zone=this.zones.length&&T.getZone()}this.closestPointRangePx=S},getValidPoints:function(e,t){var i=this.chart;return f(e||this.points||[],function(e){return!(t&&!i.isInsidePlot(e.plotX,e.plotY,i.inverted)||e.isNull)})},setClip:function(e){var t=this.chart,i=this.options,n=t.renderer,r=t.inverted,a=this.clipBox,o=a||t.clipBox,s=this.sharedClipKey||["_sharedClip",e&&e.duration,e&&e.easing,o.height,i.xAxis,i.yAxis].join(","),l=t[s],c=t[s+"m"];l||(e&&(o.width=0,t[s+"m"]=c=n.clipRect(-99,r?-t.plotLeft:-t.plotTop,99,r?t.chartWidth:t.chartHeight)),t[s]=l=n.clipRect(o),l.count={length:0}),e&&(l.count[this.index]||(l.count[this.index]=!0,l.count.length+=1)),!1!==i.clip&&(this.group.clip(e||a?l:t.clipRect),this.markerGroup.clip(c),this.sharedClipKey=s),e||(l.count[this.index]&&(delete l.count[this.index],l.count.length-=1),0===l.count.length&&s&&t[s]&&(a||(t[s]=t[s].destroy()),t[s+"m"]&&(t[s+"m"]=t[s+"m"].destroy())))},animate:function(e){var t,n,r=this.chart,a=i(this.options.animation);e?this.setClip(a):((t=r[n=this.sharedClipKey])&&t.animate({width:r.plotSizeX},a),r[n+"m"]&&r[n+"m"].animate({width:r.plotSizeX+99},a),this.animate=null)},afterAnimate:function(){this.setClip(),p(this,"afterAnimate"),this.finishedAnimating=!0},drawPoints:function(){var e,t,i,n,r,a,o,s,l=this.points,c=this.chart,u=this.options.marker,h=this[this.specialGroup]||this.markerGroup,d=C(u.enabled,!!this.xAxis.isRadial||null,this.closestPointRangePx>=2*u.radius);if(!1!==u.enabled||this._hasPointMarkers)for(e=0;e<l.length;e++)n=(t=l[e]).graphic,r=t.marker||{},a=!!t.marker,o=t.isInside,(d&&void 0===r.enabled||r.enabled)&&m(t.plotY)&&null!==t.y?(i=C(r.symbol,this.symbol),t.hasImage=0===i.indexOf("url"),s=this.markerAttribs(t,t.selected&&"select"),n?n[o?"show":"hide"](!0).animate(s):o&&(s.width>0||t.hasImage)&&(t.graphic=n=c.renderer.symbol(i,s.x,s.y,s.width,s.height,a?r:u).add(h)),n&&n.attr(this.pointAttribs(t,t.selected&&"select")),n&&n.addClass(t.getClassName(),!0)):n&&(t.graphic=n.destroy())},markerAttribs:function(e,t){var i,n,r,a=this.options.marker,o=e.marker||{},s=C(o.radius,a.radius);return t&&(i=a.states[t],s=C((n=o.states&&o.states[t])&&n.radius,i&&i.radius,s+(i&&i.radiusPlus||0))),e.hasImage&&(s=0),r={x:Math.floor(e.plotX)-s,y:e.plotY-s},s&&(r.width=r.height=2*s),r},pointAttribs:function(e,t){var i,n,r,a,o=this.options.marker,s=e&&e.options,l=s&&s.marker||{},c=this.color,u=s&&s.color,h=e&&e.color,d=C(l.lineWidth,o.lineWidth);return c=u||e&&e.zone&&e.zone.color||h||c,r=l.fillColor||o.fillColor||c,a=l.lineColor||o.lineColor||c,t&&(i=o.states[t],d=C((n=l.states&&l.states[t]||{}).lineWidth,i.lineWidth,d+C(n.lineWidthPlus,i.lineWidthPlus,0)),r=n.fillColor||i.fillColor||r,a=n.lineColor||i.lineColor||a),{stroke:a,"stroke-width":d,fill:r}},destroy:function(){var e,t,i,n=this,r=n.chart,a=/AppleWebKit\/533/.test(k.navigator.userAgent),o=n.data||[];for(p(n,"destroy"),S(n),u(n.axisTypes||[],function(e){(i=n[e])&&i.series&&(h(i.series,n),i.isDirty=i.forceRedraw=!0)}),n.legendItem&&n.chart.legend.destroyItem(n),e=o.length;e--;)(t=o[e])&&t.destroy&&t.destroy();n.points=null,clearTimeout(n.animationTimeout),b(n,function(e,t){e instanceof x&&!e.survive&&e[a&&"group"===t?"hide":"destroy"]()}),r.hoverSeries===n&&(r.hoverSeries=null),h(r.series,n),r.orderSeries(),b(n,function(e,t){delete n[t]})},getGraphPath:function(e,t,i){var n,r,a=this,o=a.options,s=o.step,l=[],h=[];return(n=(e=e||a.points).reversed)&&e.reverse(),(s={right:1,center:2}[s]||s&&3)&&n&&(s=4-s),!o.connectNulls||t||i||(e=this.getValidPoints(e)),u(e,function(n,u){var d,p=n.plotX,f=n.plotY,g=e[u-1];(n.leftCliff||g&&g.rightCliff)&&!i&&(r=!0),n.isNull&&!c(t)&&u>0?r=!o.connectNulls:n.isNull&&!t?r=!0:(0===u||r?d=["M",n.plotX,n.plotY]:a.getPointSpline?d=a.getPointSpline(e,n,u):s?(d=1===s?["L",g.plotX,f]:2===s?["L",(g.plotX+p)/2,g.plotY,"L",(g.plotX+p)/2,f]:["L",p,g.plotY]).push("L",p,f):d=["L",p,f],h.push(n.x),s&&h.push(n.x),l.push.apply(l,d),r=!1)}),l.xMap=h,a.graphPath=l,l},drawGraph:function(){var e=this,t=this.options,i=(this.gappedPath||this.getGraphPath).call(this),n=[["graph","highcharts-graph",t.lineColor||this.color,t.dashStyle]];u(this.zones,function(i,r){n.push(["zone-graph-"+r,"highcharts-graph highcharts-zone-graph-"+r+" "+(i.className||""),i.color||e.color,i.dashStyle||t.dashStyle])}),u(n,function(n,r){var a,o=n[0],s=e[o];s?(s.endX=i.xMap,s.animate({d:i})):i.length&&(e[o]=e.chart.renderer.path(i).addClass(n[1]).attr({zIndex:1}).add(e.group),a={stroke:n[2],"stroke-width":t.lineWidth,fill:e.fillGraph&&e.color||"none"},n[3]?a.dashstyle=n[3]:"square"!==t.linecap&&(a["stroke-linecap"]=a["stroke-linejoin"]="round"),s=e[o].attr(a).shadow(r<2&&t.shadow)),s&&(s.startX=i.xMap,s.isArea=i.isArea)})},applyZones:function(){var e,t,i,n,r,a,o,s,l,c=this,h=this.chart,d=h.renderer,p=this.zones,f=this.clips||[],g=this.graph,m=this.area,y=Math.max(h.chartWidth,h.chartHeight),v=this[(this.zoneAxis||"y")+"Axis"],b=h.inverted,S=!1;p.length&&(g||m)&&v&&void 0!==v.min&&(r=v.reversed,a=v.horiz,g&&g.hide(),m&&m.hide(),n=v.getExtremes(),u(p,function(u,p){e=r?a?h.plotWidth:0:a?0:v.toPixels(n.min),e=Math.min(Math.max(C(t,e),0),y),t=Math.min(Math.max(Math.round(v.toPixels(C(u.value,n.max),!0)),0),y),S&&(e=t=v.toPixels(n.max)),o=Math.abs(e-t),s=Math.min(e,t),l=Math.max(e,t),v.isXAxis?(i={x:b?l:s,y:0,width:o,height:y},a||(i.x=h.plotHeight-i.x)):(i={x:0,y:b?l:s,width:y,height:o},a&&(i.y=h.plotWidth-i.y)),b&&d.isVML&&(i=v.isXAxis?{x:0,y:r?s:l,height:i.width,width:h.chartWidth}:{x:i.y-h.plotLeft-h.spacingBox.x,y:0,width:i.height,height:h.chartHeight}),f[p]?f[p].animate(i):(f[p]=d.clipRect(i),g&&c["zone-graph-"+p].clip(f[p]),m&&c["zone-area-"+p].clip(f[p])),S=u.value>n.max}),this.clips=f)},invertGroups:function(e){var i,n=this,r=n.chart;function a(){u(["group","markerGroup"],function(t){n[t]&&(r.renderer.isVML&&n[t].attr({width:n.yAxis.len,height:n.xAxis.len}),n[t].width=n.yAxis.len,n[t].height=n.xAxis.len,n[t].invert(e))})}n.xAxis&&(i=t(r,"resize",a),t(n,"destroy",i),a(),n.invertGroups=a)},plotGroup:function(e,t,i,n,r){var a=this[e],o=!a;return o&&(this[e]=a=this.chart.renderer.g().attr({zIndex:n||.1}).add(r)),a.addClass("highcharts-"+t+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series highcharts-color-"+this.colorIndex+" "+(this.options.className||""),!0),a.attr({visibility:i})[o?"attr":"animate"](this.getPlotBox()),a},getPlotBox:function(){var e=this.chart,t=this.xAxis,i=this.yAxis;return e.inverted&&(t=i,i=this.xAxis),{translateX:t?t.left:e.plotLeft,translateY:i?i.top:e.plotTop,scaleX:1,scaleY:1}},render:function(){var e,t=this,n=t.chart,r=t.options,a=!!t.animate&&n.renderer.isSVG&&i(r.animation).duration,o=t.visible?"inherit":"hidden",s=r.zIndex,l=t.hasRendered,c=n.seriesGroup,u=n.inverted;e=t.plotGroup("group","series",o,s,c),t.markerGroup=t.plotGroup("markerGroup","markers",o,s,c),a&&t.animate(!0),e.inverted=!!t.isCartesian&&u,t.drawGraph&&(t.drawGraph(),t.applyZones()),t.drawDataLabels&&t.drawDataLabels(),t.visible&&t.drawPoints(),t.drawTracker&&!1!==t.options.enableMouseTracking&&t.drawTracker(),t.invertGroups(u),!1===r.clip||t.sharedClipKey||l||e.clip(n.clipRect),a&&t.animate(),l||(t.animationTimeout=T(function(){t.afterAnimate()},a)),t.isDirty=!1,t.hasRendered=!0},redraw:function(){var e=this.chart,t=this.isDirty||this.isDirtyData,i=this.group,n=this.xAxis,r=this.yAxis;i&&(e.inverted&&i.attr({width:e.plotWidth,height:e.plotHeight}),i.animate({translateX:C(n&&n.left,e.plotLeft),translateY:C(r&&r.top,e.plotTop)})),this.translate(),this.render(),t&&delete this.kdTree},kdAxisArray:["clientX","plotY"],searchPoint:function(e,t){var i=this.xAxis,n=this.yAxis,r=this.chart.inverted;return this.searchKDTree({clientX:r?i.len-e.chartY+i.pos:e.chartX-i.pos,plotY:r?n.len-e.chartX+n.pos:e.chartY-n.pos},t)},buildKDTree:function(){this.buildingKdTree=!0;var e=this,t=e.options.findNearestPointBy.indexOf("y")>-1?2:1;delete e.kdTree,T(function(){e.kdTree=function t(i,n,r){var a,o,s=i&&i.length;if(s)return a=e.kdAxisArray[n%r],i.sort(function(e,t){return e[a]-t[a]}),{point:i[o=Math.floor(s/2)],left:t(i.slice(0,o),n+1,r),right:t(i.slice(o+1),n+1,r)}}(e.getValidPoints(null,!e.directTouch),t,t),e.buildingKdTree=!1},e.options.kdNow?0:1)},searchKDTree:function(e,t){var i=this,n=this.kdAxisArray[0],r=this.kdAxisArray[1],a=t?"distX":"dist",o=i.options.findNearestPointBy.indexOf("y")>-1?2:1;if(this.kdTree||this.buildingKdTree||this.buildKDTree(),this.kdTree)return function e(t,o,s,l){var u,h,d,p,f,g,m,y,v,b,C=o.point,S=i.kdAxisArray[s%l],w=C;return m=C,y=c((g=t)[n])&&c(m[n])?Math.pow(g[n]-m[n],2):null,v=c(g[r])&&c(m[r])?Math.pow(g[r]-m[r],2):null,m.dist=c(b=(y||0)+(v||0))?Math.sqrt(b):Number.MAX_VALUE,m.distX=c(y)?Math.sqrt(y):Number.MAX_VALUE,h=(u=t[S]-C[S])<0?"left":"right",d=u<0?"right":"left",o[h]&&(w=(p=e(t,o[h],s+1,l))[a]<w[a]?p:C),o[d]&&Math.sqrt(u*u)<w[a]&&(w=(f=e(t,o[d],s+1,l))[a]<w[a]?f:w),w}(e,this.kdTree,o,o)}})}(s),function(e){var t=e.Axis,i=e.Chart,n=e.correctFloat,r=e.defined,a=e.destroyObjectProperties,o=e.each,s=e.format,l=e.objectEach,c=e.pick,u=e.Series;e.StackItem=function(e,t,i,n,r){var a=e.chart.inverted;this.axis=e,this.isNegative=i,this.options=t,this.x=n,this.total=null,this.points={},this.stack=r,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:t.align||(a?i?"left":"right":"center"),verticalAlign:t.verticalAlign||(a?"middle":i?"bottom":"top"),y:c(t.y,a?4:i?14:-6),x:c(t.x,a?i?-6:6:0)},this.textAlign=t.textAlign||(a?i?"right":"left":"center")},e.StackItem.prototype={destroy:function(){a(this,this.axis)},render:function(e){var t=this.options,i=t.format,n=i?s(i,this):t.formatter.call(this);this.label?this.label.attr({text:n,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(n,null,null,t.useHTML).css(t.style).attr({align:this.textAlign,rotation:t.rotation,visibility:"hidden"}).add(e)},setOffset:function(e,t){var i,n=this.axis,r=n.chart,a=n.translate(n.usePercentage?100:this.total,0,0,0,1),o=n.translate(0),s=Math.abs(a-o),l=r.xAxis[0].translate(this.x)+e,c=this.getStackBox(r,this,l,a,t,s),u=this.label;u&&(u.align(this.alignOptions,null,c),i=u.alignAttr,u[!1===this.options.crop||r.isInsidePlot(i.x,i.y)?"show":"hide"](!0))},getStackBox:function(e,t,i,n,r,a){var o=t.axis.reversed,s=e.inverted,l=e.plotHeight,c=t.isNegative&&!o||!t.isNegative&&o;return{x:s?c?n:n-a:i,y:s?l-i-r:c?l-n-a:l-n,width:s?a:r,height:s?r:a}}},i.prototype.getStacks=function(){var e=this;o(e.yAxis,function(e){e.stacks&&e.hasVisibleSeries&&(e.oldStacks=e.stacks)}),o(e.series,function(t){!t.options.stacking||!0!==t.visible&&!1!==e.options.chart.ignoreHiddenSeries||(t.stackKey=t.type+c(t.options.stack,""))})},t.prototype.buildStacks=function(){var e,t=this.series,i=c(this.options.reversedStacks,!0),n=t.length;if(!this.isXAxis){for(this.usePercentage=!1,e=n;e--;)t[i?e:n-e-1].setStackedPoints();if(this.usePercentage)for(e=0;e<n;e++)t[e].setPercentStacks()}},t.prototype.renderStackTotals=function(){var e=this.chart,t=this.stacks,i=this.stackTotalGroup;i||(this.stackTotalGroup=i=e.renderer.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),i.translate(e.plotLeft,e.plotTop),l(t,function(e){l(e,function(e){e.render(i)})})},t.prototype.resetStacks=function(){var e=this;e.isXAxis||l(e.stacks,function(t){l(t,function(i,n){i.touched<e.stacksTouched?(i.destroy(),delete t[n]):(i.total=null,i.cum=null)})})},t.prototype.cleanStacks=function(){var e;this.isXAxis||(this.oldStacks&&(e=this.stacks=this.oldStacks),l(e,function(e){l(e,function(e){e.cum=e.total})}))},u.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var t,i,a,o,s,l,u,h,d,p=this.processedXData,f=this.processedYData,g=[],m=f.length,y=this.options,v=y.threshold,b=y.startFromThreshold?v:0,C=y.stack,S=y.stacking,w=this.stackKey,x="-"+w,T=this.negStacks,k=this.yAxis,E=k.stacks,A=k.oldStacks;for(k.stacksTouched+=1,u=0;u<m;u++)d=f[u],l=(t=this.getStackIndicator(t,h=p[u],this.index)).key,E[s=(i=T&&d<(b?0:v))?x:w]||(E[s]={}),E[s][h]||(A[s]&&A[s][h]?(E[s][h]=A[s][h],E[s][h].total=null):E[s][h]=new e.StackItem(k,k.options.stackLabels,i,h,C)),a=E[s][h],null!==d&&(a.points[l]=a.points[this.index]=[c(a.cum,b)],r(a.cum)||(a.base=l),a.touched=k.stacksTouched,t.index>0&&!1===this.singleStacks&&(a.points[l][0]=a.points[this.index+","+h+",0"][0])),"percent"===S?(o=i?w:x,a.total=T&&E[o]&&E[o][h]?(o=E[o][h]).total=Math.max(o.total,a.total)+Math.abs(d)||0:n(a.total+(Math.abs(d)||0))):a.total=n(a.total+(d||0)),a.cum=c(a.cum,b)+(d||0),null!==d&&(a.points[l].push(a.cum),g[u]=a.cum);"percent"===S&&(k.usePercentage=!0),this.stackedYData=g,k.oldStacks={}}},u.prototype.setPercentStacks=function(){var e,t=this,i=t.stackKey,r=t.yAxis.stacks,a=t.processedXData;o([i,"-"+i],function(i){for(var o,s,l,c,u=a.length;u--;)e=t.getStackIndicator(e,o=a[u],t.index,i),(l=(s=r[i]&&r[i][o])&&s.points[e.key])&&(l[0]=n(l[0]*(c=s.total?100/s.total:0)),l[1]=n(l[1]*c),t.stackedYData[u]=l[1])})},u.prototype.getStackIndicator=function(e,t,i,n){return!r(e)||e.x!==t||n&&e.key!==n?e={x:t,index:0,key:n}:e.index++,e.key=[i,t,e.index].join(","),e}}(s),function(e){var t=s.addEvent,i=s.animate,n=s.Axis,r=s.createElement,a=s.css,o=s.defined,l=s.each,c=s.erase,u=s.extend,h=s.fireEvent,d=s.inArray,p=s.isNumber,f=s.isObject,g=s.isArray,m=s.merge,y=s.objectEach,v=s.pick,b=s.Point,C=s.Series,S=s.seriesTypes,w=s.setAnimation,x=s.splat;u(s.Chart.prototype,{addSeries:function(e,t,i){var n,r=this;return e&&(t=v(t,!0),h(r,"addSeries",{options:e},function(){n=r.initSeries(e),r.isDirtyLegend=!0,r.linkSeries(),t&&r.redraw(i)})),n},addAxis:function(e,t,i,r){var a,o=t?"xAxis":"yAxis",s=this.options,l=m(e,{index:this[o].length,isX:t});return a=new n(this,l),s[o]=x(s[o]||{}),s[o].push(l),v(i,!0)&&this.redraw(r),a},showLoading:function(e){var n=this,o=n.options,s=n.loadingDiv,l=o.loading,c=function(){s&&a(s,{left:n.plotLeft+"px",top:n.plotTop+"px",width:n.plotWidth+"px",height:n.plotHeight+"px"})};s||(n.loadingDiv=s=r("div",{className:"highcharts-loading highcharts-loading-hidden"},null,n.container),n.loadingSpan=r("span",{className:"highcharts-loading-inner"},null,s),t(n,"redraw",c)),s.className="highcharts-loading",n.loadingSpan.innerHTML=e||o.lang.loading,a(s,u(l.style,{zIndex:10})),a(n.loadingSpan,l.labelStyle),n.loadingShown||(a(s,{opacity:0,display:""}),i(s,{opacity:l.style.opacity||.5},{duration:l.showDuration||0})),n.loadingShown=!0,c()},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&(t.className="highcharts-loading highcharts-loading-hidden",i(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){a(t,{display:"none"})}})),this.loadingShown=!1},propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","tooltip"],update:function(e,t,i){var n,r,a,s,c=this,u={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle"},h=e.chart,f=[];h&&(m(!0,c.options.chart,h),"className"in h&&c.setClassName(h.className),("inverted"in h||"polar"in h)&&(c.propFromSeries(),n=!0),"alignTicks"in h&&(n=!0),y(h,function(e,t){-1!==d("chart."+t,c.propsRequireUpdateSeries)&&(r=!0),-1!==d(t,c.propsRequireDirtyBox)&&(c.isDirtyBox=!0)}),"style"in h&&c.renderer.setStyle(h.style)),e.colors&&(this.options.colors=e.colors),e.plotOptions&&m(!0,this.options.plotOptions,e.plotOptions),y(e,function(e,t){c[t]&&"function"==typeof c[t].update?c[t].update(e,!1):"function"==typeof c[u[t]]&&c[u[t]](e),"chart"!==t&&-1!==d(t,c.propsRequireUpdateSeries)&&(r=!0)}),l(["xAxis","yAxis","zAxis","series","colorAxis","pane"],function(t){e[t]&&(l(x(e[t]),function(e,n){var r=o(e.id)&&c.get(e.id)||c[t][n];r&&r.coll===t&&(r.update(e,!1),i&&(r.touched=!0)),!r&&i&&("series"===t?c.addSeries(e,!1).touched=!0:"xAxis"!==t&&"yAxis"!==t||(c.addAxis(e,"xAxis"===t,!1).touched=!0))}),i&&l(c[t],function(e){e.touched?delete e.touched:f.push(e)}))}),l(f,function(e){e.remove(!1)}),n&&l(c.axes,function(e){e.update({},!1)}),r&&l(c.series,function(e){e.update({},!1)}),e.loading&&m(!0,c.options.loading,e.loading),a=h&&h.width,s=h&&h.height,p(a)&&a!==c.chartWidth||p(s)&&s!==c.chartHeight?c.setSize(a,s):v(t,!0)&&c.redraw()},setSubtitle:function(e){this.setTitle(void 0,e)}}),u(b.prototype,{update:function(e,t,i,n){var r,a=this,o=a.series,s=a.graphic,l=o.chart,c=o.options;function u(){a.applyOptions(e),null===a.y&&s&&(a.graphic=s.destroy()),f(e,!0)&&(s&&s.element&&e&&e.marker&&void 0!==e.marker.symbol&&(a.graphic=s.destroy()),e&&e.dataLabels&&a.dataLabel&&(a.dataLabel=a.dataLabel.destroy())),o.updateParallelArrays(a,r=a.index),c.data[r]=f(c.data[r],!0)||f(e,!0)?a.options:e,o.isDirty=o.isDirtyData=!0,!o.fixedBox&&o.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===c.legendType&&(l.isDirtyLegend=!0),t&&l.redraw(i)}t=v(t,!0),!1===n?u():a.firePointEvent("update",{options:e},u)},remove:function(e,t){this.series.removePoint(d(this,this.series.data),e,t)}}),u(C.prototype,{addPoint:function(e,t,i,n){var r,a,o,s,l=this.options,c=this.data,u=this.chart,h=this.xAxis,d=h&&h.hasNames&&h.names,p=l.data,f=this.xData;if(t=v(t,!0),this.pointClass.prototype.applyOptions.apply(r={series:this},[e]),s=r.x,o=f.length,this.requireSorting&&s<f[o-1])for(a=!0;o&&f[o-1]>s;)o--;this.updateParallelArrays(r,"splice",o,0,0),this.updateParallelArrays(r,o),d&&r.name&&(d[s]=r.name),p.splice(o,0,e),a&&(this.data.splice(o,0,null),this.processData()),"point"===l.legendType&&this.generatePoints(),i&&(c[0]&&c[0].remove?c[0].remove(!1):(c.shift(),this.updateParallelArrays(r,"shift"),p.shift())),this.isDirty=!0,this.isDirtyData=!0,t&&u.redraw(n)},removePoint:function(e,t,i){var n=this,r=n.data,a=r[e],o=n.points,s=n.chart,l=function(){o&&o.length===r.length&&o.splice(e,1),r.splice(e,1),n.options.data.splice(e,1),n.updateParallelArrays(a||{series:n},"splice",e,1),a&&a.destroy(),n.isDirty=!0,n.isDirtyData=!0,t&&s.redraw()};w(i,s),t=v(t,!0),a?a.firePointEvent("remove",null,l):l()},remove:function(e,t,i){var n=this,r=n.chart;function a(){n.destroy(),r.isDirtyLegend=r.isDirtyBox=!0,r.linkSeries(),v(e,!0)&&r.redraw(t)}!1!==i?h(n,"remove",null,a):a()},update:function(e,t){var i,n=this,r=n.chart,a=n.userOptions,o=n.oldType||n.type,s=e.type||a.type||r.options.chart.type,c=S[o].prototype,h=["group","markerGroup","dataLabelsGroup","navigatorSeries","baseSeries"],d=n.finishedAnimating&&{animation:!1};if(Object.keys&&"data"===Object.keys(e).toString())return this.setData(e.data,t);for(i in(s&&s!==o||void 0!==e.zIndex)&&(h.length=0),l(h,function(e){h[e]=n[e],delete n[e]}),e=m(a,d,{index:n.index,pointStart:n.xData[0]},{data:n.options.data},e),n.remove(!1,null,!1),c)n[i]=void 0;u(n,S[s||o].prototype),l(h,function(e){n[e]=h[e]}),n.init(r,e),n.oldType=o,r.linkSeries(),v(t,!0)&&r.redraw(!1)}}),u(n.prototype,{update:function(e,t){var i=this.chart;e=i.options[this.coll][this.options.index]=m(this.userOptions,e),this.destroy(!0),this.init(i,u(e,{events:void 0})),i.isDirtyBox=!0,v(t,!0)&&i.redraw()},remove:function(e){for(var t=this.chart,i=this.coll,n=this.series,r=n.length;r--;)n[r]&&n[r].remove(!1);c(t.axes,this),c(t[i],this),g(t.options[i])?t.options[i].splice(this.options.index,1):delete t.options[i],l(t[i],function(e,t){e.options.index=t}),this.destroy(),t.isDirtyBox=!0,v(e,!0)&&t.redraw()},setTitle:function(e,t){this.update({title:e},t)},setCategories:function(e,t){this.update({categories:e},t)}})}(),function(e){var t=e.color,i=e.each,n=e.map,r=e.pick,a=e.Series;(0,e.seriesType)("area","line",{softThreshold:!1,threshold:0},{singleStacks:!1,getStackPoints:function(t){var a,o,s=[],l=[],c=this.xAxis,u=this.yAxis,h=u.stacks[this.stackKey],d={},p=this.index,f=u.series,g=f.length,m=r(u.options.reversedStacks,!0)?1:-1;if(t=t||this.points,this.options.stacking){for(o=0;o<t.length;o++)d[t[o].x]=t[o];e.objectEach(h,function(e,t){null!==e.total&&l.push(t)}),l.sort(function(e,t){return e-t}),a=n(f,function(){return this.visible}),i(l,function(e,t){var n,r,f=0;if(d[e]&&!d[e].isNull)s.push(d[e]),i([-1,1],function(i){var s=1===i?"rightNull":"leftNull",c=1===i?"rightCliff":"leftCliff",u=0,f=h[l[t+i]];if(f)for(o=p;o>=0&&o<g;)(n=f.points[o])||(o===p?d[e][s]=!0:a[o]&&(r=h[e].points[o])&&(u-=r[1]-r[0])),o+=m;d[e][c]=u});else{for(o=p;o>=0&&o<g;){if(n=h[e].points[o]){f=n[1];break}o+=m}f=u.translate(f,0,1,0,1),s.push({isNull:!0,plotX:c.translate(e,0,0,0,1),x:e,plotY:f,yBottom:f})}})}return s},getGraphPath:function(e){var t,i,n,o,s,l,c,u,h=a.prototype.getGraphPath,d=this.options,p=d.stacking,f=this.yAxis,g=[],m=[],y=this.index,v=f.stacks[this.stackKey],b=d.threshold,C=f.getThreshold(d.threshold),S=d.connectNulls||"percent"===p,w=function(t,i,n){var r,a,o=e[t],s=p&&v[o.x].points[y],c=o[n+"Null"]||0,u=o[n+"Cliff"]||0,h=!0;u||c?(r=(c?s[0]:s[1])+u,a=s[0]+u,h=!!c):!p&&e[i]&&e[i].isNull&&(r=a=b),void 0!==r&&(m.push({plotX:l,plotY:null===r?C:f.getThreshold(r),isNull:h,isCliff:!0}),g.push({plotX:l,plotY:null===a?C:f.getThreshold(a),doCurve:!1}))};for(e=e||this.points,p&&(e=this.getStackPoints(e)),o=0;o<e.length;o++)c=e[o].isNull,l=r(e[o].rectPlotX,e[o].plotX),u=r(e[o].yBottom,C),c&&!S||(S||w(o,o-1,"left"),c&&!p&&S||(m.push(e[o]),g.push({x:o,plotX:l,plotY:u})),S||w(o,o+1,"right"));return i=h.call(this,m,!0,!0),g.reversed=!0,(n=h.call(this,g,!0,!0)).length&&(n[0]="L"),s=i.concat(n),t=h.call(this,m,!1,S),s.xMap=i.xMap,this.areaPath=s,t},drawGraph:function(){this.areaPath=[],a.prototype.drawGraph.apply(this);var e=this,n=this.areaPath,o=this.options,s=[["area","highcharts-area",this.color,o.fillColor]];i(this.zones,function(t,i){s.push(["zone-area-"+i,"highcharts-area highcharts-zone-area-"+i+" "+t.className,t.color||e.color,t.fillColor||o.fillColor])}),i(s,function(i){var a=i[0],s=e[a];s?(s.endX=n.xMap,s.animate({d:n})):(s=e[a]=e.chart.renderer.path(n).addClass(i[1]).attr({fill:r(i[3],t(i[2]).setOpacity(r(o.fillOpacity,.75)).get()),zIndex:0}).add(e.group)).isArea=!0,s.startX=n.xMap,s.shiftUnit=o.step?2:1})},drawLegendSymbol:e.LegendSymbolMixin.drawRectangle})}(s),l=s.pick,(0,s.seriesType)("spline","line",{},{getPointSpline:function(e,t,i){var n,r,a,o,s,c=t.plotX,u=t.plotY,h=e[i-1],d=e[i+1];function p(e){return e&&!e.isNull&&!1!==e.doCurve&&!t.isCliff}if(p(h)&&p(d)){var f=h.plotY,g=d.plotY,m=0;r=(1.5*u+f)/2.5,o=(1.5*u+g)/2.5,(a=(1.5*c+d.plotX)/2.5)!=(n=(1.5*c+h.plotX)/2.5)&&(m=(o-r)*(a-c)/(a-n)+u-o),o+=m,(r+=m)>f&&r>u?o=2*u-(r=Math.max(f,u)):r<f&&r<u&&(o=2*u-(r=Math.min(f,u))),o>g&&o>u?r=2*u-(o=Math.max(g,u)):o<g&&o<u&&(r=2*u-(o=Math.min(g,u))),t.rightContX=a,t.rightContY=o}return s=["C",l(h.rightContX,h.plotX),l(h.rightContY,h.plotY),l(n,c),l(r,u),c,u],h.rightContX=h.rightContY=null,s}}),(0,s.seriesType)("areaspline","spline",s.defaultPlotOptions.area,{getStackPoints:(c=s.seriesTypes.area.prototype).getStackPoints,getGraphPath:c.getGraphPath,drawGraph:c.drawGraph,drawLegendSymbol:s.LegendSymbolMixin.drawRectangle}),function(e){var t=s.animObject,i=s.color,n=s.each,r=s.extend,a=s.isNumber,o=s.merge,l=s.pick,c=s.Series,u=s.svg;(0,s.seriesType)("column","line",{borderRadius:0,crisp:!0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1,shadow:!1},select:{color:"#cccccc",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"},{cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){c.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&n(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var e,t=this,i=t.options,r=t.xAxis,a=t.yAxis,o=r.reversed,s={},c=0;!1===i.grouping?c=1:n(t.chart.series,function(i){var n,r=i.options,o=i.yAxis;i.type!==t.type||!i.visible&&t.chart.options.chart.ignoreHiddenSeries||a.len!==o.len||a.pos!==o.pos||(r.stacking?(void 0===s[e=i.stackKey]&&(s[e]=c++),n=s[e]):!1!==r.grouping&&(n=c++),i.columnIndex=n)});var u=Math.min(Math.abs(r.transA)*(r.ordinalSlope||i.pointRange||r.closestPointRange||r.tickInterval||1),r.len),h=u*i.groupPadding,d=(u-2*h)/(c||1),p=Math.min(i.maxPointWidth||r.len,l(i.pointWidth,d*(1-2*i.pointPadding)));return t.columnMetrics={width:p,offset:(d-p)/2+(h+((t.columnIndex||0)+(o?1:0))*d-u/2)*(o?-1:1)},t.columnMetrics},crispCol:function(e,t,i,n){var r,a,o=this.chart,s=this.borderWidth,l=-(s%2?.5:0),c=s%2?.5:1;return o.inverted&&o.renderer.isVML&&(c+=1),this.options.crisp&&(i=Math.round(e+i)+l-(e=Math.round(e)+l)),r=Math.round(t+n)+c,a=Math.abs(t)<=.5&&r>.5,n=r-(t=Math.round(t)+c),a&&n&&(t-=1,n+=1),{x:e,y:t,width:i,height:n}},translate:function(){var e=this,t=e.chart,i=e.options,r=e.dense=e.closestPointRange*e.xAxis.transA<2,a=e.borderWidth=l(i.borderWidth,r?0:1),o=e.yAxis,s=e.translatedThreshold=o.getThreshold(i.threshold),u=l(i.minPointLength,5),h=e.getColumnMetrics(),d=h.width,p=e.barW=Math.max(d,1+2*a),f=e.pointXOffset=h.offset;t.inverted&&(s-=.5),i.pointPadding&&(p=Math.ceil(p)),c.prototype.translate.apply(e),n(e.points,function(i){var n,r=l(i.yBottom,s),a=999+Math.abs(r),c=Math.min(Math.max(-a,i.plotY),o.len+a),h=i.plotX+f,g=p,m=Math.min(c,r),y=Math.max(c,r)-m;Math.abs(y)<u&&u&&(y=u,n=!o.reversed&&!i.negative||o.reversed&&i.negative,m=Math.abs(m-s)>u?r-u:s-(n?u:0)),i.barX=h,i.pointWidth=d,i.tooltipPos=t.inverted?[o.len+o.pos-t.plotLeft-c,e.xAxis.len-h-g/2,y]:[h+g/2,c+o.pos-t.plotTop,y],i.shapeType="rect",i.shapeArgs=e.crispCol.apply(e,i.isNull?[h,s,g,0]:[h,m,g,y])})},getSymbol:s.noop,drawLegendSymbol:s.LegendSymbolMixin.drawRectangle,drawGraph:function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},pointAttribs:function(e,t){var n,r,a,s=this.options,l=this.pointAttrToOptions||{},c=l.stroke||"borderColor",u=l["stroke-width"]||"borderWidth",h=e&&e.color||this.color,d=e[c]||s[c]||this.color||h,p=e[u]||s[u]||this[u]||0,f=s.dashStyle;return e&&this.zones.length&&(a=e.getZone(),h=e.options.color||a&&a.color||this.color),t&&(h=(n=o(s.states[t],e.options.states&&e.options.states[t]||{})).color||void 0!==n.brightness&&i(h).brighten(n.brightness).get()||h,d=n[c]||d,p=n[u]||p,f=n.dashStyle||f),r={fill:h,stroke:d,"stroke-width":p},f&&(r.dashstyle=f),r},drawPoints:function(){var e,t=this,i=this.chart,r=t.options,s=i.renderer,l=r.animationLimit||250;n(t.points,function(n){var c=n.graphic;a(n.plotY)&&null!==n.y?(e=n.shapeArgs,c?c[i.pointCount<l?"animate":"attr"](o(e)):n.graphic=c=s[n.shapeType](e).add(n.group||t.group),r.borderRadius&&c.attr({r:r.borderRadius}),c.attr(t.pointAttribs(n,n.selected&&"select")).shadow(r.shadow,null,r.stacking&&!r.borderRadius),c.addClass(n.getClassName(),!0)):c&&(n.graphic=c.destroy())})},animate:function(e){var i,n=this,a=this.yAxis,o=n.options,s=this.chart.inverted,l={};u&&(e?(l.scaleY=.001,i=Math.min(a.pos+a.len,Math.max(a.pos,a.toPixels(o.threshold))),s?l.translateX=i-a.len:l.translateY=i,n.group.attr(l)):(l[s?"translateX":"translateY"]=a.pos,n.group.animate(l,r(t(n.options.animation),{step:function(e,t){n.group.attr({scaleY:Math.max(.001,t.pos)})}})),n.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&n(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),c.prototype.remove.apply(e,arguments)}})}(),(0,s.seriesType)("bar","column",null,{inverted:!0}),u=s.Series,(0,s.seriesType)("scatter","line",{lineWidth:0,findNearestPointBy:"xy",marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 0.85em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}},{sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,drawGraph:function(){this.options.lineWidth&&u.prototype.drawGraph.call(this)}}),function(e){var t=s.pick,i=s.relativeLength;s.CenteredSeriesMixin={getCenter:function(){var e,n,r,a=this.options,o=this.chart,s=2*(a.slicedOffset||0),l=o.plotWidth-2*s,c=o.plotHeight-2*s,u=a.center,h=[t(u[0],"50%"),t(u[1],"50%"),a.size||"100%",a.innerSize||0],d=Math.min(l,c);for(n=0;n<4;++n)r=h[n],e=n<2||2===n&&/%$/.test(r),h[n]=i(r,[l,c,d,h[2]][n])+(e?s:0);return h[3]>h[2]&&(h[3]=h[2]),h}}}(),function(e){var t=e.addEvent,i=e.defined,n=e.each,r=e.extend,a=e.inArray,o=e.noop,s=e.pick,l=e.Point,c=e.Series,u=e.setAnimation;(0,e.seriesType)("pie","line",{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,states:{hover:{brightness:.1,shadow:!1}}},{isCartesian:!1,requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttribs:e.seriesTypes.column.prototype.pointAttribs,animate:function(e){var t=this,i=t.startAngleRad;e||(n(t.points,function(e){var n=e.graphic,r=e.shapeArgs;n&&(n.attr({r:e.startR||t.center[3]/2,start:i,end:i}),n.animate({r:r.r,start:r.start,end:r.end},t.options.animation))}),t.animate=null)},updateTotals:function(){var e,t,i=0,n=this.points,r=n.length,a=this.options.ignoreHiddenPoint;for(e=0;e<r;e++)t=n[e],i+=a&&!t.visible?0:t.isNull?0:t.y;for(this.total=i,e=0;e<r;e++)(t=n[e]).percentage=i>0&&(t.visible||!a)?t.y/i*100:0,t.total=i},generatePoints:function(){c.prototype.generatePoints.call(this),this.updateTotals()},translate:function(e){this.generatePoints();var t,i,n,r,a,o,l,c,u=0,h=this.options,d=h.slicedOffset,p=d+(h.borderWidth||0),f=h.startAngle||0,g=this.startAngleRad=Math.PI/180*(f-90),m=(this.endAngleRad=Math.PI/180*(s(h.endAngle,f+360)-90))-g,y=this.points,v=h.dataLabels.distance,b=h.ignoreHiddenPoint,C=y.length;for(e||(this.center=e=this.getCenter()),this.getX=function(t,i,n){return r=Math.asin(Math.min((t-e[1])/(e[2]/2+n.labelDistance),1)),e[0]+(i?-1:1)*(Math.cos(r)*(e[2]/2+n.labelDistance))},l=0;l<C;l++)(c=y[l]).labelDistance=s(c.options.dataLabels&&c.options.dataLabels.distance,v),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,c.labelDistance),i=g+u*m,b&&!c.visible||(u+=c.percentage/100),n=g+u*m,c.shapeType="arc",c.shapeArgs={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:Math.round(1e3*i)/1e3,end:Math.round(1e3*n)/1e3},(r=(n+i)/2)>1.5*Math.PI?r-=2*Math.PI:r<-Math.PI/2&&(r+=2*Math.PI),c.slicedTranslation={translateX:Math.round(Math.cos(r)*d),translateY:Math.round(Math.sin(r)*d)},a=Math.cos(r)*e[2]/2,o=Math.sin(r)*e[2]/2,c.tooltipPos=[e[0]+.7*a,e[1]+.7*o],c.half=r<-Math.PI/2||r>Math.PI/2?1:0,c.angle=r,t=Math.min(p,c.labelDistance/5),c.labelPos=[e[0]+a+Math.cos(r)*c.labelDistance,e[1]+o+Math.sin(r)*c.labelDistance,e[0]+a+Math.cos(r)*t,e[1]+o+Math.sin(r)*t,e[0]+a,e[1]+o,c.labelDistance<0?"center":c.half?"right":"left",r]},drawGraph:null,drawPoints:function(){var e,t,i,a,o=this,s=o.chart.renderer,l=o.options.shadow;l&&!o.shadowGroup&&(o.shadowGroup=s.g("shadow").add(o.group)),n(o.points,function(n){if(!n.isNull){t=n.graphic,a=n.shapeArgs,e=n.getTranslate();var c=n.shadowGroup;l&&!c&&(c=n.shadowGroup=s.g("shadow").add(o.shadowGroup)),c&&c.attr(e),i=o.pointAttribs(n,n.selected&&"select"),t?t.setRadialReference(o.center).attr(i).animate(r(a,e)):(n.graphic=t=s[n.shapeType](a).setRadialReference(o.center).attr(e).add(o.group),n.visible||t.attr({visibility:"hidden"}),t.attr(i).attr({"stroke-linejoin":"round"}).shadow(l,c)),t.addClass(n.getClassName())}})},searchPoint:o,sortByAngle:function(e,t){e.sort(function(e,i){return void 0!==e.angle&&(i.angle-e.angle)*t})},drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,getCenter:e.CenteredSeriesMixin.getCenter,getSymbol:o},{init:function(){l.prototype.init.apply(this,arguments);var e,i=this;return i.name=s(i.name,"Slice"),t(i,"select",e=function(e){i.slice("select"===e.type)}),t(i,"unselect",e),i},isValid:function(){return e.isNumber(this.y,!0)&&this.y>=0},setVisible:function(e,t){var i=this,r=i.series,o=r.chart,l=r.options.ignoreHiddenPoint;t=s(t,l),e!==i.visible&&(i.visible=i.options.visible=e=void 0===e?!i.visible:e,r.options.data[a(i,r.data)]=i.options,n(["graphic","dataLabel","connector","shadowGroup"],function(t){i[t]&&i[t][e?"show":"hide"](!0)}),i.legendItem&&o.legend.colorizeItem(i,e),e||"hover"!==i.state||i.setState(""),l&&(r.isDirty=!0),t&&o.redraw())},slice:function(e,t,n){var r=this.series;u(n,r.chart),t=s(t,!0),this.sliced=this.options.sliced=e=i(e)?e:!this.sliced,r.options.data[a(this,r.data)]=this.options,this.graphic.animate(this.getTranslate()),this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},getTranslate:function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},haloPath:function(e){var t=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(t.x,t.y,t.r+e,t.r+e,{innerR:this.shapeArgs.r,start:t.start,end:t.end})}})}(s),function(e){var t=e.addEvent,i=e.arrayMax,n=e.defined,r=e.each,a=e.extend,o=e.format,s=e.map,l=e.merge,c=e.noop,u=e.pick,h=e.relativeLength,d=e.Series,p=e.seriesTypes,f=e.stableSort;e.distribute=function(e,t){var i,n,a,o=!0,l=e,c=[],u=0;function h(e,t){return e.target-t.target}for(i=e.length;i--;)u+=e[i].size;if(u>t){for(f(e,function(e,t){return(t.rank||0)-(e.rank||0)}),i=0,u=0;u<=t;)u+=e[i].size,i++;c=e.splice(i-1,e.length)}for(f(e,h),e=s(e,function(e){return{size:e.size,targets:[e.target]}});o;){for(i=e.length;i--;)n=e[i],a=(Math.min.apply(0,n.targets)+Math.max.apply(0,n.targets))/2,n.pos=Math.min(Math.max(0,a-n.size/2),t-n.size);for(i=e.length,o=!1;i--;)i>0&&e[i-1].pos+e[i-1].size>e[i].pos&&(e[i-1].size+=e[i].size,e[i-1].targets=e[i-1].targets.concat(e[i].targets),e[i-1].pos+e[i-1].size>t&&(e[i-1].pos=t-e[i-1].size),e.splice(i,1),o=!0)}i=0,r(e,function(e){var t=0;r(e.targets,function(){l[i].pos=e.pos+t,t+=l[i].size,i++})}),l.push.apply(l,c),f(l,h)},d.prototype.drawDataLabels=function(){var i,a,s,c,h=this,d=h.options,p=d.dataLabels,f=h.points,g=h.hasRendered||0,m=u(p.defer,!!d.animation),y=h.chart.renderer;(p.enabled||h._hasPointLabels)&&(h.dlProcessOptions&&h.dlProcessOptions(p),c=h.plotGroup("dataLabelsGroup","data-labels",m&&!g?"hidden":"visible",p.zIndex||6),m&&(c.attr({opacity:+g}),g||t(h,"afterAnimate",function(){h.visible&&c.show(!0),c[d.animation?"animate":"attr"]({opacity:1},{duration:200})})),a=p,r(f,function(t){var r,f,g,m,v,b=t.dataLabel,C=t.connector,S=!b;(r=u((i=t.dlOptions||t.options&&t.options.dataLabels)&&i.enabled,a.enabled)&&null!==t.y)&&(p=l(a,i),f=t.getLabelConfig(),s=p.format?o(p.format,f):p.formatter.call(f,p),m=p.rotation,(v=p.style).color=u(p.color,v.color,h.color,"#000000"),"contrast"===v.color&&(t.contrastColor=y.getContrast(t.color||h.color),v.color=p.inside||u(t.labelDistance,p.distance)<0||d.stacking?t.contrastColor:"#000000"),d.cursor&&(v.cursor=d.cursor),e.objectEach(g={fill:p.backgroundColor,stroke:p.borderColor,"stroke-width":p.borderWidth,r:p.borderRadius||0,rotation:m,padding:p.padding,zIndex:1},function(e,t){void 0===e&&delete g[t]})),!b||r&&n(s)?r&&n(s)&&(b?g.text=s:(b=t.dataLabel=y[m?"text":"label"](s,0,-9999,p.shape,null,null,p.useHTML,null,"data-label")).addClass("highcharts-data-label-color-"+t.colorIndex+" "+(p.className||"")+(p.useHTML?"highcharts-tracker":"")),b.attr(g),b.css(v).shadow(p.shadow),b.added||b.add(c),h.alignDataLabel(t,b,p,null,S)):(t.dataLabel=b=b.destroy(),C&&(t.connector=C.destroy()))}))},d.prototype.alignDataLabel=function(e,t,i,n,r){var o,s,l,c,h,d=this.chart,p=d.inverted,f=u(e.plotX,-9999),g=u(e.plotY,-9999),m=t.getBBox(),y=i.rotation,v=i.align,b=this.visible&&(e.series.forceDL||d.isInsidePlot(f,Math.round(g),p)||n&&d.isInsidePlot(f,p?n.x+1:n.y+n.height-1,p)),C="justify"===u(i.overflow,"justify");b&&(o=d.renderer.fontMetrics(i.style.fontSize,t).b,n=a({x:p?this.yAxis.len-g:f,y:Math.round(p?this.xAxis.len-f:g),width:0,height:0},n),a(i,{width:m.width,height:m.height}),y?(C=!1,c=d.renderer.rotCorr(o,y),h={x:n.x+i.x+n.width/2+c.x,y:n.y+i.y+{top:0,middle:.5,bottom:1}[i.verticalAlign]*n.height},t[r?"attr":"animate"](h).attr({align:v}),l=(s=(y+720)%360)>180&&s<360,"left"===v?h.y-=l?m.height:0:"center"===v?(h.x-=m.width/2,h.y-=m.height/2):"right"===v&&(h.x-=m.width,h.y-=l?0:m.height)):(t.align(i,null,n),h=t.alignAttr),C?e.isLabelJustified=this.justifyDataLabel(t,i,h,m,n,r):u(i.crop,!0)&&(b=d.isInsidePlot(h.x,h.y)&&d.isInsidePlot(h.x+m.width,h.y+m.height)),i.shape&&!y&&t[r?"attr":"animate"]({anchorX:p?d.plotWidth-e.plotY:e.plotX,anchorY:p?d.plotHeight-e.plotX:e.plotY})),b||(t.attr({y:-9999}),t.placed=!1)},d.prototype.justifyDataLabel=function(e,t,i,n,r,a){var o,s,l=this.chart,c=t.align,u=t.verticalAlign,h=e.box?0:e.padding||0;return(o=i.x+h)<0&&("right"===c?t.align="left":t.x=-o,s=!0),(o=i.x+n.width-h)>l.plotWidth&&("left"===c?t.align="right":t.x=l.plotWidth-o,s=!0),(o=i.y+h)<0&&("bottom"===u?t.verticalAlign="top":t.y=-o,s=!0),(o=i.y+n.height-h)>l.plotHeight&&("top"===u?t.verticalAlign="bottom":t.y=l.plotHeight-o,s=!0),s&&(e.placed=!a,e.align(t,null,r)),s},p.pie&&(p.pie.prototype.drawDataLabels=function(){var t,a,o,s,l,c,h,p,f,g,m=this,y=m.data,v=m.chart,b=m.options.dataLabels,C=u(b.connectorPadding,10),S=u(b.connectorWidth,1),w=v.plotWidth,x=v.plotHeight,T=m.center,k=T[2]/2,E=T[1],A=[[],[]],I=[0,0,0,0];m.visible&&(b.enabled||m._hasPointLabels)&&(r(y,function(e){e.dataLabel&&e.visible&&e.dataLabel.shortened&&(e.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),e.dataLabel.shortened=!1)}),d.prototype.drawDataLabels.apply(m),r(y,function(e){e.dataLabel&&e.visible&&(A[e.half].push(e),e.dataLabel._pos=null)}),r(A,function(i,a){var d,y,S,A,D,B,_=i.length,M=[];if(_)for(m.sortByAngle(i,a-.5),m.maxLabelDistance>0&&(d=Math.max(0,E-k-m.maxLabelDistance),y=Math.min(E+k+m.maxLabelDistance,v.plotHeight),r(i,function(e){e.labelDistance>0&&e.dataLabel&&(e.top=Math.max(0,E-k-e.labelDistance),e.bottom=Math.min(E+k+e.labelDistance,v.plotHeight),B=e.dataLabel.getBBox().height||21,e.positionsIndex=M.push({target:e.labelPos[1]-e.top+B/2,size:B,rank:e.y})-1)}),e.distribute(M,y+B-d)),g=0;g<_;g++)D=(t=i[g]).positionsIndex,l=t.labelPos,o=t.dataLabel,f=!1===t.visible?"hidden":"inherit",S=l[1],M&&n(M[D])?void 0===M[D].pos?f="hidden":(c=M[D].size,p=t.top+M[D].pos):p=S,delete t.positionIndex,h=b.justify?T[0]+(a?-1:1)*(k+t.labelDistance):m.getX(p<t.top+2||p>t.bottom-2?S:p,a,t),o._attr={visibility:f,align:l[6]},o._pos={x:h+b.x+({left:C,right:-C}[l[6]]||0),y:p+b.y-10},l.x=h,l.y=p,u(b.crop,!0)&&(s=o.getBBox().width,A=null,h-s<C?(A=Math.round(s-h+C),I[3]=Math.max(A,I[3])):h+s>w-C&&(A=Math.round(h+s-w+C),I[1]=Math.max(A,I[1])),p-c/2<0?I[0]=Math.max(Math.round(c/2-p),I[0]):p+c/2>x&&(I[2]=Math.max(Math.round(p+c/2-x),I[2])),o.sideOverflow=A)}),(0===i(I)||this.verifyDataLabelOverflow(I))&&(this.placeDataLabels(),S&&r(this.points,function(e){var t;a=e.connector,(o=e.dataLabel)&&o._pos&&e.visible&&e.labelDistance>0?(f=o._attr.visibility,(t=!a)&&(e.connector=a=v.renderer.path().addClass("highcharts-data-label-connector highcharts-color-"+e.colorIndex).add(m.dataLabelsGroup),a.attr({"stroke-width":S,stroke:b.connectorColor||e.color||"#666666"})),a[t?"attr":"animate"]({d:m.connectorPath(e.labelPos)}),a.attr("visibility",f)):a&&(e.connector=a.destroy())})))},p.pie.prototype.connectorPath=function(e){var t=e.x,i=e.y;return u(this.options.dataLabels.softConnector,!0)?["M",t+("left"===e[6]?5:-5),i,"C",t,i,2*e[2]-e[4],2*e[3]-e[5],e[2],e[3],"L",e[4],e[5]]:["M",t+("left"===e[6]?5:-5),i,"L",e[2],e[3],"L",e[4],e[5]]},p.pie.prototype.placeDataLabels=function(){r(this.points,function(e){var t,i=e.dataLabel;i&&e.visible&&((t=i._pos)?(i.sideOverflow&&(i._attr.width=i.getBBox().width-i.sideOverflow,i.css({width:i._attr.width+"px",textOverflow:"ellipsis"}),i.shortened=!0),i.attr(i._attr),i[i.moved?"animate":"attr"](t),i.moved=!0):i&&i.attr({y:-9999}))},this)},p.pie.prototype.alignDataLabel=c,p.pie.prototype.verifyDataLabelOverflow=function(e){var t=this.center,i=this.options,n=i.center,r=i.minSize||80,a=r,o=null!==i.size;return o||(null!==n[0]?a=Math.max(t[2]-Math.max(e[1],e[3]),r):(a=Math.max(t[2]-e[1]-e[3],r),t[0]+=(e[3]-e[1])/2),null!==n[1]?a=Math.max(Math.min(a,t[2]-Math.max(e[0],e[2])),r):(a=Math.max(Math.min(a,t[2]-e[0]-e[2]),r),t[1]+=(e[0]-e[2])/2),a<t[2]?(t[2]=a,t[3]=Math.min(h(i.innerSize||0,a),a),this.translate(t),this.drawDataLabels&&this.drawDataLabels()):o=!0),o}),p.column&&(p.column.prototype.alignDataLabel=function(e,t,i,n,r){var a,o=this.chart.inverted,s=e.series,c=e.dlBox||e.shapeArgs,h=u(e.below,e.plotY>u(this.translatedThreshold,s.yAxis.len)),p=u(i.inside,!!this.options.stacking);c&&((n=l(c)).y<0&&(n.height+=n.y,n.y=0),(a=n.y+n.height-s.yAxis.len)>0&&(n.height-=a),o&&(n={x:s.yAxis.len-n.y-n.height,y:s.xAxis.len-n.x-n.width,width:n.height,height:n.width}),p||(o?(n.x+=h?0:n.width,n.width=0):(n.y+=h?n.height:0,n.height=0))),i.align=u(i.align,!o||p?"center":h?"right":"left"),i.verticalAlign=u(i.verticalAlign,o||p?"middle":h?"top":"bottom"),d.prototype.alignDataLabel.call(this,e,t,i,n,r),e.isLabelJustified&&e.contrastColor&&e.dataLabel.css({color:e.contrastColor})})}(s),function(e){var t=s.Chart,i=s.each,n=s.objectEach,r=s.pick,a=s.addEvent;t.prototype.callbacks.push(function(e){function t(){var t=[];i(e.yAxis||[],function(e){e.options.stackLabels&&!e.options.stackLabels.allowOverlap&&n(e.stacks,function(e){n(e,function(e){t.push(e.label)})})}),i(e.series||[],function(e){var n=e.options.dataLabels;(n.enabled||e._hasPointLabels)&&!n.allowOverlap&&e.visible&&i(e.dataLabelCollections||["dataLabel"],function(n){i(e.points,function(e){e[n]&&(e[n].labelrank=r(e.labelrank,e.shapeArgs&&e.shapeArgs.height),t.push(e[n]))})})}),e.hideOverlappingLabels(t)}t(),a(e,"redraw",t)}),t.prototype.hideOverlappingLabels=function(e){var t,n,r,a,o,s,l,c,u,h,d,p,f,g,m,y=e.length;for(n=0;n<y;n++)(t=e[n])&&(t.oldOpacity=t.opacity,t.newOpacity=1,t.width||(d=t.getBBox(),t.width=d.width,t.height=d.height));for(e.sort(function(e,t){return(t.labelrank||0)-(e.labelrank||0)}),n=0;n<y;n++)for(a=e[n],r=n+1;r<y;++r)o=e[r],a&&o&&a!==o&&a.placed&&o.placed&&0!==a.newOpacity&&0!==o.newOpacity&&(f=(s=a.alignAttr).y+(c=a.parentGroup).translateY,m=(l=o.alignAttr).y+(u=o.parentGroup).translateY,!((g=l.x+u.translateX)>(p=s.x+c.translateX)+(a.width-(h=2*(a.box?0:a.padding||0)))||g+(o.width-h)<p||m>f+(a.height-h)||m+(o.height-h)<f)&&((a.labelrank<o.labelrank?a:o).newOpacity=0));i(e,function(e){var t,i;e&&(e.oldOpacity!==(i=e.newOpacity)&&e.placed&&(i?e.show(!0):t=function(){e.hide()},e.alignAttr.opacity=i,e[e.isOld?"animate":"attr"](e.alignAttr,null,t)),e.isOld=!0)})}}(),function(e){var t,i=e.addEvent,n=e.Chart,r=e.createElement,a=e.css,o=e.defaultOptions,s=e.defaultPlotOptions,l=e.each,c=e.extend,u=e.fireEvent,h=e.hasTouch,d=e.inArray,p=e.isObject,f=e.Legend,g=e.merge,m=e.pick,y=e.Point,v=e.Series,b=e.seriesTypes,C=e.svg;t=e.TrackerMixin={drawTrackerPoint:function(){var e=this,t=e.chart.pointer,i=function(e){var i=t.getPointFromEvent(e);void 0!==i&&(t.isDirectTouch=!0,i.onMouseOver(e))};l(e.points,function(e){e.graphic&&(e.graphic.element.point=e),e.dataLabel&&(e.dataLabel.div?e.dataLabel.div.point=e:e.dataLabel.element.point=e)}),e._hasTracking||(l(e.trackerGroups,function(n){e[n]&&(e[n].addClass("highcharts-tracker").on("mouseover",i).on("mouseout",function(e){t.onTrackerMouseOut(e)}),h&&e[n].on("touchstart",i),e.options.cursor&&e[n].css(a).css({cursor:e.options.cursor}))}),e._hasTracking=!0)},drawTrackerGraph:function(){var e,t=this,i=t.options,n=i.trackByArea,r=[].concat(n?t.areaPath:t.graphPath),a=r.length,o=t.chart,s=o.pointer,c=o.renderer,u=o.options.tooltip.snap,d=t.tracker,p=function(){o.hoverSeries!==t&&t.onMouseOver()},f="rgba(192,192,192,"+(C?1e-4:.002)+")";if(a&&!n)for(e=a+1;e--;)"M"===r[e]&&r.splice(e+1,0,r[e+1]-u,r[e+2],"L"),(e&&"M"===r[e]||e===a)&&r.splice(e,0,"L",r[e-2]+u,r[e-1]);d?d.attr({d:r}):t.graph&&(t.tracker=c.path(r).attr({"stroke-linejoin":"round",visibility:t.visible?"visible":"hidden",stroke:f,fill:n?f:"none","stroke-width":t.graph.strokeWidth()+(n?0:2*u),zIndex:2}).add(t.group),l([t.tracker,t.markerGroup],function(e){e.addClass("highcharts-tracker").on("mouseover",p).on("mouseout",function(e){s.onTrackerMouseOut(e)}),i.cursor&&e.css({cursor:i.cursor}),h&&e.on("touchstart",p)}))}},b.column&&(b.column.prototype.drawTracker=t.drawTrackerPoint),b.pie&&(b.pie.prototype.drawTracker=t.drawTrackerPoint),b.scatter&&(b.scatter.prototype.drawTracker=t.drawTrackerPoint),c(f.prototype,{setItemEvents:function(e,t,i){var n=this,r=n.chart.renderer.boxWrapper,a="highcharts-legend-"+(e.series?"point":"series")+"-active";(i?t:e.legendGroup).on("mouseover",function(){e.setState("hover"),r.addClass(a),t.css(n.options.itemHoverStyle)}).on("mouseout",function(){t.css(g(e.visible?n.itemStyle:n.itemHiddenStyle)),r.removeClass(a),e.setState()}).on("click",function(t){var i=function(){e.setVisible&&e.setVisible()};t={browserEvent:t},e.firePointEvent?e.firePointEvent("legendItemClick",t,i):u(e,"legendItemClick",t,i)})},createCheckboxForItem:function(e){e.checkbox=r("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},this.options.itemCheckboxStyle,this.chart.container),i(e.checkbox,"click",function(t){u(e.series||e,"checkboxClick",{checked:t.target.checked,item:e},function(){e.select()})})}}),o.legend.itemStyle.cursor="pointer",c(n.prototype,{showResetZoom:function(){var e=this,t=o.lang,i=e.options.chart.resetZoomButton,n=i.theme,r=n.states,a="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},n,r&&r.hover).attr({align:i.position.align,title:t.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(i.position,!1,a)},zoomOut:function(){var e=this;u(e,"selection",{resetSelection:!0},function(){e.zoom()})},zoom:function(e){var t,i,n=this.pointer,r=!1;!e||e.resetSelection?(l(this.axes,function(e){t=e.zoom()}),n.initiated=!1):l(e.xAxis.concat(e.yAxis),function(e){var i=e.axis;n[i.isXAxis?"zoomX":"zoomY"]&&(t=i.zoom(e.min,e.max),i.displayBtn&&(r=!0))}),i=this.resetZoomButton,r&&!i?this.showResetZoom():!r&&p(i)&&(this.resetZoomButton=i.destroy()),t&&this.redraw(m(this.options.chart.animation,e&&e.animation,this.pointCount<100))},pan:function(e,t){var i,n=this,r=n.hoverPoints;r&&l(r,function(e){e.setState()}),l("xy"===t?[1,0]:[1],function(t){var r,a=n[t?"xAxis":"yAxis"][0],o=a.horiz,s=e[o?"chartX":"chartY"],l=o?"mouseDownX":"mouseDownY",c=n[l],u=(a.pointRange||0)/2,h=a.getExtremes(),d=a.toValue(c-s,!0)+u,p=a.toValue(c+a.len-s,!0)-u,f=p<d,g=f?p:d,m=f?d:p,y=Math.min(h.dataMin,a.toValue(a.toPixels(h.min)-a.minPixelPadding)),v=Math.max(h.dataMax,a.toValue(a.toPixels(h.max)+a.minPixelPadding));(r=y-g)>0&&(m+=r,g=y),(r=m-v)>0&&(m=v,g-=r),a.series.length&&g!==h.min&&m!==h.max&&(a.setExtremes(g,m,!1,!1,{trigger:"pan"}),i=!0),n[l]=s}),i&&n.redraw(!1),a(n.container,{cursor:"move"})}}),c(y.prototype,{select:function(e,t){var i=this,n=i.series,r=n.chart;e=m(e,!i.selected),i.firePointEvent(e?"select":"unselect",{accumulate:t},function(){i.selected=i.options.selected=e,n.options.data[d(i,n.data)]=i.options,i.setState(e&&"select"),t||l(r.getSelectedPoints(),function(e){e.selected&&e!==i&&(e.selected=e.options.selected=!1,n.options.data[d(e,n.data)]=e.options,e.setState(""),e.firePointEvent("unselect"))})})},onMouseOver:function(e){var t=this.series.chart,i=t.pointer;e=e?i.normalize(e):i.getChartCoordinatesFromPoint(this,t.inverted),i.runPointActions(e,this)},onMouseOut:function(){var e=this.series.chart;this.firePointEvent("mouseOut"),l(e.hoverPoints||[],function(e){e.setState()}),e.hoverPoints=e.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var t=this,n=g(t.series.options.point,t.options).events;t.events=n,e.objectEach(n,function(e,n){i(t,n,e)}),this.hasImportedEvents=!0}},setState:function(e,t){var i,n,r,a=Math.floor(this.plotX),o=this.plotY,l=this.series,u=l.options.states[e]||{},h=s[l.type].marker&&l.options.marker,d=h&&h.states&&h.states[e]||{},p=l.stateMarkerGraphic,f=this.marker||{},g=l.chart,y=l.halo;(e=e||"")===this.state&&!t||this.selected&&"select"!==e||!1===u.enabled||e&&(!1===d.enabled||h&&!1===h.enabled&&!1===d.enabled)||e&&f.states&&f.states[e]&&!1===f.states[e].enabled||(h&&l.markerAttribs&&(n=l.markerAttribs(this,e)),this.graphic?(this.state&&this.graphic.removeClass("highcharts-point-"+this.state),e&&this.graphic.addClass("highcharts-point-"+e),this.graphic.animate(l.pointAttribs(this,e),m(g.options.chart.animation,u.animation)),n&&this.graphic.animate(n,m(g.options.chart.animation,d.animation,h.animation)),p&&p.hide()):(e&&d&&(r=f.symbol||l.symbol,p&&p.currentSymbol!==r&&(p=p.destroy()),p?p[t?"animate":"attr"]({x:n.x,y:n.y}):r&&(l.stateMarkerGraphic=p=g.renderer.symbol(r,n.x,n.y,n.width,n.height).add(l.markerGroup),p.currentSymbol=r),p&&p.attr(l.pointAttribs(this,e))),p&&(p[e&&g.isInsidePlot(a,o,g.inverted)?"show":"hide"](),p.element.point=this)),(i=u.halo)&&i.size?(y||(l.halo=y=g.renderer.path().add((this.graphic||p).parentGroup)),y[t?"animate":"attr"]({d:this.haloPath(i.size)}),y.attr({class:"highcharts-halo highcharts-color-"+m(this.colorIndex,l.colorIndex)}),y.point=this,y.attr(c({fill:this.color||l.color,"fill-opacity":i.opacity,zIndex:-1},i.attributes))):y&&y.point&&y.point.haloPath&&y.animate({d:y.point.haloPath(0)}),this.state=e)},haloPath:function(e){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-e,this.plotY-e,2*e,2*e)}}),c(v.prototype,{onMouseOver:function(){var e=this.chart,t=e.hoverSeries;t&&t!==this&&t.onMouseOut(),this.options.events.mouseOver&&u(this,"mouseOver"),this.setState("hover"),e.hoverSeries=this},onMouseOut:function(){var e=this.options,t=this.chart,i=t.tooltip,n=t.hoverPoint;t.hoverSeries=null,n&&n.onMouseOut(),this&&e.events.mouseOut&&u(this,"mouseOut"),!i||this.stickyTracking||i.shared&&!this.noSharedTooltip||i.hide(),this.setState()},setState:function(e){var t,i=this,n=i.options,r=i.graph,a=n.states,o=n.lineWidth,s=0;if(i.state!==(e=e||"")){if(l([i.group,i.markerGroup,i.dataLabelsGroup],function(t){t&&(i.state&&t.removeClass("highcharts-series-"+i.state),e&&t.addClass("highcharts-series-"+e))}),i.state=e,a[e]&&!1===a[e].enabled)return;if(e&&(o=a[e].lineWidth||o+(a[e].lineWidthPlus||0)),r&&!r.dashstyle)for(r.animate(t={"stroke-width":o},m(i.chart.options.chart.animation,a[e]&&a[e].animation));i["zone-graph-"+s];)i["zone-graph-"+s].attr(t),s+=1}},setVisible:function(e,t){var i,n=this,r=n.chart,a=n.legendItem,o=r.options.chart.ignoreHiddenSeries;n.visible=e=n.options.visible=n.userOptions.visible=void 0===e?!n.visible:e,i=e?"show":"hide",l(["group","dataLabelsGroup","markerGroup","tracker","tt"],function(e){n[e]&&n[e][i]()}),r.hoverSeries!==n&&(r.hoverPoint&&r.hoverPoint.series)!==n||n.onMouseOut(),a&&r.legend.colorizeItem(n,e),n.isDirty=!0,n.options.stacking&&l(r.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),l(n.linkedSeries,function(t){t.setVisible(e,!1)}),o&&(r.isDirtyBox=!0),!1!==t&&r.redraw(),u(n,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(e){this.selected=e=void 0===e?!this.selected:e,this.checkbox&&(this.checkbox.checked=e),u(this,e?"select":"unselect")},drawTracker:t.drawTrackerGraph})}(s),function(e){var t=e.Chart,i=e.each,n=e.inArray,r=e.isArray,a=e.isObject,o=e.pick,s=e.splat;t.prototype.setResponsive=function(t){var n=this.options.responsive,r=[],a=this.currentResponsive;n&&n.rules&&i(n.rules,function(i){void 0===i._id&&(i._id=e.uniqueKey()),this.matchResponsiveRule(i,r,t)},this);var o=e.merge.apply(0,e.map(r,function(t){return e.find(n.rules,function(e){return e._id===t}).chartOptions}));(r=r.toString()||void 0)!==(a&&a.ruleIds)&&(a&&this.update(a.undoOptions,t),r?(this.currentResponsive={ruleIds:r,mergedOptions:o,undoOptions:this.currentOptions(o)},this.update(o,t)):this.currentResponsive=void 0)},t.prototype.matchResponsiveRule=function(e,t){var i=e.condition;(i.callback||function(){return this.chartWidth<=o(i.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=o(i.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=o(i.minWidth,0)&&this.chartHeight>=o(i.minHeight,0)}).call(this)&&t.push(e._id)},t.prototype.currentOptions=function(t){var i={};return function t(i,o,l,c){var u;e.objectEach(i,function(e,h){if(!c&&n(h,["series","xAxis","yAxis"])>-1)for(i[h]=s(i[h]),l[h]=[],u=0;u<i[h].length;u++)o[h][u]&&(l[h][u]={},t(e[u],o[h][u],l[h][u],c+1));else a(e)?(l[h]=r(e)?[]:{},t(e,o[h]||{},l[h],c+1)):l[h]=o[h]||null})}(t,this.options,i,0),i}}(s),function(e){var t=e.relativeLength;e.wrap(e.seriesTypes.column.prototype,"translate",function(i){var n=this.options,r=n.topMargin||0,a=n.bottomMargin||0;i.call(this),e.each(this.points,function(e){var i=e.shapeArgs,o=i.width,s=i.height,l=i.x,c=i.y,u=t(n.borderRadiusTopLeft||0,o),h=t(n.borderRadiusTopRight||0,o),d=t(n.borderRadiusBottomRight||0,o),p=t(n.borderRadiusBottomLeft||0,o);if(u||h||d||p){var f=Math.min(o,s)/2;u>f&&(u=f),h>f&&(h=f),d>f&&(d=f),p>f&&(p=f),e.dlBox=e.shapeArgs,e.shapeType="path",e.shapeArgs={d:["M",l+u,c+r,"L",l+o-h,c+r,"C",l+o-h/2,c,l+o,c+h/2,l+o,c+h,"L",l+o,c+s-d,"C",l+o,c+s-d/2,l+o-d/2,c+s,l+o-d,c+s+a,"L",l+p,c+s+a,"C",l+p/2,c+s,l,c+s-p/2,l,c+s-p,"L",l,c+u,"C",l,c+u/2,l+u/2,c,l+u,c,"Z"]}}})})}(s),s},"object"==typeof e&&e.exports?e.exports=i.document?n():n:i.Highcharts=n()},function(e,t){var i;i=function(e){!function(e){var t=e.defaultOptions,i=e.doc,n=e.Chart,r=e.addEvent,a=e.removeEvent,o=e.fireEvent,s=e.createElement,l=e.discardElement,c=e.css,u=e.merge,h=e.pick,d=e.each,p=e.objectEach,f=e.extend,g=e.isTouchDevice,m=e.win,y=m.navigator.userAgent,v=e.Renderer.prototype.symbols;/Edge\/|Trident\/|MSIE /.test(y),/firefox/i.test(y),f(t.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),t.navigation={buttonOptions:{theme:{},symbolSize:14,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:32,verticalAlign:"top",width:32}},u(!0,t.navigation,{menuStyle:{border:"1px solid #999999",background:"#ffffff",padding:"5px 0"},menuItemStyle:{padding:"0.5em 1em",background:"none",color:"#333333",fontSize:g?"14px":"11px",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#335cad",color:"#ffffff"},buttonOptions:{symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:1,theme:{fill:"#ffffff",stroke:"none",padding:5}}}),t.exporting={type:"image/png",url:"https://export.highcharts.com/",printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:"printChart separator downloadPNG downloadJPEG downloadPDF downloadSVG".split(" ")}},menuItemDefinitions:{printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},e.post=function(e,t,n){var r=s("form",u({method:"post",action:e,enctype:"multipart/form-data"},n),{display:"none"},i.body);p(t,function(e,t){s("input",{type:"hidden",name:t,value:e},null,r)}),r.submit(),l(r)},f(n.prototype,{sanitizeSVG:function(e,t){if(t&&t.exporting&&t.exporting.allowHTML){var i=e.match(/<\/svg>(.*?$)/);i&&i[1]&&(e=e.replace("</svg>",(i='<foreignObject x="0" y="0" width="'+t.chart.width+'" height="'+t.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+i[1]+"</body></foreignObject>")+"</svg>"))}return e=e.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\(("|&quot;)(\S+)("|&quot;)\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\xa0").replace(/&shy;/g,"\xad"),this.ieSanitizeSVG&&(e=this.ieSanitizeSVG(e)),e},getChartHTML:function(){return this.container.innerHTML},getSVG:function(t){var n,r,a,o,c,h=u(this.options,t);return r=s("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},i.body),a=this.renderTo.style.width,c=this.renderTo.style.height,a=h.exporting.sourceWidth||h.chart.width||/px$/.test(a)&&parseInt(a,10)||600,c=h.exporting.sourceHeight||h.chart.height||/px$/.test(c)&&parseInt(c,10)||400,f(h.chart,{animation:!1,renderTo:r,forExport:!0,renderer:"SVGRenderer",width:a,height:c}),h.exporting.enabled=!1,delete h.data,h.series=[],d(this.series,function(e){(o=u(e.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:e.visible})).isInternal||h.series.push(o)}),d(this.axes,function(t){t.userOptions.internalKey||(t.userOptions.internalKey=e.uniqueKey())}),n=new e.Chart(h,this.callback),t&&d(["xAxis","yAxis","series"],function(e){var i={};t[e]&&(i[e]=t[e],n.update(i))}),d(this.axes,function(t){var i=e.find(n.axes,function(e){return e.options.internalKey===t.userOptions.internalKey}),r=(a=t.getExtremes()).userMin,a=a.userMax;!i||void 0===r&&void 0===a||i.setExtremes(r,a,!0,!1)}),a=n.getChartHTML(),a=this.sanitizeSVG(a,h),h=null,n.destroy(),l(r),a},getSVGForExport:function(e,t){var i=this.options.exporting;return this.getSVG(u({chart:{borderRadius:0}},i.chartOptions,t,{exporting:{sourceWidth:e&&e.sourceWidth||i.sourceWidth,sourceHeight:e&&e.sourceHeight||i.sourceHeight}}))},exportChart:function(t,i){i=this.getSVGForExport(t,i),t=u(this.options.exporting,t),e.post(t.url,{filename:t.filename||"chart",type:t.type,width:t.width||0,scale:t.scale,svg:i},t.formAttributes)},print:function(){var e,t,n=this,r=n.container,a=[],s=r.parentNode,l=i.body,c=l.childNodes,u=n.options.exporting.printMaxWidth;n.isPrinting||(n.isPrinting=!0,n.pointer.reset(null,0),o(n,"beforePrint"),(t=u&&n.chartWidth>u)&&(e=[n.options.chart.width,void 0,!1],n.setSize(u,void 0,!1)),d(c,function(e,t){1===e.nodeType&&(a[t]=e.style.display,e.style.display="none")}),l.appendChild(r),m.focus(),m.print(),setTimeout(function(){s.appendChild(r),d(c,function(e,t){1===e.nodeType&&(e.style.display=a[t])}),n.isPrinting=!1,t&&n.setSize.apply(n,e),o(n,"afterPrint")},1e3))},contextMenu:function(t,n,a,o,l,u,h){var p,g,m=this,y=m.options.navigation,v=m.chartWidth,b=m.chartHeight,C="cache-"+t,S=m[C],w=Math.max(l,u);S||(m[C]=S=s("div",{className:t},{position:"absolute",zIndex:1e3,padding:w+"px"},m.container),p=s("div",{className:"highcharts-menu"},null,S),c(p,f({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},y.menuStyle)),g=function(){c(S,{display:"none"}),h&&h.setState(0),m.openMenu=!1},m.exportEvents.push(r(S,"mouseleave",function(){S.hideTimer=setTimeout(g,500)}),r(S,"mouseenter",function(){clearTimeout(S.hideTimer)}),r(i,"mouseup",function(e){m.pointer.inClass(e.target,t)||g()})),d(n,function(t){var i;"string"==typeof t&&(t=m.options.exporting.menuItemDefinitions[t]),e.isObject(t,!0)&&(t.separator?i=s("hr",null,null,p):((i=s("div",{className:"highcharts-menu-item",onclick:function(e){e&&e.stopPropagation(),g(),t.onclick&&t.onclick.apply(m,arguments)},innerHTML:t.text||m.options.lang[t.textKey]},null,p)).onmouseover=function(){c(this,y.menuItemHoverStyle)},i.onmouseout=function(){c(this,y.menuItemStyle)},c(i,f({cursor:"pointer"},y.menuItemStyle))),m.exportDivElements.push(i))}),m.exportDivElements.push(p,S),m.exportMenuWidth=S.offsetWidth,m.exportMenuHeight=S.offsetHeight),n={display:"block"},a+m.exportMenuWidth>v?n.right=v-a-l-w+"px":n.left=a-w+"px",o+u+m.exportMenuHeight>b&&"top"!==h.alignOptions.verticalAlign?n.bottom=b-o-w+"px":n.top=o+u-w+"px",c(S,n),m.openMenu=!0},addButton:function(e){var t,i,n=this,r=n.renderer,a=u(n.options.navigation.buttonOptions,e),o=a.onclick,s=a.menuItems,l=a.symbolSize||12;if(n.btnCount||(n.btnCount=0),n.exportDivElements||(n.exportDivElements=[],n.exportSVGElements=[]),!1!==a.enabled){var c,d=a.theme,p=(g=d.states)&&g.hover,g=g&&g.select;delete d.states,o?c=function(e){e.stopPropagation(),o.call(n,e)}:s&&(c=function(){n.contextMenu(i.menuClassName,s,i.translateX,i.translateY,i.width,i.height,i),i.setState(2)}),a.text&&a.symbol?d.paddingLeft=h(d.paddingLeft,25):a.text||f(d,{width:a.width,height:a.height,padding:0}),(i=r.button(a.text,0,0,c,d,p,g).addClass(e.className).attr({"stroke-linecap":"round",title:n.options.lang[a._titleKey],zIndex:3})).menuClassName=e.menuClassName||"highcharts-menu-"+n.btnCount++,a.symbol&&(t=r.symbol(a.symbol,a.symbolX-l/2,a.symbolY-l/2,l,l).addClass("highcharts-button-symbol").attr({zIndex:1}).add(i)).attr({stroke:a.symbolStroke,fill:a.symbolFill,"stroke-width":a.symbolStrokeWidth||1}),i.add().align(f(a,{width:i.width,x:h(a.x,n.buttonOffset)}),!0,"spacingBox"),n.buttonOffset+=(i.width+a.buttonSpacing)*("right"===a.align?-1:1),n.exportSVGElements.push(i,t)}},destroyExport:function(e){var t,i=e?e.target:this,n=i.exportDivElements,r=i.exportEvents;(e=i.exportSVGElements)&&(d(e,function(e,n){e&&(e.onclick=e.ontouchstart=null,i[t="cache-"+e.menuClassName]&&delete i[t],i.exportSVGElements[n]=e.destroy())}),e.length=0),n&&(d(n,function(e,t){clearTimeout(e.hideTimer),a(e,"mouseleave"),i.exportDivElements[t]=e.onmouseout=e.onmouseover=e.ontouchstart=e.onclick=null,l(e)}),n.length=0),r&&(d(r,function(e){e()}),r.length=0)}}),v.menu=function(e,t,i,n){return["M",e,t+2.5,"L",e+i,t+2.5,"M",e,t+n/2+.5,"L",e+i,t+n/2+.5,"M",e,t+n-1.5,"L",e+i,t+n-1.5]},n.prototype.renderExporting=function(){var e=this,t=e.options.exporting,i=t.buttons,n=e.isDirtyExporting||!e.exportSVGElements;e.buttonOffset=0,e.isDirtyExporting&&e.destroyExport(),n&&!1!==t.enabled&&(e.exportEvents=[],p(i,function(t){e.addButton(t)}),e.isDirtyExporting=!1),r(e,"destroy",e.destroyExport)},n.prototype.callbacks.push(function(e){e.renderExporting(),r(e,"redraw",e.renderExporting),d(["exporting","navigation"],function(t){e[t]={update:function(i,n){e.isDirtyExporting=!0,u(!0,e.options[t],i),h(n,!0)&&e.redraw()}}})})}(e)},"object"==typeof e&&e.exports?e.exports=i:i(Highcharts)},function(e,t){!function(e){function t(e){return"function"==typeof e}function i(t,i){this.$element=e(t),this.settings=e.extend({},r,i),this.init()}var n="searchable",r={selector:"tbody tr",childSelector:"td",searchField:"#search",striped:!1,oddRow:{},evenRow:{},hide:function(e){e.hide()},show:function(e){e.show()},searchType:"default",onSearchActive:!1,onSearchEmpty:!1,onSearchFocus:!1,onSearchBlur:!1,clearOnLoad:!1},a=!1,o=!1,s=!1,l=!1;i.prototype={init:function(){this.$searchElems=e(this.settings.selector,this.$element),this.$search=e(this.settings.searchField),this.matcherFunc=this.getMatcherFunction(this.settings.searchType),this.determineCallbacks(),this.bindEvents(),this.updateStriping()},determineCallbacks:function(){a=t(this.settings.onSearchActive),o=t(this.settings.onSearchEmpty),s=t(this.settings.onSearchFocus),l=t(this.settings.onSearchBlur)},bindEvents:function(){var t=this;this.$search.on("change keyup",function(){t.search(e(this).val()),t.updateStriping()}),s&&this.$search.on("focus",this.settings.onSearchFocus),l&&this.$search.on("blur",this.settings.onSearchBlur),!0===this.settings.clearOnLoad&&(this.$search.val(""),this.$search.trigger("change")),""!==this.$search.val()&&this.$search.trigger("change")},updateStriping:function(){var t=this,i=["oddRow","evenRow"];this.settings.striped&&e(this.settings.selector+":visible",this.$element).each(function(n,r){e(r).css(t.settings[i[n%2]])})},search:function(t){var i,n,r,s,l,c,u,h;if(0===e.trim(t).length)return this.$searchElems.css("display",""),this.updateStriping(),void(o&&this.settings.onSearchEmpty(this.$element));for(a&&this.settings.onSearchActive(this.$element,t),n=this.$searchElems.length,i=this.matcherFunc(t),u=0;n>u;u++){for(s=(r=(c=e(this.$searchElems[u])).find(this.settings.childSelector)).length,l=!0,h=0;s>h;h++)if(i(e(r[h]).text())){l=!1;break}!0===l?this.settings.hide(c):this.settings.show(c)}},getMatcherFunction:function(e){return"fuzzy"===e?this.getFuzzyMatcher:"strict"===e?this.getStrictMatcher:this.getDefaultMatcher},getFuzzyMatcher:function(e){var t,i=e.split("").reduce(function(e,t){return e+"[^"+t+"]*"+t});return t=new RegExp(i,"gi"),function(e){return t.test(e)}},getStrictMatcher:function(t){return t=e.trim(t),function(e){return-1!==e.indexOf(t)}},getDefaultMatcher:function(t){return t=e.trim(t).toLowerCase(),function(e){return-1!==e.toLowerCase().indexOf(t)}}},e.fn[n]=function(t){return this.each(function(){e.data(this,"plugin_"+n)||e.data(this,"plugin_"+n,new i(this,t))})}}(jQuery,window,document)},function(e,t){},function(e,t){var i,n,r;!function(e,t,i,n){function r(t,i){this.settings=null,this.options=e.extend({},r.Defaults,i),this.$element=e(t),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},e.each(["onResize","onThrottledResize"],e.proxy(function(t,i){this._handlers[i]=e.proxy(this[i],this)},this)),e.each(r.Plugins,e.proxy(function(e,t){this._plugins[e.charAt(0).toLowerCase()+e.slice(1)]=new t(this)},this)),e.each(r.Workers,e.proxy(function(t,i){this._pipe.push({filter:i.filter,run:e.proxy(i.run,this)})},this)),this.setup(),this.initialize()}r.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:t,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},r.Width={Default:"default",Inner:"inner",Outer:"outer"},r.Type={Event:"event",State:"state"},r.Plugins={},r.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(e){e.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(e){var t=this.settings.margin||"",i=this.settings.rtl,n={width:"auto","margin-left":i?t:"","margin-right":i?"":t};!!this.settings.autoWidth&&this.$stage.children().css(n),e.css=n}},{filter:["width","items","settings"],run:function(e){var t=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,n=this._items.length,r=!this.settings.autoWidth,a=[];for(e.items={merge:!1,width:t};n--;)i=this._mergers[n],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,e.items.merge=i>1||e.items.merge,a[n]=r?t*i:this._items[n].width();this._widths=a}},{filter:["items","settings"],run:function(){var t=[],i=this._items,n=this.settings,r=Math.max(2*n.items,4),a=2*Math.ceil(i.length/2),o=n.loop&&i.length?n.rewind?r:Math.max(r,a):0,s="",l="";for(o/=2;o>0;)t.push(this.normalize(t.length/2,!0)),s+=i[t[t.length-1]][0].outerHTML,t.push(this.normalize(i.length-1-(t.length-1)/2,!0)),l=i[t[t.length-1]][0].outerHTML+l,o-=1;this._clones=t,e(s).addClass("cloned").appendTo(this.$stage),e(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var e=this.settings.rtl?1:-1,t=this._clones.length+this._items.length,i=-1,n=0,r=0,a=[];++i<t;)n=a[i-1]||0,r=this._widths[this.relative(i)]+this.settings.margin,a.push(n+r*e);this._coordinates=a}},{filter:["width","items","settings"],run:function(){var e=this.settings.stagePadding,t=this._coordinates,i={width:Math.ceil(Math.abs(t[t.length-1]))+2*e,"padding-left":e||"","padding-right":e||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(e){var t=this._coordinates.length,i=!this.settings.autoWidth,n=this.$stage.children();if(i&&e.items.merge)for(;t--;)e.css.width=this._widths[this.relative(t)],n.eq(t).css(e.css);else i&&(e.css.width=e.items.width,n.css(e.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(e){e.current=e.current?this.$stage.children().index(e.current):0,e.current=Math.max(this.minimum(),Math.min(this.maximum(),e.current)),this.reset(e.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var e,t,i,n,r=this.settings.rtl?1:-1,a=2*this.settings.stagePadding,o=this.coordinates(this.current())+a,s=o+this.width()*r,l=[];for(i=0,n=this._coordinates.length;i<n;i++)e=this._coordinates[i-1]||0,t=Math.abs(this._coordinates[i])+a*r,(this.op(e,"<=",o)&&this.op(e,">",s)||this.op(t,"<",o)&&this.op(t,">",s))&&l.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],r.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=e("<"+this.settings.stageElement+">",{class:this.settings.stageClass}).wrap(e("<div/>",{class:this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},r.prototype.initializeItems=function(){var t=this.$element.find(".owl-item");if(t.length)return this._items=t.get().map(function(t){return e(t)}),this._mergers=this._items.map(function(){return 1}),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},r.prototype.initialize=function(){var e,t;this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")&&(e=this.$element.find("img"),t=this.$element.children(this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:n).width(),e.length&&t<=0&&this.preloadAutoWidthImages(e)),this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},r.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},r.prototype.setup=function(){var t=this.viewport(),i=this.options.responsive,n=-1,r=null;i?(e.each(i,function(e){e<=t&&e>n&&(n=Number(e))}),"function"==typeof(r=e.extend({},this.options,i[n])).stagePadding&&(r.stagePadding=r.stagePadding()),delete r.responsive,r.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+n))):r=e.extend({},this.options),this.trigger("change",{property:{name:"settings",value:r}}),this._breakpoint=n,this.settings=r,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},r.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},r.prototype.prepare=function(t){var i=this.trigger("prepare",{content:t});return i.data||(i.data=e("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(t)),this.trigger("prepared",{content:i.data}),i.data},r.prototype.update=function(){for(var t=0,i=this._pipe.length,n=e.proxy(function(e){return this[e]},this._invalidated),r={};t<i;)(this._invalidated.all||e.grep(this._pipe[t].filter,n).length>0)&&this._pipe[t].run(r),t++;this._invalidated={},!this.is("valid")&&this.enter("valid")},r.prototype.width=function(e){switch(e=e||r.Width.Default){case r.Width.Inner:case r.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},r.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},r.prototype.onThrottledResize=function(){t.clearTimeout(this.resizeTimer),this.resizeTimer=t.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},r.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},r.prototype.registerEventHandlers=function(){e.support.transition&&this.$stage.on(e.support.transition.end+".owl.core",e.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(t,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",e.proxy(this.onDragEnd,this)))},r.prototype.onDragStart=function(t){var n=null;3!==t.which&&(e.support.transform?n={x:(n=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===n.length?12:4],y:n[16===n.length?13:5]}:(n=this.$stage.position(),n={x:this.settings.rtl?n.left+this.$stage.width()-this.width()+this.settings.margin:n.left,y:n.top}),this.is("animating")&&(e.support.transform?this.animate(n.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===t.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=e(t.target),this._drag.stage.start=n,this._drag.stage.current=n,this._drag.pointer=this.pointer(t),e(i).on("mouseup.owl.core touchend.owl.core",e.proxy(this.onDragEnd,this)),e(i).one("mousemove.owl.core touchmove.owl.core",e.proxy(function(t){var n=this.difference(this._drag.pointer,this.pointer(t));e(i).on("mousemove.owl.core touchmove.owl.core",e.proxy(this.onDragMove,this)),Math.abs(n.x)<Math.abs(n.y)&&this.is("valid")||(t.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},r.prototype.onDragMove=function(e){var t=null,i=null,n=null,r=this.difference(this._drag.pointer,this.pointer(e)),a=this.difference(this._drag.stage.start,r);this.is("dragging")&&(e.preventDefault(),this.settings.loop?(t=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-t,a.x=((a.x-t)%i+i)%i+t):(t=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),i=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),n=this.settings.pullDrag?-1*r.x/5:0,a.x=Math.max(Math.min(a.x,t+n),i+n)),this._drag.stage.current=a,this.animate(a.x))},r.prototype.onDragEnd=function(t){var n=this.difference(this._drag.pointer,this.pointer(t)),r=this._drag.stage.current,a=n.x>0^this.settings.rtl?"left":"right";e(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==n.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(r.x,0!==n.x?a:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=a,(Math.abs(n.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},r.prototype.closest=function(t,i){var r=-1,a=this.width(),o=this.coordinates();return this.settings.freeDrag||e.each(o,e.proxy(function(e,s){return"left"===i&&t>s-30&&t<s+30?r=e:"right"===i&&t>s-a-30&&t<s-a+30?r=e+1:this.op(t,"<",s)&&this.op(t,">",o[e+1]!==n?o[e+1]:s-a)&&(r="left"===i?e+1:e),-1===r},this)),this.settings.loop||(this.op(t,">",o[this.minimum()])?r=t=this.minimum():this.op(t,"<",o[this.maximum()])&&(r=t=this.maximum())),r},r.prototype.animate=function(t){var i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this.trigger("translate")),e.support.transform3d&&e.support.transition?this.$stage.css({transform:"translate3d("+t+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):i?this.$stage.animate({left:t+"px"},this.speed(),this.settings.fallbackEasing,e.proxy(this.onTransitionEnd,this)):this.$stage.css({left:t+"px"})},r.prototype.is=function(e){return this._states.current[e]&&this._states.current[e]>0},r.prototype.current=function(e){if(e===n)return this._current;if(0===this._items.length)return n;if(e=this.normalize(e),this._current!==e){var t=this.trigger("change",{property:{name:"position",value:e}});t.data!==n&&(e=this.normalize(t.data)),this._current=e,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},r.prototype.invalidate=function(t){return"string"===e.type(t)&&(this._invalidated[t]=!0,this.is("valid")&&this.leave("valid")),e.map(this._invalidated,function(e,t){return t})},r.prototype.reset=function(e){(e=this.normalize(e))!==n&&(this._speed=0,this._current=e,this.suppress(["translate","translated"]),this.animate(this.coordinates(e)),this.release(["translate","translated"]))},r.prototype.normalize=function(e,t){var i=this._items.length,r=t?0:this._clones.length;return!this.isNumeric(e)||i<1?e=n:(e<0||e>=i+r)&&(e=((e-r/2)%i+i)%i+r/2),e},r.prototype.relative=function(e){return this.normalize(e-=this._clones.length/2,!0)},r.prototype.maximum=function(e){var t,i,n,r=this.settings,a=this._coordinates.length;if(r.loop)a=this._clones.length/2+this._items.length-1;else if(r.autoWidth||r.merge){if(t=this._items.length)for(i=this._items[--t].width(),n=this.$element.width();t--&&!((i+=this._items[t].width()+this.settings.margin)>n););a=t+1}else a=r.center?this._items.length-1:this._items.length-r.items;return e&&(a-=this._clones.length/2),Math.max(a,0)},r.prototype.minimum=function(e){return e?0:this._clones.length/2},r.prototype.items=function(e){return e===n?this._items.slice():(e=this.normalize(e,!0),this._items[e])},r.prototype.mergers=function(e){return e===n?this._mergers.slice():(e=this.normalize(e,!0),this._mergers[e])},r.prototype.clones=function(t){var i=this._clones.length/2,r=i+this._items.length,a=function(e){return e%2==0?r+e/2:i-(e+1)/2};return e.map(this._clones,t===n?function(e,t){return a(t)}:function(e,i){return e===t?a(i):null})},r.prototype.speed=function(e){return e!==n&&(this._speed=e),this._speed},r.prototype.coordinates=function(t){var i,r=1,a=t-1;return t===n?e.map(this._coordinates,e.proxy(function(e,t){return this.coordinates(t)},this)):(this.settings.center?(this.settings.rtl&&(r=-1,a=t+1),i=this._coordinates[t],i+=(this.width()-i+(this._coordinates[a]||0))/2*r):i=this._coordinates[a]||0,i=Math.ceil(i))},r.prototype.duration=function(e,t,i){return 0===i?0:Math.min(Math.max(Math.abs(t-e),1),6)*Math.abs(i||this.settings.smartSpeed)},r.prototype.to=function(e,t){var i=this.current(),n=null,r=e-this.relative(i),a=(r>0)-(r<0),o=this._items.length,s=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(r)>o/2&&(r+=-1*a*o),(n=(((e=i+r)-s)%o+o)%o+s)!==e&&n-r<=l&&n-r>0&&(e=n,this.reset(i=n-r))):e=this.settings.rewind?(e%(l+=1)+l)%l:Math.max(s,Math.min(l,e)),this.speed(this.duration(i,e,t)),this.current(e),this.isVisible()&&this.update()},r.prototype.next=function(e){e=e||!1,this.to(this.relative(this.current())+1,e)},r.prototype.prev=function(e){e=e||!1,this.to(this.relative(this.current())-1,e)},r.prototype.onTransitionEnd=function(e){if(e!==n&&(e.stopPropagation(),(e.target||e.srcElement||e.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},r.prototype.viewport=function(){var n;return this.options.responsiveBaseElement!==t?n=e(this.options.responsiveBaseElement).width():t.innerWidth?n=t.innerWidth:i.documentElement&&i.documentElement.clientWidth?n=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),n},r.prototype.replace=function(t){this.$stage.empty(),this._items=[],t&&(t=t instanceof jQuery?t:e(t)),this.settings.nestedItemSelector&&(t=t.find("."+this.settings.nestedItemSelector)),t.filter(function(){return 1===this.nodeType}).each(e.proxy(function(e,t){t=this.prepare(t),this.$stage.append(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},r.prototype.add=function(t,i){var r=this.relative(this._current);i=i===n?this._items.length:this.normalize(i,!0),t=t instanceof jQuery?t:e(t),this.trigger("add",{content:t,position:i}),t=this.prepare(t),0===this._items.length||i===this._items.length?(0===this._items.length&&this.$stage.append(t),0!==this._items.length&&this._items[i-1].after(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[i].before(t),this._items.splice(i,0,t),this._mergers.splice(i,0,1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[r]&&this.reset(this._items[r].index()),this.invalidate("items"),this.trigger("added",{content:t,position:i})},r.prototype.remove=function(e){(e=this.normalize(e,!0))!==n&&(this.trigger("remove",{content:this._items[e],position:e}),this._items[e].remove(),this._items.splice(e,1),this._mergers.splice(e,1),this.invalidate("items"),this.trigger("removed",{content:null,position:e}))},r.prototype.preloadAutoWidthImages=function(t){t.each(e.proxy(function(t,i){this.enter("pre-loading"),i=e(i),e(new Image).one("load",e.proxy(function(e){i.attr("src",e.target.src),i.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",i.attr("src")||i.attr("data-src")||i.attr("data-src-retina"))},this))},r.prototype.destroy=function(){for(var n in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),e(i).off(".owl.core"),!1!==this.settings.responsive&&(t.clearTimeout(this.resizeTimer),this.off(t,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[n].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},r.prototype.op=function(e,t,i){var n=this.settings.rtl;switch(t){case"<":return n?e>i:e<i;case">":return n?e<i:e>i;case">=":return n?e<=i:e>=i;case"<=":return n?e>=i:e<=i}},r.prototype.on=function(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},r.prototype.off=function(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)},r.prototype.trigger=function(t,i,n,a,o){var s={item:{count:this._items.length,index:this.current()}},l=e.camelCase(e.grep(["on",t,n],function(e){return e}).join("-").toLowerCase()),c=e.Event([t,"owl",n||"carousel"].join(".").toLowerCase(),e.extend({relatedTarget:this},s,i));return this._supress[t]||(e.each(this._plugins,function(e,t){t.onTrigger&&t.onTrigger(c)}),this.register({type:r.Type.Event,name:t}),this.$element.trigger(c),this.settings&&"function"==typeof this.settings[l]&&this.settings[l].call(this,c)),c},r.prototype.enter=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy(function(e,t){this._states.current[t]===n&&(this._states.current[t]=0),this._states.current[t]++},this))},r.prototype.leave=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy(function(e,t){this._states.current[t]--},this))},r.prototype.register=function(t){if(t.type===r.Type.Event){if(e.event.special[t.name]||(e.event.special[t.name]={}),!e.event.special[t.name].owl){var i=e.event.special[t.name]._default;e.event.special[t.name]._default=function(e){return!i||!i.apply||e.namespace&&-1!==e.namespace.indexOf("owl")?e.namespace&&e.namespace.indexOf("owl")>-1:i.apply(this,arguments)},e.event.special[t.name].owl=!0}}else t.type===r.Type.State&&(this._states.tags[t.name]=this._states.tags[t.name]?this._states.tags[t.name].concat(t.tags):t.tags,this._states.tags[t.name]=e.grep(this._states.tags[t.name],e.proxy(function(i,n){return e.inArray(i,this._states.tags[t.name])===n},this)))},r.prototype.suppress=function(t){e.each(t,e.proxy(function(e,t){this._supress[t]=!0},this))},r.prototype.release=function(t){e.each(t,e.proxy(function(e,t){delete this._supress[t]},this))},r.prototype.pointer=function(e){var i={x:null,y:null};return(e=(e=e.originalEvent||e||t.event).touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i},r.prototype.isNumeric=function(e){return!isNaN(parseFloat(e))},r.prototype.difference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},e.fn.owlCarousel=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e(this),a=n.data("owl.carousel");a||(a=new r(this,"object"==typeof t&&t),n.data("owl.carousel",a),e.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(t,i){a.register({type:r.Type.Event,name:i}),a.$element.on(i+".owl.carousel.core",e.proxy(function(e){e.namespace&&e.relatedTarget!==this&&(this.suppress([i]),a[i].apply(this,[].slice.call(arguments,1)),this.release([i]))},a))})),"string"==typeof t&&"_"!==t.charAt(0)&&a[t].apply(a,i)})},e.fn.owlCarousel.Constructor=r}(window.Zepto||window.jQuery,window,document),i=window.Zepto||window.jQuery,n=window,document,(r=function(e){this._core=e,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":i.proxy(function(e){e.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=i.extend({},r.Defaults,this._core.options),this._core.$element.on(this._handlers)}).Defaults={autoRefresh:!0,autoRefreshInterval:500},r.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=n.setInterval(i.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},r.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},r.prototype.destroy=function(){var e,t;for(e in n.clearInterval(this._interval),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},i.fn.owlCarousel.Constructor.Plugins.AutoRefresh=r,function(e,t,i,n){var r=function(t){this._core=t,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":e.proxy(function(t){if(t.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(t.property&&"position"==t.property.name||"initialized"==t.type)){var i=this._core.settings,n=i.center&&Math.ceil(i.items/2)||i.items,r=i.center&&-1*n||0,a=(t.property&&void 0!==t.property.value?t.property.value:this._core.current())+r,o=this._core.clones().length,s=e.proxy(function(e,t){this.load(t)},this);for(i.lazyLoadEager>0&&(n+=i.lazyLoadEager,i.loop&&(a-=i.lazyLoadEager,n++));r++<n;)this.load(o/2+this._core.relative(a)),o&&e.each(this._core.clones(this._core.relative(a)),s),a++}},this)},this._core.options=e.extend({},r.Defaults,this._core.options),this._core.$element.on(this._handlers)};r.Defaults={lazyLoad:!1,lazyLoadEager:0},r.prototype.load=function(i){var n=this._core.$stage.children().eq(i),r=n&&n.find(".owl-lazy");!r||e.inArray(n.get(0),this._loaded)>-1||(r.each(e.proxy(function(i,n){var r,a=e(n),o=t.devicePixelRatio>1&&a.attr("data-src-retina")||a.attr("data-src")||a.attr("data-srcset");this._core.trigger("load",{element:a,url:o},"lazy"),a.is("img")?a.one("load.owl.lazy",e.proxy(function(){a.css("opacity",1),this._core.trigger("loaded",{element:a,url:o},"lazy")},this)).attr("src",o):a.is("source")?a.one("load.owl.lazy",e.proxy(function(){this._core.trigger("loaded",{element:a,url:o},"lazy")},this)).attr("srcset",o):((r=new Image).onload=e.proxy(function(){a.css({"background-image":'url("'+o+'")',opacity:"1"}),this._core.trigger("loaded",{element:a,url:o},"lazy")},this),r.src=o)},this)),this._loaded.push(n.get(0)))},r.prototype.destroy=function(){var e,t;for(e in this.handlers)this._core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Lazy=r}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var r=function(i){this._core=i,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoHeight&&"position"===e.property.name&&this.update()},this),"loaded.owl.lazy":e.proxy(function(e){e.namespace&&this._core.settings.autoHeight&&e.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=e.extend({},r.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var n=this;e(t).on("load",function(){n._core.settings.autoHeight&&n.update()}),e(t).resize(function(){n._core.settings.autoHeight&&(null!=n._intervalId&&clearTimeout(n._intervalId),n._intervalId=setTimeout(function(){n.update()},250))})};r.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},r.prototype.update=function(){var t=this._core._current,i=t+this._core.settings.items,n=this._core.settings.lazyLoad,r=this._core.$stage.children().toArray().slice(t,i),a=[],o=0;e.each(r,function(t,i){a.push(e(i).height())}),(o=Math.max.apply(null,a))<=1&&n&&this._previousHeight&&(o=this._previousHeight),this._previousHeight=o,this._core.$stage.parent().height(o).addClass(this._core.settings.autoHeightClass)},r.prototype.destroy=function(){var e,t;for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoHeight=r}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var r=function(t){this._core=t,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":e.proxy(function(e){e.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.video&&this.isInFullScreen()&&e.preventDefault()},this),"refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&"position"===e.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":e.proxy(function(t){if(t.namespace){var i=e(t.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,e(t.content)))}},this)},this._core.options=e.extend({},r.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",e.proxy(function(e){this.play(e)},this))};r.Defaults={video:!1,videoHeight:!1,videoWidth:!1},r.prototype.fetch=function(e,t){var i=e.attr("data-vimeo-id")?"vimeo":e.attr("data-vzaar-id")?"vzaar":"youtube",n=e.attr("data-vimeo-id")||e.attr("data-youtube-id")||e.attr("data-vzaar-id"),r=e.attr("data-width")||this._core.settings.videoWidth,a=e.attr("data-height")||this._core.settings.videoHeight,o=e.attr("href");if(!o)throw new Error("Missing video URL.");if((n=o.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)i="youtube";else if(n[3].indexOf("vimeo")>-1)i="vimeo";else{if(!(n[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");i="vzaar"}this._videos[o]={type:i,id:n=n[6],width:r,height:a},t.attr("data-video",o),this.thumbnail(e,this._videos[o])},r.prototype.thumbnail=function(t,i){var n,r,a=i.width&&i.height?"width:"+i.width+"px;height:"+i.height+"px;":"",o=t.find("img"),s="src",l="",c=this._core.settings,u=function(i){r='<div class="owl-video-play-icon"></div>',n=e("<div/>",c.lazyLoad?{class:"owl-video-tn "+l,srcType:i}:{class:"owl-video-tn",style:"opacity:1;background-image:url("+i+")"}),t.after(n),t.after(r)};if(t.wrap(e("<div/>",{class:"owl-video-wrapper",style:a})),this._core.settings.lazyLoad&&(s="data-src",l="owl-lazy"),o.length)return u(o.attr(s)),o.remove(),!1;"youtube"===i.type?u("//img.youtube.com/vi/"+i.id+"/hqdefault.jpg"):"vimeo"===i.type?e.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){u(e[0].thumbnail_large)}}):"vzaar"===i.type&&e.ajax({type:"GET",url:"//vzaar.com/api/videos/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){u(e.framegrab_url)}})},r.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},r.prototype.play=function(t){var i,n=e(t.target).closest("."+this._core.settings.itemClass),r=this._videos[n.attr("data-video")],a=r.width||"100%",o=r.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),n=this._core.items(this._core.relative(n.index())),this._core.reset(n.index()),(i=e('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>')).attr("height",o),i.attr("width",a),"youtube"===r.type?i.attr("src","//www.youtube.com/embed/"+r.id+"?autoplay=1&rel=0&v="+r.id):"vimeo"===r.type?i.attr("src","//player.vimeo.com/video/"+r.id+"?autoplay=1"):"vzaar"===r.type&&i.attr("src","//view.vzaar.com/"+r.id+"/player?autoplay=true"),e(i).wrap('<div class="owl-video-frame" />').insertAfter(n.find(".owl-video")),this._playing=n.addClass("owl-video-playing"))},r.prototype.isInFullScreen=function(){var t=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return t&&e(t).parent().hasClass("owl-video-frame")},r.prototype.destroy=function(){var e,t;for(e in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Video=r}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var r=function(t){this.core=t,this.core.options=e.extend({},r.Defaults,this.core.options),this.swapping=!0,this.previous=n,this.next=n,this.handlers={"change.owl.carousel":e.proxy(function(e){e.namespace&&"position"==e.property.name&&(this.previous=this.core.current(),this.next=e.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":e.proxy(function(e){e.namespace&&(this.swapping="translated"==e.type)},this),"translate.owl.carousel":e.proxy(function(e){e.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};r.Defaults={animateOut:!1,animateIn:!1},r.prototype.swap=function(){if(1===this.core.settings.items&&e.support.animation&&e.support.transition){this.core.speed(0);var t,i=e.proxy(this.clear,this),n=this.core.$stage.children().eq(this.previous),r=this.core.$stage.children().eq(this.next),a=this.core.settings.animateIn,o=this.core.settings.animateOut;this.core.current()!==this.previous&&(o&&(t=this.core.coordinates(this.previous)-this.core.coordinates(this.next),n.one(e.support.animation.end,i).css({left:t+"px"}).addClass("animated owl-animated-out").addClass(o)),a&&r.one(e.support.animation.end,i).addClass("animated owl-animated-in").addClass(a))}},r.prototype.clear=function(t){e(t.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},r.prototype.destroy=function(){var e,t;for(e in this.handlers)this.core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Animate=r}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var r=function(t){this._core=t,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":e.proxy(function(e){e.namespace&&"settings"===e.property.name?this._core.settings.autoplay?this.play():this.stop():e.namespace&&"position"===e.property.name&&this._paused&&(this._time=0)},this),"initialized.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":e.proxy(function(e,t,i){e.namespace&&this.play(t,i)},this),"stop.owl.autoplay":e.proxy(function(e){e.namespace&&this.stop()},this),"mouseover.owl.autoplay":e.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":e.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":e.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":e.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=e.extend({},r.Defaults,this._core.options)};r.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},r.prototype._next=function(n){this._call=t.setTimeout(e.proxy(this._next,this,n),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||i.hidden||this._core.next(n||this._core.settings.autoplaySpeed)},r.prototype.read=function(){return(new Date).getTime()-this._time},r.prototype.play=function(i,n){var r;this._core.is("rotating")||this._core.enter("rotating"),i=i||this._core.settings.autoplayTimeout,r=Math.min(this._time%(this._timeout||i),i),this._paused?(this._time=this.read(),this._paused=!1):t.clearTimeout(this._call),this._time+=this.read()%i-r,this._timeout=i,this._call=t.setTimeout(e.proxy(this._next,this,n),i-r)},r.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,t.clearTimeout(this._call),this._core.leave("rotating"))},r.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,t.clearTimeout(this._call))},r.prototype.destroy=function(){var e,t;for(e in this.stop(),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.autoplay=r}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){"use strict";var r=function(t){this._core=t,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":e.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+e(t.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,0,this._templates.pop())},this),"remove.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,1)},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&"position"==e.property.name&&this.draw()},this),"initialized.owl.carousel":e.proxy(function(e){e.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=e.extend({},r.Defaults,this._core.options),this.$element.on(this._handlers)};r.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},r.prototype.initialize=function(){var t,i=this._core.settings;for(t in this._controls.$relative=(i.navContainer?e(i.navContainer):e("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=e("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",e.proxy(function(e){this.prev(i.navSpeed)},this)),this._controls.$next=e("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",e.proxy(function(e){this.next(i.navSpeed)},this)),i.dotsData||(this._templates=[e('<button role="button">').addClass(i.dotClass).append(e("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?e(i.dotsContainer):e("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",e.proxy(function(t){var n=e(t.target).parent().is(this._controls.$absolute)?e(t.target).index():e(t.target).parent().index();t.preventDefault(),this.to(n,i.dotsSpeed)},this)),this._overrides)this._core[t]=e.proxy(this[t],this)},r.prototype.destroy=function(){var e,t,i,n,r;for(e in r=this._core.settings,this._handlers)this.$element.off(e,this._handlers[e]);for(t in this._controls)"$relative"===t&&r.navContainer?this._controls[t].html(""):this._controls[t].remove();for(n in this.overides)this._core[n]=this._overrides[n];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},r.prototype.update=function(){var e,t,i=this._core.clones().length/2,n=i+this._core.items().length,r=this._core.maximum(!0),a=this._core.settings,o=a.center||a.autoWidth||a.dotsData?1:a.dotsEach||a.items;if("page"!==a.slideBy&&(a.slideBy=Math.min(a.slideBy,a.items)),a.dots||"page"==a.slideBy)for(this._pages=[],e=i,t=0;e<n;e++){if(t>=o||0===t){if(this._pages.push({start:Math.min(r,e-i),end:e-i+o-1}),Math.min(r,e-i)===r)break;t=0}t+=this._core.mergers(this._core.relative(e))}},r.prototype.draw=function(){var t,i=this._core.settings,n=this._core.items().length<=i.items,r=this._core.relative(this._core.current()),a=i.loop||i.rewind;this._controls.$relative.toggleClass("disabled",!i.nav||n),i.nav&&(this._controls.$previous.toggleClass("disabled",!a&&r<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!a&&r>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!i.dots||n),i.dots&&(t=this._pages.length-this._controls.$absolute.children().length,i.dotsData&&0!==t?this._controls.$absolute.html(this._templates.join("")):t>0?this._controls.$absolute.append(new Array(t+1).join(this._templates[0])):t<0&&this._controls.$absolute.children().slice(t).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(e.inArray(this.current(),this._pages)).addClass("active"))},r.prototype.onTrigger=function(t){var i=this._core.settings;t.page={index:e.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotsData?1:i.dotsEach||i.items)}},r.prototype.current=function(){var t=this._core.relative(this._core.current());return e.grep(this._pages,e.proxy(function(e,i){return e.start<=t&&e.end>=t},this)).pop()},r.prototype.getPosition=function(t){var i,n,r=this._core.settings;return"page"==r.slideBy?(i=e.inArray(this.current(),this._pages),n=this._pages.length,t?++i:--i,i=this._pages[(i%n+n)%n].start):(i=this._core.relative(this._core.current()),n=this._core.items().length,t?i+=r.slideBy:i-=r.slideBy),i},r.prototype.next=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!0),t)},r.prototype.prev=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!1),t)},r.prototype.to=function(t,i,n){var r;!n&&this._pages.length?(r=this._pages.length,e.proxy(this._overrides.to,this._core)(this._pages[(t%r+r)%r].start,i)):e.proxy(this._overrides.to,this._core)(t,i)},e.fn.owlCarousel.Constructor.Plugins.Navigation=r}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){"use strict";var r=function(i){this._core=i,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":e.proxy(function(i){i.namespace&&"URLHash"===this._core.settings.startPosition&&e(t).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":e.proxy(function(t){if(t.namespace){var i=e(t.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!i)return;this._hashes[i]=t.content}},this),"changed.owl.carousel":e.proxy(function(i){if(i.namespace&&"position"===i.property.name){var n=this._core.items(this._core.relative(this._core.current())),r=e.map(this._hashes,function(e,t){return e===n?t:null}).join();if(!r||t.location.hash.slice(1)===r)return;t.location.hash=r}},this)},this._core.options=e.extend({},r.Defaults,this._core.options),this.$element.on(this._handlers),e(t).on("hashchange.owl.navigation",e.proxy(function(e){var i=t.location.hash.substring(1),n=this._core.$stage.children(),r=this._hashes[i]&&n.index(this._hashes[i]);void 0!==r&&r!==this._core.current()&&this._core.to(this._core.relative(r),!1,!0)},this))};r.Defaults={URLhashListener:!1},r.prototype.destroy=function(){var i,n;for(i in e(t).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(i,this._handlers[i]);for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},e.fn.owlCarousel.Constructor.Plugins.Hash=r}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){function r(t,i){var r=!1,a=t.charAt(0).toUpperCase()+t.slice(1);return e.each((t+" "+s.join(a+" ")+a).split(" "),function(e,t){if(o[t]!==n)return r=!i||t,!1}),r}function a(e){return r(e,!0)}var o=e("<support>").get(0).style,s="Webkit Moz O ms".split(" "),l={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}};!!r("transition")&&(e.support.transition=new String(a("transition")),e.support.transition.end=l.transition.end[e.support.transition]),!!r("animation")&&(e.support.animation=new String(a("animation")),e.support.animation.end=l.animation.end[e.support.animation]),r("transform")&&(e.support.transform=new String(a("transform")),e.support.transform3d=!!r("perspective"))}(window.Zepto||window.jQuery,window,document)},function(e,t){},function(e,t){!function(e){"use strict";function t(t,i){this.itemsArray=[],this.$element=e(t),this.$element.hide(),this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=i&&i.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=e('<div class="bootstrap-tagsinput"></div>'),this.$input=e('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(i)}function i(e,t){if("function"!=typeof e[t]){var i=e[t];e[t]=function(e){return e[i]}}}function n(e,t){if("function"!=typeof e[t]){var i=e[t];e[t]=function(){return i}}}function r(e){return e?s.text(e).html():""}function a(e){var t=0;if(document.selection){e.focus();var i=document.selection.createRange();i.moveStart("character",-e.value.length),t=i.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}var o={tagClass:function(e){return"label label-info"},itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},itemTitle:function(e){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!0,onTagExists:function(e,t){t.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};t.prototype={constructor:t,add:function(t,i,n){var a=this;if(!(a.options.maxTags&&a.itemsArray.length>=a.options.maxTags)&&(!1===t||t)){if("string"==typeof t&&a.options.trimValue&&(t=e.trim(t)),"object"==typeof t&&!a.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(a.isSelect&&!a.multiple&&a.itemsArray.length>0&&a.remove(a.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var o=t.split(a.options.delimiterRegex?a.options.delimiterRegex:a.options.delimiter);if(o.length>1){for(var s=0;s<o.length;s++)this.add(o[s],!0);return void(i||a.pushVal())}}var l=a.options.itemValue(t),c=a.options.itemText(t),u=a.options.tagClass(t),h=a.options.itemTitle(t),d=e.grep(a.itemsArray,function(e){return a.options.itemValue(e)===l})[0];if(!d||a.options.allowDuplicates){if(!(a.items().toString().length+t.length+1>a.options.maxInputLength)){var p=e.Event("beforeItemAdd",{item:t,cancel:!1,options:n});if(a.$element.trigger(p),!p.cancel){a.itemsArray.push(t);var f=e('<span class="tag '+r(u)+(null!==h?'" title="'+h:"")+'">'+r(c)+'<span data-role="remove"></span></span>');if(f.data("item",t),a.findInputWrapper().before(f),f.after(" "),a.isSelect&&!e('option[value="'+encodeURIComponent(l)+'"]',a.$element)[0]){var g=e("<option selected>"+r(c)+"</option>");g.data("item",t),g.attr("value",l),a.$element.append(g)}i||a.pushVal(),(a.options.maxTags===a.itemsArray.length||a.items().toString().length===a.options.maxInputLength)&&a.$container.addClass("bootstrap-tagsinput-max"),a.$element.trigger(e.Event("itemAdded",{item:t,options:n}))}}}else if(a.options.onTagExists){var m=e(".tag",a.$container).filter(function(){return e(this).data("item")===d});a.options.onTagExists(t,m)}}}},remove:function(t,i,n){var r=this;if(r.objectItems&&(t=(t=e.grep(r.itemsArray,"object"==typeof t?function(e){return r.options.itemValue(e)==r.options.itemValue(t)}:function(e){return r.options.itemValue(e)==t}))[t.length-1]),t){var a=e.Event("beforeItemRemove",{item:t,cancel:!1,options:n});if(r.$element.trigger(a),a.cancel)return;e(".tag",r.$container).filter(function(){return e(this).data("item")===t}).remove(),e("option",r.$element).filter(function(){return e(this).data("item")===t}).remove(),-1!==e.inArray(t,r.itemsArray)&&r.itemsArray.splice(e.inArray(t,r.itemsArray),1)}i||r.pushVal(),r.options.maxTags>r.itemsArray.length&&r.$container.removeClass("bootstrap-tagsinput-max"),r.$element.trigger(e.Event("itemRemoved",{item:t,options:n}))},removeAll:function(){var t=this;for(e(".tag",t.$container).remove(),e("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal()},refresh:function(){var t=this;e(".tag",t.$container).each(function(){var i=e(this),n=i.data("item"),a=t.options.itemValue(n),o=t.options.itemText(n),s=t.options.tagClass(n);i.attr("class",null),i.addClass("tag "+r(s)),i.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=r(o),t.isSelect&&e("option",t.$element).filter(function(){return e(this).data("item")===n}).attr("value",a)})},items:function(){return this.itemsArray},pushVal:function(){var t=this,i=e.map(t.items(),function(e){return t.options.itemValue(e).toString()});t.$element.val(i,!0).trigger("change")},build:function(t){var r=this;if(r.options=e.extend({},o,t),r.objectItems&&(r.options.freeInput=!1),i(r.options,"itemValue"),i(r.options,"itemText"),n(r.options,"tagClass"),r.options.typeahead){var s=r.options.typeahead||{};n(s,"source"),r.$input.typeahead(e.extend({},s,{source:function(t,i){function n(e){for(var t=[],n=0;n<e.length;n++){var o=r.options.itemText(e[n]);a[o]=e[n],t.push(o)}i(t)}this.map={};var a=this.map,o=s.source(t);e.isFunction(o.success)?o.success(n):e.isFunction(o.then)?o.then(n):e.when(o).then(n)},updater:function(e){return r.add(this.map[e]),this.map[e]},matcher:function(e){return-1!==e.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}}))}if(r.options.typeaheadjs){var l=null,c={},u=r.options.typeaheadjs;e.isArray(u)?(l=u[0],c=u[1]):c=u,r.$input.typeahead(l,c).on("typeahead:selected",e.proxy(function(e,t){r.add(c.valueKey?t[c.valueKey]:t),r.$input.typeahead("val","")},r))}r.$container.on("click",e.proxy(function(e){r.$element.attr("disabled")||r.$input.removeAttr("disabled"),r.$input.focus()},r)),r.options.addOnBlur&&r.options.freeInput&&r.$input.on("focusout",e.proxy(function(t){0===e(".typeahead, .twitter-typeahead",r.$container).length&&(r.add(r.$input.val()),r.$input.val(""))},r)),r.$container.on("keydown","input",e.proxy(function(t){var i=e(t.target),n=r.findInputWrapper();if(r.$element.attr("disabled"))r.$input.attr("disabled","disabled");else{switch(t.which){case 8:if(0===a(i[0])){var o=n.prev();o.length&&r.remove(o.data("item"))}break;case 46:if(0===a(i[0])){var s=n.next();s.length&&r.remove(s.data("item"))}break;case 37:var l=n.prev();0===i.val().length&&l[0]&&(l.before(n),i.focus());break;case 39:var c=n.next();0===i.val().length&&c[0]&&(c.after(n),i.focus())}var u=i.val().length;Math.ceil(u/5),i.attr("size",Math.max(this.inputSize,i.val().length))}},r)),r.$container.on("keypress","input",e.proxy(function(t){var i=e(t.target);if(r.$element.attr("disabled"))r.$input.attr("disabled","disabled");else{var n=i.val(),a=r.options.maxChars&&n.length>=r.options.maxChars;r.options.freeInput&&(function(t,i){var n=!1;return e.each(r.options.confirmKeys,function(e,i){if("number"==typeof i&&t.which===i)return n=!0,!1;if(t.which===i.which){var r=!i.hasOwnProperty("altKey")||t.altKey===i.altKey,a=!i.hasOwnProperty("shiftKey")||t.shiftKey===i.shiftKey,o=!i.hasOwnProperty("ctrlKey")||t.ctrlKey===i.ctrlKey;if(r&&a&&o)return n=!0,!1}}),n}(t)||a)&&(0!==n.length&&(r.add(a?n.substr(0,r.options.maxChars):n),i.val("")),!1===r.options.cancelConfirmKeysOnEmpty&&t.preventDefault());var o=i.val().length;Math.ceil(o/5),i.attr("size",Math.max(this.inputSize,i.val().length))}},r)),r.$container.on("click","[data-role=remove]",e.proxy(function(t){r.$element.attr("disabled")||r.remove(e(t.target).closest(".tag").data("item"))},r)),r.options.itemValue===o.itemValue&&("INPUT"===r.$element[0].tagName?r.add(r.$element.val()):e("option",r.$element).each(function(){r.add(e(this).attr("value"),!0)}))},destroy:function(){var e=this;e.$container.off("keypress","input"),e.$container.off("click","[role=remove]"),e.$container.remove(),e.$element.removeData("tagsinput"),e.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],i=this.$container[0];t&&t.parentNode!==i;)t=t.parentNode;return e(t)}},e.fn.tagsinput=function(i,n,r){var a=[];return this.each(function(){var o=e(this).data("tagsinput");if(o)if(i||n){if(void 0!==o[i]){if(3===o[i].length&&void 0!==r)var s=o[i](n,null,r);else s=o[i](n);void 0!==s&&a.push(s)}}else a.push(o);else o=new t(this,i),e(this).data("tagsinput",o),a.push(o),"SELECT"===this.tagName&&e("option",e(this)).attr("selected","selected"),e(this).val(e(this).val())}),"string"==typeof i?a.length>1?a:a[0]:a},e.fn.tagsinput.Constructor=t;var s=e("<div />");e(function(){e("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery)},function(e,t,i){var n,r;!function(a){"use strict";void 0===(r="function"==typeof(n=function(){if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,i,n,r,a,o,s,l,c,u,h,d,p,f,g,m,y,v,b,C,S,w,x,T,k,E=[],A=!1,I=!1,D=!1,B=[],_=!1,M=!1,P=[],L=/\s+/g,N="Sortable"+(new Date).getTime(),R=window,O=R.document,U=R.parseInt,V=R.setTimeout,F=R.jQuery||R.Zepto,z=R.Polymer,H={capture:!1,passive:!1},j=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),$=!!navigator.userAgent.match(/Edge/i),K=!!navigator.userAgent.match(/firefox/i),W=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),G=!!navigator.userAgent.match(/iP(ad|od|hone)/i),q=$||j?"cssFloat":"float",Y="draggable"in O.createElement("div"),X=function(){if(j)return!1;var e=O.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),Q=!1,J=!1,Z=Math.abs,ee=Math.min,te=Math.max,ie=[],ne=function(e,t){var i=we(e),n=U(i.width)-U(i.paddingLeft)-U(i.paddingRight)-U(i.borderLeftWidth)-U(i.borderRightWidth),r=De(e,0,t),a=De(e,1,t),o=r&&we(r),s=a&&we(a),l=o&&U(o.marginLeft)+U(o.marginRight)+Fe(r).width,c=s&&U(s.marginLeft)+U(s.marginRight)+Fe(a).width;return"flex"===i.display?"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal":"grid"===i.display?i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":r&&"none"!==o.float?!a||"both"!==s.clear&&s.clear!==("left"===o.float?"left":"right")?"horizontal":"vertical":r&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||n<=l&&"none"===i[q]||a&&"none"===i[q]&&n<l+c)?"vertical":"horizontal"},re=function(e,t){if(!e||!e.getBoundingClientRect)return ae();var i=e,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var r=we(i);if(i.clientWidth<i.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!i||!i.getBoundingClientRect||i===O.body)return ae();if(n||t)return i;n=!0}}}while(i=i.parentNode);return ae()},ae=function(){return j?O.documentElement:O.scrollingElement},oe=function(e,t,i){e.scrollLeft+=t,e.scrollTop+=i},se=Ne(function(e,t,i,n){if(t.scroll){var r=i?i[N]:window,a=t.scrollSensitivity,o=t.scrollSpeed,u=e.clientX,h=e.clientY,d=ae(),p=!1;l!==i&&(le(),c=t.scrollFn,!0===(s=t.scroll)&&(s=re(i,!0),l=s));var f=0,g=s;do{var m,y,b,C,S,w,x,T,k,I=g,D=Fe(I),B=D.top,_=D.bottom,M=D.left,P=D.right,L=D.width,R=D.height;if(m=I.scrollWidth,y=I.scrollHeight,b=we(I),T=I.scrollLeft,k=I.scrollTop,x=I===d?(w=L<m&&("auto"===b.overflowX||"scroll"===b.overflowX||"visible"===b.overflowX),R<y&&("auto"===b.overflowY||"scroll"===b.overflowY||"visible"===b.overflowY)):(w=L<m&&("auto"===b.overflowX||"scroll"===b.overflowX),R<y&&("auto"===b.overflowY||"scroll"===b.overflowY)),C=w&&(Z(P-u)<=a&&T+L<m)-(Z(M-u)<=a&&!!T),S=x&&(Z(_-h)<=a&&k+R<y)-(Z(B-h)<=a&&!!k),!E[f])for(var O=0;O<=f;O++)E[O]||(E[O]={});E[f].vx==C&&E[f].vy==S&&E[f].el===I||(E[f].el=I,E[f].vx=C,E[f].vy=S,clearInterval(E[f].pid),!I||0==C&&0==S||(p=!0,E[f].pid=setInterval((function(){n&&0===this.layer&&(ye.active._emulateDragOver(!0),ye.active._onTouchMove(v,!0));var t=E[this.layer].vy?E[this.layer].vy*o:0,i=E[this.layer].vx?E[this.layer].vx*o:0;"function"==typeof c&&"continue"!==c.call(r,i,t,e,v,E[this.layer].el)||oe(E[this.layer].el,i,t)}).bind({layer:f}),24))),f++}while(t.bubbleScroll&&g!==d&&(g=re(g,!1)));A=p}},30),le=function(){E.forEach(function(e){clearInterval(e.pid)}),E=[]},ce=function(e){function t(e,i){return function(n,r,a,o){if(null==e&&(i||n.options.group.name&&r.options.group.name&&n.options.group.name===r.options.group.name))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"==typeof e)return t(e(n,r,a,o),i)(n,r,a,o);var s=(i?n:r).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&-1<e.indexOf(s)}}var i={},n=e.group;n&&"object"==typeof n||(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i},ue=function(t){e&&e.parentNode&&e.parentNode[N]&&e.parentNode[N]._computeIsAligned(t)},he=function(e,t){for(var i=t;!i[N];)i=i.parentNode;return e===i},de=function(e,t,i){for(var n=e.parentNode;n&&!n[N];)n=n.parentNode;n&&n[N][i](Re(t,{artificialBubble:!0}))},pe=function(){!X&&i&&we(i,"display","none")},fe=function(){!X&&i&&we(i,"display","")};O.addEventListener("click",function(e){if(D)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),D=!1},!0);var ge,me=function(t){if(t=t.touches?t.touches[0]:t,e){var i=function(e,t){for(var i=0;i<B.length;i++)if(!Be(B[i])){var n=Fe(B[i]),r=B[i][N].options.emptyInsertThreshold;if(e>=n.left-r&&e<=n.right+r&&t>=n.top-r&&t<=n.bottom+r)return B[i]}}(t.clientX,t.clientY);i&&i[N]._onDragOver({clientX:t.clientX,clientY:t.clientY,target:i,rootEl:i})}};function ye(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Re({},t),e[N]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ne(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:U(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ye.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var n in i)!(n in t)&&(t[n]=i[n]);for(var r in ce(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Y,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?be(e,"pointerdown",this._onTapStart):(be(e,"mousedown",this._onTapStart),be(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(be(e,"dragover",this),be(e,"dragenter",this)),B.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[])}function ve(e,t,i,n){if(e){i=i||O;do{if(null!=t&&(">"===t[0]&&e.parentNode===i&&Le(e,t.substring(1))||Le(e,t))||n&&e===i)return e;if(e===i)break}while(e=(r=e).host&&r!==O&&r.host.nodeType?r.host:r.parentNode)}var r;return null}function be(e,t,i){e.addEventListener(t,i,H)}function Ce(e,t,i){e.removeEventListener(t,i,H)}function Se(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(L," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(L," ")}}function we(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return O.defaultView&&O.defaultView.getComputedStyle?i=O.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=i+("string"==typeof i?"":"px")}}function xe(e){var t="";do{var i=we(e,"transform");i&&"none"!==i&&(t=i+" "+t)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(t):window.WebKitCSSMatrix?new WebKitCSSMatrix(t):window.CSSMatrix?new CSSMatrix(t):void 0}function Te(e,t,i){if(e){var n=e.getElementsByTagName(t),r=0,a=n.length;if(i)for(;r<a;r++)i(n[r],r);return n}return[]}function ke(e,t,i,r,a,o,s,l,c){var u,h=(e=e||t[N]).options,d="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||j||$?(u=O.createEvent("Event")).initEvent(i,!0,!0):u=new CustomEvent(i,{bubbles:!0,cancelable:!0}),u.to=a||t,u.from=o||t,u.item=r||t,u.clone=n,u.oldIndex=s,u.newIndex=l,u.originalEvent=c,u.pullMode=p?p.lastPutMode:void 0,t&&t.dispatchEvent(u),h[d]&&h[d].call(e,u)}function Ee(e,t,i,n,r,a,o,s){var l,c,u=e[N],h=u.options.onMove;return!window.CustomEvent||j||$?(l=O.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=i,l.draggedRect=n,l.related=r||t,l.relatedRect=a||Fe(t),l.willInsertAfter=s,l.originalEvent=o,e.dispatchEvent(l),h&&(c=h.call(u,l,o)),c}function Ae(e){e.draggable=!1}function Ie(){Q=!1}function De(t,n,r){for(var a=0,o=0,s=t.children;o<s.length;){if("none"!==s[o].style.display&&s[o]!==i&&s[o]!==e&&ve(s[o],r.draggable,t,!1)){if(a===n)return s[o];a++}o++}return null}function Be(e){for(var t=e.lastElementChild;t&&(t===i||"none"===t.style.display);)t=t.previousElementSibling;return t||null}function _e(t){return Pe(e)<Pe(t)?1:-1}function Me(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function Pe(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&e!==n&&i++;return i}function Le(e,t){if(e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}function Ne(e,t){return function(){if(!ge){var i=arguments,n=this;ge=V(function(){1===i.length?e.call(n,i[0]):e.apply(n,i),ge=void 0},t)}}}function Re(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function Oe(e){return z&&z.dom?z.dom(e).cloneNode(!0):F?F(e).clone(!0)[0]:e.cloneNode(!0)}function Ue(e){return V(e,0)}function Ve(e){return clearTimeout(e)}function Fe(e,t,i,n){if(e.getBoundingClientRect||e===R){var r,a,o,s,l,c,u;if(u=e!==R&&e!==ae()?(a=(r=e.getBoundingClientRect()).top,o=r.left,s=r.bottom,l=r.right,c=r.height,r.width):(o=a=0,s=window.innerHeight,l=window.innerWidth,c=window.innerHeight,window.innerWidth),n&&e!==R&&(i=i||e.parentNode,!j))do{if(i&&i.getBoundingClientRect&&"none"!==we(i,"transform")){var h=i.getBoundingClientRect();a-=h.top+U(we(i,"border-top-width")),o-=h.left+U(we(i,"border-left-width")),s=a+r.height,l=o+r.width;break}}while(i=i.parentNode);if(t&&e!==R){var d=xe(i||e),p=d&&d.a,f=d&&d.d;d&&(s=(a/=f)+(c/=f),l=(o/=p)+(u/=p))}return{top:a,left:o,bottom:s,right:l,width:u,height:c}}}function ze(e,t){for(var i=re(e,!0),n=Fe(e)[t];i;){var r=Fe(i)[t];if(!("top"===t||"left"===t?r<=n:n<=r))return i;if(i===ae())break;i=re(i,!1)}return!1}function He(e){var t=0,i=0,n=ae();if(e)do{var r=xe(e);t+=e.scrollLeft*r.a,i+=e.scrollTop*r.d}while(e!==n&&(e=e.parentNode));return[t,i]}return be(O,"dragover",me),be(O,"mousemove",me),be(O,"touchmove",me),ye.prototype={constructor:ye,_computeIsAligned:function(t){var n;if(i&&!X?(pe(),n=O.elementFromPoint(t.clientX,t.clientY),fe()):n=t.target,n=ve(n,this.options.draggable,this.el,!1),!J&&e&&e.parentNode===this.el){for(var r,a,o,s,l,c,u=this.el.children,h=0;h<u.length;h++)ve(u[h],this.options.draggable,this.el,!1)&&u[h]!==n&&(u[h].sortableMouseAligned=(r=t.clientX,a=t.clientY,o=u[h],s=this._getDirection(t,null),l=Fe(o),("vertical"===s?l.left:l.top)<(c="vertical"===s?r:a)&&c<("vertical"===s?l.right:l.bottom)));ve(n,this.options.draggable,this.el,!0)||(C=null),J=!0,V(function(){J=!1},30)}},_getDirection:function(t,i){return"function"==typeof this.options.direction?this.options.direction.call(this,t,i,e):this.options.direction},_onTapStart:function(t){if(t.cancelable){var i,n=this,r=this.el,a=this.options,s=a.preventOnFilter,l=t.type,c=t.touches&&t.touches[0],u=(c||t).target,h=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||u,d=a.filter;if(function(e){ie.length=0;for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var n=t[i];n.checked&&ie.push(n)}}(r),(!j||t.artificialBubble||he(r,u))&&!e&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||a.disabled||h.isContentEditable))if(u=ve(u,a.draggable,r,!1)){if(o!==u){if(i=Pe(u),"function"==typeof d){if(d.call(this,t,u,this))return ke(n,h,"filter",u,r,r,i),void(s&&t.cancelable&&t.preventDefault())}else if(d&&(d=d.split(",").some(function(e){if(e=ve(h,e.trim(),r,!1))return ke(n,e,"filter",u,r,r,i),!0})))return void(s&&t.cancelable&&t.preventDefault());a.handle&&!ve(h,a.handle,r,!1)||this._prepareDragStart(t,c,u,i)}}else j&&de(r,t,"_onTapStart")}},_handleAutoScroll:function(t,i){if(e&&this.options.scroll){var n=t.clientX,r=t.clientY,a=O.elementFromPoint(n,r),o=this;if(i||$||j||W){se(t,o.options,a,i);var s=re(a,!0);!A||f&&n===g&&r===m||(f&&clearInterval(f),f=setInterval(function(){if(e){var a=re(O.elementFromPoint(n,r),!0);a!==s&&(s=a,le(),se(t,o.options,s,i))}},10),g=n,m=r)}else{if(!o.options.bubbleScroll||re(a,!0)===ae())return void le();se(t,o.options,re(a,!1),!1)}}},_prepareDragStart:function(i,n,s,l){var c,h=this,p=h.el,f=h.options,g=p.ownerDocument;s&&!e&&s.parentNode===p&&(r=p,t=(e=s).parentNode,a=e.nextSibling,o=s,d=f.group,u=l,y={target:e,clientX:(n||i).clientX,clientY:(n||i).clientY},this._lastX=(n||i).clientX,this._lastY=(n||i).clientY,e.style["will-change"]="all",e.style.transition="",e.style.transform="",c=function(){h._disableDelayedDragEvents(),!K&&h.nativeDraggable&&(e.draggable=!0),h._triggerDragStart(i,n),ke(h,r,"choose",e,r,r,u),Se(e,f.chosenClass,!0)},f.ignore.split(",").forEach(function(t){Te(e,t.trim(),Ae)}),f.supportPointer?be(g,"pointerup",h._onDrop):(be(g,"mouseup",h._onDrop),be(g,"touchend",h._onDrop),be(g,"touchcancel",h._onDrop)),K&&this.nativeDraggable&&(this.options.touchStartThreshold=4,e.draggable=!0),!f.delay||this.nativeDraggable&&($||j)?c():(be(g,"mouseup",h._disableDelayedDrag),be(g,"touchend",h._disableDelayedDrag),be(g,"touchcancel",h._disableDelayedDrag),be(g,"mousemove",h._delayedDragTouchMoveHandler),be(g,"touchmove",h._delayedDragTouchMoveHandler),f.supportPointer&&be(g,"pointermove",h._delayedDragTouchMoveHandler),h._dragStartTimer=V(c,f.delay)))},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;te(Z(t.clientX-this._lastX),Z(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){e&&Ae(e),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Ce(e,"mouseup",this._disableDelayedDrag),Ce(e,"touchend",this._disableDelayedDrag),Ce(e,"touchcancel",this._disableDelayedDrag),Ce(e,"mousemove",this._delayedDragTouchMoveHandler),Ce(e,"touchmove",this._delayedDragTouchMoveHandler),Ce(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,i){i=i||("touch"==t.pointerType?t:null),!this.nativeDraggable||i?be(O,this.options.supportPointer?"pointermove":i?"touchmove":"mousemove",this._onTouchMove):(be(e,"dragend",this),be(r,"dragstart",this._onDragStart));try{O.selection?Ue(function(){O.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,i){if(I=!1,r&&e){this.nativeDraggable&&(be(O,"dragover",this._handleAutoScroll),be(O,"dragover",ue));var n=this.options;!t&&Se(e,n.dragClass,!1),Se(e,n.ghostClass,!0),we(e,"transform",""),ye.active=this,t&&this._appendGhost(),ke(this,r,"start",e,r,r,u,void 0,i)}else this._nulling()},_emulateDragOver:function(t){if(v){if(this._lastX===v.clientX&&this._lastY===v.clientY&&!t)return;this._lastX=v.clientX,this._lastY=v.clientY,pe();for(var i=O.elementFromPoint(v.clientX,v.clientY),n=i;i&&i.shadowRoot;)n=i=i.shadowRoot.elementFromPoint(v.clientX,v.clientY);if(n)do{if(n[N]&&n[N]._onDragOver({clientX:v.clientX,clientY:v.clientY,target:i,rootEl:n})&&!this.options.dragoverBubble)break;i=n}while(n=n.parentNode);e.parentNode[N]._computeIsAligned(v),fe()}},_onTouchMove:function(e,t){if(y){var n=this.options,r=n.fallbackTolerance,a=n.fallbackOffset,o=e.touches?e.touches[0]:e,s=i&&xe(i),l=i&&s&&s.a,c=i&&s&&s.d,u=G&&T&&He(T),h=(o.clientX-y.clientX+a.x)/(l||1)+(u?u[0]-P[0]:0)/(l||1),d=(o.clientY-y.clientY+a.y)/(c||1)+(u?u[1]-P[1]:0)/(c||1),p=e.touches?"translate3d("+h+"px,"+d+"px,0)":"translate("+h+"px,"+d+"px)";if(!ye.active&&!I){if(r&&ee(Z(o.clientX-this._lastX),Z(o.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}!t&&this._handleAutoScroll(o,!0),b=!0,v=o,we(i,"webkitTransform",p),we(i,"mozTransform",p),we(i,"msTransform",p),we(i,"transform",p),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!i){var t=this.options.fallbackOnBody?O.body:r,n=Fe(e,!0,t,!G),a=(we(e),this.options);if(G){for(T=t;"static"===we(T,"position")&&"none"===we(T,"transform")&&T!==O;)T=T.parentNode;if(T!==O){var o=Fe(T,!0);n.top-=o.top,n.left-=o.left}T!==O.body&&T!==O.documentElement?(T===O&&(T=ae()),n.top+=T.scrollTop,n.left+=T.scrollLeft):T=ae(),P=He(T)}Se(i=e.cloneNode(!0),a.ghostClass,!1),Se(i,a.fallbackClass,!0),Se(i,a.dragClass,!0),we(i,"box-sizing","border-box"),we(i,"margin",0),we(i,"top",n.top),we(i,"left",n.left),we(i,"width",n.width),we(i,"height",n.height),we(i,"opacity","0.8"),we(i,"position",G?"absolute":"fixed"),we(i,"zIndex","100000"),we(i,"pointerEvents","none"),t.appendChild(i)}},_onDragStart:function(t,i){var a=this,o=t.dataTransfer,s=a.options;(n=Oe(e)).draggable=!1,n.style["will-change"]="",this._hideClone(),Se(n,a.options.chosenClass,!1),a._cloneId=Ue(function(){a.options.removeCloneOnHide||r.insertBefore(n,e),ke(a,r,"clone",e)}),!i&&Se(e,s.dragClass,!0),i?(D=!0,a._loopId=setInterval(a._emulateDragOver,50)):(Ce(O,"mouseup",a._onDrop),Ce(O,"touchend",a._onDrop),Ce(O,"touchcancel",a._onDrop),o&&(o.effectAllowed="move",s.setData&&s.setData.call(a,o,e)),be(O,"drop",a),we(e,"transform","translateZ(0)")),I=!0,a._dragStartId=Ue(a._dragStarted.bind(a,i,t)),be(O,"selectstart",a),W&&we(O.body,"user-select","none")},_onDragOver:function(i){var n,o,s,l=this.el,c=i.target,h=this.options,f=h.group,g=ye.active,m=d===f,y=h.sort,v=this;if(!Q&&(!j||i.rootEl||i.artificialBubble||he(l,c))){if(void 0!==i.preventDefault&&i.cancelable&&i.preventDefault(),b=!0,c=ve(c,h.draggable,l,!0),ve(i.target,null,e,!0)||c.animated)return le(!1);if(c!==e&&(D=!1),g&&!h.disabled&&(m?y||(s=!r.contains(e)):p===this||(this.lastPutMode=d.checkPull(this,g,e,i))&&f.checkPut(this,g,e,i))){var T=this._getDirection(i,c);if(n=Fe(e),s)return this._hideClone(),t=r,a?r.insertBefore(e,a):r.appendChild(e),le(!0);var E=Be(l);if(E&&(J=i,ee=T,te=Fe(Be(l)),ie="vertical"===ee?J.clientY:J.clientX,ne="vertical"===ee?J.clientX:J.clientY,re="vertical"===ee?te.bottom:te.right,ae="vertical"===ee?te.left:te.top,se="vertical"===ee?te.right:te.bottom,!("vertical"===ee?se+10<ne||ne<=se&&re<ie&&ae<=ne:re<ie&&ae<ne||ie<=re&&se+10<ne)||E.animated)){if(c&&c!==e&&c.parentNode===l){var A,I=0,B=c.sortableMouseAligned,P=e.parentNode!==l,L="vertical"===T?"top":"left",R=ze(c,"top")||ze(e,"top"),U=R?R.scrollTop:void 0;if(C!==c&&(w=null,A=Fe(c)[L],_=!1),K=c,W=T,G=($=e)===e&&k||Fe($),q=K===e&&k||Fe(K),w=((Y="vertical"===W?G.left:G.top)===(X="vertical"===W?q.left:q.top)||("vertical"===W?G.right:G.bottom)===("vertical"===W?q.right:q.bottom)||Y+("vertical"===W?G.width:G.height)/2===X+("vertical"===W?q.width:q.height)/2)&&B||P||R||h.invertSwap||"insert"===w||"swap"===w?("swap"!==w&&(M=h.invertSwap||P),I=function(t,i,n,r,a,o,s){var l=Fe(i),c="vertical"===n?t.clientY:t.clientX,u="vertical"===n?l.height:l.width,h="vertical"===n?l.top:l.left,d="vertical"===n?l.bottom:l.right,p=(Fe(e),!1);if(!o)if(s&&x<u*r){if(!_&&(1===S?h+u*a/2<c:c<d-u*a/2)&&(_=!0),_)p=!0;else if(1===S?c<h+x:d-x<c)return-1*S}else if(h+u*(1-r)/2<c&&c<d-u*(1-r)/2)return _e(i);return(p=p||o)&&(c<h+u*a/2||d-u*a/2<c)?h+u/2<c?1:-1:0}(i,c,T,h.swapThreshold,null==h.invertedSwapThreshold?h.swapThreshold:h.invertedSwapThreshold,M,C===c),"swap"):(I=_e(c),"insert"),0===I)return le(!1);k=null,S=I,o=Fe(C=c);var F=c.nextElementSibling,z=!1,H=Ee(r,l,e,n,c,o,i,z=1===I);if(!1!==H)return 1!==H&&-1!==H||(z=1===H),Q=!0,V(Ie,30),m?g._hideClone():g._showClone(this),z&&!F?l.appendChild(e):c.parentNode.insertBefore(e,z?F:c),R&&oe(R,0,U-R.scrollTop),t=e.parentNode,void 0===A||M||(x=Z(A-Fe(c)[L])),ce(),le(!0)}}else if(E&&l===i.target&&(c=E),c&&(o=Fe(c)),m?g._hideClone():g._showClone(this),!1!==Ee(r,l,e,n,c,o,i,!!c))return l.appendChild(e),t=l,k=null,ce(),le(!0);if(l.contains(e))return le(!1)}var $,K,W,G,q,Y,X,J,ee,te,ie,ne,re,ae,se;return j&&!i.rootEl&&de(l,i,"_onDragOver"),!1}function le(t){return t&&(m?g._hideClone():g._showClone(v),g&&(Se(e,p?p.options.ghostClass:g.options.ghostClass,!1),Se(e,h.ghostClass,!0)),p!==v&&v!==ye.active?p=v:v===ye.active&&(p=null),n&&v._animate(n,e),c&&o&&v._animate(o,c)),(c===e&&!e.animated||c===l&&!c.animated)&&(C=null),h.dragoverBubble||i.rootEl||c===O||(v._handleAutoScroll(i),e.parentNode[N]._computeIsAligned(i)),!h.dragoverBubble&&i.stopPropagation&&i.stopPropagation(),!0}function ce(){ke(v,r,"change",c,l,r,u,Pe(e),i)}},_animate:function(t,i){var n=this.options.animation;if(n){var r=Fe(i);if(i===e&&(k=r),1===t.nodeType&&(t=Fe(t)),t.left+t.width/2!==r.left+r.width/2||t.top+t.height/2!==r.top+r.height/2){var a=xe(this.el),o=a&&a.a,s=a&&a.d;we(i,"transition","none"),we(i,"transform","translate3d("+(t.left-r.left)/(o||1)+"px,"+(t.top-r.top)/(s||1)+"px,0)"),we(i,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),we(i,"transform","translate3d(0,0,0)")}"number"==typeof i.animated&&clearTimeout(i.animated),i.animated=V(function(){we(i,"transition",""),we(i,"transform",""),i.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;Ce(O,"touchmove",this._onTouchMove),Ce(O,"pointermove",this._onTouchMove),Ce(e,"mouseup",this._onDrop),Ce(e,"touchend",this._onDrop),Ce(e,"pointerup",this._onDrop),Ce(e,"touchcancel",this._onDrop),Ce(O,"selectstart",this)},_onDrop:function(o){var s=this.el,l=this.options;_=M=A=I=!1,clearInterval(this._loopId),clearInterval(f),le(),clearTimeout(ge),ge=void 0,clearTimeout(this._dragStartTimer),Ve(this._cloneId),Ve(this._dragStartId),Ce(O,"mousemove",this._onTouchMove),this.nativeDraggable&&(Ce(O,"drop",this),Ce(s,"dragstart",this._onDragStart),Ce(O,"dragover",this._handleAutoScroll),Ce(O,"dragover",ue)),W&&we(O.body,"user-select",""),this._offUpEvents(),o&&(b&&(o.cancelable&&o.preventDefault(),!l.dropBubble&&o.stopPropagation()),i&&i.parentNode&&i.parentNode.removeChild(i),(r===t||p&&"clone"!==p.lastPutMode)&&n&&n.parentNode&&n.parentNode.removeChild(n),e&&(this.nativeDraggable&&Ce(e,"dragend",this),Ae(e),e.style["will-change"]="",Se(e,p?p.options.ghostClass:this.options.ghostClass,!1),Se(e,this.options.chosenClass,!1),ke(this,r,"unchoose",e,t,r,u,null,o),r!==t?(0<=(h=Pe(e))&&(ke(null,t,"add",e,t,r,u,h,o),ke(this,r,"remove",e,t,r,u,h,o),ke(null,t,"sort",e,t,r,u,h,o),ke(this,r,"sort",e,t,r,u,h,o)),p&&p.save()):e.nextSibling!==a&&0<=(h=Pe(e))&&(ke(this,r,"update",e,t,r,u,h,o),ke(this,r,"sort",e,t,r,u,h,o)),ye.active&&(null!=h&&-1!==h||(h=u),ke(this,r,"end",e,t,r,u,h,o),this.save()))),this._nulling()},_nulling:function(){r=e=t=i=a=n=o=s=l=E.length=f=g=m=y=v=b=h=u=C=S=k=p=d=ye.active=null,ie.forEach(function(e){e.checked=!0}),ie.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,n=0,r=i.length,a=this.options;n<r;n++)ve(e=i[n],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||Me(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,n){var r=i.children[n];ve(r,this.options.draggable,i,!1)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ve(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];i[e]=t,"group"===e&&ce(i)},destroy:function(){var e=this.el;e[N]=null,Ce(e,"mousedown",this._onTapStart),Ce(e,"touchstart",this._onTapStart),Ce(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ce(e,"dragover",this),Ce(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),B.splice(B.indexOf(this.el),1),this.el=e=null},_hideClone:function(){n.cloneHidden||(we(n,"display","none"),n.cloneHidden=!0,n.parentNode&&this.options.removeCloneOnHide&&n.parentNode.removeChild(n))},_showClone:function(t){"clone"===t.lastPutMode?n.cloneHidden&&(r.contains(e)&&!this.options.group.revertClone?r.insertBefore(n,e):a?r.insertBefore(n,a):r.appendChild(n),this.options.group.revertClone&&this._animate(e,n),we(n,"display",""),n.cloneHidden=!1):this._hideClone()}},be(O,"touchmove",function(e){(ye.active||I)&&e.cancelable&&e.preventDefault()}),ye.utils={on:be,off:Ce,css:we,find:Te,is:function(e,t){return!!ve(e,t,e,!1)},extend:Re,throttle:Ne,closest:ve,toggleClass:Se,clone:Oe,index:Pe,nextTick:Ue,cancelNextTick:Ve,detectDirection:ne,getChild:De},ye.create=function(e,t){return new ye(e,t)},ye.version="1.8.4",ye})?n.call(t,i,t,e):n)||(e.exports=r)}()},function(e,t){},function(e,t){!function(){var e="onfocusin"in document.createElement("input")?"focusin":"focus",t=document.createElement("div");t.appendChild(document.createTextNode("x-")),t.appendChild(document.createTextNode("x")),t.normalize();var i=3==t.firstChild.length;function n(){}function r(){}function a(){}function o(){}function s(e,t){if(e.firstChild)return e.firstChild;if(e.nextSibling)return e.nextSibling;if(e===t)return null;for(;e.parentNode;){if((e=e.parentNode)==t)return null;if(e.nextSibling)return e.nextSibling}return null}function l(e,t,i,n){if(!(t<=0)){var r=e[i?"startContainer":"endContainer"];for(3==r.nodeType&&(t+=e[i?"startOffset":"endOffset"]);r;){if(3==r.nodeType){var a=r.nodeValue.length;if(t<=a){if(e[i?"setStart":"setEnd"](r,t),t==a){for(var o=s(r,n);o&&3==o.nodeType&&0==o.nodeValue.length;o=s(o,n))e[i?"setStartAfter":"setEndAfter"](o);o&&1==o.nodeType&&"BR"==o.nodeName&&e[i?"setStartAfter":"setEndAfter"](o)}return}e[i?"setStartAfter":"setEndAfter"](r),t-=a}r=s(r,n)}}}bililiteRange=function(t,i){var n;if(i)n=new p;else if(window.getSelection&&t.setSelectionRange)try{n=new a}catch(e){n=new p}else n=window.getSelection?new o:document.selection?new r:new p;if(n._el=t,n._doc=t.ownerDocument,n._win="defaultView"in n._doc?n._doc.defaultView:n._doc.parentWindow,n._textProp=function(e){return"undefined"!=typeof e.value?"value":"undefined"!=typeof e.text?"text":"undefined"!=typeof e.textContent?"textContent":"innerText"}(t),n._bounds=[0,n.length()],!("bililiteRangeMouseDown"in n._doc)){var s={_el:n._doc};n._doc.bililiteRangeMouseDown=!1,bililiteRange.fn.listen.call(s,"mousedown",function(){n._doc.bililiteRangeMouseDown=!0}),bililiteRange.fn.listen.call(s,"mouseup",function(){n._doc.bililiteRangeMouseDown=!1})}if(!("bililiteRangeSelection"in t)){function l(e){e&&9==e.which?n._nativeSelect(n._nativeRange(t.bililiteRangeSelection)):t.bililiteRangeSelection=n._nativeSelection()}l(),"onbeforedeactivate"in t?n.listen("beforedeactivate",l):n.listen("mouseup",l).listen("keyup",l),n.listen(e,function(){n._doc.bililiteRangeMouseDown||n._nativeSelect(n._nativeRange(t.bililiteRangeSelection))})}if(!("oninput"in t)){var c=function(){n.dispatch({type:"input"})};n.listen("keyup",c),n.listen("cut",c),n.listen("paste",c),n.listen("drop",c),t.oninput="patched"}return n},n.prototype={length:function(){return this._el[this._textProp].replace(/\r/g,"").length},bounds:function(e){if(bililiteRange.bounds[e])this._bounds=bililiteRange.bounds[e].apply(this);else{if(!e){var t=[Math.max(0,Math.min(this.length(),this._bounds[0])),Math.max(0,Math.min(this.length(),this._bounds[1]))];return t[1]=Math.max(t[0],t[1]),t}this._bounds=e}return this},select:function(){var e=this._el.bililiteRangeSelection=this.bounds();return this._el==document.activeElement&&this._nativeSelect(this._nativeRange(e)),this.dispatch({type:"select"}),this},text:function(e,t){if(arguments.length){var i=this.bounds();return this.dispatch({type:"beforeinput",data:e,bounds:i}),this._nativeSetText(e,this._nativeRange(i)),"start"==t?this.bounds([i[0],i[0]]):"end"==t?this.bounds([i[0]+e.length,i[0]+e.length]):"all"==t&&this.bounds([i[0],i[0]+e.length]),this.dispatch({type:"input",data:e,bounds:i}),this}return this._nativeGetText(this._nativeRange(this.bounds())).replace(/\r/g,"")},insertEOL:function(){return this._nativeEOL(),this._bounds=[this._bounds[0]+1,this._bounds[0]+1],this},sendkeys:function(e){var t=this;function i(e,t){/^{[^}]*}$/.test(t)&&(t=t.slice(1,-1));for(var i=0;i<t.length;++i){var n=t.charCodeAt(i);e.dispatch({type:"keypress",keyCode:n,which:n,charCode:n})}e.text(t,"end")}return this.data().sendkeysOriginalText=this.text(),this.data().sendkeysBounds=void 0,e.replace(/{[^}]*}|[^{]+|{/g,function(e){(bililiteRange.sendkeys[e]||i)(t,e,i)}),this.bounds(this.data().sendkeysBounds),this.dispatch({type:"sendkeys",which:e}),this},top:function(){return this._nativeTop(this._nativeRange(this.bounds()))},scrollIntoView:function(e){var t=this.top();return(this._el.scrollTop>t||this._el.scrollTop+this._el.clientHeight<t)&&(e?e.call(this._el,t):this._el.scrollTop=t),this},wrap:function(e){return this._nativeWrap(e,this._nativeRange(this.bounds())),this},selection:function(e){return arguments.length?this.bounds("selection").text(e,"end").select():this.bounds("selection").text()},clone:function(){return bililiteRange(this._el).bounds(this.bounds())},all:function(e){return arguments.length?(this.dispatch({type:"beforeinput",data:e}),this._el[this._textProp]=e,this.dispatch({type:"input",data:e}),this):this._el[this._textProp].replace(/\r/g,"")},element:function(){return this._el},dispatch:function(e){e=e||{};var t=document.createEvent?document.createEvent("CustomEvent"):this._doc.createEventObject();for(var i in t.initCustomEvent&&t.initCustomEvent(e.type,!!e.bubbles,!!e.cancelable,e.detail),e)t[i]=e[i];var n=this._el;return setTimeout(function(){try{n.dispatchEvent?n.dispatchEvent(t):n.fireEvent("on"+e.type,document.createEventObject())}catch(a){var i=n["listen"+e.type];if(i)for(var r=0;r<i.length;++r)i[r].call(n,t)}},0),this},listen:function(e,t){var i=this._el;return i.addEventListener?i.addEventListener(e,t):(i.attachEvent("on"+e,t),(i["listen"+e]=i["listen"+e]||[]).push(t)),this},dontlisten:function(e,t){var i=this._el;if(i.removeEventListener)i.removeEventListener(e,t);else try{i.detachEvent("on"+e,t)}catch(a){var n=i["listen"+e];if(n)for(var r=0;r<n.length;++r)n[r]===t&&(n[r]=function(){})}return this}},bililiteRange.fn=n.prototype,bililiteRange.extend=function(e){for(fn in e)n.prototype[fn]=e[fn]},bililiteRange.bounds={all:function(){return[0,this.length()]},start:function(){return[0,0]},end:function(){return[this.length(),this.length()]},selection:function(){return this._el==document.activeElement?(this.bounds("all"),this._nativeSelection()):this._el.bililiteRangeSelection}},bililiteRange.sendkeys={"{enter}":function(e){simplechar(e,"\n"),e.insertEOL()},"{tab}":function(e,t,i){i(e,"\t")},"{newline}":function(e,t,i){i(e,"\n")},"{backspace}":function(e){var t=e.bounds();t[0]==t[1]&&e.bounds([t[0]-1,t[0]]),e.text("","end")},"{del}":function(e){var t=e.bounds();t[0]==t[1]&&e.bounds([t[0],t[0]+1]),e.text("","end")},"{rightarrow}":function(e){var t=e.bounds();t[0]==t[1]&&++t[1],e.bounds([t[1],t[1]])},"{leftarrow}":function(e){var t=e.bounds();t[0]==t[1]&&--t[0],e.bounds([t[0],t[0]])},"{selectall}":function(e){e.bounds("all")},"{selection}":function(e){for(var t=e.data().sendkeysOriginalText,i=0;i<t.length;++i){var n=t.charCodeAt(i);e.dispatch({type:"keypress",keyCode:n,which:n,charCode:n})}e.text(t,"end")},"{mark}":function(e){e.data().sendkeysBounds=e.bounds()}},bililiteRange.sendkeys["{Enter}"]=bililiteRange.sendkeys["{enter}"],bililiteRange.sendkeys["{Backspace}"]=bililiteRange.sendkeys["{backspace}"],bililiteRange.sendkeys["{Delete}"]=bililiteRange.sendkeys["{del}"],bililiteRange.sendkeys["{ArrowRight}"]=bililiteRange.sendkeys["{rightarrow}"],bililiteRange.sendkeys["{ArrowLeft}"]=bililiteRange.sendkeys["{leftarrow}"],(r.prototype=new n)._nativeRange=function(e){var t;return"INPUT"==this._el.tagName?t=this._el.createTextRange():(t=this._doc.body.createTextRange()).moveToElementText(this._el),e&&(e[1]<0&&(e[1]=0),e[0]>this.length()&&(e[0]=this.length()),e[1]<t.text.replace(/\r/g,"").length&&(t.moveEnd("character",-1),t.moveEnd("character",e[1]-t.text.replace(/\r/g,"").length)),e[0]>0&&t.moveStart("character",e[0])),t},r.prototype._nativeSelect=function(e){e.select()},r.prototype._nativeSelection=function(){var e=this._nativeRange(),t=this.length(),i=this._doc.selection.createRange();try{return[function(e,t){var i=t.text.replace(/\r/g,"").length;if(e.compareEndPoints("StartToStart",t)<=0)return 0;if(e.compareEndPoints("StartToEnd",t)>=0)return i;for(var n=0;e.compareEndPoints("StartToStart",t)>0;++n,e.moveStart("character",-1));return n}(i,e),function(e,t){var i=t.text.replace(/\r/g,"").length;if(e.compareEndPoints("EndToEnd",t)>=0)return i;if(e.compareEndPoints("EndToStart",t)<=0)return 0;for(var n=0;e.compareEndPoints("EndToStart",t)>0;++n,e.moveEnd("character",-1));return n}(i,e)]}catch(e){return i.parentElement().sourceIndex<this._el.sourceIndex?[0,0]:[t,t]}},r.prototype._nativeGetText=function(e){return e.text},r.prototype._nativeSetText=function(e,t){t.text=e},r.prototype._nativeEOL=function(){"value"in this._el?this.text("\n"):this._nativeRange(this.bounds()).pasteHTML("\n<br/>")},r.prototype._nativeTop=function(e){var t=this._nativeRange([0,0]);return e.boundingTop-t.boundingTop},r.prototype._nativeWrap=function(e,t){var i=document.createElement("div");i.appendChild(e);var n=i.innerHTML.replace("><",">"+t.htmlText+"<");t.pasteHTML(n)},(a.prototype=new n)._nativeRange=function(e){return e||[0,this.length()]},a.prototype._nativeSelect=function(e){this._el.setSelectionRange(e[0],e[1])},a.prototype._nativeSelection=function(){return[this._el.selectionStart,this._el.selectionEnd]},a.prototype._nativeGetText=function(e){return this._el.value.substring(e[0],e[1])},a.prototype._nativeSetText=function(e,t){var i=this._el.value;this._el.value=i.substring(0,t[0])+e+i.substring(t[1])},a.prototype._nativeEOL=function(){this.text("\n")},a.prototype._nativeTop=function(e){var t=this._el.cloneNode(!0);t.style.visibility="hidden",t.style.position="absolute",this._el.parentNode.insertBefore(t,this._el),t.style.height="1px",t.value=this._el.value.slice(0,e[0]);var i=t.scrollHeight;return t.value="X",i-=t.scrollHeight,t.parentNode.removeChild(t),i},a.prototype._nativeWrap=function(){throw new Error("Cannot wrap in a text element")},(o.prototype=new n)._nativeRange=function(e){var t=this._doc.createRange();return t.selectNodeContents(this._el),e&&(l(t,e[0],!0,this._el),t.collapse(!0),l(t,e[1]-e[0],!1,this._el)),t},o.prototype._nativeSelect=function(e){this._win.getSelection().removeAllRanges(),this._win.getSelection().addRange(e)},o.prototype._nativeSelection=function(){var e=this._nativeRange();if(0==this._win.getSelection().rangeCount)return[this.length(),this.length()];var t=this._win.getSelection().getRangeAt(0);return[function(e,t){return e.compareBoundaryPoints(c,t)<=0?0:e.compareBoundaryPoints(d,t)>=0?t.toString().length:((e=e.cloneRange()).setEnd(t.endContainer,t.endOffset),t.toString().replace(/\r/g,"").length-e.toString().replace(/\r/g,"").length)}(t,e),function(e,t){return e.compareBoundaryPoints(h,t)>=0?t.toString().length:e.compareBoundaryPoints(u,t)<=0?0:((e=e.cloneRange()).setStart(t.startContainer,t.startOffset),e.toString().replace(/\r/g,"").length)}(t,e)]},o.prototype._nativeGetText=function(e){return String.prototype.slice.apply(this._el.textContent,this.bounds())},o.prototype._nativeSetText=function(e,t){t.deleteContents(),t.insertNode(this._doc.createTextNode(e)),i&&this._el.normalize()},o.prototype._nativeEOL=function(){var e=this._nativeRange(this.bounds());e.deleteContents();var t=this._doc.createElement("br");t.setAttribute("_moz_dirty",""),e.insertNode(t),e.insertNode(this._doc.createTextNode("\n")),e.collapse(!1)},o.prototype._nativeTop=function(e){if(0==this.length)return 0;if(""==e.toString()){var t=this._doc.createTextNode("X");e.insertNode(t)}var i=this._nativeRange([0,1]),n=e.getBoundingClientRect().top-i.getBoundingClientRect().top;return t&&t.parentNode.removeChild(t),n},o.prototype._nativeWrap=function(e,t){t.surroundContents(e)};var c=0,u=1,h=2,d=3;function p(){}(p.prototype=new n)._nativeRange=function(e){return e||[0,this.length()]},p.prototype._nativeSelect=function(e){},p.prototype._nativeSelection=function(){return[0,0]},p.prototype._nativeGetText=function(e){return this._el[this._textProp].substring(e[0],e[1])},p.prototype._nativeSetText=function(e,t){var i=this._el[this._textProp];this._el[this._textProp]=i.substring(0,t[0])+e+i.substring(t[1])},p.prototype._nativeEOL=function(){this.text("\n")},p.prototype._nativeTop=function(){return 0},p.prototype._nativeWrap=function(){throw new Error("Wrapping not implemented")};var f=[];bililiteRange.fn.data=function(){var e=this.element().bililiteRangeData;return void 0==e&&(e=this.element().bililiteRangeData=f.length,f[e]=new g(this)),f[e]};try{Object.defineProperty({},"foo",{});var g=function(e){Object.defineProperty(this,"values",{value:{}}),Object.defineProperty(this,"sourceRange",{value:e}),Object.defineProperty(this,"toJSON",{value:function(){var e={};for(var t in g.prototype)t in this.values&&(e[t]=this.values[t]);return e}}),Object.defineProperty(this,"all",{get:function(){var e={};for(var t in g.prototype)e[t]=this[t];return e}})};g.prototype={},Object.defineProperty(g.prototype,"values",{value:{}}),Object.defineProperty(g.prototype,"monitored",{value:{}}),bililiteRange.data=function(e,t){t=t||{};var i=Object.getOwnPropertyDescriptor(g.prototype,e)||{};"enumerable"in t&&(i.enumerable=!!t.enumerable),"enumerable"in i||(i.enumerable=!0),"value"in t&&(g.prototype.values[e]=t.value),"monitored"in t&&(g.prototype.monitored[e]=t.monitored),i.configurable=!0,i.get=function(){return e in this.values?this.values[e]:g.prototype.values[e]},i.set=function(t){this.values[e]=t,g.prototype.monitored[e]&&this.sourceRange.dispatch({type:"bililiteRangeData",bubbles:!0,detail:{name:e,value:t}})},Object.defineProperty(g.prototype,e,i)}}catch(e){(g=function(e){this.sourceRange=e}).prototype={},bililiteRange.data=function(e,t){"value"in t&&(g.prototype[e]=t.value)}}}(),Array.prototype.forEach||(Array.prototype.forEach=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)r in t&&e.call(n,t[r],r,t)})},function(e,t){var i;(i=jQuery).fn.sendkeys=function(e){return e=e.replace(/([^{])\n/g,"$1{enter}"),this.each(function(){bililiteRange(this).bounds("selection").sendkeys(e).select(),this.focus()})},i.event.special.keydown=i.event.special.keydown||{},i.event.special.keydown._default=function(e){if(e.isTrusted)return!1;if(e.ctrlKey||e.altKey||e.metaKey)return!1;if(null==e.key)return!1;var t=e.target;if(t.isContentEditable||"INPUT"==t.nodeName||"TEXTAREA"==t.nodeName){var n=e.key;return n.length>1&&"{"!=n.charAt(0)&&(n="{"+n+"}"),i(t).sendkeys(n),!0}return!1}},function(e,t,i){var n;n=function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}return i.m=e,i.c=t,i.p="",i(0)}([function(e,t,i){(function(t){"use strict";var n=function(e,t){var i=!1;if("string"==typeof e?(this.element=document.querySelector(e),i=document.querySelectorAll(e).length>1):"undefined"!=typeof e.length&&e.length>0?(this.element=e[0],i=e.length>1):this.element=e,!this.element)throw new Error("[cleave.js] Please check the element");if(i)try{console.warn("[cleave.js] Multiple input fields matched, cleave.js will only take the first one.")}catch(e){}t.initValue=this.element.value,this.properties=n.DefaultProperties.assign({},t),this.init()};n.prototype={init:function(){var e=this.properties;e.numeral||e.phone||e.creditCard||e.time||e.date||0!==e.blocksLength||e.prefix?(e.maxLength=n.Util.getMaxLength(e.blocks),this.isAndroid=n.Util.isAndroid(),this.lastInputValue="",this.onChangeListener=this.onChange.bind(this),this.onKeyDownListener=this.onKeyDown.bind(this),this.onFocusListener=this.onFocus.bind(this),this.onCutListener=this.onCut.bind(this),this.onCopyListener=this.onCopy.bind(this),this.element.addEventListener("input",this.onChangeListener),this.element.addEventListener("keydown",this.onKeyDownListener),this.element.addEventListener("focus",this.onFocusListener),this.element.addEventListener("cut",this.onCutListener),this.element.addEventListener("copy",this.onCopyListener),this.initPhoneFormatter(),this.initDateFormatter(),this.initTimeFormatter(),this.initNumeralFormatter(),(e.initValue||e.prefix&&!e.noImmediatePrefix)&&this.onInput(e.initValue)):this.onInput(e.initValue)},initNumeralFormatter:function(){var e=this.properties;e.numeral&&(e.numeralFormatter=new n.NumeralFormatter(e.numeralDecimalMark,e.numeralIntegerScale,e.numeralDecimalScale,e.numeralThousandsGroupStyle,e.numeralPositiveOnly,e.stripLeadingZeroes,e.prefix,e.signBeforePrefix,e.delimiter))},initTimeFormatter:function(){var e=this.properties;e.time&&(e.timeFormatter=new n.TimeFormatter(e.timePattern,e.timeFormat),e.blocks=e.timeFormatter.getBlocks(),e.blocksLength=e.blocks.length,e.maxLength=n.Util.getMaxLength(e.blocks))},initDateFormatter:function(){var e=this.properties;e.date&&(e.dateFormatter=new n.DateFormatter(e.datePattern,e.dateMin,e.dateMax),e.blocks=e.dateFormatter.getBlocks(),e.blocksLength=e.blocks.length,e.maxLength=n.Util.getMaxLength(e.blocks))},initPhoneFormatter:function(){var e=this.properties;if(e.phone)try{e.phoneFormatter=new n.PhoneFormatter(new e.root.Cleave.AsYouTypeFormatter(e.phoneRegionCode),e.delimiter)}catch(e){throw new Error("[cleave.js] Please include phone-type-formatter.{country}.js lib")}},onKeyDown:function(e){var t=this.properties,i=e.which||e.keyCode,r=n.Util,a=this.element.value;this.hasBackspaceSupport=this.hasBackspaceSupport||8===i,!this.hasBackspaceSupport&&r.isAndroidBackspaceKeydown(this.lastInputValue,a)&&(i=8),this.lastInputValue=a;var o=r.getPostDelimiter(a,t.delimiter,t.delimiters);t.postDelimiterBackspace=!(8!==i||!o)&&o},onChange:function(){this.onInput(this.element.value)},onFocus:function(){var e=this.properties;n.Util.fixPrefixCursor(this.element,e.prefix,e.delimiter,e.delimiters)},onCut:function(e){n.Util.checkFullSelection(this.element.value)&&(this.copyClipboardData(e),this.onInput(""))},onCopy:function(e){n.Util.checkFullSelection(this.element.value)&&this.copyClipboardData(e)},copyClipboardData:function(e){var t,i=this.properties,r=this.element.value;t=i.copyDelimiter?r:n.Util.stripDelimiters(r,i.delimiter,i.delimiters);try{e.clipboardData?e.clipboardData.setData("Text",t):window.clipboardData.setData("Text",t),e.preventDefault()}catch(e){}},onInput:function(e){var t=this.properties,i=n.Util,r=i.getPostDelimiter(e,t.delimiter,t.delimiters);return t.numeral||!t.postDelimiterBackspace||r||(e=i.headStr(e,e.length-t.postDelimiterBackspace.length)),t.phone?(t.result=!t.prefix||t.noImmediatePrefix&&!e.length?t.phoneFormatter.format(e):t.prefix+t.phoneFormatter.format(e).slice(t.prefix.length),void this.updateValueState()):t.numeral?(t.result=t.prefix&&t.noImmediatePrefix&&0===e.length?"":t.numeralFormatter.format(e),void this.updateValueState()):(t.date&&(e=t.dateFormatter.getValidatedDate(e)),t.time&&(e=t.timeFormatter.getValidatedTime(e)),e=i.stripDelimiters(e,t.delimiter,t.delimiters),e=i.getPrefixStrippedValue(e,t.prefix,t.prefixLength,t.result,t.delimiter,t.delimiters,t.noImmediatePrefix),e=t.numericOnly?i.strip(e,/[^\d]/g):e,e=t.uppercase?e.toUpperCase():e,e=t.lowercase?e.toLowerCase():e,!t.prefix||t.noImmediatePrefix&&!e.length||(e=t.prefix+e,0!==t.blocksLength)?(t.creditCard&&this.updateCreditCardPropsByValue(e),e=i.headStr(e,t.maxLength),t.result=i.getFormattedValue(e,t.blocks,t.blocksLength,t.delimiter,t.delimiters,t.delimiterLazyShow),void this.updateValueState()):(t.result=e,void this.updateValueState()))},updateCreditCardPropsByValue:function(e){var t,i=this.properties,r=n.Util;r.headStr(i.result,4)!==r.headStr(e,4)&&(t=n.CreditCardDetector.getInfo(e,i.creditCardStrictMode),i.blocks=t.blocks,i.blocksLength=i.blocks.length,i.maxLength=r.getMaxLength(i.blocks),i.creditCardType!==t.type&&(i.creditCardType=t.type,i.onCreditCardTypeChanged.call(this,i.creditCardType)))},updateValueState:function(){var e=this,t=n.Util,i=e.properties;if(e.element){var r=e.element.selectionEnd,a=i.result;r=t.getNextCursorPosition(r,e.element.value,a,i.delimiter,i.delimiters),e.isAndroid?window.setTimeout(function(){e.element.value=a,t.setSelection(e.element,r,i.document,!1),e.callOnValueChanged()},1):(e.element.value=a,t.setSelection(e.element,r,i.document,!1),e.callOnValueChanged())}},callOnValueChanged:function(){var e=this.properties;e.onValueChanged.call(this,{target:{value:e.result,rawValue:this.getRawValue()}})},setPhoneRegionCode:function(e){this.properties.phoneRegionCode=e,this.initPhoneFormatter(),this.onChange()},setRawValue:function(e){var t=this.properties;e=void 0!==e&&null!==e?e.toString():"",t.numeral&&(e=e.replace(".",t.numeralDecimalMark)),t.postDelimiterBackspace=!1,this.element.value=e,this.onInput(e)},getRawValue:function(){var e=this.properties,t=n.Util,i=this.element.value;return e.rawValueTrimPrefix&&(i=t.getPrefixStrippedValue(i,e.prefix,e.prefixLength,e.result,e.delimiter,e.delimiters)),e.numeral?e.numeralFormatter.getRawValue(i):t.stripDelimiters(i,e.delimiter,e.delimiters)},getISOFormatDate:function(){var e=this.properties;return e.date?e.dateFormatter.getISOFormatDate():""},getISOFormatTime:function(){var e=this.properties;return e.time?e.timeFormatter.getISOFormatTime():""},getFormattedValue:function(){return this.element.value},destroy:function(){this.element.removeEventListener("input",this.onChangeListener),this.element.removeEventListener("keydown",this.onKeyDownListener),this.element.removeEventListener("focus",this.onFocusListener),this.element.removeEventListener("cut",this.onCutListener),this.element.removeEventListener("copy",this.onCopyListener)},toString:function(){return"[Cleave Object]"}},n.NumeralFormatter=i(1),n.DateFormatter=i(2),n.TimeFormatter=i(3),n.PhoneFormatter=i(4),n.CreditCardDetector=i(5),n.Util=i(6),n.DefaultProperties=i(7),("object"==typeof t&&t?t:window).Cleave=n,e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict";var i=function(e,t,n,r,a,o,s,l,c){this.numeralDecimalMark=e||".",this.numeralIntegerScale=t>0?t:0,this.numeralDecimalScale=n>=0?n:2,this.numeralThousandsGroupStyle=r||i.groupStyle.thousand,this.numeralPositiveOnly=!!a,this.stripLeadingZeroes=!1!==o,this.prefix=s||""===s?s:"",this.signBeforePrefix=!!l,this.delimiter=c||""===c?c:",",this.delimiterRE=c?new RegExp("\\"+c,"g"):""};i.groupStyle={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"},i.prototype={getRawValue:function(e){return e.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")},format:function(e){var t,n,r,a,o="";switch(e=e.replace(/[A-Za-z]/g,"").replace(this.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",this.numeralPositiveOnly?"":"-").replace("M",this.numeralDecimalMark),this.stripLeadingZeroes&&(e=e.replace(/^(-)?0+(?=\d)/,"$1")),n="-"===e.slice(0,1)?"-":"",r="undefined"!=typeof this.prefix?this.signBeforePrefix?n+this.prefix:this.prefix+n:n,a=e,e.indexOf(this.numeralDecimalMark)>=0&&(a=(t=e.split(this.numeralDecimalMark))[0],o=this.numeralDecimalMark+t[1].slice(0,this.numeralDecimalScale)),"-"===n&&(a=a.slice(1)),this.numeralIntegerScale>0&&(a=a.slice(0,this.numeralIntegerScale)),this.numeralThousandsGroupStyle){case i.groupStyle.lakh:a=a.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+this.delimiter);break;case i.groupStyle.wan:a=a.replace(/(\d)(?=(\d{4})+$)/g,"$1"+this.delimiter);break;case i.groupStyle.thousand:a=a.replace(/(\d)(?=(\d{3})+$)/g,"$1"+this.delimiter)}return r+a.toString()+(this.numeralDecimalScale>0?o.toString():"")}},e.exports=i},function(e,t){"use strict";var i=function(e,t,i){this.date=[],this.blocks=[],this.datePattern=e,this.dateMin=t.split("-").reverse().map(function(e){return parseInt(e,10)}),2===this.dateMin.length&&this.dateMin.unshift(0),this.dateMax=i.split("-").reverse().map(function(e){return parseInt(e,10)}),2===this.dateMax.length&&this.dateMax.unshift(0),this.initBlocks()};i.prototype={initBlocks:function(){var e=this;e.datePattern.forEach(function(t){e.blocks.push("Y"===t?4:2)})},getISOFormatDate:function(){var e=this.date;return e[2]?e[2]+"-"+this.addLeadingZero(e[1])+"-"+this.addLeadingZero(e[0]):""},getBlocks:function(){return this.blocks},getValidatedDate:function(e){var t=this,i="";return e=e.replace(/[^\d]/g,""),t.blocks.forEach(function(n,r){if(e.length>0){var a=e.slice(0,n),o=a.slice(0,1),s=e.slice(n);switch(t.datePattern[r]){case"d":"00"===a?a="01":parseInt(o,10)>3?a="0"+o:parseInt(a,10)>31&&(a="31");break;case"m":"00"===a?a="01":parseInt(o,10)>1?a="0"+o:parseInt(a,10)>12&&(a="12")}i+=a,e=s}}),this.getFixedDateString(i)},getFixedDateString:function(e){var t,i,n,r=this,a=r.datePattern,o=[],s=0,l=0,c=0,u=0,h=0,d=0,p=!1;return 4===e.length&&"y"!==a[0].toLowerCase()&&"y"!==a[1].toLowerCase()&&(h=2-(u="d"===a[0]?0:2),t=parseInt(e.slice(u,u+2),10),i=parseInt(e.slice(h,h+2),10),o=this.getFixedDate(t,i,0)),8===e.length&&(a.forEach(function(e,t){switch(e){case"d":s=t;break;case"m":l=t;break;default:c=t}}),d=2*c,u=s<=c?2*s:2*s+2,h=l<=c?2*l:2*l+2,t=parseInt(e.slice(u,u+2),10),i=parseInt(e.slice(h,h+2),10),n=parseInt(e.slice(d,d+4),10),p=4===e.slice(d,d+4).length,o=this.getFixedDate(t,i,n)),4!==e.length||"y"!==a[0]&&"y"!==a[1]||(d=2-(h="m"===a[0]?0:2),i=parseInt(e.slice(h,h+2),10),n=parseInt(e.slice(d,d+2),10),p=2===e.slice(d,d+2).length,o=[0,i,n]),6!==e.length||"Y"!==a[0]&&"Y"!==a[1]||(d=2-.5*(h="m"===a[0]?0:4),i=parseInt(e.slice(h,h+2),10),n=parseInt(e.slice(d,d+4),10),p=4===e.slice(d,d+4).length,o=[0,i,n]),o=r.getRangeFixedDate(o),r.date=o,0===o.length?e:a.reduce(function(e,t){switch(t){case"d":return e+(0===o[0]?"":r.addLeadingZero(o[0]));case"m":return e+(0===o[1]?"":r.addLeadingZero(o[1]));case"y":return e+(p?r.addLeadingZeroForYear(o[2],!1):"");case"Y":return e+(p?r.addLeadingZeroForYear(o[2],!0):"")}},"")},getRangeFixedDate:function(e){var t=this.dateMin||[],i=this.dateMax||[];return!e.length||t.length<3&&i.length<3?e:this.datePattern.find(function(e){return"y"===e.toLowerCase()})&&0===e[2]?e:i.length&&(i[2]<e[2]||i[2]===e[2]&&(i[1]<e[1]||i[1]===e[1]&&i[0]<e[0]))?i:t.length&&(t[2]>e[2]||t[2]===e[2]&&(t[1]>e[1]||t[1]===e[1]&&t[0]>e[0]))?t:e},getFixedDate:function(e,t,i){return e=Math.min(e,31),t=Math.min(t,12),i=parseInt(i||0,10),(t<7&&t%2==0||t>8&&t%2==1)&&(e=Math.min(e,2===t?this.isLeapYear(i)?29:28:30)),[e,t,i]},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},addLeadingZero:function(e){return(e<10?"0":"")+e},addLeadingZeroForYear:function(e,t){return t?(e<10?"000":e<100?"00":e<1e3?"0":"")+e:(e<10?"0":"")+e}},e.exports=i},function(e,t){"use strict";var i=function(e,t){this.time=[],this.blocks=[],this.timePattern=e,this.timeFormat=t,this.initBlocks()};i.prototype={initBlocks:function(){var e=this;e.timePattern.forEach(function(){e.blocks.push(2)})},getISOFormatTime:function(){var e=this.time;return e[2]?this.addLeadingZero(e[0])+":"+this.addLeadingZero(e[1])+":"+this.addLeadingZero(e[2]):""},getBlocks:function(){return this.blocks},getTimeFormatOptions:function(){return"12"===String(this.timeFormat)?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}},getValidatedTime:function(e){var t=this,i="";e=e.replace(/[^\d]/g,"");var n=t.getTimeFormatOptions();return t.blocks.forEach(function(r,a){if(e.length>0){var o=e.slice(0,r),s=o.slice(0,1),l=e.slice(r);switch(t.timePattern[a]){case"h":parseInt(s,10)>n.maxHourFirstDigit?o="0"+s:parseInt(o,10)>n.maxHours&&(o=n.maxHours+"");break;case"m":case"s":parseInt(s,10)>n.maxMinutesFirstDigit?o="0"+s:parseInt(o,10)>n.maxMinutes&&(o=n.maxMinutes+"")}i+=o,e=l}}),this.getFixedTimeString(i)},getFixedTimeString:function(e){var t,i,n,r=this,a=r.timePattern,o=[],s=0,l=0,c=0,u=0,h=0,d=0;return 6===e.length&&(a.forEach(function(e,t){switch(e){case"s":s=2*t;break;case"m":l=2*t;break;case"h":c=2*t}}),d=c,h=l,u=s,t=parseInt(e.slice(u,u+2),10),i=parseInt(e.slice(h,h+2),10),n=parseInt(e.slice(d,d+2),10),o=this.getFixedTime(n,i,t)),4===e.length&&r.timePattern.indexOf("s")<0&&(a.forEach(function(e,t){switch(e){case"m":l=2*t;break;case"h":c=2*t}}),d=c,h=l,t=0,i=parseInt(e.slice(h,h+2),10),n=parseInt(e.slice(d,d+2),10),o=this.getFixedTime(n,i,t)),r.time=o,0===o.length?e:a.reduce(function(e,t){switch(t){case"s":return e+r.addLeadingZero(o[2]);case"m":return e+r.addLeadingZero(o[1]);case"h":return e+r.addLeadingZero(o[0])}},"")},getFixedTime:function(e,t,i){return i=Math.min(parseInt(i||0,10),60),t=Math.min(t,60),[e=Math.min(e,60),t,i]},addLeadingZero:function(e){return(e<10?"0":"")+e}},e.exports=i},function(e,t){"use strict";var i=function(e,t){this.delimiter=t||""===t?t:" ",this.delimiterRE=t?new RegExp("\\"+t,"g"):"",this.formatter=e};i.prototype={setFormatter:function(e){this.formatter=e},format:function(e){this.formatter.clear();for(var t,i="",n=!1,r=0,a=(e=(e=(e=e.replace(/[^\d+]/g,"")).replace(/^\+/,"B").replace(/\+/g,"").replace("B","+")).replace(this.delimiterRE,"")).length;r<a;r++)t=this.formatter.inputDigit(e.charAt(r)),/[\s()-]/g.test(t)?(i=t,n=!0):n||(i=t);return(i=i.replace(/[()]/g,"")).replace(/[\s-]/g,this.delimiter)}},e.exports=i},function(e,t){"use strict";var i={blocks:{uatp:[4,5,6],amex:[4,6,5],diners:[4,6,4],discover:[4,4,4,4],mastercard:[4,4,4,4],dankort:[4,4,4,4],instapayment:[4,4,4,4],jcb15:[4,6,5],jcb:[4,4,4,4],maestro:[4,4,4,4],visa:[4,4,4,4],mir:[4,4,4,4],unionPay:[4,4,4,4],general:[4,4,4,4]},re:{uatp:/^(?!1800)1\d{0,14}/,amex:/^3[47]\d{0,13}/,discover:/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,diners:/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,mastercard:/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,dankort:/^(5019|4175|4571)\d{0,12}/,instapayment:/^63[7-9]\d{0,13}/,jcb15:/^(?:2131|1800)\d{0,11}/,jcb:/^(?:35\d{0,2})\d{0,12}/,maestro:/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,mir:/^220[0-4]\d{0,12}/,visa:/^4\d{0,15}/,unionPay:/^62\d{0,14}/},getStrictBlocks:function(e){var t=e.reduce(function(e,t){return e+t},0);return e.concat(19-t)},getInfo:function(e,t){var n=i.blocks,r=i.re;for(var a in t=!!t,r)if(r[a].test(e)){var o=n[a];return{type:a,blocks:t?this.getStrictBlocks(o):o}}return{type:"unknown",blocks:t?this.getStrictBlocks(n.general):n.general}}};e.exports=i},function(e,t){"use strict";e.exports={noop:function(){},strip:function(e,t){return e.replace(t,"")},getPostDelimiter:function(e,t,i){if(0===i.length)return e.slice(-t.length)===t?t:"";var n="";return i.forEach(function(t){e.slice(-t.length)===t&&(n=t)}),n},getDelimiterREByDelimiter:function(e){return new RegExp(e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")},getNextCursorPosition:function(e,t,i,n,r){return t.length===e?i.length:e+this.getPositionOffset(e,t,i,n,r)},getPositionOffset:function(e,t,i,n,r){var a,o,s;return a=this.stripDelimiters(t.slice(0,e),n,r),o=this.stripDelimiters(i.slice(0,e),n,r),0!=(s=a.length-o.length)?s/Math.abs(s):0},stripDelimiters:function(e,t,i){var n=this;if(0===i.length){var r=t?n.getDelimiterREByDelimiter(t):"";return e.replace(r,"")}return i.forEach(function(t){t.split("").forEach(function(t){e=e.replace(n.getDelimiterREByDelimiter(t),"")})}),e},headStr:function(e,t){return e.slice(0,t)},getMaxLength:function(e){return e.reduce(function(e,t){return e+t},0)},getPrefixStrippedValue:function(e,t,i,n,r,a,o){if(0===i)return e;if(n.slice(0,i)!==t)return o&&!n&&e?e:"";var s=this.stripDelimiters(n,r,a);return e.slice(0,i)!==t?s.slice(i):e.slice(i)},getFirstDiffIndex:function(e,t){for(var i=0;e.charAt(i)===t.charAt(i);)if(""===e.charAt(i++))return-1;return i},getFormattedValue:function(e,t,i,n,r,a){var o,s="",l=r.length>0;return 0===i?e:(t.forEach(function(t,c){if(e.length>0){var u=e.slice(0,t),h=e.slice(t);o=l?r[a?c-1:c]||o:n,a?(c>0&&(s+=o),s+=u):(s+=u,u.length===t&&c<i-1&&(s+=o)),e=h}}),s)},fixPrefixCursor:function(e,t,i,n){if(e){var r=e.value;if(e.setSelectionRange&&t&&!(t.length+(i||n[0]||" ").length<r.length)){var a=2*r.length;setTimeout(function(){e.setSelectionRange(a,a)},1)}}},checkFullSelection:function(e){try{return(window.getSelection()||document.getSelection()||{}).toString().length===e.length}catch(e){}return!1},setSelection:function(e,t,i){if(e===this.getActiveElement(i)&&!(e&&e.value.length<=t))if(e.createTextRange){var n=e.createTextRange();n.move("character",t),n.select()}else try{e.setSelectionRange(t,t)}catch(e){console.warn("The input element type does not support selection")}},getActiveElement:function(e){var t=e.activeElement;return t&&t.shadowRoot?this.getActiveElement(t.shadowRoot):t},isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent)},isAndroidBackspaceKeydown:function(e,t){return!!(this.isAndroid()&&e&&t)&&t===e.slice(0,-1)}}},function(e,t){(function(t){"use strict";e.exports={assign:function(e,i){return(e=e||{}).creditCard=!!(i=i||{}).creditCard,e.creditCardStrictMode=!!i.creditCardStrictMode,e.creditCardType="",e.onCreditCardTypeChanged=i.onCreditCardTypeChanged||function(){},e.phone=!!i.phone,e.phoneRegionCode=i.phoneRegionCode||"AU",e.phoneFormatter={},e.time=!!i.time,e.timePattern=i.timePattern||["h","m","s"],e.timeFormat=i.timeFormat||"24",e.timeFormatter={},e.date=!!i.date,e.datePattern=i.datePattern||["d","m","Y"],e.dateMin=i.dateMin||"",e.dateMax=i.dateMax||"",e.dateFormatter={},e.numeral=!!i.numeral,e.numeralIntegerScale=i.numeralIntegerScale>0?i.numeralIntegerScale:0,e.numeralDecimalScale=i.numeralDecimalScale>=0?i.numeralDecimalScale:2,e.numeralDecimalMark=i.numeralDecimalMark||".",e.numeralThousandsGroupStyle=i.numeralThousandsGroupStyle||"thousand",e.numeralPositiveOnly=!!i.numeralPositiveOnly,e.stripLeadingZeroes=!1!==i.stripLeadingZeroes,e.signBeforePrefix=!!i.signBeforePrefix,e.numericOnly=e.creditCard||e.date||!!i.numericOnly,e.uppercase=!!i.uppercase,e.lowercase=!!i.lowercase,e.prefix=e.creditCard||e.date?"":i.prefix||"",e.noImmediatePrefix=!!i.noImmediatePrefix,e.prefixLength=e.prefix.length,e.rawValueTrimPrefix=!!i.rawValueTrimPrefix,e.copyDelimiter=!!i.copyDelimiter,e.initValue=void 0!==i.initValue&&null!==i.initValue?i.initValue.toString():"",e.delimiter=i.delimiter||""===i.delimiter?i.delimiter:i.date?"/":i.time?":":i.numeral?",":" ",e.delimiterLength=e.delimiter.length,e.delimiterLazyShow=!!i.delimiterLazyShow,e.delimiters=i.delimiters||[],e.blocks=i.blocks||[],e.blocksLength=e.blocks.length,e.root="object"==typeof t&&t?t:window,e.document=i.document||e.root.document,e.maxLength=0,e.backspace=!1,e.result="",e.onValueChanged=i.onValueChanged||function(){},e}}}).call(t,function(){return this}())}])},e.exports=n()},function(e,t){window.textAdjustSize=function(e,t,i,n){i=i||5,void 0==n&&(n=!0),e.each(function(e,r){var a,o=$(r).is("input")?$(r).val():$(r).html(),s=n?function(e){return t=o,i=$(r).css("font")||e+" "+$(r).css("fontFamily")||"12px arial",a=(n=$("<div>"+t+"</div>").css({position:"absolute",float:"left","white-space":"nowrap",visibility:"hidden",font:i}).appendTo($("body"))).width(),n.remove(),a;var t,i,n,a}:function(){return $(r).width()};if(t<0){if(!n)return console.error("widthLimit should be negative only in oneLineMode"),-1;a=function(){return $(r).width()}}else a="function"==typeof t?t:function(){return t};$(r).css("fontSize","");for(var l=parseInt($(r).css("fontSize"));s(l+"px")>a();){if(--l<i)return;$(r).css("fontSize",l+"px")}})}}]),function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=e,i.c=t,i.p="",i(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){"use strict";i(2),i(3),i(4),i(5),i(6),i(7),i(8),i(9),i(10),i(11),i(12),i(13),i(14),i(26),i(27)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,i){var n={"./button/button.css":15,"./checkbox/checkbox.css":16,"./datatable/table.css":17,"./datatable/table_rwd.css":18,"./datepicker/datepicker.css":19,"./from/from.css":20,"./radio/radio.css":21,"./rwd_menu/ib_mega_menu.css":22,"./rwd_menu/mb_menu.css":23,"./rwd_menu/mmenu.css":24,"./switch/switch.css":25};function r(e){return i(a(e))}function a(e){return n[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}r.keys=function(){return Object.keys(n)},r.resolve=a,e.exports=r,r.id=14},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){window.datepicker=function(e,t,i){if(0!=e.length){t||(t={}),i||(i="body"),t.language=t.language||"zh-TW",t.width=t.width||"100%",t.weekStart=t.weekStart||0,t.modalType=t.modalType||"noBtn_complex_panel",t.todayHighlight=t.todayHighlight||!0;var n=e.find("input");n||console.error("datepicker sould be wrapped inside a link element (a).");var r=n.attr("name");r||console.error("datepicker input element must has a name.");var a="datepicker-modal-"+r,o=e.attr("modal-title")||"";o||console.warn('datepicker wrapper has no modal-title attribute. default title is ""');var s="";s+="<div id='";var l="";l+='\' class="modal fade" tabindex="-1" role="dialog">',l+='  <div class="modal-vertical-middle">',l+='    <div class="modal-dialog" role="document">',l+='      <div class="modal-content">',l+='        <div class="modal-header">',l+='           <h4 class="modal-title ct">'+o+"</h4> ",l+="        </div>",l+='        <div class="modal-body">',l+="          ",l+='          <input class="hidden-date" type="text" style=\'display: none;\'>',l+='          <div class = "ct">',l+='            <div class="date form_date" data-date="" data-date-format="yyyy MM dd " data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">',l+="            </div>",l+="          </div>",l+="        </div>",l+='        <div class="modal-footer">',l+='      <div class="btn-group btn-group-justified">',l+='        <a href="javascript:;" class="btn btn-success cancel" data-dismiss="modal">\u53d6\u6d88</a>',l+='        <a href="javascript:;" class="btn btn-success ok" data-dismiss="modal">\u78ba\u8a8d</a>',l+="        </div>",l+="      </div>",l+="      </div>\x3c!-- /.modal-content --\x3e",l+="    </div>\x3c!-- /.modal-dialog --\x3e",l+="  </div>",l+="</div>";var c="";c+="<div id='";var u="";u+='\' class="modal fade" tabindex="-1" role="dialog">',u+='  <div class="modal-vertical-middle">',u+='    <div class="modal-dialog" role="document">',u+='      <div class="modal-content">',u+='        <div class="modal-header">',u+='          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>',u+='           <h4 class="modal-title ct">'+o+"</h4> ",u+="        </div>",u+='        <div class="modal-body">',u+="          ",u+='          <input class="hidden-date" type="text" style=\'display: none;\'>',u+='          <div class = "ct">',u+='            <div class="date form_date" data-date="" data-date-format="yyyy MM dd " data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">',u+="            </div>",u+="          </div>",u+="        </div>",u+="      </div>\x3c!-- /.modal-content --\x3e",u+="    </div>\x3c!-- /.modal-dialog --\x3e",u+="  </div>",u+="</div>";var h=Math.floor(1e4*Math.random()),d="";d+="<div id='";var p="";p+='\' class="modal fade datepicker-complex-panel" tabindex="-1" role="dialog">',p+='    <div class="modal-vertical-middle">',p+='      <div class="modal-dialog" role="document">',p+='        <div class="modal-content">',p+='          <div class="modal-header">',p+='             <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>',p+='             <h4 class="modal-title ct">'+o+"<h4> ",p+="          </div>",p+='          <div class="modal-body">',p+='              <ul class="" role="tablist">',p+='                 <li class="prev-year-btn" style="display: none;" ><i class="icon-expand_left"></i></li>',p+='                 <li class="prev-month-btn" ><i class="icon-expand_left"></i></li>',p+='                 <li role="presentation" class="input-group-btn" >',p+='                      <a class="y-link btn btn-default" href="#'+h+'-tab-y" data-toggle="tab">',p+='                          <span class="val"></span>',p+='                          <i class="icon-more_down"></i>',p+="                      </a>",p+="                 </li>",p+='                 <li role="presentation" class="input-group-btn" >',p+='                      <a class="m-link btn btn-default" href="#'+h+'-tab-m" data-toggle="tab">',p+='                          <span class="val"></span>',p+='                          <i class="icon-more_down"></i>',p+="                      </a>",p+="                 </li>",p+='                 <li role="presentation" class="input-group-btn" style="display: none;" >',p+='                      <a class="d-link btn btn-default" href="#'+h+'-tab-d" data-toggle="tab">',p+='                          <span class="val"></span>',p+='                          <i class="icon-more_down"></i>',p+="                      </a>",p+="                 </li>",p+='                 <li class="y-range-label" style="display: none;"></li>',p+='                 <li class="next-year-btn" style="display: none;" ><i class="icon-expand_right"></i></li>',p+='                 <li class="next-month-btn" ><i class="icon-expand_right"></i></li>',p+="              </ul>",p+='              <div class="tab-content">',p+='                 <div class="tab-pane" id="'+h+'-tab-y">',p+='                     <div class="date_y_only form_date" data-date="" >',p+="                     </div>",p+="                 </div>",p+='                 <div class="tab-pane" id="'+h+'-tab-m">',p+='                     <div class="date_m_only form_date" data-date="" >',p+="                     </div>",p+="                 </div>",p+='                 <div class="tab-pane active" id="'+h+'-tab-d">',p+='                     <div class="date_d_only form_date" data-date="" >',p+="                     </div>",p+="                 </div>",p+="             </div>",p+="             ",p+="         </div>",p+="       </div>\x3c!-- /.modal-content --\x3e",p+="     </div>\x3c!-- /.modal-dialog --\x3e",p+="   </div>",p+=" </div>";var f="";f+="<div id='";var g="";g+='\' class="modal fade datepicker-dateonly" tabindex="-1" role="dialog">',g+='  <div class="modal-vertical-middle">',g+='    <div class="modal-dialog" role="document">',g+='      <div class="modal-content">',g+='        <div class="modal-header">',g+='          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>',g+='           <h4 class="modal-title ct">'+o+"</h4> ",g+="        </div>",g+='        <div class="modal-body">',g+="          ",g+='          <input class="hidden-date" type="text" style=\'display: none;\'>',g+='          <div class = "ct">',g+='            <div class="date form_date" data-date="" data-date-format="yyyy MM dd " data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">',g+="            </div>",g+="          </div>",g+="        </div>",g+="      </div>\x3c!-- /.modal-content --\x3e",g+="    </div>\x3c!-- /.modal-dialog --\x3e",g+="  </div>",g+="</div>";var m="";m+="<div id='";var y="";if(y+='\' class="modal fade datepicker-dateonly" tabindex="-1" role="dialog">',y+='  <div class="modal-vertical-middle">',y+='    <div class="modal-dialog" role="document">',y+='      <div class="modal-content">',y+='        <div class="modal-header">',y+='          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>',y+='           <h4 class="modal-title ct">'+o+"</h4> ",y+='           <ul class="row">',y+='               <li class="col-xs-6">',y+='                   <a class="checkAllBtn checkbox">',y+='                       <label class="form_choose">',y+='                           <i class="txt">\u5168\u9078</i>',y+='                           <input class="form_choose-input" type="checkbox">',y+='                           <span class="form_choose-img"></span>',y+="                       </label>",y+="                   </a>",y+="               </li>",y+='               <li class="col-xs-6">',y+='                    <a class="unCheckAllBtn"><i class="icon-trash"></i>\u6e05\u9664</a>',y+="               </li>",y+="           </ul>",y+="        </div>",y+='        <div class="modal-body">',y+="          ",y+='          <input class="hidden-date" type="text" style=\'display: none;\'>',y+='          <div class = "ct">',y+='            <div class="date form_date" data-date="" data-date-format="yyyy MM dd " data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">',y+="            </div>",y+="          </div>",y+="        </div>",y+='      <div class="modal-footer">',y+='        <div class="btn-group btn-group-justified">',y+='          <a href="javascript:;" class="btn btn-success cancel" data-dismiss="modal">\u53d6\u6d88</a>',y+='          <a href="javascript:;" class="btn btn-success ok" data-dismiss="modal">\u78ba\u8a8d</a>',y+="        </div>",y+="      </div>",y+="      </div>\x3c!-- /.modal-content --\x3e",y+="    </div>\x3c!-- /.modal-dialog --\x3e",y+="  </div>",y+="</div>",Date.prototype.yyyymmdd=function(){var e=this.getMonth()+1,t=this.getDate();return[this.getFullYear(),(e>9?"":"0")+e,(t>9?"":"0")+t].join("/")},Date.prototype.yyyy=function(){return this.getFullYear()},Date.prototype.mm=function(){return this.getMonth()+1},Date.prototype.dd=function(){return this.getDate()},"withBtn_single_panel"==t.modalType)(j=$(s+a+l)).appendTo(i),$temp_val_storage=j.find(".hidden-date"),j.find(".modal-body .date").datepicker(t).on("changeDate",function(e){"years"==t.viewMode?$temp_val_storage.val(e.date.yyyy()):$temp_val_storage.val(e.date.yyyymmdd())}),j.find(".ok").click(function(){n.val($temp_val_storage.val())});else if("noBtn_single_panel"==t.modalType)(j=$(c+a+u)).appendTo(i),j.find(".modal-body .date").datepicker(t).on("changeDate",function(e){n.val("years"==t.viewMode?e.date.yyyy():e.date.yyyymmdd()),j.modal("hide")});else if("noBtn_complex_panel"==t.modalType){(j=$(d+a+p)).appendTo(i);var v,b,C,S,w=j.find(".modal-body .date_y_only"),x=j.find(".modal-body .date_m_only"),T=j.find(".modal-body .date_d_only"),k=j.find(".y-link"),E=k.find(".val"),A=j.find(".m-link"),I=A.find(".val"),D=j.find(".d-link"),B=D.find(".val"),_=j.find(".y-range-label"),M=j.find(".prev-year-btn"),P=j.find(".next-year-btn"),L=j.find(".prev-month-btn"),N=j.find(".next-month-btn"),R=!1;function O(){k.show(),A.show(),_.hide(),D.trigger("click"),S="d",U()}var U=function(){if("d"==S){N.show(),L.show();var e=new Date(v,b-1,1);t.endDate&&e.getTime()>=new Date(t.endDate).setDate(1)?N.css({opacity:0}):N.css({opacity:1}),t.startDate&&e.getTime()<=new Date(t.startDate).setDate(1)?L.css({opacity:0}):L.css({opacity:1})}else N.hide(),L.hide();"y"==S||"m"==S?(P.show(),M.show(),t.endDate&&v>=t.endDate.yyyy()?P.css({opacity:0}):P.css({opacity:1}),t.startDate&&v<=t.startDate.yyyy()?M.css({opacity:0}):M.css({opacity:1})):(P.hide(),M.hide())},V=function(e){return t.endDate&&e.getTime()>t.endDate.getTime()?(b=t.endDate.mm(),C=t.endDate.dd(),t.endDate):t.startDate&&e.getTime()<t.startDate.getTime()?(b=t.endDate.mm(),C=t.endDate.dd(),t.startDate):e};t.minViewMode="years",t.maxViewMode="decades",w.datepicker(t).on("changeDate",function(e){e.date||(e.date=new Date(v,b-1,C)),v=e.date.yyyy(),E.html(v+"\u5e74"),U(),O(),e.date.setDate(1),e.date.setMonth(b-1),e.date.setDate(Math.min(C,new Date(v,b-1,0).getDate())),e.date=V(e.date),x.datepicker("setDate",e.date)}),t.viewMode=t.minViewMode=t.maxViewMode="months",x.datepicker(t).on("changeDate",function(e){e.date||(e.date=new Date(v,b-1,C)),b=e.date.mm(),I.html(b+"\u6708"),U(),O(),e.date.setDate(Math.min(C,new Date(v,b,0).getDate())),e.date=V(e.date),R=!0,T.datepicker("setDate",e.date)}),t.viewMode=t.minViewMode=t.maxViewMode="days",T.datepicker(t).on("changeDate",function(e){e.date||(e.date=new Date(v,b-1,C)),C=e.date.dd(),D.html(C+"\u65e5"),R?R=!1:(n.val([v,b,C].join("/")),j.modal("hide"))});var F=t.defaultViewDate?t.defaultViewDate:new Date;v=F.yyyy(),b=F.mm(),C=F.dd(),w.datepicker("setDate",F),O();var z=w.find(".datepicker-years .datepicker-switch");function H(e){_.html(e.replace(/([0-9]+).?-([0-9]+).?/i,"$1\u5e74-$2\u5e74"))}z.on("DOMSubtreeModified",function(){H($(this).html())}),H(z.html()),k.click(function(e){k.hide(),A.hide(),_.show(),e||k.trigger("click"),S="y",U()}),A.click(function(e){k.show(),A.hide(),_.hide(),e||A.trigger("click"),S="m",U()}),M.click(function(){if(0!=$(this).css("opacity")){var e=new Date(v-1,b-1,C);e=V(e),v=e.yyyy(),b=e.mm(),C=e.dd(),w.datepicker("setDate",e)}}),P.click(function(){if(0!=$(this).css("opacity")){var e=new Date(v+1,b-1,C);e=V(e),v=e.yyyy(),b=e.mm(),C=e.dd(),w.datepicker("setDate",e)}}),L.click(function(){if(0!=$(this).css("opacity")){var e=b-1,t=new Date(e<=0?v-1:v,(e<=0?12:e)-1,1);t.setDate(Math.min(C,28)),t=V(t),v=t.yyyy(),b=t.mm(),C=t.dd(),w.datepicker("setDate",t)}}),N.click(function(){if(0!=$(this).css("opacity")){var e=b+1,t=new Date(e>12?v+1:v,(e>12?1:e)-1,1);t.setDate(Math.min(C,28)),t=V(t),v=t.yyyy(),b=t.mm(),C=t.dd(),w.datepicker("setDate",t)}}),E.html(v+"\u5e74"),I.html(b+"\u6708"),B.html(C+"\u65e5"),n.val([v,b,C].join("/"))}else if("noBtn_date_only"==t.modalType)(j=$(f+a+g)).appendTo(i),t.defaultViewDate=new Date(2015,2,1),j.find(".modal-body .date").datepicker(t).on("changeDate",function(e){n.val(e.date.dd()),j.modal("hide")}).datepicker("setDate",new Date(2017,1,(new Date).getDate())).datepicker("update");else{if("withBtn_date_only_multiple"!=t.modalType)return console.error("invalid modalType."),-1;var j;(j=$(m+a+y)).appendTo(i);var K=j.find('.checkAllBtn input[type="checkbox"]'),W=j.find(".unCheckAllBtn");t.multidate=!0,t.defaultViewDate=new Date(2015,2,1);var G="";j.find(".modal-body .date").datepicker(t).on("changeDate",function(e){0==e.dates.length?W.hide():W.show(),K.prop("checked",28==e.dates.length);for(var t=[],i=0;i<e.dates.length;++i)t.push(e.dates[i].dd());t=t.sort(function(e,t){return e-t}),G=t.join(", ")}),j.find(".ok").click(function(){n.val(G)});for(var q=[],Y=1;Y<=28;++Y)q.push(new Date(2015,1,Y));var X=function(e){return function(){e?j.find(".modal-body .date").datepicker("setDates",q):j.find(".modal-body .date").datepicker("clearDates")}};j.find(".checkAllBtn").click(function(){K.is(":checked")?X(!0)():X(!1)()}),W.click(X(!1)),W.hide()}e.attr("data-toggle","modal"),e.attr("data-target","#"+a)}}},function(e,t){window.buildCustomKeyboard=function(e,t,i){void 0==i&&(i={});var n,r,a,o,s,l=!1,c=!1,u=!0,h=void 0,d=$("body"),p=$("<div class='mock_cursor'> </div>"),f=$('<div class="customKeyboard" style="display:none;">   <ul class="cf">      <div class="finish" value="finish"> \u5b8c\u6210 </div>   </ul>   <ul class="cf" id="key_numbers">       <li><a value="1" class="key c49"><span>1</span></a><a value="1" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="white">1</span></a></li>       <li><a value="2" class="key c50"><span>2</span></a><a value="2" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="white">2</span></a></li>       <li><a value="3" class="key c51"><span>3</span></a><a value="3" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="white">3</span></a></li>       <li><a value="4" class="key c52"><span>4</span></a><a value="4" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="white">4</span></a></li>       <li><a value="5" class="key c53"><span>5</span></a><a value="5" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="white">5</span></a></li>       <li><a value="6" class="key c54"><span>6</span></a><a value="6" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="white">6</span></a></li>       <li><a value="7" class="key c55"><span>7</span></a><a value="7" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="white">7</span></a></li>       <li><a value="8" class="key c56"><span>8</span></a><a value="8" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="white">8</span></a></li>       <li><a value="9" class="key c57"><span>9</span></a><a value="9" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="white">9</span></a></li>       <li><a value="0" class="key c48"><span>0</span></a><a value="0" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="white">0</span></a></li>   </ul>   <ul class="cf" id="key_qwerty">       <li><a value="Q" class="key c81"><span class="alpha">q</span></a><a value="Q" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">q</span></a></li>       <li><a value="W" class="key c87"><span class="alpha">w</span></a><a value="W" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">w</span></a></li>       <li><a value="E" class="key c69"><span class="alpha">e</span></a><a value="E" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">e</span></a></li>       <li><a value="R" class="key c82"><span class="alpha">r</span></a><a value="R" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">r</span></a></li>       <li><a value="T" class="key c84"><span class="alpha">t</span></a><a value="T" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">t</span></a></li>       <li><a value="Y" class="key c89"><span class="alpha">y</span></a><a value="Y" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">y</span></a></li>       <li><a value="U" class="key c85"><span class="alpha">u</span></a><a value="U" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">u</span></a></li>       <li><a value="I" class="key c73"><span class="alpha">i</span></a><a value="I" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">i</span></a></li>       <li><a value="O" class="key c79"><span class="alpha">o</span></a><a value="O" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">o</span></a></li>       <li><a value="P" class="key c80"><span class="alpha">p</span></a><a value="P" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">p</span></a></li>   </ul>   <ul class="cf" id="key_asdfg">       <li><a value="A" class="key c65"><span class="alpha">a</span></a><a value="A" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">a</span></a></li>       <li><a value="S" class="key c83"><span class="alpha">s</span></a><a value="S" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">s</span></a></li>       <li><a value="D" class="key c68"><span class="alpha">d</span></a><a value="D" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">d</span></a></li>       <li><a value="F" class="key c70"><span class="alpha">f</span></a><a value="F" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">f</span></a></li>       <li><a value="G" class="key c71"><span class="alpha">g</span></a><a value="G" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">g</span></a></li>       <li><a value="H" class="key c72"><span class="alpha">h</span></a><a value="H" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">h</span></a></li>       <li><a value="blank" class="key c72 hide"><span class="alpha"></span></a><a value="blank" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">h</span></a></li>       <li><a value="J" class="key c74"><span class="alpha">j</span></a><a value="J" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">j</span></a></li>       <li><a value="K" class="key c75"><span class="alpha">k</span></a><a value="K" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">k</span></a></li>       <li><a value="L" class="key c76"><span class="alpha">l</span></a><a value="L" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">l</span></a></li>   </ul>   <ul class="cf" id="key_zxcvb">       <li class="first"><a value="caps" class="key c20 grey caps"><span class="alpha"></span></a></li>       <li><a value="Z" class="key c90"><span class="alpha">z</span></a><a value="Z" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">z</span></a></li>       <li><a value="X" class="key c88"><span class="alpha">x</span></a><a value="X" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">x</span></a></li>       <li><a value="blank" class="key c72 hide"><span class="alpha"></span></a><a value="blank" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">h</span></a></li>       <li><a value="C" class="key c67"><span class="alpha">c</span></a><a value="C" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">c</span></a></li>       <li><a value="V" class="key c86"><span class="alpha">v</span></a><a value="V" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">v</span></a></li>       <li><a value="B" class="key c66"><span class="alpha">b</span></a><a value="B" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">b</span></a></li>       <li><a value="N" class="key c78"><span class="alpha">n</span></a><a value="N" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">n</span></a></li>       <li><a value="M" class="key c77"><span class="alpha">m</span></a><a value="M" class="key" style="position:absolute;top:-40px;display:none;background-color:#555"><span class="alpha white">m</span></a></li>       <li><a value="backspace" class="key c46 backspace grey"><span class="alpha">&lt;</span></a></li>   </ul></div>');(r=e).attr("readonly",!0),i.fakeInput&&r.addClass("customInput"),r.addClass("customInput_keyboard"),r.wrap("<div class='customInputDiv'></div>"),n=r.attr("maxlength"),a=r.parent(),o=$("<div class='customInput_innerDiv'></div>"),s=$("<div class='customInputFakeInputDiv'></div>"),a.append(o),o.append(s),i.fakeInput&&o.append(p),"password"==i.inputType&&a.addClass("customInputDiv_pw"),t.append(f),u=!0,void 0!=i.textTransform&&("upper"==i.textTransform&&(l=!0,u=!0),"lower"==i.textTransform&&(c=!0,u=!1)),f.addClass(u?"customKeyboard_toUpper":"customKeyboard_toLower");var g=function(e){return u?c?e.toLowerCase():e.toUpperCase():l?e.toUpperCase():e.toLowerCase()},m=function(){if(!0===i.fakeInput)if("password"!=i.inputType)s.html(g(r.val()));else{for(var e="",t=0;t<r.val().length;t++)e+="\u25cf";s.html(e)}},y=function(e){$(this).off("customKeyboardUnfocus"),f.hide(),d.off("click"),r.removeClass("customInput_selected"),a.removeClass("keyboardDiv_selected"),r.trigger("blur")},v=function(){var e=r.val();r.val(""),r.trigger({type:"keydown",key:e}),m()};r.change(function(e){v()}),a.on("click",function(e){var t=$(this);e.stopPropagation(),t.is(".keyboardDiv_selected")||(d.find(".keyboardDiv_selected").trigger("customKeyboardUnfocus"),setTimeout(function(){f.show()},400),a.addClass("keyboardDiv_selected"),r.addClass("customInput_selected"),v(),t.on("customKeyboardUnfocus",y),d.on("click",function(e){$(this).find(".keyboardDiv_selected").trigger("customKeyboardUnfocus")}))}),f.on("click",function(e){e.stopPropagation()}),f.find("div").on("click",function(e){var t=$(this);"finish"==t.attr("value")&&(t.off("customKeyboardUnfocus"),f.hide(),d.off("click"),r.removeClass("customInput_selected"),a.removeClass("keyboardDiv_selected"),r.trigger("blur"))}),f.find("a").on("click",function(e){var t=$(this).attr("value");return e.stopPropagation(),"backspace"==t?(r.trigger({type:"keydown",key:t}),m()):"done"==t?a.trigger("customKeyboardUnfocus"):"caps"==t?(u?(f.removeClass("customKeyboard_toUpper"),f.addClass("customKeyboard_toLower")):(f.removeClass("customKeyboard_toLower"),f.addClass("customKeyboard_toUpper")),u=!u):void 0!=n&&r.val().length>=n||(t=g(t),"password"==i.inputType?(void 0!=h&&(clearInterval(h),h=void 0,m()),r.trigger({type:"keydown",key:t}),i.fakeInput&&(p.addClass("cursor_hidden"),s.append("<span class='animated fadeOut'>"+t+"</span>"),h=setTimeout(function(){p.removeClass("cursor_hidden"),h=void 0,m()},700))):setTimeout(function(){r.trigger({type:"keydown",key:t}),m()},0)),!1}).on("touchstart",function(e){var t=$(this).next();setTimeout(function(){t.show()})}).on("touchend",function(e){var t=$(this).next();setTimeout(function(){t.hide()},200)}),bililiteRange(e[0])}}]);var wlInitOptions={};function loadJs(e,t){var i=document.createElement("script");i.src=e,i.async=!0,i.defer=!0,i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(t&&t.apply(null,[]),i.onload=i.onreadystatechange=null,document.head.removeChild(i))},document.head.appendChild(i)}window.cordova?document.addEventListener("deviceready",function(){cordova.plugins.notification.local.on("click",function(e){localNotificationOnClick(e)}),org.owasp.esapi.ESAPI.initialize(),window.scroll(1,0)},!1):window.addEventListener&&window.addEventListener("load",function(){loadJs("./mfp/ibm-mfp-web-sdk/lib/analytics/ibmmfpfanalytics.js",function(){loadJs("./mfp/ibm-mfp-web-sdk/ibmmfpf.js",function(){"web"===WL.Client.getEnvironment()&&WL.Client.init({mfpContextRoot:"/mfp",applicationId:"com.chinatrust.mobilebank"})})}),org.owasp.esapi.ESAPI.initialize()});var wlCommonInitFlag=!1;function wlCommonInit(){wlCommonInitFlag||(startDiffTimes.push((new Date).getTime()+"_2"),wlCommonInitFlag=!0)}function handleOpenURL(e){window.initFromScript?window.initFromScript.zone.run(function(){window.initFromScript.component.handleOpenURL(e)}):function t(){window.initFromScript?window.initFromScript.zone.run(function(){window.initFromScript.component.handleOpenURL(e)}):setTimeout(function(){t()},300)}()}function localNotificationOnClick(e){console.log("--- onClick LocalNotification: "+JSON.stringify(e)),cordova.plugins.locationManager.appendToDeviceLog("--- onClick LocalNotification: "+JSON.stringify(e)),window.initFromScript?window.initFromScript.zone.run(function(){window.initFromScript.component.handleLocalNotification(e)}):function t(){window.initFromScript?window.initFromScript.zone.run(function(){window.initFromScript.component.handleLocalNotification(e)}):setTimeout(function(){t()},300)}()}function getBundleString(e,t,i){return window.initFromScript?window.initFromScript.component.getBundleString(e,t,i):t}function getServerDate(){return window.initFromScript?window.initFromScript.component.getUtils().getServerDate():null}function wllog(){}function callARView(){var e={arExperienceUrl:"www/ar/index.html",arIOSUrl:"www/ar/iosindex.html",requiredFeatures:["image_tracking"],isDeviceSupported:!1,startupConfiguration:{camera_position:"back"},initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){e.wikitudePlugin=cordova.require("com.wikitude.phonegap.WikitudePlugin.WikitudePlugin"),e.wikitudePlugin.isDeviceSupported(e.onDeviceSupported,e.onDeviceNotSupported,e.requiredFeatures),e.wikitudePlugin.setJSONObjectReceivedCallback(e.onUrlInvoke),console.log(window.cordova.platformId),"ios"==window.cordova.platformId?e.wikitudePlugin.loadARchitectWorld(e.onARExperienceLoadedSuccessful,e.onARExperienceLoadError,e.arIOSUrl,e.requiredFeatures,e.startupConfiguration):e.wikitudePlugin.loadARchitectWorld(e.onARExperienceLoadedSuccessful,e.onARExperienceLoadError,e.arExperienceUrl,e.requiredFeatures,e.startupConfiguration)},onDeviceSupported:function(){},onDeviceNotSupported:function(e){alert(e)},onARExperienceLoadedSuccessful:function(e){},onARExperienceLoadError:function(e){alert("Loading AR web view failed: "+e)},onUrlInvoke:function(t){if("close_ar"!=t.action)return window.open(t.action,"_system"),e.wikitudePlugin.close(),!1;e.wikitudePlugin.close()}};e.initialize()}Date.prototype.yyyymmdd=function(){var e=this.getMonth()+1,t=this.getDate();return[this.getFullYear(),(e>9?"":"0")+e,(t>9?"":"0")+t].join("/")},Date.prototype.yyyy=function(){return this.getFullYear()},Date.prototype.mm=function(){return this.getMonth()+1},Date.prototype.dd=function(){return this.getDate()};var insightDomain="eb.ctbcbank.com";function loadInsightLib(){loadJs("https://eb.ctbcbank.com/jscollection/WebConnector-app.js?"+(new Date).getTime(),function(){})}!function(e){"use strict";function t(e,t){if(t=t||{type:"Array"},"undefined"!=typeof process&&"number"==typeof process.pid)return function(e,t){var i=require("crypto").randomBytes(e);switch(t.type){case"Array":return[].slice.call(i);case"Buffer":return i;case"Uint8Array":for(var n=new Uint8Array(e),r=0;r<e;++r)n[r]=i.readUInt8(r);return n;default:throw new Error(t.type+" is unsupported.")}}(e,t);if(!window.crypto&&!window.msCrypto)throw new Error("Your browser does not support window.crypto.");return function(e,t){var i=new Uint8Array(e);switch((window.crypto||window.msCrypto).getRandomValues(i),t.type){case"Array":return[].slice.call(i);case"Buffer":try{new Buffer(1)}catch(e){throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new Buffer(i);case"Uint8Array":return i;default:throw new Error(t.type+" is unsupported.")}}(e,t)}"undefined"!=typeof define&&define.amd?define([],function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:e.secureRandom=t,t.randomArray=function(e){return t(e,{type:"Array"})},t.randomUint8Array=function(e){return t(e,{type:"Uint8Array"})},t.randomBuffer=function(e){return t(e,{type:"Buffer"})}}(this);var exponentStrX="9719",modulusStrX="DF63FFC2F35068BA9A964D234C3400E6394148BC69DF0DD8257340747AD73BF8514C76254F5BEA223BFF76B63840034518E0FA0A1E1905129EC69203A0873A63E5238FFE538DBEFBB64F9318C0BEEF75595DE991E004213B7FE9DA62229BDA1722B45ABAF906F26CF6D88B5BE8F18C26FCA630C6813B0D370E64E1C8D80A790F936C064A5620BFA2C6EE4B5BB962F7703A258028D53923866E43C98C36758262D6DE9D02DECFD74B211E3233924D499B864E1CA86DF012EAFFC9933A0CD2E011843B772E53C6435F78A60437E82D1677664221D01F59797D28771B2AE207EAB00E8500AA2A4FB61FF330B59FC5B699A241D9A44139CF876A74F0DE180107D7DF",exponentStrH="F3AF",modulusStrH="DEA8E2BC6E2F3890CB150B981F658D715E29FBA7C417F6BA82FC147FAFA7E445409C54E07B68BFA2BB3F233101910042DAECA97A3CFA2B465BB3E3A1AA4A98CD3290749C58453DD7D725672FE7BDA5549B800F49818EBD484C5F6DE91899ACDBC0C3F8C181D237D40B83361603910BFB934924EC6F7A2669CD0136CE484F37E2A6DFE2F7CBE58121FA5CFC8064EF1E743C13B542DD2E1AE8C8DDCBF233FC4DAAE8406F71766FF02ACE5956124E8B4F06BEB64AF2D6627594A31F04CFBBAE1B58678CCC72CF5C332E4DCE9AD4496DF25A7E86B6A9048C7B4CC9FEF5797D1F14191A4691125776C17DCB43E9061E16A9360930BF09F5B1D536390A4122DD48B77F",pinPolicyStr="0010101006123300",versionStr="2.0.0.3.20180302",errCode="",errMsg="",encPIN="",encNewPIN="",dbits;function getErrorCode(){return errCode}function getErrorMsg(){return errMsg}function getEncryptPIN(){return encPIN}function getEncryptNewPIN(){return encNewPIN}function generateRandom(e,t){var i="";if(errCode="0000",errMsg="","N"==t)"number"!=typeof e?(errCode="1001",errMsg="An error has occurred in generate the random number.",i=""):(i=Math.floor(Math.random()*Math.pow(10,e)).toString(),i=(i+="00000000").substring(0,e));else if("AN"==t)if("number"!=typeof e)errCode="1001",errMsg="An error has occurred in generate the random number.",i="";else{var n=Math.floor(Math.random()*Math.pow(10,e)).toString(),r=CTPCryptoJS.lib.WordArray.random(16);i=CTPCryptoJS.PBKDF2(n,r,{keySize:8})}return i}function makeEncryptPIN(e){var t=!1;errCode="0000",errMsg="",encPIN="";var i=generateRandom(16,"N");if(console.log("srand_num :"+i),""==i)return errCode="1035",errMsg="A random value can not be null.",t;var n=i.substring(0,8),r=i.substring(8,16);if(""==e)return errCode="1005",errMsg="Parameter error, Password not entered.",t;var a=sha256(e);if(""==a)return errCode="1008",errMsg="An error has occurred in generate the hash value.",t;var o=CTPCryptoJS.enc.Hex.parse(n+a+r),s=generateRandom(10,"AN");if(""==s)return errCode="1001",errMsg="An error has occurred in generate the random number.",t;var l=aes_enc(o,s,"CBC");if(""==l)return errCode="1002",errMsg="Symmetric key encryption error.",t;var c=rsa2048(exponentStrH,modulusStrH,s);return""==c?(errCode="1003",errMsg="Asymmetric key encryption error.",t):(encPIN=l+"|"+c,t=!0)}function makeEncryptPINClear(e){var t=!1;errCode="0000",errMsg="",encPIN="";var i=e.length;if(""==e)return errCode="1005",errMsg="Parameter error, Password not entered.",t;var n=generateRandom(i,"N");if(""==n)return errCode="1035",errMsg="A random value can not be null.",t;var r=xorEncode(n,e);if(console.log("xordata :"+r+" xordata:"+r.length),""==r)return errCode="1036",errMsg="Generate XOR ,The result is an error.",t;var a=paddy(i,2)+n+r,o=generateRandom(10,"AN");if(""==o)return errCode="1001",errMsg="An error has occurred in generate the random number.",t;var s=aes_enc(a,o,"CBC");if(""==s)return errCode="1002",errMsg="Symmetric key encryption error.",t;var l=rsa2048(exponentStrX,modulusStrX,o);return""==l?(errCode="1003",errMsg="Asymmetric key encryption error.",t):(encPIN=s+"|"+l,t=!0)}function makeEncryptChangePIN(e,t,n){var r=!1;errCode="0000",errMsg="",encPIN="",encNewPIN="";var a=generateRandom(16,"N");if(""==a)return errCode="1035",errMsg="A random value can not be null.",r;var o=a.substring(0,8),s=a.substring(8,16);if(""==e)return errCode="1006",errMsg="Parameter error, No old password entered.",r;if(""==t)return errCode="1007",errMsg="Parameter error, No new password entered.",r;if(""!=pinPolicyStr){if(16!=pinPolicyStr.length)return errCode="1009",errMsg="The new password check logic is malformed.",r;var l="abcdefghijklmnopqrstuvwxyz";if(0==pinPolicyStr.substring(0,1))for(i=0;i<t.length;i++){var c=t.substring(0+i,i+1);if(-1!=l.indexOf(c))return errCode="1028",errMsg="The password(new) you entered must not contain lowercase letters.",r}else{var u=parseInt(pinPolicyStr.substring(1,2)),h=0;for(i=0;i<t.length;i++)c=t.substring(0+i,i+1),-1!=l.indexOf(c)&&(h+=1);if(0!=u&&u>h)return errCode="1027",errMsg="The password(new) you enter must contain a sufficient number of lower case letters.",r}var d="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if(0==pinPolicyStr.substring(2,3)){for(i=0;i<t.length;i++)if(c=t.substring(0+i,i+1),-1!=d.indexOf(c))return errCode="1030",errMsg="The password(new) you entered must not contain capital letters.",r}else{var p=parseInt(pinPolicyStr.substring(3,4)),f=0;for(i=0;i<t.length;i++)c=t.substring(0+i,i+1),-1!=d.indexOf(c)&&(f+=1);if(0!=p&&p>f)return errCode="1029",errMsg="The password(new) you enter must contain a sufficient number of capital letters.",r}if(0==pinPolicyStr.substring(4,5)){for(i=0;i<t.length;i++)if(c=t.substring(0+i,i+1),-1!="0123456789".indexOf(c))return errCode="1032",errMsg="The password(new) you entered must not contain numbers.",r}else{var g=parseInt(pinPolicyStr.substring(5,6)),m=0;for(i=0;i<t.length;i++)c=t.substring(0+i,i+1),-1!=d.indexOf(c)&&(m+=1);if(0!=g&&g>m)return errCode="1031",errMsg="The password(new) you enter must contain a sufficient number of digits.",r}if(0==pinPolicyStr.substring(6,7)){for(i=0;i<t.length;i++)if(c=t.substring(0+i,i+1),-1==l.indexOf(c)&&-1==d.indexOf(c)&&-1=="0123456789".indexOf(c))return errCode="1034",errMsg="The password(new) you entered must not contain special characters",r}else{var y=parseInt(pinPolicyStr.substring(7,8)),v=0;for(i=0;i<t.length;i++)c=t.substring(0+i,i+1),-1==l.indexOf(c)&&-1==d.indexOf(c)&&-1=="0123456789".indexOf(c)&&(v+=1);if(0!=y&&y>v)return errCode="1033",errMsg="The password(new) you enter must contain a sufficient number of special characters.",r}var b=parseInt(pinPolicyStr.substring(8,10));if(t.length<b)return errCode="1012",errMsg="The password(new) length you entered is less than the minimum length allowed for the password.",r;var C=parseInt(pinPolicyStr.substring(10,12));if(t.length>C)return errCode="1013",errMsg="The password(new) length you entered is longer than the maximum allowable length for the password.",r;var S=parseInt(pinPolicyStr.substring(12,13));if(0==S){for(i=0;i<t.length;i++)if(c=t.substring(0+i,i+1),t.indexOf(c)!=t.lastIndexOf(c))return errCode="1014",errMsg="Duplicate characters are not allowed for the password(new) you enter.",r}else for(i=0;i<t.length;i++)if(c=t.substring(0+i,i+1),t.split(c).length-1>S)return errCode="1015",errMsg="The (new) password you entered exceeds the allowable number of duplicate characters.",r;var w=parseInt(pinPolicyStr.substring(13,14)),x=0;for(i=0;i<t.length;i++){c=t.substring(0+i,i+1);var T=t.substring(1+i,i+2);if(ascii(T)==ascii(c)+1?x+=1:ascii(T)==ascii(c)-1?x+=1:x=0,0==w&&x>0)return errCode="1016",errMsg="The password(new) you entered must not have consecutive characters.",r;if(x>w)return errCode="1017",errMsg="The password(new) you entered exceeds the allowable number of consecutive characters.",r;if(i+2==t.length)break}if(0==parseInt(pinPolicyStr.substring(14,15))&&e==t)return errCode="1010",errMsg="The password(new) length can not be the same as the old one.",r;if(0==parseInt(pinPolicyStr.substring(15,16))||""!=n){var k=n.split(",");for(j=0;j<k.length;j++)if(console.log(k[j]),t==k[j])return errCode="1011",errMsg="The password(new) can not be the same as the check string.",r}}var E=sha256(e);if(""==E)return errCode="1008",errMsg="An error has occurred in generate the hash value.",r;var A=CTPCryptoJS.enc.Hex.parse(A=o+E+s),I=sha256(t);if(""==I)return errCode="1008",errMsg="An error has occurred in generate the hash value.",r;var D=CTPCryptoJS.enc.Hex.parse(D=o+I+s),B=generateRandom(10,"AN");if(""==B)return errCode="1001",errMsg="An error has occurred in generate the random number.",r;var _=aes_enc(A,B,"CBC");if(""==_)return errCode="1002",errMsg="Symmetric key encryption error.",r;var M=aes_enc(D,B,"CBC");if(""==M)return errCode="1002",errMsg="Symmetric key encryption error.",r;var P=rsa2048(exponentStrH,modulusStrH,B);return""==P?(errCode="1003",errMsg="Asymmetric key encryption error.",r):(encPIN=_+"|"+P,encNewPIN=M+"|"+P,r=!0)}function makeEncryptChangePINClear(e,t,n){var r=!1;if(errCode="0000",errMsg="",encPIN="",encNewPIN="",""==e)return errCode="1006",errMsg="Parameter error, No old password entered.",r;if(""==t)return errCode="1007",errMsg="Parameter error, No new password entered.",r;if(""!=pinPolicyStr){if(16!=pinPolicyStr.length)return errCode="1009",errMsg="The new password check logic is malformed.",r;var a="abcdefghijklmnopqrstuvwxyz";if(0==pinPolicyStr.substring(0,1))for(i=0;i<t.length;i++){var o=t.substring(0+i,i+1);if(-1!=a.indexOf(o))return errCode="1028",errMsg="The password(new) you entered must not contain lowercase letters.",r}else{var s=parseInt(pinPolicyStr.substring(1,2)),l=0;for(i=0;i<t.length;i++)o=t.substring(0+i,i+1),-1!=a.indexOf(o)&&(l+=1);if(0!=s&&s>l)return errCode="1027",errMsg="The password(new) you enter must contain a sufficient number of lower case letters.",r}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if(0==pinPolicyStr.substring(2,3)){for(i=0;i<t.length;i++)if(o=t.substring(0+i,i+1),-1!=c.indexOf(o))return errCode="1030",errMsg="The password(new) you entered must not contain capital letters.",r}else{var u=parseInt(pinPolicyStr.substring(3,4)),h=0;for(i=0;i<t.length;i++)o=t.substring(0+i,i+1),-1!=c.indexOf(o)&&(h+=1);if(0!=u&&u>h)return errCode="1029",errMsg="The password(new) you enter must contain a sufficient number of capital letters.",r}if(0==pinPolicyStr.substring(4,5)){for(i=0;i<t.length;i++)if(o=t.substring(0+i,i+1),-1!="0123456789".indexOf(o))return errCode="1032",errMsg="The password(new) you entered must not contain numbers.",r}else{var d=parseInt(pinPolicyStr.substring(5,6)),p=0;for(i=0;i<t.length;i++)o=t.substring(0+i,i+1),-1!=c.indexOf(o)&&(p+=1);if(0!=d&&d>p)return errCode="1031",errMsg="The password(new) you enter must contain a sufficient number of digits.",r}if(0==pinPolicyStr.substring(6,7)){for(i=0;i<t.length;i++)if(o=t.substring(0+i,i+1),-1==a.indexOf(o)&&-1==c.indexOf(o)&&-1=="0123456789".indexOf(o))return errCode="1034",errMsg="The password(new) you entered must not contain special characters",r}else{var f=parseInt(pinPolicyStr.substring(7,8)),g=0;for(i=0;i<t.length;i++)o=t.substring(0+i,i+1),-1==a.indexOf(o)&&-1==c.indexOf(o)&&-1=="0123456789".indexOf(o)&&(g+=1);if(0!=f&&f>g)return errCode="1033",errMsg="The password(new) you enter must contain a sufficient number of special characters.",r}var m=parseInt(pinPolicyStr.substring(8,10));if(t.length<m)return errCode="1012",errMsg="The password(new) length you entered is less than the minimum length allowed for the password.",r;var y=parseInt(pinPolicyStr.substring(10,12));if(t.length>y)return errCode="1013",errMsg="The password(new) length you entered is longer than the maximum allowable length for the password.",r;var v=parseInt(pinPolicyStr.substring(12,13));if(0==v){for(i=0;i<t.length;i++)if(o=t.substring(0+i,i+1),t.indexOf(o)!=t.lastIndexOf(o))return errCode="1014",errMsg="Duplicate characters are not allowed for the password(new) you enter.",r}else for(i=0;i<t.length;i++)if(o=t.substring(0+i,i+1),t.split(o).length-1>v)return errCode="1015",errMsg="The (new) password you entered exceeds the allowable number of duplicate characters.",r;var b=parseInt(pinPolicyStr.substring(13,14)),C=0;for(i=0;i<t.length;i++){o=t.substring(0+i,i+1);var S=t.substring(1+i,i+2);if(ascii(S)==ascii(o)+1?C+=1:ascii(S)==ascii(o)-1?C+=1:C=0,0==b&&C>0)return errCode="1016",errMsg="The password(new) you entered must not have consecutive characters.",r;if(C>b)return errCode="1017",errMsg="The password(new) you entered exceeds the allowable number of consecutive characters.",r;if(i+2==t.length)break}if(0==parseInt(pinPolicyStr.substring(14,15))&&e==t)return errCode="1010",errMsg="The password(new) length can not be the same as the old one.",r;if(0==parseInt(pinPolicyStr.substring(15,16))||""!=n){var w=n.split(",");for(j=0;j<w.length;j++)if(console.log(w[j]),t==w[j])return errCode="1011",errMsg="The password(new) can not be the same as the check string.",r}}var x=generateRandom(e.length,"N");if(""==x)return errCode="1035",errMsg="A random value can not be null.",r;var T=xorEncode(x,e);if(""==T)return errCode="1036",errMsg="Generate XOR ,The result is an error",r;var k=paddy(x.length,2)+x+T,E=generateRandom(t.length,"N");if(""==E)return errCode="1035",errMsg="A random value can not be null.",r;var A=xorEncode(E,t);if(""==A)return errCode="1036",errMsg="Generate XOR ,The result is an error",r;var I=paddy(E.length,2)+E+A,D=generateRandom(10,"AN");if(""==D)return errCode="1001",errMsg="An error has occurred in generate the random number.",r;var B=aes_enc(k,D,"CBC");if(""==B)return errCode="1002",errMsg="Symmetric key encryption error.",r;var _=aes_enc(I,D,"CBC");if(""==_)return errCode="1002",errMsg="Symmetric key encryption error.",r;var M=rsa2048(exponentStrX,modulusStrX,D);return""==M?(errCode="1003",errMsg="Asymmetric key encryption error.",r):(encPIN=B+"|"+M,encNewPIN=_+"|"+M,r=!0)}function generateXOR_2(e,t){for(var i=e.length,n="",r=new ArrayBuffer(i),a=new Uint8Array(r);i-- >0;)n=e.charCodeAt(i)^t.charCodeAt(i),a[i]=n,console.log("xorRes  :"+n+" bufView: "+a[i]);var o=new TextDecoder("UTF-8");return console.log(" bufView: "+a),o.decode(a)}function generateXOR_ASCII_HEX(e,t){for(var i=e.length,n="";i-- >0;)n=paddy((e.charCodeAt(i)^t.charCodeAt(i)).toString(16),2)+n,console.log("i  :"+i+" xor :"+(e.charCodeAt(i)^t.charCodeAt(i)).toString()),console.log("res  :"+n);for(var r=n.length,a="",o="";r-- >0;)o=n.charCodeAt(r).toString(16),console.log("asciiHexver  :"+o),a+=n.charCodeAt(r).toString(16);return console.log("resAsciiHex  :"+a),a}function HEXtoASCIIHEX(e){for(var t=e.length,i="",n="";t-- >0;)n=e.charCodeAt(t).toString(16),console.log("asciiHexver  :"+n),i=e.charCodeAt(t).toString(16)+i;return i}function hex_to_ascii(e){for(var t=e.toString(),i="",n=0;n<t.length;n+=2)i+=String.fromCharCode(parseInt(t.substr(n,2),16));return i}function xorEncode(e,t){var i=[],n="";for(z=1;z<=255;z++)i[String.fromCharCode(z)]=z;for(j=z=0;z<t.length;z++)n+=String.fromCharCode(i[t.substr(z,1)]^i[e.substr(j,1)]),j=j<e.length?j+1:0;return n}function lenData(e){return e.length}function ascii(e){return e.charCodeAt(0)}function sha256(e){return null==e||""==e?"":CTPCryptoJS.SHA256(e)}function hex_to_ascii(e){for(var t=e.toString(),i="",n=0;n<t.length;n+=2)i+=String.fromCharCode(parseInt(t.substr(n,2),16));return i}function hex_to_ascii1(e){for(var t=e.toString(),i=[],n=0;n<t.length-1;n+=2)i.push(parseInt("00"+t.substr(n,2),16));return String.fromCharCode.apply(String,i)}function aes_enc(e,t,i){var n=!1,r=CTPCryptoJS.enc.Hex.parse("00000000000000000000000000000000");return null==e||""==e?"":(n=!0,null!=t&&""!=t&&(n=!0),null!=i&&""!=i&&(n=!0),1!=n?"":CTPCryptoJS.AES.encrypt(e,t,{iv:r,mode:CTPCryptoJS.mode.CBC}).ciphertext.toString())}function rsa2048(e,t,i){var n=i.toString(CTPCryptoJS.enc.Hex),r=new RSAKey;return r.setPublic(t,e),r.encrypt1(n)}var canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);function BigInteger(e,t,i){null!=e&&("number"==typeof e?this.fromNumber(e,t,i):this.fromString(e,null==t&&"string"!=typeof e?256:t))}function nbi(){return new BigInteger(null)}function am1(e,t,i,n,r,a){for(;--a>=0;){var o=t*this[e++]+i[n]+r;r=Math.floor(o/67108864),i[n++]=67108863&o}return r}function am2(e,t,i,n,r,a){for(var o=32767&t,s=t>>15;--a>=0;){var l=32767&this[e],c=this[e++]>>15,u=s*l+c*o;r=((l=o*l+((32767&u)<<15)+i[n]+(1073741823&r))>>>30)+(u>>>15)+s*c+(r>>>30),i[n++]=1073741823&l}return r}function am3(e,t,i,n,r,a){for(var o=16383&t,s=t>>14;--a>=0;){var l=16383&this[e],c=this[e++]>>14,u=s*l+c*o;r=((l=o*l+((16383&u)<<14)+i[n]+r)>>28)+(u>>14)+s*c,i[n++]=268435455&l}return r}j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(e){return BI_RM.charAt(e)}function intAt(e,t){var i=BI_RC[e.charCodeAt(t)];return null==i?-1:i}function bnpCopyTo(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}function bnpFromString(e,t){var i;if(16==t)i=4;else if(8==t)i=3;else if(256==t)i=8;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return void this.fromRadix(e,t);i=2}this.t=0,this.s=0;for(var n=e.length,r=!1,a=0;--n>=0;){var o=8==i?255&e[n]:intAt(e,n);o<0?"-"==e.charAt(n)&&(r=!0):(r=!1,0==a?this[this.t++]=o:a+i>this.DB?(this[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this[this.t++]=o>>this.DB-a):this[this.t-1]|=o<<a,(a+=i)>=this.DB&&(a-=this.DB))}8==i&&0!=(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),r&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var i,n=(1<<t)-1,r=!1,a="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(i=this[o]>>s)>0&&(r=!0,a=int2char(i));o>=0;)s<t?(i=(this[o]&(1<<s)-1)<<t-s,i|=this[--o]>>(s+=this.DB-t)):(i=this[o]>>(s-=t)&n,s<=0&&(s+=this.DB,--o)),i>0&&(r=!0),r&&(a+=int2char(i));return r?a:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var t=this.s-e.s;if(0!=t)return t;var i=this.t;if(0!=(t=i-e.t))return this.s<0?-t:t;for(;--i>=0;)if(0!=(t=this[i]-e[i]))return t;return 0}function nbits(e){var t,i=1;return 0!=(t=e>>>16)&&(e=t,i+=16),0!=(t=e>>8)&&(e=t,i+=8),0!=(t=e>>4)&&(e=t,i+=4),0!=(t=e>>2)&&(e=t,i+=2),0!=(t=e>>1)&&(e=t,i+=1),i}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(e,t){var i;for(i=this.t-1;i>=0;--i)t[i+e]=this[i];for(i=e-1;i>=0;--i)t[i]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo(e,t){for(var i=e;i<this.t;++i)t[i-e]=this[i];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo(e,t){var i,n=e%this.DB,r=this.DB-n,a=(1<<r)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)t[i+o+1]=this[i]>>r|s,s=(this[i]&a)<<n;for(i=o-1;i>=0;--i)t[i]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()}function bnpRShiftTo(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var n=e%this.DB,r=this.DB-n,a=(1<<n)-1;t[0]=this[i]>>n;for(var o=i+1;o<this.t;++o)t[o-i-1]|=(this[o]&a)<<r,t[o-i]=this[o]>>n;n>0&&(t[this.t-i-1]|=(this.s&a)<<r),t.t=this.t-i,t.clamp()}}function bnpSubTo(e,t){for(var i=0,n=0,r=Math.min(e.t,this.t);i<r;)n+=this[i]-e[i],t[i++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;i<this.t;)n+=this[i],t[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<e.t;)n-=e[i],t[i++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[i++]=this.DV+n:n>0&&(t[i++]=n),t.t=i,t.clamp()}function bnpMultiplyTo(e,t){var i=this.abs(),n=e.abs(),r=i.t;for(t.t=r+n.t;--r>=0;)t[r]=0;for(r=0;r<n.t;++r)t[r+i.t]=i.am(0,n[r],t,r,0,i.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)}function bnpSquareTo(e){for(var t=this.abs(),i=e.t=2*t.t;--i>=0;)e[i]=0;for(i=0;i<t.t-1;++i){var n=t.am(i,t[i],e,2*i,0,1);(e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,n,t.t-i-1))>=t.DV&&(e[i+t.t]-=t.DV,e[i+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(i,t[i],e,2*i,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,t,i){var n=e.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t)return null!=t&&t.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=nbi());var a=nbi(),o=this.s,s=e.s,l=this.DB-nbits(n[n.t-1]);l>0?(n.lShiftTo(l,a),r.lShiftTo(l,i)):(n.copyTo(a),r.copyTo(i));var c=a.t,u=a[c-1];if(0!=u){var h=u*(1<<this.F1)+(c>1?a[c-2]>>this.F2:0),d=this.FV/h,p=(1<<this.F1)/h,f=1<<this.F2,g=i.t,m=g-c,y=null==t?nbi():t;for(a.dlShiftTo(m,y),i.compareTo(y)>=0&&(i[i.t++]=1,i.subTo(y,i)),BigInteger.ONE.dlShiftTo(c,y),y.subTo(a,a);a.t<c;)a[a.t++]=0;for(;--m>=0;){var v=i[--g]==u?this.DM:Math.floor(i[g]*d+(i[g-1]+f)*p);if((i[g]+=a.am(0,v,i,m,0,c))<v)for(a.dlShiftTo(m,y),i.subTo(y,i);i[g]<--v;)i.subTo(y,i)}null!=t&&(i.drShiftTo(c,t),o!=s&&BigInteger.ZERO.subTo(t,t)),i.t=c,i.clamp(),l>0&&i.rShiftTo(l,i),o<0&&BigInteger.ZERO.subTo(i,i)}}}function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(BigInteger.ZERO)>0&&e.subTo(t,t),t}function Classic(e){this.m=e}function cConvert(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,t,i){e.multiplyTo(t,i),this.reduce(i)}function cSqrTo(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(BigInteger.ZERO)>0&&this.m.subTo(t,t),t}function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t}function montReduce(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var i=32767&e[t],n=i*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[i=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[i]>=e.DV;)e[i]-=e.DV,e[++i]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function montSqrTo(e,t){e.squareTo(t),this.reduce(t)}function montMulTo(e,t,i){e.multiplyTo(t,i),this.reduce(i)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(e,t){if(e>4294967295||e<1)return BigInteger.ONE;var i=nbi(),n=nbi(),r=t.convert(this),a=nbits(e)-1;for(r.copyTo(i);--a>=0;)if(t.sqrTo(i,n),(e&1<<a)>0)t.mulTo(n,r,i);else{var o=i;i=n,n=o}return t.revert(i)}function bnModPowInt(e,t){var i;return i=e<256||t.isEven()?new Classic(t):new Montgomery(t),this.exp(e,i)}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1);var rng_psize=256,rng_state,rng_pool,rng_pptr;function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(e){var t,i,n;for(t=0;t<256;++t)this.S[t]=t;for(i=0,t=0;t<256;++t)n=this.S[t],this.S[t]=this.S[i=i+this.S[t]+e[t%e.length]&255],this.S[i]=n;this.i=0,this.j=0}function ARC4next(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}function rng_seed_int(e){rng_pool[rng_pptr++]^=255&e,rng_pool[rng_pptr++]^=e>>8&255,rng_pool[rng_pptr++]^=e>>16&255,rng_pool[rng_pptr++]^=e>>24&255,rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}if(Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next,null==rng_pool){var t;if(rng_pool=new Array,rng_pptr=0,window.crypto&&window.crypto.getRandomValues){var ua=new Uint8Array(32);for(window.crypto.getRandomValues(ua),t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t]}if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t)}for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),(rng_state=prng_newstate()).init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(e){var t;for(t=0;t<e.length;++t)e[t]=rng_get_byte()}function SecureRandom(){}function parseBigInt(e,t){return new BigInteger(e,t)}function linebrk(e,t){for(var i="",n=0;n+t<e.length;)i+=e.substring(n,n+t)+"\n",n+=t;return i+e.substring(n,e.length)}function byte2Hex(e){return e<16?"0"+e.toString(16):e.toString(16)}function pkcs1pad2(e,t){if(t<e.length+11)return alert("Message too long for RSA"),null;for(var i=new Array,n=e.length-1;n>=0&&t>0;){var r=e.charCodeAt(n--);r<128?i[--t]=r:r>127&&r<2048?(i[--t]=63&r|128,i[--t]=r>>6|192):(i[--t]=63&r|128,i[--t]=r>>6&63|128,i[--t]=r>>12|224)}i[--t]=0;for(var a=new SecureRandom,o=new Array;t>2;){for(o[0]=0;0==o[0];)a.nextBytes(o);i[--t]=o[0]}return i[--t]=2,i[--t]=0,new BigInteger(i)}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(e,t){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=parseBigInt(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function RSADoPublic(e){return e.modPowInt(this.e,this.n)}function RSAEncrypt(e){var t=pkcs1pad2(e,this.n.bitLength()+7>>3);if(null==t)return null;var i=this.doPublic(t);if(null==i)return null;var n=i.toString(16);return 0==(1&n.length)?n:"0"+n}function RSAEncrypt1(e){var t=pkcs1pad2_(e,this.n.bitLength()+7>>3);if(null==t)return null;var i=this.doPublic(t);if(null==i)return null;var n=i.toString(16);return n.length>=512?n:paddingLeft("0"+n,512)}function paddingLeft(e,t){return e.length>=t?e:paddingLeft("0"+e,t)}function pkcs1pad2_(e,t){if(t<e.length/2+11)return alert("Message too long for RSA"),null;for(var i=new Array,n=e.length;n>=2&&t>0;)i[--t]=parseInt(e.slice(n-2,n),16),n-=2;i[--t]=0;for(var r=new SecureRandom,a=new Array;t>2;){for(a[0]=0;0==a[0];)r.nextBytes(a);i[--t]=a[0]}return i[--t]=2,i[--t]=0,new BigInteger(i)}function paddy(e,t,i){var n="undefined"!=typeof i?i:"0",r=new Array(1+t).join(n);return(r+e).slice(-r.length)}SecureRandom.prototype.nextBytes=rng_get_bytes,RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt,RSAKey.prototype.encrypt1=RSAEncrypt1,String.prototype.hexEncode=function(){var e,t="";for(e=0;e<this.length;e++)t+=this.charCodeAt(e).toString(16).slice(-4);return t};var CTPCryptoJS=CTPCryptoJS||function(e,t){var i={},n=i.lib={},r=function(){},a=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<i.length)for(r=0;r<e;r+=4)t[n+r>>>2]=i[r>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new o.init(i,t)}}),s=i.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(i,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(i,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,r=i.sigBytes,a=this.blockSize,s=r/(4*a);if(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),r=e.min(4*(t=s*a),r),t){for(var l=0;l<t;l+=a)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=r}return new o.init(l,r)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=h.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new d.HMAC.init(e,i).finalize(t)}}});var d=i.algo={};return i}(Math);!function(e){for(var t=CTPCryptoJS,i=(r=t.lib).WordArray,n=r.Hasher,r=t.algo,a=[],o=[],s=function(e){return 4294967296*(e-(0|e))|0},l=2,c=0;64>c;){var u;e:{for(var h=e.sqrt(u=l),d=2;d<=h;d++)if(!(u%d)){u=!1;break e}u=!0}u&&(8>c&&(a[c]=s(e.pow(l,.5))),o[c]=s(e.pow(l,1/3)),c++),l++}var p=[];r=r.SHA256=n.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=0;64>d;d++){if(16>d)p[d]=0|e[t+d];else{var f=p[d-15],g=p[d-2];p[d]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+p[d-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[d-16]}f=h+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&c^~l&u)+o[d]+p[d],g=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&r^n&a^r&a),h=u,u=c,c=l,l=s+f|0,s=a,a=r,r=n,n=f+g|0}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+s|0,i[4]=i[4]+l|0,i[5]=i[5]+c|0,i[6]=i[6]+u|0,i[7]=i[7]+h|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=e.floor(n/4294967296),i[15+(r+64>>>9<<4)]=n,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=n._createHelper(r),t.HmacSHA256=n._createHmacHelper(r)}(Math);var CTPCryptoJS=CTPCryptoJS||function(e,t){var i={},n=i.lib={},r=function(){},a=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<i.length)for(r=0;r<e;r+=4)t[n+r>>>2]=i[r>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new o.init(i,t)}}),s=i.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(i,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(i,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,r=i.sigBytes,a=this.blockSize,s=r/(4*a);if(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),r=e.min(4*(t=s*a),r),t){for(var l=0;l<t;l+=a)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=r}return new o.init(l,r)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=h.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new d.HMAC.init(e,i).finalize(t)}}});var d=i.algo={};return i}(Math);!function(){var e=CTPCryptoJS,t=(r=e.lib).WordArray,i=r.Hasher,n=[],r=e.algo.SHA1=i.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,r=i[0],a=i[1],o=i[2],s=i[3],l=i[4],c=0;80>c;c++){if(16>c)n[c]=0|e[t+c];else{var u=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=u<<1|u>>>31}u=(r<<5|r>>>27)+l+n[c],u=20>c?u+(1518500249+(a&o|~a&s)):40>c?u+(1859775393+(a^o^s)):60>c?u+((a&o|a&s|o&s)-1894007588):u+((a^o^s)-899497514),l=s,s=o,o=a<<30|a>>>2,a=r,r=u}i[0]=i[0]+r|0,i[1]=i[1]+a|0,i[2]=i[2]+o|0,i[3]=i[3]+s|0,i[4]=i[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=i._createHelper(r),e.HmacSHA1=i._createHmacHelper(r)}(),function(){var e=CTPCryptoJS.enc.Utf8;CTPCryptoJS.algo.HMAC=CTPCryptoJS.lib.Base.extend({init:function(t,i){t=this._hasher=new t.init,"string"==typeof i&&(i=e.parse(i));var n=t.blockSize,r=4*n;i.sigBytes>r&&(i=t.finalize(i)),i.clamp();for(var a=this._oKey=i.clone(),o=this._iKey=i.clone(),s=a.words,l=o.words,c=0;c<n;c++)s[c]^=1549556828,l[c]^=909522486;a.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e,t=CTPCryptoJS,i=(e=t.lib).Base,n=e.WordArray,r=(e=t.algo).HMAC,a=e.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=r.create((u=this.cfg).hasher,e),a=n.create(),o=n.create([1]),s=a.words,l=o.words,c=u.keySize,u=u.iterations;s.length<c;){var h=i.update(t).finalize(o);i.reset();for(var d=h.words,p=d.length,f=h,g=1;g<u;g++){f=i.finalize(f),i.reset();for(var m=f.words,y=0;y<p;y++)d[y]^=m[y]}a.concat(h),l[0]++}return a.sigBytes=4*c,a}});t.PBKDF2=function(e,t,i){return a.create(i).compute(e,t)}}();var CTPCryptoJS=CTPCryptoJS||function(e,t){var i={},n=i.lib={},r=function(){},a=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<i.length)for(r=0;r<e;r+=4)t[n+r>>>2]=i[r>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new o.init(i,t)}}),s=i.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(i,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(i,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,r=i.sigBytes,a=this.blockSize,s=r/(4*a);if(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),r=e.min(4*(t=s*a),r),t){for(var l=0;l<t;l+=a)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=r}return new o.init(l,r)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=h.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new d.HMAC.init(e,i).finalize(t)}}});var d=i.algo={};return i}(Math);!function(){var e=CTPCryptoJS.lib.WordArray;CTPCryptoJS.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var r=0;r<i;r+=3)for(var a=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;4>o&&r+.75*o<i;o++)e.push(n.charAt(a>>>6*(3-o)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(t){var i=t.length,n=this._map;(r=n.charAt(64))&&-1!=(r=t.indexOf(r))&&(i=r);for(var r=[],a=0,o=0;o<i;o++)if(o%4){var s=n.indexOf(t.charAt(o-1))<<o%4*2,l=n.indexOf(t.charAt(o))>>>6-o%4*2;r[a>>>2]|=(s|l)<<24-a%4*8,a++}return e.create(r,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,i,n,r,a,o){return((e=e+(t&i|~t&n)+r+o)<<a|e>>>32-a)+t}function i(e,t,i,n,r,a,o){return((e=e+(t&n|i&~n)+r+o)<<a|e>>>32-a)+t}function n(e,t,i,n,r,a,o){return((e=e+(t^i^n)+r+o)<<a|e>>>32-a)+t}function r(e,t,i,n,r,a,o){return((e=e+(i^(t|~n))+r+o)<<a|e>>>32-a)+t}for(var a=CTPCryptoJS,o=(l=a.lib).WordArray,s=l.Hasher,l=a.algo,c=[],u=0;64>u;u++)c[u]=4294967296*e.abs(e.sin(u+1))|0;l=l.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,a){for(var o=0;16>o;o++)e[s=a+o]=16711935&((d=e[s])<<8|d>>>24)|4278255360&(d<<24|d>>>8);var s,l,u,h,d=e[a+1],p=e[a+2],f=e[a+3],g=e[a+4],m=e[a+5],y=e[a+6],v=e[a+7],b=e[a+8],C=e[a+9],S=e[a+10],w=e[a+11],x=e[a+12],T=e[a+13],k=e[a+14],E=e[a+15],A=r(A=r(A=r(A=r(A=n(A=n(A=n(A=n(A=i(A=i(A=i(A=i(A=t(A=t(A=t(A=t(A=(o=this._hash.words)[1],h=t(h=o[2],u=t(u=o[3],l=t(l=o[0],A,h,u,s=e[a+0],7,c[0]),A,h,d,12,c[1]),l,A,p,17,c[2]),u,l,f,22,c[3]),h=t(h,u=t(u,l=t(l,A,h,u,g,7,c[4]),A,h,m,12,c[5]),l,A,y,17,c[6]),u,l,v,22,c[7]),h=t(h,u=t(u,l=t(l,A,h,u,b,7,c[8]),A,h,C,12,c[9]),l,A,S,17,c[10]),u,l,w,22,c[11]),h=t(h,u=t(u,l=t(l,A,h,u,x,7,c[12]),A,h,T,12,c[13]),l,A,k,17,c[14]),u,l,E,22,c[15]),h=i(h,u=i(u,l=i(l,A,h,u,d,5,c[16]),A,h,y,9,c[17]),l,A,w,14,c[18]),u,l,s,20,c[19]),h=i(h,u=i(u,l=i(l,A,h,u,m,5,c[20]),A,h,S,9,c[21]),l,A,E,14,c[22]),u,l,g,20,c[23]),h=i(h,u=i(u,l=i(l,A,h,u,C,5,c[24]),A,h,k,9,c[25]),l,A,f,14,c[26]),u,l,b,20,c[27]),h=i(h,u=i(u,l=i(l,A,h,u,T,5,c[28]),A,h,p,9,c[29]),l,A,v,14,c[30]),u,l,x,20,c[31]),h=n(h,u=n(u,l=n(l,A,h,u,m,4,c[32]),A,h,b,11,c[33]),l,A,w,16,c[34]),u,l,k,23,c[35]),h=n(h,u=n(u,l=n(l,A,h,u,d,4,c[36]),A,h,g,11,c[37]),l,A,v,16,c[38]),u,l,S,23,c[39]),h=n(h,u=n(u,l=n(l,A,h,u,T,4,c[40]),A,h,s,11,c[41]),l,A,f,16,c[42]),u,l,y,23,c[43]),h=n(h,u=n(u,l=n(l,A,h,u,C,4,c[44]),A,h,x,11,c[45]),l,A,E,16,c[46]),u,l,p,23,c[47]),h=r(h,u=r(u,l=r(l,A,h,u,s,6,c[48]),A,h,v,10,c[49]),l,A,k,15,c[50]),u,l,m,21,c[51]),h=r(h,u=r(u,l=r(l,A,h,u,x,6,c[52]),A,h,f,10,c[53]),l,A,S,15,c[54]),u,l,d,21,c[55]),h=r(h,u=r(u,l=r(l,A,h,u,b,6,c[56]),A,h,E,10,c[57]),l,A,y,15,c[58]),u,l,T,21,c[59]),h=r(h,u=r(u,l=r(l,A,h,u,g,6,c[60]),A,h,w,10,c[61]),l,A,p,15,c[62]),u,l,C,21,c[63]);o[0]=o[0]+l|0,o[1]=o[1]+A|0,o[2]=o[2]+h|0,o[3]=o[3]+u|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;i[r>>>5]|=128<<24-r%32;var a=e.floor(n/4294967296);for(i[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process(),i=(t=this._hash).words,n=0;4>n;n++)i[n]=16711935&((r=i[n])<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=s._createHelper(l),a.HmacMD5=s._createHmacHelper(l)}(Math),function(){var e,t=CTPCryptoJS,i=(e=t.lib).Base,n=e.WordArray,r=(e=t.algo).EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=(s=this.cfg).hasher.create(),r=n.create(),a=r.words,o=s.keySize,s=s.iterations;a.length<o;){l&&i.update(l);var l=i.update(e).finalize(t);i.reset();for(var c=1;c<s;c++)l=i.finalize(l),i.reset();r.concat(l)}return r.sigBytes=4*o,r}});t.EvpKDF=function(e,t,i){return r.create(i).compute(e,t)}}(),CTPCryptoJS.lib.Cipher||function(e){var t=(p=CTPCryptoJS).lib,i=t.Base,n=t.WordArray,r=t.BufferedBlockAlgorithm,a=p.enc.Base64,o=p.algo.EvpKDF,s=t.Cipher=r.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,i,n){return("string"==typeof i?f:d).encrypt(e,t,i,n)},decrypt:function(t,i,n){return("string"==typeof i?f:d).decrypt(e,t,i,n)}}}});t.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=p.mode={},c=function(e,t,i){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var r=0;r<i;r++)e[t+r]^=n[r]},u=(t.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();u.Encryptor=u.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;c.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),u.Decryptor=u.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=e.slice(t,t+n);i.decryptBlock(e,t),c.call(this,e,t,n),this._prevBlock=r}}),l=l.CBC=u,u=(p.pad={}).Pkcs7={pad:function(e,t){for(var i,r=(i=(i=4*t)-e.sigBytes%i)<<24|i<<16|i<<8|i,a=[],o=0;o<i;o+=4)a.push(r);i=n.create(a,i),e.concat(i)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=s.extend({cfg:s.cfg.extend({mode:l,padding:u}),reset:function(){s.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=t.createEncryptor;else i=t.createDecryptor,this._minBufferSize=1;this._mode=i.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=t.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),d=(l=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?n.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){var t=(e=a.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var i=n.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:i})}},t.SerializableCipher=i.extend({cfg:i.extend({format:l}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var r=e.createEncryptor(i,n);return t=r.finalize(t),h.create({ciphertext:t,key:i,iv:(r=r.cfg).iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),p=(p.kdf={}).OpenSSL={execute:function(e,t,i,r){return r||(r=n.random(8)),e=o.create({keySize:t+i}).compute(e,r),i=n.create(e.words.slice(t),4*i),e.sigBytes=4*t,h.create({key:e,iv:i,salt:r})}},f=t.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:p}),encrypt:function(e,t,i,n){return i=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize),n.iv=i.iv,(e=d.encrypt.call(this,e,t,i.key,n)).mixIn(i),e},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),i=n.kdf.execute(i,e.keySize,e.ivSize,t.salt),n.iv=i.iv,d.decrypt.call(this,e,t,i.key,n)}})}(),function(){for(var e=CTPCryptoJS,t=e.lib.BlockCipher,i=e.algo,n=[],r=[],a=[],o=[],s=[],l=[],c=[],u=[],h=[],d=[],p=[],f=0;256>f;f++)p[f]=128>f?f<<1:f<<1^283;var g=0,m=0;for(f=0;256>f;f++){var y;n[g]=y=(y=m^m<<1^m<<2^m<<3^m<<4)>>>8^255&y^99,r[y]=g;var v=p[g],b=p[v],C=p[b],S=257*p[y]^16843008*y;a[g]=S<<24|S>>>8,o[g]=S<<16|S>>>16,s[g]=S<<8|S>>>24,l[g]=S,c[y]=(S=16843009*C^65537*b^257*v^16843008*g)<<24|S>>>8,u[y]=S<<16|S>>>16,h[y]=S<<8|S>>>24,d[y]=S,g?(g=v^p[p[p[C^v]]],m^=p[p[m]]):g=m=1}var w=[0,1,2,4,8,16,32,64,128,27,54];i=i.AES=t.extend({_doReset:function(){for(var e=(i=this._key).words,t=i.sigBytes/4,i=4*((this._nRounds=t+6)+1),r=this._keySchedule=[],a=0;a<i;a++)if(a<t)r[a]=e[a];else{var o=r[a-1];a%t?6<t&&4==a%t&&(o=n[o>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o]):(o=n[(o=o<<8|o>>>24)>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o],o^=w[a/t|0]<<24),r[a]=r[a-t]^o}for(e=this._invKeySchedule=[],t=0;t<i;t++)a=i-t,o=t%4?r[a]:r[a-4],e[t]=4>t||4>=a?o:c[n[o>>>24]]^u[n[o>>>16&255]]^h[n[o>>>8&255]]^d[n[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,o,s,l,n)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,c,u,h,d,r),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,r,a,o,s){for(var l=this._nRounds,c=e[t]^i[0],u=e[t+1]^i[1],h=e[t+2]^i[2],d=e[t+3]^i[3],p=4,f=1;f<l;f++){var g=n[c>>>24]^r[u>>>16&255]^a[h>>>8&255]^o[255&d]^i[p++],m=n[u>>>24]^r[h>>>16&255]^a[d>>>8&255]^o[255&c]^i[p++],y=n[h>>>24]^r[d>>>16&255]^a[c>>>8&255]^o[255&u]^i[p++];d=n[d>>>24]^r[c>>>16&255]^a[u>>>8&255]^o[255&h]^i[p++],c=g,u=m,h=y}g=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[h>>>8&255]<<8|s[255&d])^i[p++],m=(s[u>>>24]<<24|s[h>>>16&255]<<16|s[d>>>8&255]<<8|s[255&c])^i[p++],y=(s[h>>>24]<<24|s[d>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^i[p++],d=(s[d>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&h])^i[p++],e[t]=g,e[t+1]=m,e[t+2]=y,e[t+3]=d},keySize:8}),e.AES=t._createHelper(i)}();var _iv="bf0d80b16262738f";function tripledesEnc(e,t){return t=CryptoJS.enc.Utf8.parse(t),CryptoJS.TripleDES.encrypt(e,t,{iv:CryptoJS.enc.Utf8.parse(_iv),mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString()}function tripledesDec(e,t){t=CryptoJS.enc.Utf8.parse(t);var i=CryptoJS.TripleDES.decrypt(e,t,{iv:CryptoJS.enc.Utf8.parse(_iv),mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});return CryptoJS.enc.Utf8.stringify(i)}var CryptoJS=CryptoJS||function(e,t){var i={},n=i.lib={},r=function(){},a=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<i.length)for(r=0;r<e;r+=4)t[n+r>>>2]=i[r>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new o.init(i,t)}}),s=i.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(i,t/2)}},c=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(i,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,r=i.sigBytes,a=this.blockSize,s=r/(4*a);if(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),r=e.min(4*(t=s*a),r),t){for(var l=0;l<t;l+=a)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=r}return new o.init(l,r)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=h.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new d.HMAC.init(e,i).finalize(t)}}});var d=i.algo={};return i}(Math);!function(){var e=CryptoJS.lib.WordArray;CryptoJS.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var r=0;r<i;r+=3)for(var a=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;4>o&&r+.75*o<i;o++)e.push(n.charAt(a>>>6*(3-o)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(t){var i=t.length,n=this._map;(r=n.charAt(64))&&-1!=(r=t.indexOf(r))&&(i=r);for(var r=[],a=0,o=0;o<i;o++)if(o%4){var s=n.indexOf(t.charAt(o-1))<<o%4*2,l=n.indexOf(t.charAt(o))>>>6-o%4*2;r[a>>>2]|=(s|l)<<24-a%4*8,a++}return e.create(r,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,i,n,r,a,o){return((e=e+(t&i|~t&n)+r+o)<<a|e>>>32-a)+t}function i(e,t,i,n,r,a,o){return((e=e+(t&n|i&~n)+r+o)<<a|e>>>32-a)+t}function n(e,t,i,n,r,a,o){return((e=e+(t^i^n)+r+o)<<a|e>>>32-a)+t}function r(e,t,i,n,r,a,o){return((e=e+(i^(t|~n))+r+o)<<a|e>>>32-a)+t}for(var a=CryptoJS,o=(l=a.lib).WordArray,s=l.Hasher,l=a.algo,c=[],u=0;64>u;u++)c[u]=4294967296*e.abs(e.sin(u+1))|0;l=l.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,a){for(var o=0;16>o;o++)e[s=a+o]=16711935&((d=e[s])<<8|d>>>24)|4278255360&(d<<24|d>>>8);var s,l,u,h,d=e[a+1],p=e[a+2],f=e[a+3],g=e[a+4],m=e[a+5],y=e[a+6],v=e[a+7],b=e[a+8],C=e[a+9],S=e[a+10],w=e[a+11],x=e[a+12],T=e[a+13],k=e[a+14],E=e[a+15],A=r(A=r(A=r(A=r(A=n(A=n(A=n(A=n(A=i(A=i(A=i(A=i(A=t(A=t(A=t(A=t(A=(o=this._hash.words)[1],h=t(h=o[2],u=t(u=o[3],l=t(l=o[0],A,h,u,s=e[a+0],7,c[0]),A,h,d,12,c[1]),l,A,p,17,c[2]),u,l,f,22,c[3]),h=t(h,u=t(u,l=t(l,A,h,u,g,7,c[4]),A,h,m,12,c[5]),l,A,y,17,c[6]),u,l,v,22,c[7]),h=t(h,u=t(u,l=t(l,A,h,u,b,7,c[8]),A,h,C,12,c[9]),l,A,S,17,c[10]),u,l,w,22,c[11]),h=t(h,u=t(u,l=t(l,A,h,u,x,7,c[12]),A,h,T,12,c[13]),l,A,k,17,c[14]),u,l,E,22,c[15]),h=i(h,u=i(u,l=i(l,A,h,u,d,5,c[16]),A,h,y,9,c[17]),l,A,w,14,c[18]),u,l,s,20,c[19]),h=i(h,u=i(u,l=i(l,A,h,u,m,5,c[20]),A,h,S,9,c[21]),l,A,E,14,c[22]),u,l,g,20,c[23]),h=i(h,u=i(u,l=i(l,A,h,u,C,5,c[24]),A,h,k,9,c[25]),l,A,f,14,c[26]),u,l,b,20,c[27]),h=i(h,u=i(u,l=i(l,A,h,u,T,5,c[28]),A,h,p,9,c[29]),l,A,v,14,c[30]),u,l,x,20,c[31]),h=n(h,u=n(u,l=n(l,A,h,u,m,4,c[32]),A,h,b,11,c[33]),l,A,w,16,c[34]),u,l,k,23,c[35]),h=n(h,u=n(u,l=n(l,A,h,u,d,4,c[36]),A,h,g,11,c[37]),l,A,v,16,c[38]),u,l,S,23,c[39]),h=n(h,u=n(u,l=n(l,A,h,u,T,4,c[40]),A,h,s,11,c[41]),l,A,f,16,c[42]),u,l,y,23,c[43]),h=n(h,u=n(u,l=n(l,A,h,u,C,4,c[44]),A,h,x,11,c[45]),l,A,E,16,c[46]),u,l,p,23,c[47]),h=r(h,u=r(u,l=r(l,A,h,u,s,6,c[48]),A,h,v,10,c[49]),l,A,k,15,c[50]),u,l,m,21,c[51]),h=r(h,u=r(u,l=r(l,A,h,u,x,6,c[52]),A,h,f,10,c[53]),l,A,S,15,c[54]),u,l,d,21,c[55]),h=r(h,u=r(u,l=r(l,A,h,u,b,6,c[56]),A,h,E,10,c[57]),l,A,y,15,c[58]),u,l,T,21,c[59]),h=r(h,u=r(u,l=r(l,A,h,u,g,6,c[60]),A,h,w,10,c[61]),l,A,p,15,c[62]),u,l,C,21,c[63]);o[0]=o[0]+l|0,o[1]=o[1]+A|0,o[2]=o[2]+h|0,o[3]=o[3]+u|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;i[r>>>5]|=128<<24-r%32;var a=e.floor(n/4294967296);for(i[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process(),i=(t=this._hash).words,n=0;4>n;n++)i[n]=16711935&((r=i[n])<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=s._createHelper(l),a.HmacMD5=s._createHmacHelper(l)}(Math),function(){var e,t=CryptoJS,i=(e=t.lib).Base,n=e.WordArray,r=(e=t.algo).EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=(s=this.cfg).hasher.create(),r=n.create(),a=r.words,o=s.keySize,s=s.iterations;a.length<o;){l&&i.update(l);var l=i.update(e).finalize(t);i.reset();for(var c=1;c<s;c++)l=i.finalize(l),i.reset();r.concat(l)}return r.sigBytes=4*o,r}});t.EvpKDF=function(e,t,i){return r.create(i).compute(e,t)}}(),CryptoJS.lib.Cipher||function(e){var t=(p=CryptoJS).lib,i=t.Base,n=t.WordArray,r=t.BufferedBlockAlgorithm,a=p.enc.Base64,o=p.algo.EvpKDF,s=t.Cipher=r.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,i,n){return("string"==typeof i?f:d).encrypt(e,t,i,n)},decrypt:function(t,i,n){return("string"==typeof i?f:d).decrypt(e,t,i,n)}}}});t.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=p.mode={},c=function(e,t,i){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var r=0;r<i;r++)e[t+r]^=n[r]},u=(t.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();u.Encryptor=u.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;c.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),u.Decryptor=u.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=e.slice(t,t+n);i.decryptBlock(e,t),c.call(this,e,t,n),this._prevBlock=r}}),l=l.CBC=u,u=(p.pad={}).Pkcs7={pad:function(e,t){for(var i,r=(i=(i=4*t)-e.sigBytes%i)<<24|i<<16|i<<8|i,a=[],o=0;o<i;o+=4)a.push(r);i=n.create(a,i),e.concat(i)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=s.extend({cfg:s.cfg.extend({mode:l,padding:u}),reset:function(){s.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=t.createEncryptor;else i=t.createDecryptor,this._minBufferSize=1;this._mode=i.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=t.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),d=(l=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?n.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){var t=(e=a.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var i=n.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:i})}},t.SerializableCipher=i.extend({cfg:i.extend({format:l}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var r=e.createEncryptor(i,n);return t=r.finalize(t),h.create({ciphertext:t,key:i,iv:(r=r.cfg).iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),p=(p.kdf={}).OpenSSL={execute:function(e,t,i,r){return r||(r=n.random(8)),e=o.create({keySize:t+i}).compute(e,r),i=n.create(e.words.slice(t),4*i),e.sigBytes=4*t,h.create({key:e,iv:i,salt:r})}},f=t.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:p}),encrypt:function(e,t,i,n){return i=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize),n.iv=i.iv,(e=d.encrypt.call(this,e,t,i.key,n)).mixIn(i),e},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),i=n.kdf.execute(i,e.keySize,e.ivSize,t.salt),n.iv=i.iv,d.decrypt.call(this,e,t,i.key,n)}})}(),function(){function e(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function t(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}var i,n=CryptoJS,r=(i=n.lib).WordArray,a=n.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=(i=i.BlockCipher).extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;56>i;i++){var n=o[i]-1;t[i]=e[n>>>5]>>>31-n%32&1}for(e=this._subKeys=[],n=0;16>n;n++){var r=e[n]=[],a=l[n];for(i=0;24>i;i++)r[i/6|0]|=t[(s[i]-1+a)%28]<<31-i%6,r[4+(i/6|0)]|=t[28+(s[i+24]-1+a)%28]<<31-i%6;for(r[0]=r[0]<<1|r[0]>>>31,i=1;7>i;i++)r[i]>>>=4*(i-1)+3;r[7]=r[7]<<5|r[7]>>>27}for(t=this._invSubKeys=[],i=0;16>i;i++)t[i]=e[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(i,n,r){this._lBlock=i[n],this._rBlock=i[n+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var a=0;16>a;a++){for(var o=r[a],s=this._lBlock,l=this._rBlock,h=0,d=0;8>d;d++)h|=c[d][((l^o[d])&u[d])>>>0];this._lBlock=l,this._rBlock=s^h}r=this._lBlock,this._lBlock=this._rBlock,this._rBlock=r,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),i[n]=this._lBlock,i[n+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=i._createHelper(h),a=a.TripleDES=i.extend({_doReset:function(){var e=this._key.words;this._des1=h.createEncryptor(r.create(e.slice(0,2))),this._des2=h.createEncryptor(r.create(e.slice(2,4))),this._des3=h.createEncryptor(r.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),n.TripleDES=i._createHelper(a)}(),function(e){"use strict";function t(t,i,n,r){var a={},o=e(n,i);o.addData(t),o.make(),r=r||0;var s=o.getModuleCount(),l=o.getModuleCount()+2*r;return a.text=t,a.level=i,a.version=n,a.moduleCount=l,a.isDark=function(e,t){return t-=r,!(0>(e-=r)||e>=s||0>t||t>=s)&&o.isDark(e,t)},a.addBlank=function(e,t,i,n){var r=a.isDark,o=1/l;a.isDark=function(a,s){var l=s*o,c=a*o,u=l+o,h=c+o;return r(a,s)&&(e>u||l>i||t>h||c>n)}},a}function i(e,i,n,r,a){n=Math.max(1,n||1),r=Math.min(40,r||40);for(var o=n;r>=o;o+=1)try{return t(e,i,o,a)}catch(e){}}function n(e,t,i,n,r,a,o,s){e.isDark(o,s)&&t.rect(n,r,a,a)}function r(e,t,i,n,r,a,o,s){var l=e.isDark,c=n+a,u=r+a,h=i.radius*a,d=o-1,p=o+1,f=s-1,g=s+1,m=l(o,s),y=l(d,f),v=l(d,s),b=l(d,g),C=l(o,g),S=l(p,g),w=l(p,s),x=l(p,f),T=l(o,f);m?function(e,t,i,n,r,a,o,s,l,c){e.moveTo(o?t+a:t,i),s?(e.lineTo(n-a,i),e.arcTo(n,i,n,r,a)):e.lineTo(n,i),l?(e.lineTo(n,r-a),e.arcTo(n,r,t,r,a)):e.lineTo(n,r),c?(e.lineTo(t+a,r),e.arcTo(t,r,t,i,a)):e.lineTo(t,r),o?(e.lineTo(t,i+a),e.arcTo(t,i,n,i,a)):e.lineTo(t,i)}(t,n,r,c,u,h,!v&&!T,!v&&!C,!w&&!C,!w&&!T):function(e,t,i,n,r,a,o,s,l,c){v&&T&&y&&(e.moveTo(t+a,i),e.lineTo(t,i),e.lineTo(t,i+a),e.arcTo(t,i,t+a,i,a)),s&&(e.moveTo(n-a,i),e.lineTo(n,i),e.lineTo(n,i+a),e.arcTo(n,i,n-a,i,a)),l&&(e.moveTo(n-a,r),e.lineTo(n,r),e.lineTo(n,r-a),e.arcTo(n,r,n-a,r,a)),c&&(e.moveTo(t+a,r),e.lineTo(t,r),e.lineTo(t,r-a),e.arcTo(t,r,t+a,r,a))}(t,n,r,c,u,h,0,v&&C&&b,w&&C&&S,w&&T&&x)}function a(e,t,i){var a,o,s=e.moduleCount,l=i.size/s,u=n;for(i.radius>0&&i.radius<=.5&&(u=r),t.beginPath(),a=0;s>a;a+=1)for(o=0;s>o;o+=1)u(e,t,i,i.left+o*l,i.top+a*l,l,a,o);if(c(i.fill).is("img")){t.strokeStyle="rgba(0,0,0,0.5)",t.lineWidth=2,t.stroke();var h=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",t.fill(),t.globalCompositeOperation=h,t.clip(),t.drawImage(i.fill,0,0,i.size,i.size),t.restore()}else t.fillStyle=i.fill,t.fill()}function o(e,t){var n=i(t.text,t.ecLevel,t.minVersion,t.maxVersion,t.quiet);if(!n)return null;var r=c(e).data("qrcode",n),o=r[0].getContext("2d");return function(e,t,i){c(i.background).is("img")?t.drawImage(i.background,0,0,i.size,i.size):i.background&&(t.fillStyle=i.background,t.fillRect(i.left,i.top,i.size,i.size));var n=i.mode;1===n||2===n?function(e,t,i){var n=i.size,r="bold "+i.mSize*n+"px "+i.fontname,a=c("<canvas/>")[0].getContext("2d");a.font=r;var o=a.measureText(i.label).width,s=i.mSize,l=o/n,u=(1-l)*i.mPosX,h=(1-s)*i.mPosY,d=u+l,p=h+s,f=.01;1===i.mode?e.addBlank(0,h-f,n,p+f):e.addBlank(u-f,h-f,d+f,p+f),t.fillStyle=i.fontcolor,t.font=r,t.fillText(i.label,u*n,h*n+.75*i.mSize*n)}(e,t,i):(3===n||4===n)&&function(e,t,i){var n=i.size,r=i.mSize,a=r*(i.image.naturalWidth||1)/(i.image.naturalHeight||1),o=(1-a)*i.mPosX,s=(1-r)*i.mPosY,l=o+a,c=s+r,u=.01;3===i.mode?e.addBlank(0,s-u,n,c+u):e.addBlank(o-u,s-u,l+u,c+u),t.drawImage(i.image,o*n,s*n,a*n,r*n)}(e,t,i)}(n,o,t),a(n,o,t),r}function s(e){return o(c("<canvas/>").attr("width",e.size).attr("height",e.size),e)}function l(e){return u&&"canvas"===e.render?s(e):u&&"image"===e.render?function(e){return c("<img/>").attr("src",s(e)[0].toDataURL("image/png"))}(e):function(e){var t=i(e.text,e.ecLevel,e.minVersion,e.maxVersion,e.quiet);if(!t)return null;var n,r,a=e.size,o=e.background,s=Math.floor,l=t.moduleCount,u=s(a/l),h=s(.5*(a-u*l)),d={position:"relative",left:0,top:0,padding:0,margin:0,width:a,height:a},p={position:"absolute",padding:0,margin:0,width:u,height:u,"background-color":e.fill},f=c("<div/>").data("qrcode",t).css(d);for(o&&f.css("background-color",o),n=0;l>n;n+=1)for(r=0;l>r;r+=1)t.isDark(n,r)&&c("<div/>").css(p).css({left:h+r*u,top:h+n*u}).appendTo(f);return f}(e)}var c=window.jQuery,u=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),h={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:0,quiet:0,mode:0,mSize:.1,mPosX:.5,mPosY:.5,label:"no label",fontname:"sans",fontcolor:"#000",image:null};c.fn.qrcode=function(e){var t=c.extend({},h,e);return this.each(function(e,i){"canvas"===i.nodeName.toLowerCase()?o(i,t):c(i).append(l(t))})}}(function(){var e=function(){function e(t,i){if("undefined"==typeof t.length)throw new Error(t.length+"/"+i);var n=function(){for(var e=0;e<t.length&&0==t[e];)e+=1;for(var n=new Array(t.length-e+i),r=0;r<t.length-e;r+=1)n[r]=t[r+e];return n}(),a={getAt:function(e){return n[e]},getLength:function(){return n.length},multiply:function(t){for(var i=new Array(a.getLength()+t.getLength()-1),n=0;n<a.getLength();n+=1)for(var o=0;o<t.getLength();o+=1)i[n+o]^=r.gexp(r.glog(a.getAt(n))+r.glog(t.getAt(o)));return e(i,0)},mod:function(t){if(a.getLength()-t.getLength()<0)return a;for(var i=r.glog(a.getAt(0))-r.glog(t.getAt(0)),n=new Array(a.getLength()),o=0;o<a.getLength();o+=1)n[o]=a.getAt(o);for(o=0;o<t.getLength();o+=1)n[o]^=r.gexp(r.glog(t.getAt(o))+i);return e(n,0).mod(t)}};return a}var t=function(t,r){var l=t,c=i[r],h=null,d=0,p=null,f=new Array,g={},m=function(e,t){h=function(e){for(var t=new Array(e),i=0;e>i;i+=1){t[i]=new Array(e);for(var n=0;e>n;n+=1)t[i][n]=null}return t}(d=4*l+17),y(0,0),y(d-7,0),y(0,d-7),b(),v(),S(e,t),l>=7&&C(e),null==p&&(p=T(l,c,f)),w(p,t)},y=function(e,t){for(var i=-1;7>=i;i+=1)if(!(-1>=e+i||e+i>=d))for(var n=-1;7>=n;n+=1)-1>=t+n||t+n>=d||(h[e+i][t+n]=i>=0&&6>=i&&(0==n||6==n)||n>=0&&6>=n&&(0==i||6==i)||i>=2&&4>=i&&n>=2&&4>=n)},v=function(){for(var e=8;d-8>e;e+=1)null==h[e][6]&&(h[e][6]=e%2==0);for(var t=8;d-8>t;t+=1)null==h[6][t]&&(h[6][t]=t%2==0)},b=function(){for(var e=n.getPatternPosition(l),t=0;t<e.length;t+=1)for(var i=0;i<e.length;i+=1){var r=e[t],a=e[i];if(null==h[r][a])for(var o=-2;2>=o;o+=1)for(var s=-2;2>=s;s+=1)h[r+o][a+s]=-2==o||2==o||-2==s||2==s||0==o&&0==s}},C=function(e){for(var t=n.getBCHTypeNumber(l),i=0;18>i;i+=1){var r=!e&&1==(t>>i&1);h[Math.floor(i/3)][i%3+d-8-3]=r}for(i=0;18>i;i+=1)r=!e&&1==(t>>i&1),h[i%3+d-8-3][Math.floor(i/3)]=r},S=function(e,t){for(var i=n.getBCHTypeInfo(c<<3|t),r=0;15>r;r+=1){var a=!e&&1==(i>>r&1);6>r?h[r][8]=a:8>r?h[r+1][8]=a:h[d-15+r][8]=a}for(r=0;15>r;r+=1)a=!e&&1==(i>>r&1),8>r?h[8][d-r-1]=a:9>r?h[8][15-r-1+1]=a:h[8][15-r-1]=a;h[d-8][8]=!e},w=function(e,t){for(var i=-1,r=d-1,a=7,o=0,s=n.getMaskFunction(t),l=d-1;l>0;l-=2)for(6==l&&(l-=1);;){for(var c=0;2>c;c+=1)if(null==h[r][l-c]){var u=!1;o<e.length&&(u=1==(e[o]>>>a&1)),s(r,l-c)&&(u=!u),h[r][l-c]=u,-1==(a-=1)&&(o+=1,a=7)}if(0>(r+=i)||r>=d){r-=i,i=-i;break}}},x=function(t,i){for(var r=0,a=0,o=0,s=new Array(i.length),l=new Array(i.length),c=0;c<i.length;c+=1){var u=i[c].dataCount,h=i[c].totalCount-u;a=Math.max(a,u),o=Math.max(o,h),s[c]=new Array(u);for(var d=0;d<s[c].length;d+=1)s[c][d]=255&t.getBuffer()[d+r];r+=u;var p=n.getErrorCorrectPolynomial(h),f=e(s[c],p.getLength()-1).mod(p);for(l[c]=new Array(p.getLength()-1),d=0;d<l[c].length;d+=1){var g=d+f.getLength()-l[c].length;l[c][d]=g>=0?f.getAt(g):0}}var m=0;for(d=0;d<i.length;d+=1)m+=i[d].totalCount;var y=new Array(m),v=0;for(d=0;a>d;d+=1)for(c=0;c<i.length;c+=1)d<s[c].length&&(y[v]=s[c][d],v+=1);for(d=0;o>d;d+=1)for(c=0;c<i.length;c+=1)d<l[c].length&&(y[v]=l[c][d],v+=1);return y},T=function(e,t,i){for(var r=a.getRSBlocks(e,t),s=o(),l=0;l<i.length;l+=1){var c=i[l];s.put(c.getMode(),4),s.put(c.getLength(),n.getLengthInBits(c.getMode(),e)),c.write(s)}var u=0;for(l=0;l<r.length;l+=1)u+=r[l].dataCount;if(s.getLengthInBits()>8*u)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*u+")");for(s.getLengthInBits()+4<=8*u&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*u||(s.put(236,8),s.getLengthInBits()>=8*u));)s.put(17,8);return x(s,r)};return g.addData=function(e){var t=s(e);f.push(t),p=null},g.isDark=function(e,t){if(0>e||e>=d||0>t||t>=d)throw new Error(e+","+t);return h[e][t]},g.getModuleCount=function(){return d},g.make=function(){m(!1,function(){for(var e=0,t=0,i=0;8>i;i+=1){m(!0,i);var r=n.getLostPoint(g);(0==i||e>r)&&(e=r,t=i)}return t}())},g.createTableTag=function(e,t){e=e||2;var i="";i+='<table style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: "+(t="undefined"==typeof t?4*e:t)+"px;",i+='">',i+="<tbody>";for(var n=0;n<g.getModuleCount();n+=1){i+="<tr>";for(var r=0;r<g.getModuleCount();r+=1)i+='<td style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: 0px;",i+=" width: "+e+"px;",i+=" height: "+e+"px;",i+=" background-color: ",i+=g.isDark(n,r)?"#000000":"#ffffff",i+=";",i+='"/>';i+="</tr>"}return(i+="</tbody>")+"</table>"},g.createImgTag=function(e,t){e=e||2,t="undefined"==typeof t?4*e:t;var i=g.getModuleCount()*e+2*t,n=t,r=i-t;return u(i,i,function(t,i){if(t>=n&&r>t&&i>=n&&r>i){var a=Math.floor((t-n)/e),o=Math.floor((i-n)/e);return g.isDark(o,a)?0:1}return 1})},g};t.stringToBytes=function(e){for(var t=new Array,i=0;i<e.length;i+=1){var n=e.charCodeAt(i);t.push(255&n)}return t},t.createStringToBytes=function(e,t){var i=function(){for(var i=c(e),n=function(){var e=i.read();if(-1==e)throw new Error;return e},r=0,a={};;){var o=i.read();if(-1==o)break;var s=n(),l=n(),u=n();a[String.fromCharCode(o<<8|s)]=l<<8|u,r+=1}if(r!=t)throw new Error(r+" != "+t);return a}(),n="?".charCodeAt(0);return function(e){for(var t=new Array,r=0;r<e.length;r+=1){var a=e.charCodeAt(r);if(128>a)t.push(a);else{var o=i[e.charAt(r)];"number"==typeof o?(255&o)==o?t.push(o):(t.push(o>>>8),t.push(255&o)):t.push(n)}}return t}};var i={L:1,M:0,Q:3,H:2},n=function(){var t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i=1335,n=7973,a={},o=function(e){for(var t=0;0!=e;)t+=1,e>>>=1;return t};return a.getBCHTypeInfo=function(e){for(var t=e<<10;o(t)-o(i)>=0;)t^=i<<o(t)-o(i);return 21522^(e<<10|t)},a.getBCHTypeNumber=function(e){for(var t=e<<12;o(t)-o(n)>=0;)t^=n<<o(t)-o(n);return e<<12|t},a.getPatternPosition=function(e){return t[e-1]},a.getMaskFunction=function(e){switch(e){case 0:return function(e,t){return(e+t)%2==0};case 1:return function(e,t){return e%2==0};case 2:return function(e,t){return t%3==0};case 3:return function(e,t){return(e+t)%3==0};case 4:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case 5:return function(e,t){return e*t%2+e*t%3==0};case 6:return function(e,t){return(e*t%2+e*t%3)%2==0};case 7:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw new Error("bad maskPattern:"+e)}},a.getErrorCorrectPolynomial=function(t){for(var i=e([1],0),n=0;t>n;n+=1)i=i.multiply(e([1,r.gexp(n)],0));return i},a.getLengthInBits=function(e,t){if(t>=1&&10>t)switch(e){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw new Error("mode:"+e)}else if(27>t)switch(e){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw new Error("mode:"+e)}else{if(!(41>t))throw new Error("type:"+t);switch(e){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw new Error("mode:"+e)}}},a.getLostPoint=function(e){for(var t=e.getModuleCount(),i=0,n=0;t>n;n+=1)for(var r=0;t>r;r+=1){for(var a=0,o=e.isDark(n,r),s=-1;1>=s;s+=1)if(!(0>n+s||n+s>=t))for(var l=-1;1>=l;l+=1)0>r+l||r+l>=t||(0!=s||0!=l)&&o==e.isDark(n+s,r+l)&&(a+=1);a>5&&(i+=3+a-5)}for(n=0;t-1>n;n+=1)for(r=0;t-1>r;r+=1){var c=0;e.isDark(n,r)&&(c+=1),e.isDark(n+1,r)&&(c+=1),e.isDark(n,r+1)&&(c+=1),e.isDark(n+1,r+1)&&(c+=1),(0==c||4==c)&&(i+=3)}for(n=0;t>n;n+=1)for(r=0;t-6>r;r+=1)e.isDark(n,r)&&!e.isDark(n,r+1)&&e.isDark(n,r+2)&&e.isDark(n,r+3)&&e.isDark(n,r+4)&&!e.isDark(n,r+5)&&e.isDark(n,r+6)&&(i+=40);for(r=0;t>r;r+=1)for(n=0;t-6>n;n+=1)e.isDark(n,r)&&!e.isDark(n+1,r)&&e.isDark(n+2,r)&&e.isDark(n+3,r)&&e.isDark(n+4,r)&&!e.isDark(n+5,r)&&e.isDark(n+6,r)&&(i+=40);var u=0;for(r=0;t>r;r+=1)for(n=0;t>n;n+=1)e.isDark(n,r)&&(u+=1);return i+Math.abs(100*u/t/t-50)/5*10},a}(),r=function(){for(var e=new Array(256),t=new Array(256),i=0;8>i;i+=1)e[i]=1<<i;for(i=8;256>i;i+=1)e[i]=e[i-4]^e[i-5]^e[i-6]^e[i-8];for(i=0;255>i;i+=1)t[e[i]]=i;return{glog:function(e){if(1>e)throw new Error("glog("+e+")");return t[e]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return e[t]}}}(),a=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var i={};return i.totalCount=e,i.dataCount=t,i},n={},r=function(t,n){switch(n){case i.L:return e[4*(t-1)+0];case i.M:return e[4*(t-1)+1];case i.Q:return e[4*(t-1)+2];case i.H:return e[4*(t-1)+3];default:return}};return n.getRSBlocks=function(e,i){var n=r(e,i);if("undefined"==typeof n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+i);for(var a=n.length/3,o=new Array,s=0;a>s;s+=1)for(var l=n[3*s+0],c=n[3*s+1],u=n[3*s+2],h=0;l>h;h+=1)o.push(t(c,u));return o},n}(),o=function(){var e=new Array,t=0,i={getBuffer:function(){return e},getAt:function(t){var i=Math.floor(t/8);return 1==(e[i]>>>7-t%8&1)},put:function(e,t){for(var n=0;t>n;n+=1)i.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return t},putBit:function(i){var n=Math.floor(t/8);e.length<=n&&e.push(0),i&&(e[n]|=128>>>t%8),t+=1}};return i},s=function(e){var i=t.stringToBytes(e);return{getMode:function(){return 4},getLength:function(e){return i.length},write:function(e){for(var t=0;t<i.length;t+=1)e.put(i[t],8)}}},l=function(){var e=new Array,t={writeByte:function(t){e.push(255&t)},writeShort:function(e){t.writeByte(e),t.writeByte(e>>>8)},writeBytes:function(e,i,n){i=i||0,n=n||e.length;for(var r=0;n>r;r+=1)t.writeByte(e[r+i])},writeString:function(e){for(var i=0;i<e.length;i+=1)t.writeByte(e.charCodeAt(i))},toByteArray:function(){return e},toString:function(){var t="";t+="[";for(var i=0;i<e.length;i+=1)i>0&&(t+=","),t+=e[i];return t+"]"}};return t},c=function(e){var t=e,i=0,n=0,r=0,a={read:function(){for(;8>r;){if(i>=t.length){if(0==r)return-1;throw new Error("unexpected end of file./"+r)}var e=t.charAt(i);if(i+=1,"="==e)return r=0,-1;e.match(/^\s$/)||(n=n<<6|o(e.charCodeAt(0)),r+=6)}var a=n>>>r-8&255;return r-=8,a}},o=function(e){if(e>=65&&90>=e)return e-65;if(e>=97&&122>=e)return e-97+26;if(e>=48&&57>=e)return e-48+52;if(43==e)return 62;if(47==e)return 63;throw new Error("c:"+e)};return a},u=function(e,t,i,n){for(var r=function(e,t){var i=e,n=t,r=new Array(e*t),a={setPixel:function(e,t,n){r[t*i+e]=n},write:function(e){e.writeString("GIF87a"),e.writeShort(i),e.writeShort(n),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(i),e.writeShort(n),e.writeByte(0);var t=o(2);e.writeByte(2);for(var r=0;t.length-r>255;)e.writeByte(255),e.writeBytes(t,r,255),r+=255;e.writeByte(t.length-r),e.writeBytes(t,r,t.length-r),e.writeByte(0),e.writeString(";")}},o=function(e){for(var t=1<<e,i=1+(1<<e),n=e+1,a=s(),o=0;t>o;o+=1)a.add(String.fromCharCode(o));a.add(String.fromCharCode(t)),a.add(String.fromCharCode(i));var c=l(),u=function(e){var t=c,i=0,n=0;return{write:function(e,r){if(e>>>r!=0)throw new Error("length over");for(;i+r>=8;)t.writeByte(255&(e<<i|n)),r-=8-i,e>>>=8-i,n=0,i=0;n|=e<<i,i+=r},flush:function(){i>0&&t.writeByte(n)}}}();u.write(t,n);var h=0,d=String.fromCharCode(r[h]);for(h+=1;h<r.length;){var p=String.fromCharCode(r[h]);h+=1,a.contains(d+p)?d+=p:(u.write(a.indexOf(d),n),a.size()<4095&&(a.size()==1<<n&&(n+=1),a.add(d+p)),d=p)}return u.write(a.indexOf(d),n),u.write(i,n),u.flush(),c.toByteArray()},s=function(){var e={},t=0,i={add:function(n){if(i.contains(n))throw new Error("dup key:"+n);e[n]=t,t+=1},size:function(){return t},indexOf:function(t){return e[t]},contains:function(t){return"undefined"!=typeof e[t]}};return i};return a}(e,t),a=0;t>a;a+=1)for(var o=0;e>o;o+=1)r.setPixel(o,a,i(o,a));var s=l();r.write(s);for(var c=function(){var e=0,t=0,i=0,n="",r={},a=function(e){n+=String.fromCharCode(o(63&e))},o=function(e){if(0>e);else{if(26>e)return 65+e;if(52>e)return e-26+97;if(62>e)return e-52+48;if(62==e)return 43;if(63==e)return 47}throw new Error("n:"+e)};return r.writeByte=function(n){for(e=e<<8|255&n,t+=8,i+=1;t>=6;)a(e>>>t-6),t-=6},r.flush=function(){if(t>0&&(a(e<<6-t),e=0,t=0),i%3!=0)for(var r=3-i%3,o=0;r>o;o+=1)n+="="},r.toString=function(){return n},r}(),u=s.toByteArray(),h=0;h<u.length;h+=1)c.writeByte(u[h]);c.flush();var d="";return d+="<img",d+=' src="',d+="data:image/gif;base64,",d+=c,d+='"',d+=' width="',d+=e,d+='"',d+=' height="',d+=t,d+='"',n&&(d+=' alt="',d+=n,d+='"'),d+"/>"};return t}();return function(e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports&&(module.exports=e())}(function(){return e}),function(e){e.stringToBytes=function(e){return function(e){for(var t=[],i=0;i<e.length;i++){var n=e.charCodeAt(i);128>n?t.push(n):2048>n?t.push(192|n>>6,128|63&n):55296>n||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++i)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return t}(e)}}(e),e}());var ctBankJS=new CTBankCryptoJS;function CTBankCryptoJS(){var e=null;function t(t){if(!t)throw"Callback function undefined";e=t}this.ctPKCS7Sign=function(e,i,n,r,a,o){ctBankJS.ctPKCS7Sign.step2=function(e,t,n,r){0==e||"0"==e?twcaLib.SignPkcs7(i,a,ctBankJS.finalStep):ctBankJS.finalStep(e,t,n,r)},t(o),twcaLib.SelectSignerEx(n,"","",e,"",r,0,null,ctBankJS.ctPKCS7Sign.step2)},this.ctPKCS1Sign=function(e,i,n,r,a,o){ctBankJS.ctPKCS1Sign.step2=function(e,t,n,r){0==e||"0"==e?twcaLib.SignPkcs1(i,a,ctBankJS.finalStep):ctBankJS.finalStep(e,t,n,r)},t(o),twcaLib.SelectSignerEx(n,"","",e,"",r,0,null,ctBankJS.ctPKCS1Sign.step2)},this.ctChangePIN=function(e,i,n,r,a){ctBankJS.ctChangePIN.step2=function(t,n,r,a){0==t||"0"==t?twcaLib.ChangePIN(e,i,ctBankJS.finalStep):ctBankJS.finalStep(t,n,r,a)},t(a),twcaLib.SelectSignerEx(n,"","",e,"",r,0,null,ctBankJS.ctChangePIN.step2)},this.ctExportCertStore=function(e,i,n,r,a,o){ctBankJS.ctExportCertStore.step2=function(t,i,r,a){0==t||"0"==t?twcaLib.ExportCertStore(n,e,ctBankJS.finalStep):ctBankJS.finalStep(t,i,r,a)},t(o),twcaLib.SelectSignerEx(r,"","",i,"",a,0,null,ctBankJS.ctExportCertStore.step2)},this.finalStep=function(t,i,n,r){twcaLib.ResetKey(),function(e,t,i,n){e&&"[object Function]"==={}.toString.call(e)?e(t,i,"",n):window[e](t,i,"",n)}(e,t,i,r),e=null}}var separation="|-|",MobileUtils={unregisterFunction:function(e){"string"==typeof func&&delete window[e]},count:(new Date).getTime(),registerFunction:function(e){if("function"==typeof e){MobileUtils.count++;var t="mobilejscbf"+MobileUtils.count;return window[t]=function(){e.apply(this,arguments),delete window[t]},t}return"string"==typeof e?e:""},supportTwidAndroid:function(){return"undefined"!=typeof this.androidInterface&&"function"==typeof this.androidInterface.GetVersion},toNumber:function(e){return"number"!=typeof e?(e=parseInt(e),isNaN(e)?0:e):e},androidInterface:window.twidMobile||window.mobile},support_amd;function mobileAndTabletcheck(){var e=!1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e=!0),e}function TwcaCryptoLibAlertDialog(){this.show=function(e,t,i,n,r,a){if(!document.getElementById("dialogoverlay")){var o=document.createElement("DIV");o.id="dialogoverlay",document.body.appendChild(o)}if(!document.getElementById("dialogbox")){(o=document.createElement("DIV")).id="dialogbox";var s=document.createElement("DIV");s.id="dialogboxhead";var l=document.createElement("DIV");l.id="dialogboxbody";var c=document.createElement("DIV");c.id="dialogboxfoot",o.appendChild(s),o.appendChild(l),o.appendChild(c),document.body.appendChild(o)}o=window.innerWidth;var u=window.innerHeight;void 0!==o&&void 0!==u||(o=document.documentElement.clientWidth,u=document.documentElement.clientHeight);var h=Math.max(Math.min(.35*o,420),280),d=document.getElementById("dialogoverlay"),p=document.getElementById("dialogbox");s=document.getElementById("dialogboxhead"),l=document.getElementById("dialogboxbody"),c=document.getElementById("dialogboxfoot"),d.style.display="block",d.style.height=u+"px",d.style.opacity=.8,d.style.position="fixed",d.style.top="0px",d.style.left="0px",d.style.background="#000",d.style.width="100%",d.style.zIndex=10,p.style.display="block",p.style.left=o/2-h/2+"px",p.style.top=.15*u+"px",p.style.position="fixed",p.style.background="#FFF",p.style.width=h+"px",p.style.zIndex=10,p.style.border="solid",p.style.borderWidth="1px",p.style.borderColor="#000000",p.style.borderTopLeftRadius="5px",p.style.borderTopRightRadius="5px",p.style.borderBottomLeftRadius="5px",p.style.borderBottomRightRadius="5px",s.style.background="#E2E2E2",s.style.borderColor="#000000",s.style.color="#666666",s.style.fontWeight="bold",s.style.font.size="19px",s.style.padding="10px",s.style.borderTopLeftRadius="5px",s.style.borderTopRightRadius="5px",s.style.textAlign="center",l.style.font.size="18px",l.style.color="#717171",l.style.textAlign="center",c.style.background="#E2E2E2",c.style.borderColor="#000000",c.style.font.size="10px",c.style.height="35px",c.style.lineHeight="35px",c.style.textAlign="center",c.style.borderBottomLeftRadius="5px",c.style.borderBottomRightRadius="5px",twcaDialogParams=a,document.getElementById("dialogboxhead").innerHTML=e,document.getElementById("dialogboxbody").innerHTML="<br/>&nbsp;&nbsp;"+t+"<br/>&nbsp;&nbsp;"+i+'&nbsp;<input id="twcaCryptoLibInput" type="password"/><br/><br/>',document.getElementById("dialogboxfoot").innerHTML='<input type="button" id="twcaCryptoLibAlertDialogBtnCancel" value="'+n+'" onclick="twcaCryptoLibAlertDialog.cancel(twcaDialogParams);" style="width:'+.25*h+'px;" /> &nbsp; <input id="twcaCryptoLibAlertDialogBtnOK" type="button" value="'+r+'" onclick="twcaCryptoLibAlertDialog.ok(twcaDialogParams);" style="width:'+.25*h+'px;" />',document.getElementById("twcaCryptoLibInput").addEventListener("keyup",function(e){e.preventDefault(),13==e.keyCode&&document.getElementById("twcaCryptoLibAlertDialogBtnOK").click(),27==e.keyCode&&document.getElementById("twcaCryptoLibAlertDialogBtnCancel").click()}),document.getElementById("twcaCryptoLibInput").focus()},this.ok=function(e){twcaDialogParams=null,document.getElementById("dialogbox").style.display="none",document.getElementById("dialogoverlay").style.display="none","SelectSignerEx"==e[0]?e[10].SelectSignerEx(e[1],e[2],e[3],document.getElementById("twcaCryptoLibInput").value,e[5],e[6],e[7],e[8],e[9]):"SelectSignerExFromChild"==e[0]&&e[10].SelectSignerEx(e[1],e[2],e[3],document.getElementById("twcaCryptoLibInput").value,e[5],e[6],e[7],e[8],e[9])},this.cancel=function(e){twcaDialogParams=null,document.getElementById("dialogbox").style.display="none",document.getElementById("dialogoverlay").style.display="none","SelectSignerEx"==e[0]?e[10].callback(e[9],5070,"\u4f7f\u7528\u8005\u6309\u4e0b\u53d6\u6d88",""):"SelectSignerExFromChild"==e[0]&&e[10].callback(e[9],5070,"\u4f7f\u7528\u8005\u6309\u4e0b\u53d6\u6d88","")}}try{support_amd=define.amd}catch(D){!function(e,t){"function"==typeof define&&define.amd?define([],t):e.forge=t()}(this,function(){var e,t,i;return function(n){function r(e,t){var i,n,r=t&&t.split("/"),a=d.map,o=a&&a["*"]||{};if(e){var s=(e=e.split("/")).length-1;for(d.nodeIdCompat&&m.test(e[s])&&(e[s]=e[s].replace(m,"")),"."===e[0].charAt(0)&&r&&(e=(s=r.slice(0,r.length-1)).concat(e)),s=0;s<e.length;s++){var l=e[s];"."===l?(e.splice(s,1),--s):".."===l&&0!==s&&(1!==s||".."!==e[2])&&".."!==e[s-1]&&0<s&&(e.splice(s-1,2),s-=2)}e=e.join("/")}if((r||o)&&a){for(s=(l=e.split("/")).length;0<s;--s){var c=l.slice(0,s).join("/");if(r)for(n=r.length;0<n;--n)if((i=a[r.slice(0,n).join("/")])&&(i=i[c])){var u=i,h=s;break}if(u)break;if(!p&&o&&o[c])var p=o[c],f=s}!u&&p&&(u=p,h=f),u&&(l.splice(0,h,u),e=l.join("/"))}return e}function a(e,t){return function(){var i=g.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),c.apply(n,i.concat([e,t]))}}function o(e){return function(t){u[e]=t}}function s(e){if(f.call(h,e)){var t=h[e];delete h[e],p[e]=!0,b.apply(n,t)}if(!f.call(u,e)&&!f.call(p,e))throw Error("No "+e);return u[e]}function l(e){var t=e?e.indexOf("!"):-1;if(-1<t){var i=e.substring(0,t);e=e.substring(t+1,e.length)}return[i,e]}var c,u={},h={},d={},p={},f=Object.prototype.hasOwnProperty,g=[].slice,m=/\.js$/,y=function(e,t){var i=l(e),n=i[0],a=t[1];if(e=i[1],n)var o=s(n=r(n,a));return n?e=o&&o.normalize?o.normalize(e,function(e){return function(t){return r(t,e)}}(a)):r(e,a):(e=(i=l(e=r(e,a)))[1],(n=i[0])&&(o=s(n))),{f:n?n+"!"+e:e,n:e,pr:n,p:o}},v={require:function(e){return a(e)},exports:function(e){var t=u[e];return"undefined"!=typeof t?t:u[e]={}},module:function(e){return{id:e,uri:"",exports:u[e],config:function(e){return function(){return d&&d.config&&d.config[e]||{}}}(e)}}},b=function(e,t,i,r){var c,d=[],g=typeof i,m=(r=r||e)?l(r):[];if("undefined"===g||"function"===g){for(t=!t.length&&i.length?["require","exports","module"]:t,c=0;c<t.length;c+=1){var b=y(t[c],m);if("require"===(g=b.f))d[c]=v.require(e);else if("exports"===g){d[c]=v.exports(e);var C=!0}else if("module"===g)var S=d[c]=v.module(e);else if(f.call(u,g)||f.call(h,g)||f.call(p,g))d[c]=s(g);else{if(!b.p)throw Error(e+" missing "+g);b.p.load(b.n,a(r,!0),o(g),{}),d[c]=u[g]}}t=i?i.apply(u[e],d):void 0,e&&(S&&S.exports!==n&&S.exports!==u[e]?u[e]=S.exports:t===n&&C||(u[e]=t))}else e&&(u[e]=i)};e=t=c=function(e,t,i,r,a){if("string"==typeof e)return v[e]?v[e](t):s(y(e,t?l(t):[]).f);if(!e.splice){if((d=e).deps&&c(d.deps,d.callback),!t)return;t.splice?(e=t,t=i,i=null):e=n}return t=t||function(){},"function"==typeof i&&(i=r,r=a),r?b(n,e,t,i):setTimeout(function(){b(n,e,t,i)},4),c},c.config=function(e){return c(e)},e._defined=u,(i=function(e,t,i){if("string"!=typeof e)throw Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),f.call(u,e)||f.call(h,e)||(h[e]=[e,t,i])}).amd={jQuery:!0}}(),i("node_modules/almond/almond",function(){}),function(){function e(e){function t(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(i.isArrayBuffer(e)||i.isArrayBufferView(e)){e=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var n=0;n<e.length;++n)this.putByte(e[n])}}else(e instanceof t||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}var i=e.util=e.util||{};!function(){if("undefined"!=typeof process&&process.nextTick)i.nextTick=process.nextTick,i.setImmediate="function"==typeof setImmediate?setImmediate:i.nextTick;else if("function"==typeof setImmediate)i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},i.nextTick=function(e){return setImmediate(e)};else{if(i.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e=[];i.setImmediate=function(t){e.push(t),1===e.length&&window.postMessage("forge.setImmediate","*")},window.addEventListener("message",function(t){t.source===window&&"forge.setImmediate"===t.data&&(t.stopPropagation(),t=e.slice(),e.length=0,t.forEach(function(e){e()}))},!0)}if("undefined"!=typeof MutationObserver){var t=Date.now(),n=!0,r=document.createElement("div");e=[],new MutationObserver(function(){var t=e.slice();e.length=0,t.forEach(function(e){e()})}).observe(r,{attributes:!0});var a=i.setImmediate;i.setImmediate=function(i){15<Date.now()-t?(t=Date.now(),a(i)):(e.push(i),1===e.length&&r.setAttribute("a",n=!n))}}i.nextTick=i.setImmediate}}(),i.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},i.isArrayBufferView=function(e){return e&&i.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},i.ByteBuffer=t,i.ByteStringBuffer=t,i.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,4096<this._constructedStringLength&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return 0>=this.length()},i.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},i.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var i=this.data;0<t;)1&t&&(i+=e),0<(t>>>=1)&&(e+=e);return this.data=i,this._optimizeConstructedString(t),this},i.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},i.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(i.encodeUtf8(e))},i.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},i.ByteStringBuffer.prototype.putInt=function(e,t){var i="";do{t-=8,i+=String.fromCharCode(e>>t&255)}while(0<t);return this.putBytes(i)},i.ByteStringBuffer.prototype.putSignedInt=function(e,t){return 0>e&&(e+=2<<t-1),this.putInt(e,t)},i.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},i.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},i.ByteStringBuffer.prototype.getInt=function(e){var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(0<e);return t},i.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e);return t>=(e=2<<e-2)&&(t-=e<<1),t},i.ByteStringBuffer.prototype.getBytes=function(e){if(e){e=Math.min(this.length(),e);var t=this.data.slice(this.read,this.read+e);this.read+=e}else 0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear());return t},i.ByteStringBuffer.prototype.bytes=function(e){return"undefined"==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},i.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var e=i.createBuffer(this.data);return e.read=this.read,e},i.ByteStringBuffer.prototype.compact=function(){return 0<this.read&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(e){return e=Math.max(0,this.length()-e),this.data=this.data.substr(this.read,e),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var i=this.data.charCodeAt(t);16>i&&(e+="0"),e+=i.toString(16)}return e},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=function(e,t){this.read=(t=t||{}).readOffset||0,this.growSize=t.growSize||1024;var n=i.isArrayBuffer(e),r=i.isArrayBufferView(e);n||r?(this.data=n?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength):(this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset))},i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return 0>=this.length()},i.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var i=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(i),this.data=new DataView(n.buffer),this},i.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},i.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var i=0;i<t;++i)this.data.setUint8(e);return this},i.DataBuffer.prototype.putBytes=function(e,t){if(i.isArrayBufferView(e)){var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var a=new Uint8Array(this.data.buffer,this.write);return a.set(n),this.write+=r,this}if(i.isArrayBuffer(e))return n=new Uint8Array(e),this.accommodate(n.byteLength),(a=new Uint8Array(this.data.buffer)).set(n,this.write),this.write+=n.byteLength,this;if(e instanceof i.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&i.isArrayBufferView(e.data))return n=new Uint8Array(e.data.byteLength,e.read,e.length()),this.accommodate(n.byteLength),(a=new Uint8Array(e.data.byteLength,this.write)).set(n),this.write+=n.byteLength,this;if(e instanceof i.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),n=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(e,n,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),n=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(e,n,this.write),this;if("utf8"===t&&(e=i.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),n=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(n),this;if("utf16"===t)return this.accommodate(2*e.length),n=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(n),this;throw Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},i.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},i.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},i.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(e,t){this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(0<t);return this},i.DataBuffer.prototype.putSignedInt=function(e,t){return this.accommodate(t/8),0>e&&(e+=2<<t-1),this.putInt(e,t)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},i.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},i.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},i.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},i.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},i.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},i.DataBuffer.prototype.getInt=function(e){var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(0<e);return t},i.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e);return t>=(e=2<<e-2)&&(t-=e<<1),t},i.DataBuffer.prototype.getBytes=function(e){if(e){e=Math.min(this.length(),e);var t=this.data.slice(this.read,this.read+e);this.read+=e}else 0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear());return t},i.DataBuffer.prototype.bytes=function(e){return"undefined"==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},i.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(0<this.read){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var i=this.data.getUint8(t);16>i&&(e+="0"),e+=i.toString(16)}return e},i.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return i.binary.raw.encode(t);if("hex"===e)return i.binary.hex.encode(t);if("base64"===e)return i.binary.base64.encode(t);if("utf8"===e)return i.text.utf8.decode(t);if("utf16"===e)return i.text.utf16.decode(t);throw Error("Invalid encoding: "+e)},i.createBuffer=function(e,t){return void 0!==e&&"utf8"===(t||"raw")&&(e=i.encodeUtf8(e)),new i.ByteBuffer(e)},i.fillString=function(e,t){for(var i="";0<t;)1&t&&(i+=e),0<(t>>>=1)&&(e+=e);return i},i.xorBytes=function(e,t,i){for(var n,r="",a="",o=0,s=0;0<i;--i,++o)n=e.charCodeAt(o)^t.charCodeAt(o),10<=s&&(r+=a,a="",s=0),a+=String.fromCharCode(n),++s;return r+a},i.hexToBytes=function(e){var t="",i=0;for(1&e.length&&(i=1,t+=String.fromCharCode(parseInt(e[0],16)));i<e.length;i+=2)t+=String.fromCharCode(parseInt(e.substr(i,2),16));return t},i.bytesToHex=function(e){return i.createBuffer(e).toHex()},i.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var n=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];i.encode64=function(e,t){for(var i,n,r,a="",o="",s=0;s<e.length;)i=e.charCodeAt(s++),n=e.charCodeAt(s++),r=e.charCodeAt(s++),a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i>>2),a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt((3&i)<<4|n>>4),isNaN(n)?a+="==":(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt((15&n)<<2|r>>6),a+=isNaN(r)?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(63&r)),t&&a.length>t&&(o+=a.substr(0,t)+"\r\n",a=a.substr(t));return o+a},i.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");for(var t,i,r,a,o="",s=0;s<e.length;)t=n[e.charCodeAt(s++)-43],i=n[e.charCodeAt(s++)-43],r=n[e.charCodeAt(s++)-43],a=n[e.charCodeAt(s++)-43],o+=String.fromCharCode(t<<2|i>>4),64!==r&&(o+=String.fromCharCode((15&i)<<4|r>>2),64!==a&&(o+=String.fromCharCode((3&r)<<6|a)));return o},i.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},i.decodeUtf8=function(e){return decodeURIComponent(escape(e))},i.binary={raw:{},hex:{},base64:{}},i.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},i.binary.raw.decode=function(e,t,i){var n=t;n||(n=new Uint8Array(e.length));for(var r=i=i||0,a=0;a<e.length;++a)n[r++]=e.charCodeAt(a);return t?r-i:n},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(e,t,i){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var r=0,a=i=i||0;for(1&e.length&&(r=1,n[a++]=parseInt(e[0],16));r<e.length;r+=2)n[a++]=parseInt(e.substr(r,2),16);return t?a-i:n},i.binary.base64.encode=function(e,t){for(var i,n,r,a="",o="",s=0;s<e.byteLength;)i=e[s++],n=e[s++],r=e[s++],a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i>>2),a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt((3&i)<<4|n>>4),isNaN(n)?a+="==":(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt((15&n)<<2|r>>6),a+=isNaN(r)?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(63&r)),t&&a.length>t&&(o+=a.substr(0,t)+"\r\n",a=a.substr(t));return o+a},i.binary.base64.decode=function(e,t,i){var r=t;r||(r=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");for(var a,o,s,l,c=0,u=i=i||0;c<e.length;)a=n[e.charCodeAt(c++)-43],o=n[e.charCodeAt(c++)-43],s=n[e.charCodeAt(c++)-43],l=n[e.charCodeAt(c++)-43],r[u++]=a<<2|o>>4,64!==s&&(r[u++]=(15&o)<<4|s>>2,64!==l&&(r[u++]=(3&s)<<6|l));return t?u-i:r.subarray(0,u)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(e,t,n){e=i.encodeUtf8(e);var r=t;r||(r=new Uint8Array(e.length));for(var a=n=n||0,o=0;o<e.length;++o)r[a++]=e.charCodeAt(o);return t?a-n:r},i.text.utf8.decode=function(e){return i.decodeUtf8(String.fromCharCode.apply(null,e))},i.text.utf16.encode=function(e,t,i){var n=t;n||(n=new Uint8Array(2*e.length));for(var r=new Uint16Array(n.buffer),a=i=i||0,o=i,s=0;s<e.length;++s)r[o++]=e.charCodeAt(s),a+=2;return t?a-i:n},i.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},i.deflate=function(e,t,n){return t=i.decode64(e.deflate(i.encode64(t)).rval),n&&(e=2,32&t.charCodeAt(1)&&(e=6),t=t.substring(e,t.length-4)),t},i.inflate=function(e,t,n){return null===(e=e.inflate(i.encode64(t)).rval)?null:i.decode64(e)};var r=function(e,t,n){if(!e)throw Error("WebStorage not available.");if(null===n?e=e.removeItem(t):(n=i.encode64(JSON.stringify(n)),e=e.setItem(t,n)),"undefined"!=typeof e&&!0!==e.rval)throw(t=Error(e.error.message)).id=e.error.id,t.name=e.error.name,t},a=function(e,t){if(!e)throw Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(null===n.rval){if(n.error){var r=Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(i.decode64(n))),n},o=function(e,t,i,n){var o=a(e,t);null===o&&(o={}),o[i]=n,r(e,t,o)},s=function(e,t,i){return null!==(e=a(e,t))&&(e=i in e?e[i]:null),e},l=function(e,t,i){var n=a(e,t);if(null!==n&&i in n){for(var o in delete n[i],i=!0,n){i=!1;break}i&&(n=null),r(e,t,n)}},c=function(e,t){r(e,t,null)},u=function(e,t,i){var n=null;"undefined"==typeof i&&(i=["web","flash"]);var r,a=!1,o=null;for(r in i){var s=i[r];try{if("flash"===s||"both"===s){if(null===t[0])throw Error("Flash local storage not available.");n=e.apply(this,t),a="flash"===s}"web"!==s&&"both"!==s||(t[0]=localStorage,n=e.apply(this,t),a=!0)}catch(e){o=e}if(a)break}if(!a)throw o;return n};i.setItem=function(e,t,i,n,r){u(o,arguments,r)},i.getItem=function(e,t,i,n){return u(s,arguments,n)},i.removeItem=function(e,t,i,n){u(l,arguments,n)},i.clearItems=function(e,t,i){u(c,arguments,i)},i.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;return t.lastIndex=0,(e=null===(t=t.exec(e))?null:{full:e,scheme:t[1],host:t[2],port:t[3],path:t[4]})&&(e.fullHost=e.host,e.port?80!==e.port&&"http"===e.scheme?e.fullHost+=":"+e.port:443!==e.port&&"https"===e.scheme&&(e.fullHost+=":"+e.port):"http"===e.scheme?e.port=80:"https"===e.scheme&&(e.port=443),e.full=e.scheme+"://"+e.fullHost),e};var h=null;i.getQueryVariables=function(e){var t=function(e){var t={};e=e.split("&");for(var i=0;i<e.length;i++){var n=e[i].indexOf("=");if(0<n){var r=e[i].substring(0,n);n=e[i].substring(n+1)}else r=e[i],n=null;r in t||(t[r]=[]),r in Object.prototype||null===n||t[r].push(unescape(n))}return t};return"undefined"==typeof e?(null===h&&(h="undefined"!=typeof window&&window.location&&window.location.search?t(window.location.search.substring(1)):{}),e=h):e=t(e),e},i.parseFragment=function(e){var t=e,n="",r=e.indexOf("?");return 0<r&&(t=e.substring(0,r),n=e.substring(r+1)),0<(e=t.split("/")).length&&""===e[0]&&e.shift(),{pathString:t,queryString:n,path:e,query:r=""===n?{}:i.getQueryVariables(n)}},i.makeRequest=function(e){var t=i.parseFragment(e),n={path:t.pathString,query:t.queryString,getPath:function(e){return"undefined"==typeof e?t.path:t.path[e]},getQuery:function(e,i){if("undefined"==typeof e)var n=t.query;else(n=t.query[e])&&"undefined"!=typeof i&&(n=n[i]);return n},getQueryLast:function(e,t){var i=n.getQuery(e);return i?i[i.length-1]:t}};return n},i.makeLink=function(e,t,i){return e=jQuery.isArray(e)?e.join("/"):e,t=jQuery.param(t||{}),i=i||"",e+(0<t.length?"?"+t:"")+(0<i.length?"#"+i:"")},i.setPath=function(e,t,i){if("object"==typeof e&&null!==e)for(var n=0,r=t.length;n<r;){var a=t[n++];if(n==r)e[a]=i;else{var o=a in e;(!o||o&&"object"!=typeof e[a]||o&&null===e[a])&&(e[a]={}),e=e[a]}}},i.getPath=function(e,t,i){for(var n=0,r=t.length,a=!0;a&&n<r&&"object"==typeof e&&null!==e;){var o=t[n++];(a=o in e)&&(e=e[o])}return a?e:i},i.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var i=0,n=t.length;i<n;){var r=t[i++];if(i==n)delete e[r];else{if(!(r in e)||"object"!=typeof e[r]||null===e[r])break;e=e[r]}}},i.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},i.format=function(e){var t,i,n=/%./g,r=0,a=[];for(i=0;t=n.exec(e);)switch(i=e.substring(i,n.lastIndex-2),0<i.length&&a.push(i),i=n.lastIndex,t=t[0][1],t){case"s":case"o":a.push(r<arguments.length?arguments[1+r++]:"<?>");break;case"%":a.push("%");break;default:a.push("<%"+t+"?>")}return a.push(e.substring(i)),a.join("")},i.formatNumber=function(e,t,i,n){var r=isNaN(t=Math.abs(t))?2:t;t=void 0===i?",":i,n=void 0===n?".":n,i=0>e?"-":"";var a=parseInt(e=Math.abs(+e||0).toFixed(r),10)+"",o=3<a.length?a.length%3:0;return i+(o?a.substr(0,o)+n:"")+a.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+n)+(r?t+Math.abs(e-a).toFixed(r).slice(2):"")},i.formatSize=function(e){return 1073741824<=e?i.formatNumber(e/1073741824,2,".","")+" GiB":1048576<=e?i.formatNumber(e/1048576,2,".","")+" MiB":1024<=e?i.formatNumber(e/1024,0)+" KiB":i.formatNumber(e,0)+" bytes"},i.bytesFromIP=function(e){return-1!==e.indexOf(".")?i.bytesFromIPv4(e):-1!==e.indexOf(":")?i.bytesFromIPv6(e):null},i.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=i.createBuffer(),n=0;n<e.length;++n){var r=parseInt(e[n],10);if(isNaN(r))return null;t.putByte(r)}return t.getBytes()},i.bytesFromIPv6=function(e){for(var t=0,n=2*(8-(e=e.split(":").filter(function(e){return 0===e.length&&++t,!0})).length+t),r=i.createBuffer(),a=0;8>a;++a)if(e[a]&&0!==e[a].length){var o=i.hexToBytes(e[a]);2>o.length&&r.putByte(0),r.putBytes(o)}else r.fillWithByte(0,n),n=0;return r.getBytes()},i.bytesToIP=function(e){return 4===e.length?i.bytesToIPv4(e):16===e.length?i.bytesToIPv6(e):null},i.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t.join(".")},i.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],n=[],r=0,a=0;a<e.length;a+=2){for(var o=i.bytesToHex(e[a]+e[a+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=n[n.length-1],l=t.length;s&&l===s.end+1?(s.end=l,s.end-s.start>n[r].end-n[r].start&&(r=n.length-1)):n.push({start:l,end:l})}t.push(o)}return 0<n.length&&0<(e=n[r]).end-e.start&&(t.splice(e.start,e.end-e.start+1,""),0===e.start&&t.unshift(""),7===e.end&&t.push("")),t.join(":")},i.estimateCores=function(e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in i&&!e.update)return t(null,i.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&0<navigator.hardwareConcurrency)return i.cores=navigator.hardwareConcurrency,t(null,i.cores);if("undefined"==typeof Worker)return i.cores=1,t(null,i.cores);if("undefined"==typeof Blob)return i.cores=2,t(null,i.cores);var n=URL.createObjectURL(new Blob(["(",(function(){self.addEventListener("message",function(e){for(var t=(e=Date.now())+4;Date.now()<t;);self.postMessage({st:e,et:t})})}).toString(),")()"],{type:"application/javascript"}));!function e(r,a,o){if(0===a){var s=Math.floor(r.reduce(function(e,t){return e+t},0)/r.length);return i.cores=Math.max(1,s),URL.revokeObjectURL(n),t(null,i.cores)}!function(e,t){for(var i=[],r=[],a=0;a<e;++a){var o=new Worker(n);o.addEventListener("message",function(n){if(r.push(n.data),r.length===e){for(n=0;n<e;++n)i[n].terminate();t(0,r)}}),i.push(o)}for(a=0;a<e;++a)i[a].postMessage(a)}(o,function(t,i){r.push(function(e,t){for(var i=[],n=0;n<e;++n)for(var r=t[n],a=i[n]=[],o=0;o<e;++o)if(n!==o){var s=t[o];(r.st>s.st&&r.st<s.et||s.st>r.st&&s.st<r.et)&&a.push(o)}return i.reduce(function(e,t){return Math.max(e,t.length)},0)}(o,i)),e(r,a-1,o)})}([],5,16)}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/util",["require","module"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.util)return i.util;i.defined.util=!0;for(var a=0;a<n.length;++a)n[a](i);return i.util}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.cipher=e.cipher||{},e.cipher.algorithms=e.cipher.algorithms||{},e.cipher.createCipher=function(t,i){var n=t;if("string"==typeof n&&(n=e.cipher.getAlgorithm(n))&&(n=n()),!n)throw Error("Unsupported algorithm: "+t);return new e.cipher.BlockCipher({algorithm:n,key:i,decrypt:!1})},e.cipher.createDecipher=function(t,i){var n=t;if("string"==typeof n&&(n=e.cipher.getAlgorithm(n))&&(n=n()),!n)throw Error("Unsupported algorithm: "+t);return new e.cipher.BlockCipher({algorithm:n,key:i,decrypt:!0})},e.cipher.registerAlgorithm=function(t,i){t=t.toUpperCase(),e.cipher.algorithms[t]=i},e.cipher.getAlgorithm=function(t){return(t=t.toUpperCase())in e.cipher.algorithms?e.cipher.algorithms[t]:null};var t=e.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this.output=this._input=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};t.prototype.start=function(t){t=t||{};var i,n={};for(i in t)n[i]=t[i];n.decrypt=this._decrypt,this._finish=!1,this._input=e.util.createBuffer(),this.output=t.output||e.util.createBuffer(),this.mode.start(n)},t.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},t.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/cipher",["require","module","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.cipher)return i.cipher;i.defined.cipher=!0;for(var a=0;a<n.length;++a)n[a](i);return i.cipher}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t){if("string"==typeof t&&(t=e.util.createBuffer(t)),e.util.isArray(t)&&4<t.length){var i=t;t=e.util.createBuffer();for(var n=0;n<i.length;++n)t.putByte(i[n])}return e.util.isArray(t)||(t=[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]),t}function i(e){e[e.length-1]=e[e.length-1]+1&4294967295}function n(e){return[e/4294967296|0,4294967295&e]}e.cipher=e.cipher||{};var r=e.cipher.modes=e.cipher.modes||{};r.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=Array(this._ints),this._outBlock=Array(this._ints)},r.ecb.prototype.start=function(e){},r.ecb.prototype.encrypt=function(e,t,i){if(e.length()<this.blockSize&&!(i&&0<e.length()))return!0;for(i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),i=0;i<this._ints;++i)t.putInt32(this._outBlock[i])},r.ecb.prototype.decrypt=function(e,t,i){if(e.length()<this.blockSize&&!(i&&0<e.length()))return!0;for(i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),i=0;i<this._ints;++i)t.putInt32(this._outBlock[i])},r.ecb.prototype.pad=function(e,t){var i=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(i,i),!0},r.ecb.prototype.unpad=function(e,t){if(0<t.overflow)return!1;var i=e.length();return!((i=e.at(i-1))>this.blockSize<<2||(e.truncate(i),0))},r.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=Array(this._ints),this._outBlock=Array(this._ints)},r.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw Error("Invalid IV parameter.");this._iv=t(e.iv),this._prev=this._iv.slice(0)}},r.cbc.prototype.encrypt=function(e,t,i){if(e.length()<this.blockSize&&!(i&&0<e.length()))return!0;for(i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]);this._prev=this._outBlock},r.cbc.prototype.decrypt=function(e,t,i){if(e.length()<this.blockSize&&!(i&&0<e.length()))return!0;for(i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),i=0;i<this._ints;++i)t.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)},r.cbc.prototype.pad=function(e,t){var i=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(i,i),!0},r.cbc.prototype.unpad=function(e,t){if(0<t.overflow)return!1;var i=e.length();return!((i=e.at(i-1))>this.blockSize<<2||(e.truncate(i),0))},r.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=Array(this._ints),this._partialBlock=Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},r.cfb.prototype.start=function(e){if(!("iv"in e))throw Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},r.cfb.prototype.encrypt=function(e,t,i){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32()^this._outBlock[r],t.putInt32(this._inBlock[r]);else{var a=(this.blockSize-n)%this.blockSize;for(0<a&&(a=this.blockSize-a),this._partialOutput.clear(),r=0;r<this._ints;++r)this._partialBlock[r]=e.getInt32()^this._outBlock[r],this._partialOutput.putInt32(this._partialBlock[r]);if(0<a)e.read-=this.blockSize;else for(r=0;r<this._ints;++r)this._inBlock[r]=this._partialBlock[r];if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<a&&!i)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},r.cfb.prototype.decrypt=function(e,t,i){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32(),t.putInt32(this._inBlock[r]^this._outBlock[r]);else{var a=(this.blockSize-n)%this.blockSize;for(0<a&&(a=this.blockSize-a),this._partialOutput.clear(),r=0;r<this._ints;++r)this._partialBlock[r]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[r]^this._outBlock[r]);if(0<a)e.read-=this.blockSize;else for(r=0;r<this._ints;++r)this._inBlock[r]=this._partialBlock[r];if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<a&&!i)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},r.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},r.ofb.prototype.start=function(e){if(!("iv"in e))throw Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},r.ofb.prototype.encrypt=function(e,t,i){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var r=0;r<this._ints;++r)t.putInt32(e.getInt32()^this._outBlock[r]),this._inBlock[r]=this._outBlock[r];else{var a=(this.blockSize-n)%this.blockSize;for(0<a&&(a=this.blockSize-a),this._partialOutput.clear(),r=0;r<this._ints;++r)this._partialOutput.putInt32(e.getInt32()^this._outBlock[r]);if(0<a)e.read-=this.blockSize;else for(r=0;r<this._ints;++r)this._inBlock[r]=this._outBlock[r];if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<a&&!i)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},r.ofb.prototype.decrypt=r.ofb.prototype.encrypt,r.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},r.ctr.prototype.start=function(e){if(!("iv"in e))throw Error("Invalid IV parameter.");this._iv=t(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},r.ctr.prototype.encrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]);else{var o=(this.blockSize-r)%this.blockSize;for(0<o&&(o=this.blockSize-o),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(0<o&&(e.read-=this.blockSize),0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<o&&!n)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}i(this._inBlock)},r.ctr.prototype.decrypt=r.ctr.prototype.encrypt,r.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=Array(this._ints),this._outBlock=Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0,this._R=3774873600},r.gcm.prototype.start=function(t){if(!("iv"in t))throw Error("Invalid IV parameter.");var r=e.util.createBuffer(t.iv);this._cipherLength=0;var a="additionalData"in t?e.util.createBuffer(t.additionalData):e.util.createBuffer();if(this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=e.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw Error("Authentication tag does not match tag length.");if(this._hashBlock=Array(this._ints),this.tag=null,this._hashSubkey=Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits),12===(t=r.length()))this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];0<r.length();)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(n(8*t)))}for(this._inBlock=this._j0.slice(0),i(this._inBlock),this._partialBytes=0,a=e.util.createBuffer(a),this._aDataLength=n(8*a.length()),(r=a.length()%this.blockSize)&&a.fillWithByte(0,this.blockSize-r),this._s=[0,0,0,0];0<a.length();)this._s=this.ghash(this._hashSubkey,this._s,[a.getInt32(),a.getInt32(),a.getInt32(),a.getInt32()])},r.gcm.prototype.encrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize){for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^=e.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-r)%this.blockSize;for(0<o&&(o=this.blockSize-o),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(0===o||n){for(n?(this._cipherLength+=a=r%this.blockSize,this._partialOutput.truncate(this.blockSize-a)):this._cipherLength+=this.blockSize,a=0;a<this._ints;++a)this._outBlock[a]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes),0<o&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),i(this._inBlock)},r.gcm.prototype.decrypt=function(e,t,n){var r=e.length();if(r<this.blockSize&&!(n&&0<r))return!0;for(this.cipher.encrypt(this._inBlock,this._outBlock),i(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock),e=0;e<this._ints;++e)t.putInt32(this._outBlock[e]^this._hashBlock[e]);this._cipherLength=r<this.blockSize?this._cipherLength+r%this.blockSize:this._cipherLength+this.blockSize},r.gcm.prototype.afterFinish=function(t,i){var r=!0;i.decrypt&&i.overflow&&t.truncate(this.blockSize-i.overflow),this.tag=e.util.createBuffer();var a=this._aDataLength.concat(n(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,a),this.cipher.encrypt(this._j0,a=[]);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^a[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),i.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},r.gcm.prototype.multiply=function(e,t){for(var i=[0,0,0,0],n=t.slice(0),r=0;128>r;++r)e[r/32|0]&1<<31-r%32&&(i[0]^=n[0],i[1]^=n[1],i[2]^=n[2],i[3]^=n[3]),this.pow(n,n);return i},r.gcm.prototype.pow=function(e,t){for(var i=1&e[3],n=3;0<n;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,i&&(t[0]^=this._R)},r.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],i=0;32>i;++i){var n=this._m[i][e[i/8|0]>>>4*(7-i%8)&15];t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3]}return t},r.gcm.prototype.ghash=function(e,t,i){return t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3],this.tableMultiply(t)},r.gcm.prototype.generateHashTable=function(e,t){var i=8/t,n=4*i;i*=16;for(var r=Array(i),a=0;a<i;++a){var o=[0,0,0,0];o[a/n|0]=1<<t-1<<(n-1-a%n)*t,r[a]=this.generateSubHashTable(this.multiply(o,e),t)}return r},r.gcm.prototype.generateSubHashTable=function(e,t){var i=1<<t,n=i>>>1,r=Array(i);r[n]=e.slice(0);for(var a=n>>>1;0<a;)this.pow(r[2*a],r[a]=[]),a>>=1;for(a=2;a<n;){for(var o=1;o<a;++o){var s=r[a],l=r[o];r[a+o]=[s[0]^l[0],s[1]^l[1],s[2]^l[2],s[3]^l[3]]}a*=2}for(r[0]=[0,0,0,0],a=n+1;a<i;++a)r[a]=[e[0]^(o=r[a^n])[0],e[1]^o[1],e[2]^o[2],e[3]^o[3]];return r}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/cipherModes",["require","module","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.cipherModes)return i.cipherModes;i.defined.cipherModes=!0;for(var a=0;a<n.length;++a)n[a](i);return i.cipherModes}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,i){e.cipher.registerAlgorithm(t,function(){return new e.aes.Algorithm(t,i)})}function i(){h=!0,l=[0,1,2,4,8,16,32,64,128,27,54];for(var e=Array(256),t=0;128>t;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;for(o=Array(256),s=Array(256),c=Array(4),u=Array(4),t=0;4>t;++t)c[t]=Array(256),u[t]=Array(256);var i=0,n=0;for(t=0;256>t;++t){var r=n^n<<1^n<<2^n<<3^n<<4;o[i]=r=r>>8^255&r^99,s[r]=i;var a=e[r],d=e[i],p=e[d],f=e[p];a^=a<<24^r<<16^r<<8^r,p=(d^p^f)<<24^(i^f)<<16^(i^p^f)<<8^i^d^f;for(var g=0;4>g;++g)c[g][i]=a,u[g][r]=p,a=a<<24|a>>>8,p=p<<24|p>>>8;0===i?i=n=1:(i=d^e[e[e[d^f]]],n^=e[e[n]])}}function n(e,t){for(var i,n=e.slice(0),r=1,a=n.length,s=d*(a+6+1),c=a;c<s;++c)i=n[c-1],0==c%a?(i=o[i>>>16&255]<<24^o[i>>>8&255]<<16^o[255&i]<<8^o[i>>>24]^l[r]<<24,r++):6<a&&4==c%a&&(i=o[i>>>24]<<24^o[i>>>16&255]<<16^o[i>>>8&255]<<8^o[255&i]),n[c]=n[c-a]^i;if(t){r=u[0],a=u[1];var h=u[2],p=u[3],f=n.slice(0);c=0;for(var g=(s=n.length)-d;c<s;c+=d,g-=d)if(0===c||c===s-d)f[c]=n[g],f[c+1]=n[g+3],f[c+2]=n[g+2],f[c+3]=n[g+1];else for(var m=0;m<d;++m)f[c+(3&-m)]=r[o[(i=n[g+m])>>>24]]^a[o[i>>>16&255]]^h[o[i>>>8&255]]^p[o[255&i]];n=f}return n}function r(e,t,i,n){var r=e.length/4-1;if(n)var a=u[0],l=u[1],h=u[2],d=u[3],p=s;else a=c[0],l=c[1],h=c[2],d=c[3],p=o;var f=t[0]^e[0],g=t[n?3:1]^e[1],m=t[2]^e[2];t=t[n?1:3]^e[3];for(var y=3,v=1;v<r;++v){var b=a[f>>>24]^l[g>>>16&255]^h[m>>>8&255]^d[255&t]^e[++y],C=a[g>>>24]^l[m>>>16&255]^h[t>>>8&255]^d[255&f]^e[++y],S=a[m>>>24]^l[t>>>16&255]^h[f>>>8&255]^d[255&g]^e[++y];t=a[t>>>24]^l[f>>>16&255]^h[g>>>8&255]^d[255&m]^e[++y],f=b,g=C,m=S}i[0]=p[f>>>24]<<24^p[g>>>16&255]<<16^p[m>>>8&255]<<8^p[255&t]^e[++y],i[n?3:1]=p[g>>>24]<<24^p[m>>>16&255]<<16^p[t>>>8&255]<<8^p[255&f]^e[++y],i[2]=p[m>>>24]<<24^p[t>>>16&255]<<16^p[f>>>8&255]<<8^p[255&g]^e[++y],i[n?1:3]=p[t>>>24]<<24^p[f>>>16&255]<<16^p[g>>>8&255]<<8^p[255&m]^e[++y]}function a(t){var i="AES-"+((t=t||{}).mode||"CBC").toUpperCase(),n=t.decrypt?e.cipher.createDecipher(i,t.key):e.cipher.createCipher(i,t.key),r=n.start;return n.start=function(t,i){var a=null;i instanceof e.util.ByteBuffer&&(a=i,i={}),(i=i||{}).output=a,i.iv=t,r.call(n,i)},n}e.aes=e.aes||{},e.aes.startEncrypting=function(e,t,i,n){return(e=a({key:e,output:i,decrypt:!1,mode:n})).start(t),e},e.aes.createEncryptionCipher=function(e,t){return a({key:e,output:null,decrypt:!1,mode:t})},e.aes.startDecrypting=function(e,t,i,n){return(e=a({key:e,output:i,decrypt:!0,mode:n})).start(t),e},e.aes.createDecryptionCipher=function(e,t){return a({key:e,output:null,decrypt:!0,mode:t})},e.aes.Algorithm=function(e,t){h||i();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return r(n._w,e,t,!1)},decrypt:function(e,t){return r(n._w,e,t,!0)}}}),n._init=!1},e.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var i=t.key;if("string"!=typeof i||16!==i.length&&24!==i.length&&32!==i.length){if(e.util.isArray(i)&&(16===i.length||24===i.length||32===i.length)){var r=i;i=e.util.createBuffer();for(var a=0;a<r.length;++a)i.putByte(r[a])}}else i=e.util.createBuffer(i);if(!e.util.isArray(i)){r=i,i=[];var o=r.length();if(16===o||24===o||32===o)for(o>>>=2,a=0;a<o;++a)i.push(r.getInt32())}if(!e.util.isArray(i)||4!==i.length&&6!==i.length&&8!==i.length)throw Error("Invalid key parameter.");r=-1!==["CFB","OFB","CTR","GCM"].indexOf(this.mode.name),this._w=n(i,t.decrypt&&!r),this._init=!0}},e.aes._expandKey=function(e,t){return h||i(),n(e,t)},e.aes._updateBlock=r,t("AES-ECB",e.cipher.modes.ecb),t("AES-CBC",e.cipher.modes.cbc),t("AES-CFB",e.cipher.modes.cfb),t("AES-OFB",e.cipher.modes.ofb),t("AES-CTR",e.cipher.modes.ctr),t("AES-GCM",e.cipher.modes.gcm);var o,s,l,c,u,h=!1,d=4}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/aes",["require","module","./cipher","./cipherModes","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.aes)return i.aes;i.defined.aes=!0;for(var a=0;a<n.length;++a)n[a](i);return i.aes}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.pki=e.pki||{},(e=e.pki.oids=e.oids=e.oids||{})["1.2.840.113549.1.1.1"]="rsaEncryption",e.rsaEncryption="1.2.840.113549.1.1.1",e["1.2.840.113549.1.1.4"]="md5WithRSAEncryption",e.md5WithRSAEncryption="1.2.840.113549.1.1.4",e["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption",e.sha1WithRSAEncryption="1.2.840.113549.1.1.5",e["1.2.840.113549.1.1.7"]="RSAES-OAEP",e["RSAES-OAEP"]="1.2.840.113549.1.1.7",e["1.2.840.113549.1.1.8"]="mgf1",e.mgf1="1.2.840.113549.1.1.8",e["1.2.840.113549.1.1.9"]="pSpecified",e.pSpecified="1.2.840.113549.1.1.9",e["1.2.840.113549.1.1.10"]="RSASSA-PSS",e["RSASSA-PSS"]="1.2.840.113549.1.1.10",e["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption",e.sha256WithRSAEncryption="1.2.840.113549.1.1.11",e["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption",e.sha384WithRSAEncryption="1.2.840.113549.1.1.12",e["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption",e.sha512WithRSAEncryption="1.2.840.113549.1.1.13",e["1.3.14.3.2.7"]="desCBC",e.desCBC="1.3.14.3.2.7",e["1.3.14.3.2.26"]="sha1",e.sha1="1.3.14.3.2.26",e["2.16.840.1.101.3.4.2.1"]="sha256",e.sha256="2.16.840.1.101.3.4.2.1",e["2.16.840.1.101.3.4.2.2"]="sha384",e.sha384="2.16.840.1.101.3.4.2.2",e["2.16.840.1.101.3.4.2.3"]="sha512",e.sha512="2.16.840.1.101.3.4.2.3",e["1.2.840.113549.2.5"]="md5",e.md5="1.2.840.113549.2.5",e["1.2.840.113549.1.7.1"]="data",e.data="1.2.840.113549.1.7.1",e["1.2.840.113549.1.7.2"]="signedData",e.signedData="1.2.840.113549.1.7.2",e["1.2.840.113549.1.7.3"]="envelopedData",e.envelopedData="1.2.840.113549.1.7.3",e["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",e.signedAndEnvelopedData="1.2.840.113549.1.7.4",e["1.2.840.113549.1.7.5"]="digestedData",e.digestedData="1.2.840.113549.1.7.5",e["1.2.840.113549.1.7.6"]="encryptedData",e.encryptedData="1.2.840.113549.1.7.6",e["1.2.840.113549.1.9.1"]="emailAddress",e.emailAddress="1.2.840.113549.1.9.1",e["1.2.840.113549.1.9.2"]="unstructuredName",e.unstructuredName="1.2.840.113549.1.9.2",e["1.2.840.113549.1.9.3"]="contentType",e.contentType="1.2.840.113549.1.9.3",e["1.2.840.113549.1.9.4"]="messageDigest",e.messageDigest="1.2.840.113549.1.9.4",e["1.2.840.113549.1.9.5"]="signingTime",e.signingTime="1.2.840.113549.1.9.5",e["1.2.840.113549.1.9.6"]="counterSignature",e.counterSignature="1.2.840.113549.1.9.6",e["1.2.840.113549.1.9.7"]="challengePdw",e.challengePdw="1.2.840.113549.1.9.7",e["1.2.840.113549.1.9.8"]="unstructuredAddress",e.unstructuredAddress="1.2.840.113549.1.9.8",e["1.2.840.113549.1.9.14"]="extensionRequest",e.extensionRequest="1.2.840.113549.1.9.14",e["1.2.840.113549.1.9.20"]="friendlyName",e.friendlyName="1.2.840.113549.1.9.20",e["1.2.840.113549.1.9.21"]="localKeyId",e.localKeyId="1.2.840.113549.1.9.21",e["1.2.840.113549.1.9.22.1"]="x509Certificate",e.x509Certificate="1.2.840.113549.1.9.22.1",e["1.2.840.113549.1.12.10.1.1"]="keyBag",e.keyBag="1.2.840.113549.1.12.10.1.1",e["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag",e.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2",e["1.2.840.113549.1.12.10.1.3"]="certBag",e.certBag="1.2.840.113549.1.12.10.1.3",e["1.2.840.113549.1.12.10.1.4"]="crlBag",e.crlBag="1.2.840.113549.1.12.10.1.4",e["1.2.840.113549.1.12.10.1.5"]="secretBag",e.secretBag="1.2.840.113549.1.12.10.1.5",e["1.2.840.113549.1.12.10.1.6"]="safeContentsBag",e.safeContentsBag="1.2.840.113549.1.12.10.1.6",e["1.2.840.113549.1.5.13"]="pkcs5PBES2",e.pkcs5PBES2="1.2.840.113549.1.5.13",e["1.2.840.113549.1.5.12"]="pkcs5PBKDF2",e.pkcs5PBKDF2="1.2.840.113549.1.5.12",e["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4",e.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1",e["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4",e.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2",e["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC",e["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3",e["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC",e["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4",e["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC",e["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5",e["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC",e["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6",e["1.2.840.113549.2.7"]="hmacWithSHA1",e.hmacWithSHA1="1.2.840.113549.2.7",e["1.2.840.113549.2.8"]="hmacWithSHA224",e.hmacWithSHA224="1.2.840.113549.2.8",e["1.2.840.113549.2.9"]="hmacWithSHA256",e.hmacWithSHA256="1.2.840.113549.2.9",e["1.2.840.113549.2.10"]="hmacWithSHA384",e.hmacWithSHA384="1.2.840.113549.2.10",e["1.2.840.113549.2.11"]="hmacWithSHA512",e.hmacWithSHA512="1.2.840.113549.2.11",e["1.2.840.113549.3.7"]="des-EDE3-CBC",e["des-EDE3-CBC"]="1.2.840.113549.3.7",e["2.16.840.1.101.3.4.1.2"]="aes128-CBC",e["aes128-CBC"]="2.16.840.1.101.3.4.1.2",e["2.16.840.1.101.3.4.1.22"]="aes192-CBC",e["aes192-CBC"]="2.16.840.1.101.3.4.1.22",e["2.16.840.1.101.3.4.1.42"]="aes256-CBC",e["aes256-CBC"]="2.16.840.1.101.3.4.1.42",e["2.5.4.3"]="commonName",e.commonName="2.5.4.3",e["2.5.4.5"]="serialName",e.serialName="2.5.4.5",e["2.5.4.6"]="countryName",e.countryName="2.5.4.6",e["2.5.4.7"]="localityName",e.localityName="2.5.4.7",e["2.5.4.8"]="stateOrProvinceName",e.stateOrProvinceName="2.5.4.8",e["2.5.4.10"]="organizationName",e.organizationName="2.5.4.10",e["2.5.4.11"]="organizationalUnitName",e.organizationalUnitName="2.5.4.11",e["2.16.840.1.113730.1.1"]="nsCertType",e.nsCertType="2.16.840.1.113730.1.1",e["2.5.29.1"]="authorityKeyIdentifier",e["2.5.29.2"]="keyAttributes",e["2.5.29.3"]="certificatePolicies",e["2.5.29.4"]="keyUsageRestriction",e["2.5.29.5"]="policyMapping",e["2.5.29.6"]="subtreesConstraint",e["2.5.29.7"]="subjectAltName",e["2.5.29.8"]="issuerAltName",e["2.5.29.9"]="subjectDirectoryAttributes",e["2.5.29.10"]="basicConstraints",e["2.5.29.11"]="nameConstraints",e["2.5.29.12"]="policyConstraints",e["2.5.29.13"]="basicConstraints",e["2.5.29.14"]="subjectKeyIdentifier",e.subjectKeyIdentifier="2.5.29.14",e["2.5.29.15"]="keyUsage",e.keyUsage="2.5.29.15",e["2.5.29.16"]="privateKeyUsagePeriod",e["2.5.29.17"]="subjectAltName",e.subjectAltName="2.5.29.17",e["2.5.29.18"]="issuerAltName",e.issuerAltName="2.5.29.18",e["2.5.29.19"]="basicConstraints",e.basicConstraints="2.5.29.19",e["2.5.29.20"]="cRLNumber",e["2.5.29.21"]="cRLReason",e["2.5.29.22"]="expirationDate",e["2.5.29.23"]="instructionCode",e["2.5.29.24"]="invalidityDate",e["2.5.29.25"]="cRLDistributionPoints",e["2.5.29.26"]="issuingDistributionPoint",e["2.5.29.27"]="deltaCRLIndicator",e["2.5.29.28"]="issuingDistributionPoint",e["2.5.29.29"]="certificateIssuer",e["2.5.29.30"]="nameConstraints",e["2.5.29.31"]="cRLDistributionPoints",e.cRLDistributionPoints="2.5.29.31",e["2.5.29.32"]="certificatePolicies",e.certificatePolicies="2.5.29.32",e["2.5.29.33"]="policyMappings",e["2.5.29.34"]="policyConstraints",e["2.5.29.35"]="authorityKeyIdentifier",e.authorityKeyIdentifier="2.5.29.35",e["2.5.29.36"]="policyConstraints",e["2.5.29.37"]="extKeyUsage",e.extKeyUsage="2.5.29.37",e["2.5.29.46"]="freshestCRL",e["2.5.29.54"]="inhibitAnyPolicy",e["1.3.6.1.4.1.11129.2.4.2"]="timestampList",e.timestampList="1.3.6.1.4.1.11129.2.4.2",e["1.3.6.1.5.5.7.1.1"]="authorityInfoAccess",e.authorityInfoAccess="1.3.6.1.5.5.7.1.1",e["1.3.6.1.5.5.7.3.1"]="serverAuth",e.serverAuth="1.3.6.1.5.5.7.3.1",e["1.3.6.1.5.5.7.3.2"]="clientAuth",e.clientAuth="1.3.6.1.5.5.7.3.2",e["1.3.6.1.5.5.7.3.3"]="codeSigning",e.codeSigning="1.3.6.1.5.5.7.3.3",e["1.3.6.1.5.5.7.3.4"]="emailProtection",e.emailProtection="1.3.6.1.5.5.7.3.4",e["1.3.6.1.5.5.7.3.8"]="timeStamping",e.timeStamping="1.3.6.1.5.5.7.3.8"}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/oids",["require","module"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.oids)return i.oids;i.defined.oids=!0;for(var a=0;a<n.length;++a)n[a](i);return i.oids}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1=e.asn1||{};t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(t,i,n,r){if(e.util.isArray(r)){for(var a=[],o=0;o<r.length;++o)void 0!==r[o]&&a.push(r[o]);r=a}return{tagClass:t,type:i,constructed:n,composed:n||e.util.isArray(r),value:r}};var i=t.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};t.fromDer=function(n,r){if(void 0===r&&(r=!0),"string"==typeof n&&(n=e.util.createBuffer(n)),2>n.length()){var a=Error("Too few bytes to parse DER.");throw a.bytes=n.length(),a}var o=n.getByte();a=192&o;var s=31&o,l=i(n);if(n.length()<l){if(r)throw(a=Error("Too few bytes to read ASN.1 value.")).detail=n.length()+" < "+l,a;l=n.length()}var c=32==(32&o),u=c;if(!u&&a===t.Class.UNIVERSAL&&s===t.Type.BITSTRING&&1<l){var h=n.read;if(0===n.getByte()&&(o=n.getByte(),(o&=192)===t.Class.UNIVERSAL||o===t.Class.CONTEXT_SPECIFIC))try{(u=i(n)===l-(n.read-h))&&(++h,--l)}catch(e){}n.read=h}if(u)if(u=[],void 0===l)for(;;){if(n.bytes(2)===String.fromCharCode(0,0)){n.getBytes(2);break}u.push(t.fromDer(n,r))}else for(h=n.length();0<l;)u.push(t.fromDer(n,r)),l-=h-n.length(),h=n.length();else{if(void 0===l){if(r)throw Error("Non-constructed ASN.1 object of indefinite length.");l=n.length()}if(s===t.Type.BMPSTRING)for(u="",h=0;h<l;h+=2)u+=String.fromCharCode(n.getInt16());else u=n.getBytes(l)}return t.create(a,s,c,u)},t.toDer=function(i){var n=e.util.createBuffer(),r=i.tagClass|i.type,a=e.util.createBuffer();if(i.composed){i.constructed?r|=32:a.putByte(0);for(var o=0;o<i.value.length;++o)void 0!==i.value[o]&&a.putBuffer(t.toDer(i.value[o]))}else if(i.type===t.Type.BMPSTRING)for(o=0;o<i.value.length;++o)a.putInt16(i.value.charCodeAt(o));else i.type===t.Type.INTEGER&&1<i.value.length&&(0===i.value.charCodeAt(0)&&0==(128&i.value.charCodeAt(1))||255===i.value.charCodeAt(0)&&128==(128&i.value.charCodeAt(1)))?a.putBytes(i.value.substr(1)):a.putBytes(i.value);if(n.putByte(r),127>=a.length())n.putByte(127&a.length());else{o=a.length(),i="";do{i+=String.fromCharCode(255&o),o>>>=8}while(0<o);for(n.putByte(128|i.length),o=i.length-1;0<=o;--o)n.putByte(i.charCodeAt(o))}return n.putBuffer(a),n},t.oidToDer=function(t){t=t.split(".");var i=e.util.createBuffer();i.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,r,a,o,s=2;s<t.length;++s){n=!0,r=[],a=parseInt(t[s],10);do{o=127&a,a>>>=7,n||(o|=128),r.push(o),n=!1}while(0<a);for(n=r.length-1;0<=n;--n)i.putByte(r[n])}return i},t.derToOid=function(t){"string"==typeof t&&(t=e.util.createBuffer(t));for(var i=t.getByte(),n=Math.floor(i/40)+"."+i%40,r=0;0<t.length();)r<<=7,128&(i=t.getByte())?r+=127&i:(n+="."+(r+i),r=0);return n},t.utcTimeToDate=function(e){var t=new Date,i=parseInt(e.substr(0,2),10);i=50<=i?1900+i:2e3+i;var n=parseInt(e.substr(2,2),10)-1,r=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),s=0;if(11<e.length){var l=e.charAt(10),c=10;"+"!==l&&"-"!==l&&(s=parseInt(e.substr(10,2),10),c+=2)}return t.setUTCFullYear(i,n,r),t.setUTCHours(a,o,s,0),c&&("+"===(l=e.charAt(c))||"-"===l)&&(e=6e4*(60*(i=parseInt(e.substr(c+1,2),10))+(e=parseInt(e.substr(c+4,2),10))),t.setTime("+"===l?+t-e:+t+e)),t},t.generalizedTimeToDate=function(e){var t=new Date,i=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,r=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),l=0,c=0,u=!1;"Z"===e.charAt(e.length-1)&&(u=!0);var h=e.length-5,d=e.charAt(h);return"+"!==d&&"-"!==d||(c=6e4*(60*(c=parseInt(e.substr(h+1,2),10))+(h=parseInt(e.substr(h+4,2),10))),"+"===d&&(c*=-1),u=!0),"."===e.charAt(14)&&(l=1e3*parseFloat(e.substr(14),10)),u?(t.setUTCFullYear(i,n,r),t.setUTCHours(a,o,s,l),t.setTime(+t+c)):(t.setFullYear(i,n,r),t.setHours(a,o,s,l)),t},t.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",i=[];for(i.push((""+e.getUTCFullYear()).substr(2)),i.push(""+(e.getUTCMonth()+1)),i.push(""+e.getUTCDate()),i.push(""+e.getUTCHours()),i.push(""+e.getUTCMinutes()),i.push(""+e.getUTCSeconds()),e=0;e<i.length;++e)2>i[e].length&&(t+="0"),t+=i[e];return t+"Z"},t.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",i=[];for(i.push(""+e.getUTCFullYear()),i.push(""+(e.getUTCMonth()+1)),i.push(""+e.getUTCDate()),i.push(""+e.getUTCHours()),i.push(""+e.getUTCMinutes()),i.push(""+e.getUTCSeconds()),e=0;e<i.length;++e)2>i[e].length&&(t+="0"),t+=i[e];return t+"Z"},t.integerToDer=function(t){var i=e.util.createBuffer();if(-128<=t&&128>t)return i.putSignedInt(t,8);if(-32768<=t&&32768>t)return i.putSignedInt(t,16);if(-8388608<=t&&8388608>t)return i.putSignedInt(t,24);if(-2147483648<=t&&2147483648>t)return i.putSignedInt(t,32);throw(i=Error("Integer too large; max is 32-bits.")).integer=t,i},t.derToInteger=function(t){"string"==typeof t&&(t=e.util.createBuffer(t));var i=8*t.length();if(32<i)throw Error("Integer too large; max is 32-bits.");return t.getSignedInt(i)},t.validate=function(i,n,r,a){var o=!1;if(i.tagClass!==n.tagClass&&"undefined"!=typeof n.tagClass||i.type!==n.type&&"undefined"!=typeof n.type)a&&(i.tagClass!==n.tagClass&&a.push("["+n.name+'] Expected tag class "'+n.tagClass+'", got "'+i.tagClass+'"'),i.type!==n.type&&a.push("["+n.name+'] Expected type "'+n.type+'", got "'+i.type+'"'));else if(i.constructed===n.constructed||"undefined"==typeof n.constructed){if(o=!0,n.value&&e.util.isArray(n.value))for(var s=0,l=0;o&&l<n.value.length;++l)o=n.value[l].optional||!1,i.value[s]&&((o=t.validate(i.value[s],n.value[l],r,a))?++s:n.value[l].optional&&(o=!0)),!o&&a&&a.push("["+n.name+'] Tag class "'+n.tagClass+'", type "'+n.type+'" expected value length "'+n.value.length+'", got "'+i.value.length+'"');o&&r&&(n.capture&&(r[n.capture]=i.value),n.captureAsn1&&(r[n.captureAsn1]=i))}else a&&a.push("["+n.name+'] Expected constructed "'+n.constructed+'", got "'+i.constructed+'"');return o};var n=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(i,r,a){var o="";r=r||0,a=a||2,0<r&&(o+="\n");for(var s="",l=0;l<r*a;++l)s+=" ";switch(o+=s+"Tag: ",i.tagClass){case t.Class.UNIVERSAL:o+="Universal:";break;case t.Class.APPLICATION:o+="Application:";break;case t.Class.CONTEXT_SPECIFIC:o+="Context-Specific:";break;case t.Class.PRIVATE:o+="Private:"}if(i.tagClass===t.Class.UNIVERSAL)switch(o+=i.type,i.type){case t.Type.NONE:o+=" (None)";break;case t.Type.BOOLEAN:o+=" (Boolean)";break;case t.Type.BITSTRING:o+=" (Bit string)";break;case t.Type.INTEGER:o+=" (Integer)";break;case t.Type.OCTETSTRING:o+=" (Octet string)";break;case t.Type.NULL:o+=" (Null)";break;case t.Type.OID:o+=" (Object Identifier)";break;case t.Type.ODESC:o+=" (Object Descriptor)";break;case t.Type.EXTERNAL:o+=" (External or Instance of)";break;case t.Type.REAL:o+=" (Real)";break;case t.Type.ENUMERATED:o+=" (Enumerated)";break;case t.Type.EMBEDDED:o+=" (Embedded PDV)";break;case t.Type.UTF8:o+=" (UTF8)";break;case t.Type.ROID:o+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:o+=" (Sequence)";break;case t.Type.SET:o+=" (Set)";break;case t.Type.PRINTABLESTRING:o+=" (Printable String)";break;case t.Type.IA5String:o+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:o+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:o+=" (Generalized time)";break;case t.Type.BMPSTRING:o+=" (BMP String)"}else o+=i.type;if(o=o+"\n"+s+"Constructed: "+i.constructed+"\n",i.composed){var c=0,u="";for(l=0;l<i.value.length;++l)void 0!==i.value[l]&&(c+=1,u+=t.prettyPrint(i.value[l],r+1,a),l+1<i.value.length&&(u+=","));o+=s+"Sub values: "+c+u}else if(o+=s+"Value: ",i.type===t.Type.OID&&(o+=r=t.derToOid(i.value),e.pki&&e.pki.oids&&r in e.pki.oids&&(o+=" ("+e.pki.oids[r]+") ")),i.type===t.Type.INTEGER)try{o+=t.derToInteger(i.value)}catch(t){o+="0x"+e.util.bytesToHex(i.value)}else i.type===t.Type.OCTETSTRING?(n.test(i.value)||(o+="("+i.value+") "),o+="0x"+e.util.bytesToHex(i.value)):o=i.type===t.Type.UTF8?o+e.util.decodeUtf8(i.value):i.type===t.Type.PRINTABLESTRING||i.type===t.Type.IA5String?o+i.value:n.test(i.value)?o+"0x"+e.util.bytesToHex(i.value):0===i.value.length?o+"[null]":o+i.value;return o}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/asn1",["require","module","./util","./oids"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.asn1)return i.asn1;i.defined.asn1=!0;for(var a=0;a<n.length;++a)n[a](i);return i.asn1}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(){r=String.fromCharCode(128),r+=e.util.fillString(String.fromCharCode(0),64),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],o=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],s=Array(64);for(var t=0;64>t;++t)s[t]=Math.floor(4294967296*Math.abs(Math.sin(t+1)));l=!0}function i(e,t,i){for(var n,r,l,c,u,h,d,p=i.length();64<=p;){for(r=e.h0,l=e.h1,c=e.h2,u=e.h3,d=0;16>d;++d)t[d]=i.getInt32Le(),n=r+(n=u^l&(c^u))+s[d]+t[d],r=u,u=c,c=l,l+=n<<(h=o[d])|n>>>32-h;for(;32>d;++d)n=r+(n=c^u&(l^c))+s[d]+t[a[d]],r=u,u=c,c=l,l+=n<<(h=o[d])|n>>>32-h;for(;48>d;++d)n=r+(n=l^c^u)+s[d]+t[a[d]],r=u,u=c,c=l,l+=n<<(h=o[d])|n>>>32-h;for(;64>d;++d)n=r+(n=c^(l|~u))+s[d]+t[a[d]],r=u,u=c,c=l,l+=n<<(h=o[d])|n>>>32-h;e.h0=e.h0+r|0,e.h1=e.h1+l|0,e.h2=e.h2+c|0,e.h3=e.h3+u|0,p-=64}}var n=e.md5=e.md5||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.md5=e.md.algorithms.md5=n,n.create=function(){l||t();var n=null,a=e.util.createBuffer(),o=Array(16),s={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var t=s.messageLengthSize/4,i=0;i<t;++i)s.fullMessageLength.push(0);return a=e.util.createBuffer(),n={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},s}};return s.start(),s.update=function(t,r){"utf8"===r&&(t=e.util.encodeUtf8(t));var l=t.length;s.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var c=s.fullMessageLength.length-1;0<=c;--c)s.fullMessageLength[c]+=l[1],l[1]=l[0]+(s.fullMessageLength[c]/4294967296>>>0),s.fullMessageLength[c]>>>=0,l[0]=l[1]/4294967296>>>0;return a.putBytes(t),i(n,o,a),(2048<a.read||0===a.length())&&a.compact(),s},s.digest=function(){var t=e.util.createBuffer();t.putBytes(a.bytes()),t.putBytes(r.substr(0,s.blockLength-(s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize&s.blockLength-1)));for(var l,c=0,u=s.fullMessageLength.length-1;0<=u;--u)c=(l=8*s.fullMessageLength[u]+c)/4294967296>>>0,t.putInt32Le(l>>>0);return i(l={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3},o,t),(t=e.util.createBuffer()).putInt32Le(l.h0),t.putInt32Le(l.h1),t.putInt32Le(l.h2),t.putInt32Le(l.h3),t},s};var r=null,a=null,o=null,s=null,l=!1}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/md5",["require","module","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.md5)return i.md5;i.defined.md5=!0;for(var a=0;a<n.length;++a)n[a](i);return i.md5}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,i){for(var n,r,a,o,s,l,c,u=i.length();64<=u;){for(r=e.h0,a=e.h1,o=e.h2,s=e.h3,l=e.h4,c=0;16>c;++c)n=i.getInt32(),t[c]=n,n=(r<<5|r>>>27)+(s^a&(o^s))+l+1518500249+n,l=s,s=o,o=(a<<30|a>>>2)>>>0,a=r,r=n;for(;20>c;++c)t[c]=n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,n=(r<<5|r>>>27)+(s^a&(o^s))+l+1518500249+n,l=s,s=o,o=(a<<30|a>>>2)>>>0,a=r,r=n;for(;32>c;++c)t[c]=n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,n=(r<<5|r>>>27)+(a^o^s)+l+1859775393+n,l=s,s=o,o=(a<<30|a>>>2)>>>0,a=r,r=n;for(;40>c;++c)t[c]=n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,n=(r<<5|r>>>27)+(a^o^s)+l+1859775393+n,l=s,s=o,o=(a<<30|a>>>2)>>>0,a=r,r=n;for(;60>c;++c)t[c]=n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,n=(r<<5|r>>>27)+(a&o|s&(a^o))+l+2400959708+n,l=s,s=o,o=(a<<30|a>>>2)>>>0,a=r,r=n;for(;80>c;++c)t[c]=n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,n=(r<<5|r>>>27)+(a^o^s)+l+3395469782+n,l=s,s=o,o=(a<<30|a>>>2)>>>0,a=r,r=n;e.h0=e.h0+r|0,e.h1=e.h1+a|0,e.h2=e.h2+o|0,e.h3=e.h3+s|0,e.h4=e.h4+l|0,u-=64}}var i=e.sha1=e.sha1||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha1=e.md.algorithms.sha1=i,i.create=function(){r||(n=String.fromCharCode(128),n+=e.util.fillString(String.fromCharCode(0),64),r=!0);var i=null,a=e.util.createBuffer(),o=Array(80),s={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var t=s.messageLengthSize/4,n=0;n<t;++n)s.fullMessageLength.push(0);return a=e.util.createBuffer(),i={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},s}};return s.start(),s.update=function(n,r){"utf8"===r&&(n=e.util.encodeUtf8(n));var l=n.length;s.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var c=s.fullMessageLength.length-1;0<=c;--c)s.fullMessageLength[c]+=l[1],l[1]=l[0]+(s.fullMessageLength[c]/4294967296>>>0),s.fullMessageLength[c]>>>=0,l[0]=l[1]/4294967296>>>0;return a.putBytes(n),t(i,o,a),(2048<a.read||0===a.length())&&a.compact(),s},s.digest=function(){var r=e.util.createBuffer();r.putBytes(a.bytes()),r.putBytes(n.substr(0,s.blockLength-(s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize&s.blockLength-1)));for(var l,c=8*s.fullMessageLength[0],u=0;u<s.fullMessageLength.length-1;++u)r.putInt32((c+=(l=8*s.fullMessageLength[u+1])/4294967296>>>0)>>>0),c=l>>>0;return r.putInt32(c),t(l={h0:i.h0,h1:i.h1,h2:i.h2,h3:i.h3,h4:i.h4},o,r),(r=e.util.createBuffer()).putInt32(l.h0),r.putInt32(l.h1),r.putInt32(l.h2),r.putInt32(l.h3),r.putInt32(l.h4),r},s};var n=null,r=!1}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/sha1",["require","module","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.sha1)return i.sha1;i.defined.sha1=!0;for(var a=0;a<n.length;++a)n[a](i);return i.sha1}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,i){for(var n,r,o,s,l,c,u,h,d,p,f,g,m=i.length();64<=m;){for(s=0;16>s;++s)t[s]=i.getInt32();for(;64>s;++s)t[s]=(n=((n=t[s-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10)+t[s-7]+(r=((r=t[s-15])>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)+t[s-16]|0;for(l=e.h0,c=e.h1,u=e.h2,h=e.h3,d=e.h4,p=e.h5,f=e.h6,g=e.h7,s=0;64>s;++s)r=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),o=l&c|u&(l^c),n=g+(n=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(f^d&(p^f))+a[s]+t[s],g=f,f=p,p=d,d=h+n>>>0,h=u,u=c,c=l,l=n+(r+=o)>>>0;e.h0=e.h0+l|0,e.h1=e.h1+c|0,e.h2=e.h2+u|0,e.h3=e.h3+h|0,e.h4=e.h4+d|0,e.h5=e.h5+p|0,e.h6=e.h6+f|0,e.h7=e.h7+g|0,m-=64}}var i=e.sha256=e.sha256||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha256=e.md.algorithms.sha256=i,i.create=function(){r||(n=String.fromCharCode(128),n+=e.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=!0);var i=null,o=e.util.createBuffer(),s=Array(64),l={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){l.messageLength=0,l.fullMessageLength=l.messageLength64=[];for(var t=l.messageLengthSize/4,n=0;n<t;++n)l.fullMessageLength.push(0);return o=e.util.createBuffer(),i={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},l}};return l.start(),l.update=function(n,r){"utf8"===r&&(n=e.util.encodeUtf8(n));var a=n.length;l.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=l.fullMessageLength.length-1;0<=c;--c)l.fullMessageLength[c]+=a[1],a[1]=a[0]+(l.fullMessageLength[c]/4294967296>>>0),l.fullMessageLength[c]>>>=0,a[0]=a[1]/4294967296>>>0;return o.putBytes(n),t(i,s,o),(2048<o.read||0===o.length())&&o.compact(),l},l.digest=function(){var r=e.util.createBuffer();r.putBytes(o.bytes()),r.putBytes(n.substr(0,l.blockLength-(l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize&l.blockLength-1)));for(var a,c=8*l.fullMessageLength[0],u=0;u<l.fullMessageLength.length-1;++u)r.putInt32((c+=(a=8*l.fullMessageLength[u+1])/4294967296>>>0)>>>0),c=a>>>0;return r.putInt32(c),t(a={h0:i.h0,h1:i.h1,h2:i.h2,h3:i.h3,h4:i.h4,h5:i.h5,h6:i.h6,h7:i.h7},s,r),(r=e.util.createBuffer()).putInt32(a.h0),r.putInt32(a.h1),r.putInt32(a.h2),r.putInt32(a.h3),r.putInt32(a.h4),r.putInt32(a.h5),r.putInt32(a.h6),r.putInt32(a.h7),r},l};var n=null,r=!1,a=null}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/sha256",["require","module","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.sha256)return i.sha256;i.defined.sha256=!0;for(var a=0;a<n.length;++a)n[a](i);return i.sha256}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,i){for(var n,r,a,s,l,c,u,h,d,p,f,g,m,y,v,b,C,S,w,x,T,k,E=i.length();128<=E;){for(k=0;16>k;++k)t[k][0]=i.getInt32()>>>0,t[k][1]=i.getInt32()>>>0;for(;80>k;++k)n=(((c=(l=t[k-2])[0])>>>19|(l=l[1])<<13)^(l>>>29|c<<3)^c>>>6)>>>0,r=((c<<13|l>>>19)^(l<<3|c>>>29)^(c<<26|l>>>6))>>>0,a=(((c=(l=t[k-15])[0])>>>1|(l=l[1])<<31)^(c>>>8|l<<24)^c>>>7)>>>0,s=((c<<31|l>>>1)^(c<<24|l>>>8)^(c<<25|l>>>7))>>>0,t[k][0]=n+(c=t[k-7])[0]+a+(u=t[k-16])[0]+((l=r+c[1]+s+u[1])/4294967296>>>0)>>>0,t[k][1]=l>>>0;for(c=e[0][0],u=e[0][1],h=e[1][0],d=e[1][1],p=e[2][0],f=e[2][1],g=e[3][0],m=e[3][1],y=e[4][0],v=e[4][1],b=e[5][0],C=e[5][1],S=e[6][0],w=e[6][1],x=e[7][0],T=e[7][1],k=0;80>k;++k)n=x+(n=((y>>>14|v<<18)^(y>>>18|v<<14)^(v>>>9|y<<23))>>>0)+(r=(S^y&(b^S))>>>0)+o[k][0]+t[k][0]+((l=T+(l=((y<<18|v>>>14)^(y<<14|v>>>18)^(v<<23|y>>>9))>>>0)+((w^v&(C^w))>>>0)+o[k][1]+t[k][1])/4294967296>>>0)>>>0,r=l>>>0,a=(a=((c>>>28|u<<4)^(u>>>2|c<<30)^(u>>>7|c<<25))>>>0)+((c&h|p&(c^h))>>>0)+((l=(s=((c<<4|u>>>28)^(u<<30|c>>>2)^(u<<25|c>>>7))>>>0)+((u&d|f&(u^d))>>>0))/4294967296>>>0)>>>0,s=l>>>0,x=S,T=w,S=b,w=C,b=y,C=v,y=g+n+((l=m+r)/4294967296>>>0)>>>0,v=l>>>0,g=p,m=f,p=h,f=d,h=c,d=u,c=n+a+((l=r+s)/4294967296>>>0)>>>0,u=l>>>0;e[0][0]=e[0][0]+c+((l=e[0][1]+u)/4294967296>>>0)>>>0,e[0][1]=l>>>0,e[1][0]=e[1][0]+h+((l=e[1][1]+d)/4294967296>>>0)>>>0,e[1][1]=l>>>0,e[2][0]=e[2][0]+p+((l=e[2][1]+f)/4294967296>>>0)>>>0,e[2][1]=l>>>0,e[3][0]=e[3][0]+g+((l=e[3][1]+m)/4294967296>>>0)>>>0,e[3][1]=l>>>0,e[4][0]=e[4][0]+y+((l=e[4][1]+v)/4294967296>>>0)>>>0,e[4][1]=l>>>0,e[5][0]=e[5][0]+b+((l=e[5][1]+C)/4294967296>>>0)>>>0,e[5][1]=l>>>0,e[6][0]=e[6][0]+S+((l=e[6][1]+w)/4294967296>>>0)>>>0,e[6][1]=l>>>0,e[7][0]=e[7][0]+x+((l=e[7][1]+T)/4294967296>>>0)>>>0,e[7][1]=l>>>0,E-=128}}var i=e.sha512=e.sha512||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha512=e.md.algorithms.sha512=i;var n=e.sha384=e.sha512.sha384=e.sha512.sha384||{};n.create=function(){return i.create("SHA-384")},e.md.sha384=e.md.algorithms.sha384=n,e.sha512.sha256=e.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},e.md["sha512/256"]=e.md.algorithms["sha512/256"]=e.sha512.sha256,e.sha512.sha224=e.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},e.md["sha512/224"]=e.md.algorithms["sha512/224"]=e.sha512.sha224,i.create=function(i){if(a||(r=String.fromCharCode(128),r+=e.util.fillString(String.fromCharCode(0),128),o=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],s={"SHA-512":[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],"SHA-384":[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],"SHA-512/256":[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],"SHA-512/224":[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]]},a=!0),"undefined"==typeof i&&(i="SHA-512"),!(i in s))throw Error("Invalid SHA-512 algorithm: "+i);for(var n=s[i],l=null,c=e.util.createBuffer(),u=Array(80),h=0;80>h;++h)u[h]=Array(2);var d={algorithm:i.replace("-","").toLowerCase(),blockLength:128,digestLength:64,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){d.messageLength=0,d.fullMessageLength=d.messageLength128=[];for(var t=d.messageLengthSize/4,i=0;i<t;++i)d.fullMessageLength.push(0);for(c=e.util.createBuffer(),l=Array(n.length),i=0;i<n.length;++i)l[i]=n[i].slice(0);return d}};return d.start(),d.update=function(i,n){"utf8"===n&&(i=e.util.encodeUtf8(i));var r=i.length;d.messageLength+=r,r=[r/4294967296>>>0,r>>>0];for(var a=d.fullMessageLength.length-1;0<=a;--a)d.fullMessageLength[a]+=r[1],r[1]=r[0]+(d.fullMessageLength[a]/4294967296>>>0),d.fullMessageLength[a]>>>=0,r[0]=r[1]/4294967296>>>0;return c.putBytes(i),t(l,u,c),(2048<c.read||0===c.length())&&c.compact(),d},d.digest=function(){var n=e.util.createBuffer();n.putBytes(c.bytes()),n.putBytes(r.substr(0,d.blockLength-(d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize&d.blockLength-1)));for(var a,o,s=8*d.fullMessageLength[0],h=0;h<d.fullMessageLength.length-1;++h)n.putInt32((s+=o=(a=8*d.fullMessageLength[h+1])/4294967296>>>0)>>>0),s=a>>>0;for(n.putInt32(s),a=Array(l.length),h=0;h<l.length;++h)a[h]=l[h].slice(0);for(t(a,u,n),n=e.util.createBuffer(),o="SHA-512"===i?a.length:"SHA-384"===i?a.length-2:a.length-4,h=0;h<o;++h)n.putInt32(a[h][0]),h===o-1&&"SHA-512/224"===i||n.putInt32(a[h][1]);return n},d};var r=null,a=!1,o=null,s=null}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/sha512",["require","module","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.sha512)return i.sha512;i.defined.sha512=!0;for(var a=0;a<n.length;++a)n[a](i);return i.sha512}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.md=e.md||{},e.md.algorithms={md5:e.md5,sha1:e.sha1,sha256:e.sha256},e.md.md5=e.md5,e.md.sha1=e.sha1,e.md.sha256=e.sha256}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/md","require module ./md5 ./sha1 ./sha256 ./sha512".split(" "),function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.md)return i.md;i.defined.md=!0;for(var a=0;a<n.length;++a)n[a](i);return i.md}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){(e.hmac=e.hmac||{}).create=function(){var t=null,i=null,n=null,r={start:function(r,a){if(null!==r)if("string"==typeof r){if(!((r=r.toLowerCase())in e.md.algorithms))throw Error('Unknown hash algorithm "'+r+'"');t=e.md.algorithms[r].create()}else t=r;if(null!==a){if("string"==typeof a)a=e.util.createBuffer(a);else if(e.util.isArray(a)){var o=a;a=e.util.createBuffer();for(var s=0;s<o.length;++s)a.putByte(o[s])}var l=a.length();for(l>t.blockLength&&(t.start(),t.update(a.bytes()),a=t.digest()),i=e.util.createBuffer(),n=e.util.createBuffer(),l=a.length(),s=0;s<l;++s)o=a.at(s),i.putByte(54^o),n.putByte(92^o);if(l<t.blockLength)for(o=t.blockLength-l,s=0;s<o;++s)i.putByte(54),n.putByte(92);i=i.bytes(),n=n.bytes()}t.start(),t.update(i)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(n),t.update(e),t.digest()}};return r.digest=r.getMac,r}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/hmac",["require","module","./md","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.hmac)return i.hmac;i.defined.hmac=!0;for(var a=0;a<n.length;++a)n[a](i);return i.hmac}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e){for(var t=e.name+": ",i=[],n=function(e,t){return" "+t},r=0;r<e.values.length;++r)i.push(e.values[r].replace(/^(\S+\r\n)/,n));for(t+=i.join(",")+"\r\n",i=0,e=-1,r=0;r<t.length;++r,++i)65<i&&-1!==e?(t=","===(i=t[e])?t.substr(0,++e)+"\r\n "+t.substr(e):t.substr(0,e)+"\r\n"+i+t.substr(e+1),i=r-e-1,e=-1,++r):" "!==t[r]&&"\t"!==t[r]&&","!==t[r]||(e=r);return t}var i=e.pem=e.pem||{};i.encode=function(i,n){n=n||{};var r="-----BEGIN "+i.type+"-----\r\n";if(i.procType){var a={name:"Proc-Type",values:[String(i.procType.version),i.procType.type]};r+=t(a)}if(i.contentDomain&&(r+=t(a={name:"Content-Domain",values:[i.contentDomain]})),i.dekInfo&&(a={name:"DEK-Info",values:[i.dekInfo.algorithm]},i.dekInfo.parameters&&a.values.push(i.dekInfo.parameters),r+=t(a)),i.headers)for(a=0;a<i.headers.length;++a)r+=t(i.headers[a]);return i.procType&&(r+="\r\n"),(r+=e.util.encode64(i.body,n.maxline||64)+"\r\n")+"-----END "+i.type+"-----\r\n"},i.decode=function(t){for(var i,n=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/;i=r.exec(t);){var s={type:i[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:e.util.decode64(i[3])};if(n.push(s),i[2]){for(var l=i[2].split(o),c=0;i&&c<l.length;){i=l[c].replace(/\s+$/,"");for(var u=c+1;u<l.length;++u){var h=l[u];if(!/\s/.test(h[0]))break;i+=h,c=u}if(i=i.match(a)){u={name:i[1],values:[]},h=i[2].split(",");for(var d=0;d<h.length;++d)u.values.push(h[d].replace(/^\s+/,""));if(s.procType)if(s.contentDomain||"Content-Domain"!==u.name)if(s.dekInfo||"DEK-Info"!==u.name)s.headers.push(u);else{if(0===u.values.length)throw Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');s.dekInfo={algorithm:h[0],parameters:h[1]||null}}else s.contentDomain=h[0]||"";else{if("Proc-Type"!==u.name)throw Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==u.values.length)throw Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');s.procType={version:h[0],type:h[1]}}}++c}if("ENCRYPTED"===s.procType&&!s.dekInfo)throw Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===n.length)throw Error("Invalid PEM formatted message.");return n}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/pem",["require","module","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.pem)return i.pem;i.defined.pem=!0;for(var a=0;a<n.length;++a)n[a](i);return i.pem}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,i){e.cipher.registerAlgorithm(t,function(){return new e.des.Algorithm(t,i)})}function i(e,t,i,n){var d=32===e.length?3:9;n=3===d?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var p=t[0],f=t[1];p^=(t=252645135&(p>>>4^f))<<4,p^=(t=65535&(p>>>16^(f^=t)))<<16,p^=t=858993459&((f^=t)>>>2^p),p^=t=16711935&((f^=t<<2)>>>8^p),p=(p^=(t=1431655765&(p>>>1^(f^=t<<8)))<<1)<<1|p>>>31,f=(f^=t)<<1|f>>>31;for(var g=0;g<d;g+=3){for(var m=n[g+1],y=n[g+2],v=n[g];v!=m;v+=y){var b=f^e[v],C=(f>>>4|f<<28)^e[v+1];t=p,p=f,f=t^(a[b>>>24&63]|s[b>>>16&63]|c[b>>>8&63]|h[63&b]|r[C>>>24&63]|o[C>>>16&63]|l[C>>>8&63]|u[63&C])}t=p,p=f,f=t}p=p>>>1|p<<31,p^=(t=1431655765&(p>>>1^(f=f>>>1|f<<31)))<<1,p^=t=16711935&((f^=t)>>>8^p),p^=t=858993459&((f^=t<<8)>>>2^p),i[0]=(p^=(t=65535&(p>>>16^(f^=t<<2)))<<16)^(t=252645135&(p>>>4^(f^=t)))<<4,i[1]=f^t}function n(t){var i="DES-"+((t=t||{}).mode||"CBC").toUpperCase(),n=t.decrypt?e.cipher.createDecipher(i,t.key):e.cipher.createCipher(i,t.key),r=n.start;return n.start=function(t,i){var a=null;i instanceof e.util.ByteBuffer&&(a=i,i={}),(i=i||{}).output=a,i.iv=t,r.call(n,i)},n}e.des=e.des||{},e.des.startEncrypting=function(e,t,i,r){return(e=n({key:e,output:i,decrypt:!1,mode:r||(null===t?"ECB":"CBC")})).start(t),e},e.des.createEncryptionCipher=function(e,t){return n({key:e,output:null,decrypt:!1,mode:t})},e.des.startDecrypting=function(e,t,i,r){return(e=n({key:e,output:i,decrypt:!0,mode:r||(null===t?"ECB":"CBC")})).start(t),e},e.des.createDecryptionCipher=function(e,t){return n({key:e,output:null,decrypt:!0,mode:t})},e.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return i(n._keys,e,t,!1)},decrypt:function(e,t){return i(n._keys,e,t,!0)}}}),n._init=!1},e.des.Algorithm.prototype.initialize=function(t){if(!this._init){if(t=e.util.createBuffer(t.key),0===this.name.indexOf("3DES")&&24!==t.length())throw Error("Invalid Triple-DES key size: "+8*t.length());for(var i,n=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],a=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],l=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],h=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],g=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=8<t.length()?3:1,v=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],C=0,S=0;S<y;S++){var w=t.getInt32(),x=t.getInt32();w^=(i=252645135&(w>>>4^x))<<4,w^=i=65535&((x^=i)>>>-16^w),w^=(i=858993459&(w>>>2^(x^=i<<-16)))<<2,w^=i=65535&((x^=i)>>>-16^w),w^=(i=1431655765&(w>>>1^(x^=i<<-16)))<<1,w^=i=16711935&((x^=i)>>>8^w),i=(w^=(i=1431655765&(w>>>1^(x^=i<<8)))<<1)<<8|(x^=i)>>>20&240,w=x<<24|x<<8&16711680|x>>>8&65280|x>>>24&240,x=i;for(var T=0;T<b.length;++T){b[T]?(w=w<<2|w>>>26,x=x<<2|x>>>26):(w=w<<1|w>>>27,x=x<<1|x>>>27);var k=n[(w&=-15)>>>28]|r[w>>>24&15]|a[w>>>20&15]|o[w>>>16&15]|s[w>>>12&15]|l[w>>>8&15]|c[w>>>4&15],E=u[(x&=-15)>>>28]|h[x>>>24&15]|d[x>>>20&15]|p[x>>>16&15]|f[x>>>12&15]|g[x>>>8&15]|m[x>>>4&15];v[C++]=k^(i=65535&(E>>>16^k)),v[C++]=E^i<<16}}this._keys=v,this._init=!0}},t("DES-ECB",e.cipher.modes.ecb),t("DES-CBC",e.cipher.modes.cbc),t("DES-CFB",e.cipher.modes.cfb),t("DES-OFB",e.cipher.modes.ofb),t("DES-CTR",e.cipher.modes.ctr),t("3DES-ECB",e.cipher.modes.ecb),t("3DES-CBC",e.cipher.modes.cbc),t("3DES-CFB",e.cipher.modes.cfb),t("3DES-OFB",e.cipher.modes.ofb),t("3DES-CTR",e.cipher.modes.ctr);var r=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],a=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],o=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],s=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],l=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],c=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],u=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],h=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/des",["require","module","./cipher","./cipherModes","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.des)return i.des;i.defined.des=!0;for(var a=0;a<n.length;++a)n[a](i);return i.des}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var i,n=e.pkcs5=e.pkcs5||{},r="undefined"!=typeof process&&process.versions&&process.versions.node;r&&!e.disableNativeCode&&(i=t("crypto")),e.pbkdf2=n.pbkdf2=function(t,n,a,o,s,l){function c(){if(y>d)return l(null,m);f.start(null,null),f.update(n),f.update(e.util.int32ToBytes(y)),v=g=f.digest().getBytes(),b=2,u()}function u(){if(b<=a)return f.start(null,null),f.update(g),C=f.digest().getBytes(),v=e.util.xorBytes(v,C,h),g=C,++b,e.util.setImmediate(u);m+=y<d?v:v.substr(0,p),++y,c()}if("function"==typeof s&&(l=s,s=null),r&&!e.disableNativeCode&&i.pbkdf2&&(null===s||"object"!=typeof s)&&(4<i.pbkdf2Sync.length||!s||"sha1"===s))return"string"!=typeof s&&(s="sha1"),n=new Buffer(n,"binary"),l?4===i.pbkdf2Sync.length?i.pbkdf2(t,n,a,o,function(e,t){if(e)return l(e);l(null,t.toString("binary"))}):i.pbkdf2(t,n,a,o,s,function(e,t){if(e)return l(e);l(null,t.toString("binary"))}):4===i.pbkdf2Sync.length?i.pbkdf2Sync(t,n,a,o).toString("binary"):i.pbkdf2Sync(t,n,a,o,s).toString("binary");if("undefined"!=typeof s&&null!==s||(s=e.md.sha1.create()),"string"==typeof s){if(!(s in e.md.algorithms))throw Error("Unknown hash algorithm: "+s);s=e.md[s].create()}var h=s.digestLength;if(o>4294967295*h){if(t=Error("Derived key is too long."),l)return l(t);throw t}var d=Math.ceil(o/h),p=o-(d-1)*h,f=e.hmac.create();f.start(s,t);var g,m="";if(!l){for(var y=1;y<=d;++y){f.start(null,null),f.update(n),f.update(e.util.int32ToBytes(y));for(var v=g=f.digest().getBytes(),b=2;b<=a;++b){f.start(null,null),f.update(g);var C=f.digest().getBytes();v=e.util.xorBytes(v,C,h),g=C}m+=y<d?v:v.substr(0,p)}return m}y=1,c()}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/pbkdf2",["require","module","./hmac","./md","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.pbkdf2)return i.pbkdf2;i.defined.pbkdf2=!0;for(var a=0;a<n.length;++a)n[a](i);return i.pbkdf2}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var i="undefined"!=typeof process&&process.versions&&process.versions.node,n=null;e.disableNativeCode||!i||process.versions["node-webkit"]||(n=t("crypto")),(e.prng=e.prng||{}).create=function(t){function i(e){if(32<=o.pools[0].messageLength)return r(),e();o.seedFile(32-o.pools[0].messageLength<<5,function(t,i){if(t)return e(t);o.collect(i),r(),e()})}function r(){var e=o.plugin.md.create();e.update(o.pools[0].digest().getBytes()),o.pools[0].start();for(var t=1,i=1;32>i;++i)0==(t=31===t?2147483648:t<<2)%o.reseeds&&(e.update(o.pools[i].digest().getBytes()),o.pools[i].start());t=e.digest().getBytes(),e.start(),e.update(t),e=e.digest().getBytes(),o.key=o.plugin.formatKey(t),o.seed=o.plugin.formatSeed(e),o.reseeds=4294967295===o.reseeds?0:o.reseeds+1,o.generated=0}function a(t){var i=null;if("undefined"!=typeof window){var n=window.crypto||window.msCrypto;n&&n.getRandomValues&&(i=function(e){return n.getRandomValues(e)})}var r=e.util.createBuffer();if(i)for(;r.length()<t;){var a=Math.max(1,Math.min(t-r.length(),65536)/4),o=new Uint32Array(Math.floor(a));try{for(i(o),a=0;a<o.length;++a)r.putInt32(o[a])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(r.length()<t)for(i=Math.floor(65536*Math.random());r.length()<t;)for(a=16807*(65535&i),a+=(32767&(i=16807*(i>>16)))<<16,i=4294967295&(a=(2147483647&(a+=i>>15))+(a>>31)),a=0;3>a;++a)o=i>>>(a<<3),o^=Math.floor(256*Math.random()),r.putByte(String.fromCharCode(255&o));return r.getBytes(t)}var o={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0};t=t.md;for(var s=Array(32),l=0;32>l;++l)s[l]=t.create();return o.pools=s,o.pool=0,o.generate=function(t,n){if(!n)return o.generateSync(t);var r=o.plugin.cipher,a=o.plugin.increment,s=o.plugin.formatKey,l=o.plugin.formatSeed,c=e.util.createBuffer();o.key=null,function u(h){return h?n(h):c.length()>=t?n(null,c.getBytes(t)):(1048575<o.generated&&(o.key=null),null===o.key?e.util.nextTick(function(){i(u)}):(h=r(o.key,o.seed),o.generated+=h.length,c.putBytes(h),o.key=s(r(o.key,a(o.seed))),o.seed=l(r(o.key,o.seed)),void e.util.setImmediate(u)))}()},o.generateSync=function(t){var i=o.plugin.cipher,n=o.plugin.increment,a=o.plugin.formatKey,s=o.plugin.formatSeed;o.key=null;for(var l=e.util.createBuffer();l.length()<t;){1048575<o.generated&&(o.key=null),null===o.key&&(32<=o.pools[0].messageLength||o.collect(o.seedFileSync(32-o.pools[0].messageLength<<5)),r());var c=i(o.key,o.seed);o.generated+=c.length,l.putBytes(c),o.key=a(i(o.key,n(o.seed))),o.seed=s(i(o.key,o.seed))}return l.getBytes(t)},n?(o.seedFile=function(e,t){n.randomBytes(e,function(e,i){if(e)return t(e);t(null,i.toString())})},o.seedFileSync=function(e){return n.randomBytes(e).toString()}):(o.seedFile=function(e,t){try{t(null,a(e))}catch(e){t(e)}},o.seedFileSync=a),o.collect=function(e){for(var t=e.length,i=0;i<t;++i)o.pools[o.pool].update(e.substr(i,1)),o.pool=31===o.pool?0:o.pool+1},o.collectInt=function(e,t){for(var i="",n=0;n<t;n+=8)i+=String.fromCharCode(e>>n&255);o.collect(i)},o.registerWorker=function(e){e===self?o.seedFile=function(e,t){self.addEventListener("message",function e(i){(i=i.data).forge&&i.forge.prng&&(self.removeEventListener("message",e),t(i.forge.prng.err,i.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:e}}})}:e.addEventListener("message",function(t){(t=t.data).forge&&t.forge.prng&&o.seedFile(t.forge.prng.needed,function(t,i){e.postMessage({forge:{prng:{err:t,bytes:i}}})})})},o}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/prng",["require","module","./md","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.prng)return i.prng;i.defined.prng=!0;for(var a=0;a<n.length;++a)n[a](i);return i.prng}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.random&&e.random.getBytes||function(t){function i(){var t=e.prng.create(n);return t.getBytes=function(e,i){return t.generate(e,i)},t.getBytesSync=function(e){return t.generate(e)},t}var n={},r=Array(4),a=e.util.createBuffer();n.formatKey=function(t){var i=e.util.createBuffer(t);return(t=Array(4))[0]=i.getInt32(),t[1]=i.getInt32(),t[2]=i.getInt32(),t[3]=i.getInt32(),e.aes._expandKey(t,!1)},n.formatSeed=function(t){var i=e.util.createBuffer(t);return(t=Array(4))[0]=i.getInt32(),t[1]=i.getInt32(),t[2]=i.getInt32(),t[3]=i.getInt32(),t},n.cipher=function(t,i){return e.aes._updateBlock(t,i,r,!1),a.putInt32(r[0]),a.putInt32(r[1]),a.putInt32(r[2]),a.putInt32(r[3]),a.getBytes()},n.increment=function(e){return++e[3],e},n.md=e.md.sha256;var o=i(),s="undefined"!=typeof process&&process.versions&&process.versions.node,l=null;if("undefined"!=typeof window){var c=window.crypto||window.msCrypto;c&&c.getRandomValues&&(l=function(e){return c.getRandomValues(e)})}if(e.disableNativeCode||!s&&!l){if(o.collectInt(+new Date,32),"undefined"!=typeof navigator){for(var u in s="",navigator)try{"string"==typeof navigator[u]&&(s+=navigator[u])}catch(e){}o.collect(s),s=null}t&&(t().mousemove(function(e){o.collectInt(e.clientX,16),o.collectInt(e.clientY,16)}),t().keypress(function(e){o.collectInt(e.charCode,8)}))}if(e.random)for(u in o)e.random[u]=o[u];else e.random=o;e.random.createInstance=i}("undefined"!=typeof jQuery?jQuery:null)}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/random","require module ./aes ./md ./prng ./util".split(" "),function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.random)return i.random;i.defined.random=!0;for(var a=0;a<n.length;++a)n[a](i);return i.random}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],i=[1,2,3,5];e.rc2=e.rc2||{},e.rc2.expandKey=function(i,n){"string"==typeof i&&(i=e.util.createBuffer(i)),n=n||128;var r,a=i,o=i.length(),s=n,l=Math.ceil(s/8);for(s=255>>(7&s),r=o;128>r;r++)a.putByte(t[a.at(r-1)+a.at(r-o)&255]);for(a.setAt(128-l,t[a.at(128-l)&s]),r=127-l;0<=r;r--)a.setAt(r,t[a.at(r+1)^a.at(r+l)]);return a};var n=function(t,n,r){var a,o,s=!1,l=null,c=null,u=null,h=[];for(t=e.rc2.expandKey(t,n),a=0;64>a;a++)h.push(t.getInt16Le());if(r)var d=function(e){for(a=0;4>a;a++){e[a]+=h[o]+(e[(a+3)%4]&e[(a+2)%4])+(~e[(a+3)%4]&e[(a+1)%4]);var t=e[a],n=i[a];e[a]=t<<n&65535|(65535&t)>>16-n,o++}},p=function(e){for(a=0;4>a;a++)e[a]+=h[63&e[(a+3)%4]]};else d=function(e){for(a=3;0<=a;a--){var t=e[a],n=i[a];e[a]=(65535&t)>>n|t<<16-n&65535,e[a]-=h[o]+(e[(a+3)%4]&e[(a+2)%4])+(~e[(a+3)%4]&e[(a+1)%4]),o--}},p=function(e){for(a=3;0<=a;a--)e[a]-=h[63&e[(a+3)%4]]};var f=null;return f={start:function(t,i){t&&"string"==typeof t&&(t=e.util.createBuffer(t)),s=!1,l=e.util.createBuffer(),c=i||new e.util.createBuffer,u=t,f.output=c},update:function(e){for(s||l.putBuffer(e);8<=l.length();){e=[[5,d],[1,p],[6,d],[1,p],[5,d]];var t=[];for(a=0;4>a;a++){var i=l.getInt16Le();null!==u&&(r?i^=u.getInt16Le():u.putInt16Le(i)),t.push(65535&i)}for(o=r?0:63,i=0;i<e.length;i++)for(var n=0;n<e[i][0];n++)e[i][1](t);for(a=0;4>a;a++)null!==u&&(r?u.putInt16Le(t[a]):t[a]^=u.getInt16Le()),c.putInt16Le(t[a])}},finish:function(e){var t=!0;if(r)if(e)t=e(8,l,!r);else{var i=8===l.length()?8:8-l.length();l.fillWithByte(i,i)}return t&&(s=!0,f.update()),!r&&(t=0===l.length())&&(e?t=e(8,c,!r):(e=c.length(),(i=c.at(e-1))>e?t=!1:c.truncate(i))),t}}};e.rc2.startEncrypting=function(t,i,n){return(t=e.rc2.createEncryptionCipher(t,128)).start(i,n),t},e.rc2.createEncryptionCipher=function(e,t){return n(e,t,!0)},e.rc2.startDecrypting=function(t,i,n){return(t=e.rc2.createDecryptionCipher(t,128)).start(i,n),t},e.rc2.createDecryptionCipher=function(e,t){return n(e,t,!1)}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/rc2",["require","module","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.rc2)return i.rc2;i.defined.rc2=!0;for(var a=0;a<n.length;++a)n[a](i);return i.rc2}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,i){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,i):this.fromString(e,null==t&&"string"!=typeof e?256:t))}function i(){return new t(null)}function n(e,t,i,n,r,a){var o=16383&t;for(t>>=14;0<=--a;){var s=16383&this.data[e],l=this.data[e++]>>14,c=t*s+l*o;r=((s=o*s+((16383&c)<<14)+i.data[n]+r)>>28)+(c>>14)+t*l,i.data[n++]=268435455&s}return r}function r(e,t){var i=v[e.charCodeAt(t)];return null==i?-1:i}function a(e){var t=i();return t.fromInt(e),t}function o(e){var t,i=1;return 0!=(t=e>>>16)&&(e=t,i+=16),0!=(t=e>>8)&&(e=t,i+=8),0!=(t=e>>4)&&(e=t,i+=4),0!=(t=e>>2)&&(e=t,i+=2),0!=e>>1&&(i+=1),i}function s(e){this.m=e}function l(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function c(e,t){return e&t}function u(e,t){return e|t}function h(e,t){return e^t}function d(e,t){return e&~t}function p(){}function f(e){return e}function g(e){this.r2=i(),this.q3=i(),t.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}if("undefined"==typeof navigator){t.prototype.am=n;var m=28}else"Microsoft Internet Explorer"==navigator.appName?(t.prototype.am=function(e,t,i,n,r,a){var o=32767&t;for(t>>=15;0<=--a;){var s=32767&this.data[e],l=this.data[e++]>>15,c=t*s+l*o;r=((s=o*s+((32767&c)<<15)+i.data[n]+(1073741823&r))>>>30)+(c>>>15)+t*l+(r>>>30),i.data[n++]=1073741823&s}return r},m=30):"Netscape"!=navigator.appName?(t.prototype.am=function(e,t,i,n,r,a){for(;0<=--a;){var o=t*this.data[e++]+i.data[n]+r;r=Math.floor(o/67108864),i.data[n++]=67108863&o}return r},m=26):(t.prototype.am=n,m=28);t.prototype.DB=m,t.prototype.DM=(1<<m)-1,t.prototype.DV=1<<m,t.prototype.FV=Math.pow(2,52),t.prototype.F1=52-m,t.prototype.F2=2*m-52;var y,v=[];for(m=48,y=0;9>=y;++y)v[m++]=y;for(m=97,y=10;36>y;++y)v[m++]=y;for(m=65,y=10;36>y;++y)v[m++]=y;s.prototype.convert=function(e){return 0>e.s||0<=e.compareTo(this.m)?e.mod(this.m):e},s.prototype.revert=function(e){return e},s.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},s.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},s.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},l.prototype.convert=function(e){var n=i();return e.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),0>e.s&&0<n.compareTo(t.ZERO)&&this.m.subTo(n,n),n},l.prototype.revert=function(e){var t=i();return e.copyTo(t),this.reduce(t),t},l.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var i=32767&e.data[t],n=i*this.mpl+((i*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e.data[i=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e.data[i]>=e.DV;)e.data[i]-=e.DV,e.data[++i]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},l.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},l.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},t.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},t.prototype.fromInt=function(e){this.t=1,this.s=0>e?-1:0,0<e?this.data[0]=e:-1>e?this.data[0]=e+this.DV:this.t=0},t.prototype.fromString=function(e,i){if(16==i)var n=4;else if(8==i)n=3;else if(256==i)n=8;else if(2==i)n=1;else if(32==i)n=5;else{if(4!=i)return void this.fromRadix(e,i);n=2}this.s=this.t=0;for(var a=e.length,o=!1,s=0;0<=--a;){var l=8==n?255&e[a]:r(e,a);0>l?"-"==e.charAt(a)&&(o=!0):(o=!1,0==s?this.data[this.t++]=l:s+n>this.DB?(this.data[this.t-1]|=(l&(1<<this.DB-s)-1)<<s,this.data[this.t++]=l>>this.DB-s):this.data[this.t-1]|=l<<s,(s+=n)>=this.DB&&(s-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,0<s&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this.data[this.t-1]==e;)--this.t},t.prototype.dlShiftTo=function(e,t){var i;for(i=this.t-1;0<=i;--i)t.data[i+e]=this.data[i];for(i=e-1;0<=i;--i)t.data[i]=0;t.t=this.t+e,t.s=this.s},t.prototype.drShiftTo=function(e,t){for(var i=e;i<this.t;++i)t.data[i-e]=this.data[i];t.t=Math.max(this.t-e,0),t.s=this.s},t.prototype.lShiftTo=function(e,t){var i,n=e%this.DB,r=this.DB-n,a=(1<<r)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(i=this.t-1;0<=i;--i)t.data[i+o+1]=this.data[i]>>r|s,s=(this.data[i]&a)<<n;for(i=o-1;0<=i;--i)t.data[i]=0;t.data[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},t.prototype.rShiftTo=function(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var n=e%this.DB,r=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[i]>>n;for(var o=i+1;o<this.t;++o)t.data[o-i-1]|=(this.data[o]&a)<<r,t.data[o-i]=this.data[o]>>n;0<n&&(t.data[this.t-i-1]|=(this.s&a)<<r),t.t=this.t-i,t.clamp()}},t.prototype.subTo=function(e,t){for(var i=0,n=0,r=Math.min(e.t,this.t);i<r;)n+=this.data[i]-e.data[i],t.data[i++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;i<this.t;)n+=this.data[i],t.data[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<e.t;)n-=e.data[i],t.data[i++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=0>n?-1:0,-1>n?t.data[i++]=this.DV+n:0<n&&(t.data[i++]=n),t.t=i,t.clamp()},t.prototype.multiplyTo=function(e,i){var n=this.abs(),r=e.abs(),a=n.t;for(i.t=a+r.t;0<=--a;)i.data[a]=0;for(a=0;a<r.t;++a)i.data[a+n.t]=n.am(0,r.data[a],i,a,0,n.t);i.s=0,i.clamp(),this.s!=e.s&&t.ZERO.subTo(i,i)},t.prototype.squareTo=function(e){for(var t=this.abs(),i=e.t=2*t.t;0<=--i;)e.data[i]=0;for(i=0;i<t.t-1;++i){var n=t.am(i,t.data[i],e,2*i,0,1);(e.data[i+t.t]+=t.am(i+1,2*t.data[i],e,2*i+1,n,t.t-i-1))>=t.DV&&(e.data[i+t.t]-=t.DV,e.data[i+t.t+1]=1)}0<e.t&&(e.data[e.t-1]+=t.am(i,t.data[i],e,2*i,0,1)),e.s=0,e.clamp()},t.prototype.divRemTo=function(e,n,r){var a=e.abs();if(!(0>=a.t)){var s=this.abs();if(s.t<a.t)null!=n&&n.fromInt(0),null!=r&&this.copyTo(r);else{null==r&&(r=i());var l=i(),c=this.s;e=e.s;var u=this.DB-o(a.data[a.t-1]);if(0<u?(a.lShiftTo(u,l),s.lShiftTo(u,r)):(a.copyTo(l),s.copyTo(r)),0!=(s=l.data[(a=l.t)-1])){var h=s*(1<<this.F1)+(1<a?l.data[a-2]>>this.F2:0),d=this.FV/h;h=(1<<this.F1)/h;var p=1<<this.F2,f=r.t,g=f-a,m=null==n?i():n;for(l.dlShiftTo(g,m),0<=r.compareTo(m)&&(r.data[r.t++]=1,r.subTo(m,r)),t.ONE.dlShiftTo(a,m),m.subTo(l,l);l.t<a;)l.data[l.t++]=0;for(;0<=--g;){var y=r.data[--f]==s?this.DM:Math.floor(r.data[f]*d+(r.data[f-1]+p)*h);if((r.data[f]+=l.am(0,y,r,g,0,a))<y)for(l.dlShiftTo(g,m),r.subTo(m,r);r.data[f]<--y;)r.subTo(m,r)}null!=n&&(r.drShiftTo(a,n),c!=e&&t.ZERO.subTo(n,n)),r.t=a,r.clamp(),0<u&&r.rShiftTo(u,r),0>c&&t.ZERO.subTo(r,r)}}}},t.prototype.invDigit=function(){if(1>this.t)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},t.prototype.isEven=function(){return 0==(0<this.t?1&this.data[0]:this.s)},t.prototype.exp=function(e,n){if(4294967295<e||1>e)return t.ONE;var r=i(),a=i(),s=n.convert(this),l=o(e)-1;for(s.copyTo(r);0<=--l;)if(n.sqrTo(r,a),0<(e&1<<l))n.mulTo(a,s,r);else{var c=r;r=a,a=c}return n.revert(r)},t.prototype.toString=function(e){if(0>this.s)return"-"+this.negate().toString(e);if(16==e)e=4;else if(8==e)e=3;else if(2==e)e=1;else if(32==e)e=5;else{if(4!=e)return this.toRadix(e);e=2}var t,i=(1<<e)-1,n=!1,r="",a=this.t,o=this.DB-a*this.DB%e;if(0<a--)for(o<this.DB&&0<(t=this.data[a]>>o)&&(n=!0,r="0123456789abcdefghijklmnopqrstuvwxyz".charAt(t));0<=a;)o<e?(t=(this.data[a]&(1<<o)-1)<<e-o,t|=this.data[--a]>>(o+=this.DB-e)):(t=this.data[a]>>(o-=e)&i,0>=o&&(o+=this.DB,--a)),0<t&&(n=!0),n&&(r+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(t));return n?r:"0"},t.prototype.negate=function(){var e=i();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return 0>this.s?this.negate():this},t.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var i=this.t;if(0!=(t=i-e.t))return 0>this.s?-t:t;for(;0<=--i;)if(0!=(t=this.data[i]-e.data[i]))return t;return 0},t.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+o(this.data[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var n=i();return this.abs().divRemTo(e,null,n),0>this.s&&0<n.compareTo(t.ZERO)&&e.subTo(n,n),n},t.prototype.modPowInt=function(e,t){var i=256>e||t.isEven()?new s(t):new l(t);return this.exp(e,i)},t.ZERO=a(0),t.ONE=a(1),p.prototype.convert=f,p.prototype.revert=f,p.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i)},p.prototype.sqrTo=function(e,t){e.squareTo(t)},g.prototype.convert=function(e){if(0>e.s||e.t>2*this.m.t)return e.mod(this.m);if(0>e.compareTo(this.m))return e;var t=i();return e.copyTo(t),this.reduce(t),t},g.prototype.revert=function(e){return e},g.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>e.compareTo(this.r2);)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)},g.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},g.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var b=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],C=67108864/b[b.length-1];t.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},t.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||2>e||36<e)return"0";var t=this.chunkSize(e),n=a(t=Math.pow(e,t)),r=i(),o=i(),s="";for(this.divRemTo(n,r,o);0<r.signum();)s=(t+o.intValue()).toString(e).substr(1)+s,r.divRemTo(n,r,o);return o.intValue().toString(e)+s},t.prototype.fromRadix=function(e,i){this.fromInt(0),null==i&&(i=10);for(var n=this.chunkSize(i),a=Math.pow(i,n),o=!1,s=0,l=0,c=0;c<e.length;++c){var u=r(e,c);0>u?"-"==e.charAt(c)&&0==this.signum()&&(o=!0):(l=i*l+u,++s>=n&&(this.dMultiply(a),this.dAddOffset(l,0),l=s=0))}0<s&&(this.dMultiply(Math.pow(i,s)),this.dAddOffset(l,0)),o&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,i,n){if("number"==typeof i)if(2>e)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),u,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(i);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var r=7&e;(n=[]).length=1+(e>>3),i.nextBytes(n),n[0]=0<r?n[0]&(1<<r)-1:0,this.fromString(n,256)}},t.prototype.bitwiseTo=function(e,t,i){var n,r=Math.min(e.t,this.t);for(n=0;n<r;++n)i.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){var a=e.s&this.DM;for(n=r;n<this.t;++n)i.data[n]=t(this.data[n],a);i.t=this.t}else{for(a=this.s&this.DM,n=r;n<e.t;++n)i.data[n]=t(a,e.data[n]);i.t=e.t}i.s=t(this.s,e.s),i.clamp()},t.prototype.changeBit=function(e,i){var n=t.ONE.shiftLeft(e);return this.bitwiseTo(n,i,n),n},t.prototype.addTo=function(e,t){for(var i=0,n=0,r=Math.min(e.t,this.t);i<r;)n+=this.data[i]+e.data[i],t.data[i++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;i<this.t;)n+=this.data[i],t.data[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<e.t;)n+=e.data[i],t.data[i++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=0>n?-1:0,0<n?t.data[i++]=n:-1>n&&(t.data[i++]=this.DV+n),t.t=i,t.clamp()},t.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},t.prototype.multiplyLowerTo=function(e,t,i){var n,r=Math.min(this.t+e.t,t);for(i.s=0,i.t=r;0<r;)i.data[--r]=0;for(n=i.t-this.t;r<n;++r)i.data[r+this.t]=this.am(0,e.data[r],i,r,0,this.t);for(n=Math.min(e.t,t);r<n;++r)this.am(0,e.data[r],i,r,0,t-r);i.clamp()},t.prototype.multiplyUpperTo=function(e,t,i){var n=i.t=this.t+e.t- --t;for(i.s=0;0<=--n;)i.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)i.data[this.t+n-t]=this.am(t-n,e.data[n],i,0,0,this.t+n-t);i.clamp(),i.drShiftTo(1,i)},t.prototype.modInt=function(e){if(0>=e)return 0;var t=this.DV%e,i=0>this.s?e-1:0;if(0<this.t)if(0==t)i=this.data[0]%e;else for(var n=this.t-1;0<=n;--n)i=(t*i+this.data[n])%e;return i},t.prototype.millerRabin=function(e){var i=this.subtract(t.ONE),n=i.getLowestSetBit();if(0>=n)return!1;for(var r,a=i.shiftRight(n),o={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},s=0;s<e;++s){do{r=new t(this.bitLength(),o)}while(0>=r.compareTo(t.ONE)||0<=r.compareTo(i));if(0!=(r=r.modPow(a,this)).compareTo(t.ONE)&&0!=r.compareTo(i)){for(var l=1;l++<n&&0!=r.compareTo(i);)if(0==(r=r.modPowInt(2,this)).compareTo(t.ONE))return!1;if(0!=r.compareTo(i))return!1}}return!0},t.prototype.clone=function(){var e=i();return this.copyTo(e),e},t.prototype.intValue=function(){if(0>this.s){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},t.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this.data[0]?0:1},t.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var i,n=this.DB-e*this.DB%8,r=0;if(0<e--)for(n<this.DB&&(i=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[r++]=i|this.s<<this.DB-n);0<=e;)8>n?(i=(this.data[e]&(1<<n)-1)<<8-n,i|=this.data[--e]>>(n+=this.DB-8)):(i=this.data[e]>>(n-=8)&255,0>=n&&(n+=this.DB,--e)),0!=(128&i)&&(i|=-256),0==r&&(128&this.s)!=(128&i)&&++r,(0<r||i!=this.s)&&(t[r++]=i);return t},t.prototype.equals=function(e){return 0==this.compareTo(e)},t.prototype.min=function(e){return 0>this.compareTo(e)?this:e},t.prototype.max=function(e){return 0<this.compareTo(e)?this:e},t.prototype.and=function(e){var t=i();return this.bitwiseTo(e,c,t),t},t.prototype.or=function(e){var t=i();return this.bitwiseTo(e,u,t),t},t.prototype.xor=function(e){var t=i();return this.bitwiseTo(e,h,t),t},t.prototype.andNot=function(e){var t=i();return this.bitwiseTo(e,d,t),t},t.prototype.not=function(){for(var e=i(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},t.prototype.shiftLeft=function(e){var t=i();return 0>e?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},t.prototype.shiftRight=function(e){var t=i();return 0>e?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},t.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e]){var t=e*this.DB;if(0==(e=this.data[e]))e=-1;else{var i=0;0==(65535&e)&&(e>>=16,i+=16),0==(255&e)&&(e>>=8,i+=8),0==(15&e)&&(e>>=4,i+=4),0==(3&e)&&(e>>=2,i+=2),0==(1&e)&&++i,e=i}return t+e}return 0>this.s?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,i=0;i<this.t;++i){for(var n=this.data[i]^t,r=0;0!=n;)n&=n-1,++r;e+=r}return e},t.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},t.prototype.setBit=function(e){return this.changeBit(e,u)},t.prototype.clearBit=function(e){return this.changeBit(e,d)},t.prototype.flipBit=function(e){return this.changeBit(e,h)},t.prototype.add=function(e){var t=i();return this.addTo(e,t),t},t.prototype.subtract=function(e){var t=i();return this.subTo(e,t),t},t.prototype.multiply=function(e){var t=i();return this.multiplyTo(e,t),t},t.prototype.divide=function(e){var t=i();return this.divRemTo(e,t,null),t},t.prototype.remainder=function(e){var t=i();return this.divRemTo(e,null,t),t},t.prototype.divideAndRemainder=function(e){var t=i(),n=i();return this.divRemTo(e,t,n),[t,n]},t.prototype.modPow=function(e,t){var n=e.bitLength(),r=a(1);if(0>=n)return r;var c=18>n?1:48>n?3:144>n?4:768>n?5:6,u=8>n?new s(t):t.isEven()?new g(t):new l(t),h=[],d=3,p=c-1,f=(1<<c)-1;if(h[1]=u.convert(this),1<c)for(n=i(),u.sqrTo(h[1],n);d<=f;)h[d]=i(),u.mulTo(n,h[d-2],h[d]),d+=2;var m=e.t-1,y=!0,v=i();for(n=o(e.data[m])-1;0<=m;){if(n>=p)var b=e.data[m]>>n-p&f;else b=(e.data[m]&(1<<n+1)-1)<<p-n,0<m&&(b|=e.data[m-1]>>this.DB+n-p);for(d=c;0==(1&b);)b>>=1,--d;if(0>(n-=d)&&(n+=this.DB,--m),y)h[b].copyTo(r),y=!1;else{for(;1<d;)u.sqrTo(r,v),u.sqrTo(v,r),d-=2;0<d?u.sqrTo(r,v):(d=r,r=v,v=d),u.mulTo(v,h[b],r)}for(;0<=m&&0==(e.data[m]&1<<n);)u.sqrTo(r,v),d=r,r=v,v=d,0>--n&&(n=this.DB-1,--m)}return u.revert(r)},t.prototype.modInverse=function(e){var i=e.isEven();if(this.isEven()&&i||0==e.signum())return t.ZERO;for(var n=e.clone(),r=this.clone(),o=a(1),s=a(0),l=a(0),c=a(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),i?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),i?(l.isEven()&&c.isEven()||(l.addTo(this,l),c.subTo(e,c)),l.rShiftTo(1,l)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);0<=n.compareTo(r)?(n.subTo(r,n),i&&o.subTo(l,o),s.subTo(c,s)):(r.subTo(n,r),i&&l.subTo(o,l),c.subTo(s,c))}return 0!=r.compareTo(t.ONE)?t.ZERO:0<=c.compareTo(e)?c.subtract(e):0>c.signum()?(c.addTo(e,c),0>c.signum()?c.add(e):c):c},t.prototype.pow=function(e){return this.exp(e,new p)},t.prototype.gcd=function(e){var t=0>this.s?this.negate():this.clone();if(e=0>e.s?e.negate():e.clone(),0>t.compareTo(e)){var i=t;t=e,e=i}i=t.getLowestSetBit();var n=e.getLowestSetBit();if(0>n)return t;for(i<n&&(n=i),0<n&&(t.rShiftTo(n,t),e.rShiftTo(n,e));0<t.signum();)0<(i=t.getLowestSetBit())&&t.rShiftTo(i,t),0<(i=e.getLowestSetBit())&&e.rShiftTo(i,e),0<=t.compareTo(e)?(t.subTo(e,t),t.rShiftTo(1,t)):(e.subTo(t,e),e.rShiftTo(1,e));return 0<n&&e.lShiftTo(n,e),e},t.prototype.isProbablePrime=function(e){var t,i=this.abs();if(1==i.t&&i.data[0]<=b[b.length-1]){for(t=0;t<b.length;++t)if(i.data[0]==b[t])return!0;return!1}if(i.isEven())return!1;for(t=1;t<b.length;){for(var n=b[t],r=t+1;r<b.length&&n<C;)n*=b[r++];for(n=i.modInt(n);t<r;)if(0==n%b[t++])return!1}return i.millerRabin(e)},e.jsbn=e.jsbn||{},e.jsbn.BigInteger=t}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/jsbn",["require","module"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.jsbn)return i.jsbn;i.defined.jsbn=!0;for(var a=0;a<n.length;++a)n[a](i);return i.jsbn}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,i,n){n||(n=e.md.sha1.create());for(var r="",a=Math.ceil(i/n.digestLength),o=0;o<a;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);n.start(),n.update(t+s),r+=n.digest().getBytes()}return r.substring(0,i)}var i=e.pkcs1=e.pkcs1||{};i.encode_rsa_oaep=function(i,n,r,a,o){if("string"==typeof r)var s=r,l=a||void 0,c=o||void 0;else if(r&&(s=r.label||void 0,l=r.seed||void 0,c=r.md||void 0,r.mgf1&&r.mgf1.md))var u=r.mgf1.md;if(c?c.start():c=e.md.sha1.create(),u||(u=c),i=Math.ceil(i.n.bitLength()/8),n.length>(r=i-2*c.digestLength-2))throw(u=Error("RSAES-OAEP input message length is too long.")).length=n.length,u.maxLength=r,u;for(s||(s=""),c.update(s,"raw"),s=c.digest(),a="",r-=n.length,o=0;o<r;o++)a+="\0";if(n=s.getBytes()+a+"\x01"+n,l){if(l.length!==c.digestLength)throw(u=Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=l.length,u.digestLength=c.digestLength,u}else l=e.random.getBytes(c.digestLength);return i=t(l,i-c.digestLength-1,u),c=t(n=e.util.xorBytes(n,i,n.length),c.digestLength,u),"\0"+e.util.xorBytes(l,c,l.length)+n},i.decode_rsa_oaep=function(i,n,r,a){if("string"==typeof r)var o=r,s=a||void 0;else if(r&&(o=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md))var l=r.mgf1.md;if(r=Math.ceil(i.n.bitLength()/8),n.length!==r)throw(l=Error("RSAES-OAEP encoded message length is invalid.")).length=n.length,l.expectedLength=r,l;if(void 0===s?s=e.md.sha1.create():s.start(),l||(l=s),r<2*s.digestLength+2)throw Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),s.update(o,"raw"),o=s.digest().getBytes(),i=n.charAt(0),a=n.substring(1,s.digestLength+1);var c=t(n=n.substring(1+s.digestLength),s.digestLength,l);for(l=t(a=e.util.xorBytes(a,c,a.length),r-s.digestLength-1,l),r=(n=e.util.xorBytes(n,l,n.length)).substring(0,s.digestLength),l="\0"!==i,i=0;i<s.digestLength;++i)l|=o.charAt(i)!==r.charAt(i);for(o=1,s=i=s.digestLength;s<n.length;s++)a=1&(r=n.charCodeAt(s))^1,l|=r&(o?65534:0),i+=o&=a;if(l||1!==n.charCodeAt(i))throw Error("Invalid RSAES-OAEP padding.");return n.substring(i+1)}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/pkcs1",["require","module","./util","./random","./sha1"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.pkcs1)return i.pkcs1;i.defined.pkcs1=!0;for(var a=0;a<n.length;++a)n[a](i);return i.pkcs1}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,r,a){return"workers"in r?n(e,t,r,a):i(e,t,r,a)}function i(t,n,a,o){var l=r(t,n),c=0,u=function(e){return 100>=e?27:150>=e?18:200>=e?15:250>=e?12:300>=e?9:350>=e?8:400>=e?7:500>=e?6:600>=e?5:800>=e?4:1250>=e?3:2}(l.bitLength());"millerRabinTests"in a&&(u=a.millerRabinTests);var h=10;"maxBlockTime"in a&&(h=a.maxBlockTime);var d=+new Date;do{if(l.bitLength()>t&&(l=r(t,n)),l.isProbablePrime(u))return o(null,l);l.dAddOffset(s[c++%8],0)}while(0>h||+new Date-d<h);e.util.setImmediate(function(){i(t,n,a,o)})}function n(t,n,a,s){function l(){function e(e){if(!l){var a=e.data;if(a.found){for(e=0;e<i.length;++e)i[e].terminate();return l=!0,s(null,new o(a.prime,16))}c.bitLength()>t&&(c=r(t,n)),a=c.toString(16),e.target.postMessage({hex:a,workLoad:h}),c.dAddOffset(d,0)}}u=Math.max(1,u);for(var i=[],a=0;a<u;++a)i[a]=new Worker(p);for(a=0;a<u;++a)i[a].addEventListener("message",e);var l=!1}if("undefined"==typeof Worker)return i(t,n,a,s);var c=r(t,n),u=a.workers,h=a.workLoad||100,d=30*h/8,p=a.workerScript||"forge/prime.worker.js";if(-1===u)return e.util.estimateCores(function(e,t){e&&(t=2),u=t-1,l()});l()}function r(e,t){var i=new o(e,t),n=e-1;return i.testBit(n)||i.bitwiseTo(o.ONE.shiftLeft(n),c,i),i.dAddOffset(31-i.mod(l).byteValue(),0),i}if(!e.prime){var a=e.prime=e.prime||{},o=e.jsbn.BigInteger,s=[6,4,2,4,2,4,6,2],l=new o(null);l.fromInt(30);var c=function(e,t){return e|t};a.generateProbablePrime=function(i,n,r){"function"==typeof n&&(r=n,n={});var a=(n=n||{}).algorithm||"PRIMEINC";"string"==typeof a&&(a={name:a}),a.options=a.options||{};var o=n.prng||e.random;if(n={nextBytes:function(e){for(var t=o.getBytesSync(e.length),i=0;i<e.length;++i)e[i]=t.charCodeAt(i)}},"PRIMEINC"===a.name)return t(i,n,a.options,r);throw Error("Invalid prime generation algorithm: "+a.name)}}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/prime",["require","module","./util","./jsbn","./random"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.prime)return i.prime;i.defined.prime=!0;for(var a=0;a<n.length;++a)n[a](i);return i.prime}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,i,n){var r=e.util.createBuffer();if(i=Math.ceil(i.n.bitLength()/8),t.length>i-11)throw(r=Error("Message is too long for PKCS#1 v1.5 padding.")).length=t.length,r.max=i-11,r;if(r.putByte(0),r.putByte(n),i=i-3-t.length,0===n||1===n){n=0===n?0:255;for(var a=0;a<i;++a)r.putByte(n)}else for(;0<i;){var o=0,s=e.random.getBytes(i);for(a=0;a<i;++a)0===(n=s.charCodeAt(a))?++o:r.putByte(n);i=o}return r.putByte(0),r.putBytes(t),r}function i(t,i,n,r){i=Math.ceil(i.n.bitLength()/8);var a=(t=e.util.createBuffer(t)).getByte(),o=t.getByte();if(0!==a||n&&0!==o&&1!==o||!n&&2!=o||n&&0===o&&"undefined"==typeof r)throw Error("Encryption block is invalid.");if(n=0,0===o){for(n=i-3-r,r=0;r<n;++r)if(0!==t.getByte())throw Error("Encryption block is invalid.")}else if(1===o)for(n=0;1<t.length();){if(255!==t.getByte()){--t.read;break}++n}else if(2===o)for(n=0;1<t.length();){if(0===t.getByte()){--t.read;break}++n}if(0!==t.getByte()||n!==i-3-t.length())throw Error("Encryption block is invalid.");return t.getBytes()}function n(t){return"8"<=(t=t.toString(16))[0]&&(t="00"+t),1<(t=e.util.hexToBytes(t)).length&&(0===t.charCodeAt(0)&&0==(128&t.charCodeAt(1))||255===t.charCodeAt(0)&&128==(128&t.charCodeAt(1)))?t.substr(1):t}function r(e){return 100>=e?27:150>=e?18:200>=e?15:250>=e?12:300>=e?9:350>=e?8:400>=e?7:500>=e?6:600>=e?5:800>=e?4:1250>=e?3:2}function a(e){return"undefined"!=typeof window&&"object"==typeof window.crypto&&"object"==typeof window.crypto.subtle&&"function"==typeof window.crypto.subtle[e]}function o(e){return"undefined"!=typeof window&&"object"==typeof window.msCrypto&&"object"==typeof window.msCrypto.subtle&&"function"==typeof window.msCrypto.subtle[e]}function s(t){t=e.util.hexToBytes(t.toString(16));for(var i=new Uint8Array(t.length),n=0;n<t.length;++n)i[n]=t.charCodeAt(n);return i}if("undefined"==typeof l)var l=e.jsbn.BigInteger;var c=e.asn1;e.pki=e.pki||{},e.pki.rsa=e.rsa=e.rsa||{};var u=e.pki,h=[6,4,2,4,2,4,6,2],d={name:"PrivateKeyInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},p={name:"RSAPrivateKey",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},f={name:"RSAPublicKey",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},g=e.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:c.Class.UNIVERSAL,type:c.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},m=function(e){if(!(e.algorithm in u.oids))throw(t=Error("Unknown message digest algorithm.")).algorithm=e.algorithm,t;var t=u.oids[e.algorithm],i=c.oidToDer(t).getBytes();t=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[]);var n=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[]);return n.value.push(c.create(c.Class.UNIVERSAL,c.Type.OID,!1,i)),n.value.push(c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")),e=c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,e.digest().getBytes()),t.value.push(n),t.value.push(e),c.toDer(t).getBytes()},y=function(t,i,n){if(n)return t.modPow(i.e,i.n);if(!i.p||!i.q)return t.modPow(i.d,i.n);i.dP||(i.dP=i.d.mod(i.p.subtract(l.ONE))),i.dQ||(i.dQ=i.d.mod(i.q.subtract(l.ONE))),i.qInv||(i.qInv=i.q.modInverse(i.p));do{n=new l(e.util.bytesToHex(e.random.getBytes(i.n.bitLength()/8)),16)}while(0<=n.compareTo(i.n)||!n.gcd(i.n).equals(l.ONE));var r=(t=t.multiply(n.modPow(i.e,i.n)).mod(i.n)).mod(i.p).modPow(i.dP,i.p);for(t=t.mod(i.q).modPow(i.dQ,i.q);0>r.compareTo(t);)r=r.add(i.p);return(t=r.subtract(t).multiply(i.qInv).mod(i.p).multiply(i.q).add(t)).multiply(n.modInverse(i.n)).mod(i.n)};u.rsa.encrypt=function(i,n,r){var a=r,o=Math.ceil(n.n.bitLength()/8);for(!1!==r&&!0!==r?(a=2===r,r=t(i,n,r)):(r=e.util.createBuffer()).putBytes(i),i=new l(r.toHex(),16),n=y(i,n,a).toString(16),a=e.util.createBuffer(),o-=Math.ceil(n.length/2);0<o;)a.putByte(0),--o;return a.putBytes(e.util.hexToBytes(n)),a.getBytes()},u.rsa.decrypt=function(t,n,r,a){var o=Math.ceil(n.n.bitLength()/8);if(t.length!==o)throw(n=Error("Encrypted message length is invalid.")).length=t.length,n.expected=o,n;if(0<=(t=new l(e.util.createBuffer(t).toHex(),16)).compareTo(n.n))throw Error("Encrypted message is invalid.");t=y(t,n,r).toString(16);var s=e.util.createBuffer();for(o-=Math.ceil(t.length/2);0<o;)s.putByte(0),--o;return s.putBytes(e.util.hexToBytes(t)),!1!==a?i(s.getBytes(),n,r):s.getBytes()},u.rsa.createKeyPairGenerationState=function(t,i,n){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048;var r=(n=n||{}).prng||e.random,a={nextBytes:function(e){for(var t=r.getBytesSync(e.length),i=0;i<e.length;++i)e[i]=t.charCodeAt(i)}};if("PRIMEINC"!==(n=n.algorithm||"PRIMEINC"))throw Error("Invalid key generation algorithm: "+n);return(t={algorithm:n,state:0,bits:t,rng:a,eInt:i||65537,e:new l(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null}).e.fromInt(t.eInt),t},u.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var i=new l(null);i.fromInt(30);for(var n,a=0,o=function(e,t){return e|t},s=+new Date,c=0;null===e.keys&&(0>=t||c<t);){if(0===e.state){var d=(n=null===e.p?e.pBits:e.qBits)-1;0===e.pqState?(e.num=new l(n,e.rng),e.num.testBit(d)||e.num.bitwiseTo(l.ONE.shiftLeft(d),o,e.num),e.num.dAddOffset(31-e.num.mod(i).byteValue(),0),a=0,++e.pqState):1===e.pqState?e.num.bitLength()>n?e.pqState=0:e.num.isProbablePrime(r(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(h[a++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(l.ONE).gcd(e.e).compareTo(l.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else 1===e.state?(0>e.p.compareTo(e.q)&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state):2===e.state?(e.p1=e.p.subtract(l.ONE),e.q1=e.q.subtract(l.ONE),e.phi=e.p1.multiply(e.q1),++e.state):3===e.state?0===e.phi.gcd(e.e).compareTo(l.ONE)?++e.state:(e.p=null,e.q=null,e.state=0):4===e.state?(e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0)):5===e.state&&(n=e.e.modInverse(e.phi),e.keys={privateKey:u.rsa.setPrivateKey(e.n,e.e,n,e.p,e.q,n.mod(e.p1),n.mod(e.q1),e.q.modInverse(e.p)),publicKey:u.rsa.setPublicKey(e.n,e.e)});c+=(n=+new Date)-s,s=n}return null!==e.keys},u.rsa.generateKeyPair=function(t,i,n,r){if(1===arguments.length?"object"==typeof t?(n=t,t=void 0):"function"==typeof t&&(r=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof i?(r=i,i=void 0):"number"!=typeof i&&(n=i,i=void 0):(n=t,r=i,i=t=void 0):3===arguments.length&&("number"==typeof i?"function"==typeof n&&(r=n,n=void 0):(r=n,n=i,i=void 0)),n=n||{},void 0===t&&(t=n.bits||2048),void 0===i&&(i=n.e||65537),!e.disableNativeCode&&r&&256<=t&&16384>=t&&(65537===i||3===i)){if(a("generateKey")&&a("exportKey"))return window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:s(i),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(e){return window.crypto.subtle.exportKey("pkcs8",e.privateKey)}).catch(function(e){r(e)}).then(function(t){t&&(t=u.privateKeyFromAsn1(c.fromDer(e.util.createBuffer(t))),r(null,{privateKey:t,publicKey:u.setRsaPublicKey(t.n,t.e)}))});if(o("generateKey")&&o("exportKey")){var h=window.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:s(i),hash:{name:"SHA-256"}},!0,["sign","verify"]);return h.oncomplete=function(t){(t=window.msCrypto.subtle.exportKey("pkcs8",t.target.result.privateKey)).oncomplete=function(t){t=u.privateKeyFromAsn1(c.fromDer(e.util.createBuffer(t.target.result))),r(null,{privateKey:t,publicKey:u.setRsaPublicKey(t.n,t.e)})},t.onerror=function(e){r(e)}},void(h.onerror=function(e){r(e)})}}if(h=u.rsa.createKeyPairGenerationState(t,i,n),!r)return u.rsa.stepKeyPairGenerationState(h,0),h.keys;!function(t,i,n){function r(){a(t.pBits,function(e,i){return e?n(e):(t.p=i,null!==t.q?o(e,t.q):void a(t.qBits,o))})}function a(t,i){e.prime.generateProbablePrime(t,s,i)}function o(e,i){if(e)return n(e);if(t.q=i,0>t.p.compareTo(t.q)){var s=t.p;t.p=t.q,t.q=s}0!==t.p.subtract(l.ONE).gcd(t.e).compareTo(l.ONE)?(t.p=null,r()):0!==t.q.subtract(l.ONE).gcd(t.e).compareTo(l.ONE)?(t.q=null,a(t.qBits,o)):(t.p1=t.p.subtract(l.ONE),t.q1=t.q.subtract(l.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(l.ONE)?(t.p=t.q=null,r()):(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits?(t.q=null,a(t.qBits,o)):(s=t.e.modInverse(t.phi),t.keys={privateKey:u.rsa.setPrivateKey(t.n,t.e,s,t.p,t.q,s.mod(t.p1),s.mod(t.q1),t.q.modInverse(t.p)),publicKey:u.rsa.setPublicKey(t.n,t.e)},n(null,t.keys))))}"function"==typeof i&&(n=i,i={});var s={algorithm:{name:(i=i||{}).algorithm||"PRIMEINC",options:{workers:i.workers||2,workLoad:i.workLoad||100,workerScript:i.workerScript}}};"prng"in i&&(s.prng=i.prng),r()}(h,n,r)},u.setRsaPublicKey=u.rsa.setPublicKey=function(n,r){var a={n:n,e:r,encrypt:function(i,n,r){if("string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===n)n={encode:function(e,i,n){return t(e,i,2).getBytes()}};else if("RSA-OAEP"===n||"RSAES-OAEP"===n)n={encode:function(t,i){return e.pkcs1.encode_rsa_oaep(i,t,r)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(n))n={encode:function(e){return e}};else if("string"==typeof n)throw Error('Unsupported encryption scheme: "'+n+'".');return i=n.encode(i,a,!0),u.rsa.encrypt(i,a,!0)},verify:function(e,t,n){return"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===n?n={verify:function(e,t){return t=i(t,a,!0),e===c.fromDer(t).value[1].value}}:"NONE"!==n&&"NULL"!==n&&null!==n||(n={verify:function(e,t){return e===i(t,a,!0)}}),t=u.rsa.decrypt(t,a,!0,!1),n.verify(e,t,a.n.bitLength())}};return a},u.setRsaPrivateKey=u.rsa.setPrivateKey=function(t,n,r,a,o,s,l,c){var h={n:t,e:n,d:r,p:a,q:o,dP:s,dQ:l,qInv:c,decrypt:function(t,n,r){if("string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSAES-PKCS1-V1_5"),t=u.rsa.decrypt(t,h,!1,!1),"RSAES-PKCS1-V1_5"===n)n={decode:i};else if("RSA-OAEP"===n||"RSAES-OAEP"===n)n={decode:function(t,i){return e.pkcs1.decode_rsa_oaep(i,t,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(n))throw Error('Unsupported encryption scheme: "'+n+'".');n={decode:function(e){return e}}}return n.decode(t,h,!1)},sign:function(e,t){var i=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:m},i=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},i=1);var n=t.encode(e,h.n.bitLength());return u.rsa.encrypt(n,h,i)}};return h},u.wrapRsaPrivateKey=function(e){return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(0).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(u.oids.rsaEncryption).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")]),c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,c.toDer(e).getBytes())])},u.privateKeyFromAsn1=function(t){var i={},n=[];if(c.validate(t,d,i,n)&&(t=c.fromDer(e.util.createBuffer(i.privateKey))),!c.validate(t,p,i={},n=[]))throw(i=Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.")).errors=n,i;n=e.util.createBuffer(i.privateKeyModulus).toHex(),t=e.util.createBuffer(i.privateKeyPublicExponent).toHex();var r=e.util.createBuffer(i.privateKeyPrivateExponent).toHex(),a=e.util.createBuffer(i.privateKeyPrime1).toHex(),o=e.util.createBuffer(i.privateKeyPrime2).toHex(),s=e.util.createBuffer(i.privateKeyExponent1).toHex(),h=e.util.createBuffer(i.privateKeyExponent2).toHex();return i=e.util.createBuffer(i.privateKeyCoefficient).toHex(),u.setRsaPrivateKey(new l(n,16),new l(t,16),new l(r,16),new l(a,16),new l(o,16),new l(s,16),new l(h,16),new l(i,16))},u.privateKeyToAsn1=u.privateKeyToRSAPrivateKey=function(e){return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(0).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,n(e.n)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,n(e.e)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,n(e.d)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,n(e.p)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,n(e.q)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,n(e.dP)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,n(e.dQ)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,n(e.qInv))])},u.publicKeyFromAsn1=function(t){var i={},n=[];if(c.validate(t,g,i,n)){if((n=c.derToOid(i.publicKeyOid))!==u.oids.rsaEncryption)throw(i=Error("Cannot read public key. Unknown OID.")).oid=n,i;t=i.rsaPublicKey}if(!c.validate(t,f,i,n=[]))throw(i=Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=n,i;return n=e.util.createBuffer(i.publicKeyModulus).toHex(),i=e.util.createBuffer(i.publicKeyExponent).toHex(),u.setRsaPublicKey(new l(n,16),new l(i,16))},u.publicKeyToAsn1=u.publicKeyToSubjectPublicKeyInfo=function(e){return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer(u.oids.rsaEncryption).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")]),c.create(c.Class.UNIVERSAL,c.Type.BITSTRING,!1,[u.publicKeyToRSAPublicKey(e)])])},u.publicKeyToRSAPublicKey=function(e){return c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,n(e.n)),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,n(e.e))])}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/rsa","require module ./asn1 ./jsbn ./oids ./pkcs1 ./prime ./random ./util".split(" "),function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.rsa)return i.rsa;i.defined.rsa=!0;for(var a=0;a<n.length;++a)n[a](i);return i.rsa}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t){return e.start().update(t).digest().getBytes()}function i(e){if(e){var t=o.oids[a.derToOid(e)];if(!t)throw(t=Error("Unsupported PRF OID.")).oid=e,t.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],t}else t="hmacWithSHA1";return n(t)}function n(t){var i=e.md;switch(t){case"hmacWithSHA224":i=e.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:throw(i=Error("Unsupported PRF algorithm.")).algorithm=t,i.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],i}return i[t].create()}if("undefined"==typeof r)var r=e.jsbn.BigInteger;var a=e.asn1,o=e.pki=e.pki||{};o.pbe=e.pbe=e.pbe||{};var s=o.oids,l={name:"EncryptedPrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},u={name:"pkcs-12PbeParams",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"iterations"}]};o.encryptPrivateKeyInfo=function(t,i,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var l,c=e.random.getBytesSync(r.saltSize),u=r.count,h=a.integerToDer(u);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){switch(r.algorithm){case"aes128":var d=l=16,p=s["aes128-CBC"],f=e.aes.createEncryptionCipher;break;case"aes192":l=24,d=16,p=s["aes192-CBC"],f=e.aes.createEncryptionCipher;break;case"aes256":l=32,d=16,p=s["aes256-CBC"],f=e.aes.createEncryptionCipher;break;case"des":d=l=8,p=s.desCBC,f=e.des.createEncryptionCipher;break;default:throw(c=Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,c}var g=n(r="hmacWith"+r.prfAlgorithm.toUpperCase());g=e.pkcs5.pbkdf2(i,c,u,l,g),i=e.random.getBytesSync(d),(u=f(g)).start(i),u.update(a.toDer(t)),u.finish(),t=u.output.getBytes(),c=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,c),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,h.getBytes())]),"hmacWithSHA1"!==r&&c.value.push(a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,e.util.hexToBytes(l.toString(16))),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o.oids[r]).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")])),c=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.pkcs5PBES2).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.pkcs5PBKDF2).getBytes()),c]),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(p).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,i)])])])}else{if("3des"!==r.algorithm)throw(c=Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,c;l=24,p=new e.util.ByteBuffer(c),g=o.pbe.generatePkcs12Key(i,p,1,u,l),i=o.pbe.generatePkcs12Key(i,p,2,u,l),(u=e.des.createEncryptionCipher(g)).start(i),u.update(a.toDer(t)),u.finish(),t=u.output.getBytes(),c=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,c),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,h.getBytes())])])}return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[c,a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t)])},o.decryptPrivateKeyInfo=function(t,i){var n=null,r={},s=[];if(!a.validate(t,l,r,s))throw(n=Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=s,n;return s=a.derToOid(r.encryptionOid),s=o.pbe.getCipher(s,r.encryptionParams,i),r=e.util.createBuffer(r.encryptedData),s.update(r),s.finish()&&(n=a.fromDer(s.output)),n},o.encryptedPrivateKeyToPem=function(t,i){var n={type:"ENCRYPTED PRIVATE KEY",body:a.toDer(t).getBytes()};return e.pem.encode(n,{maxline:i})},o.encryptedPrivateKeyFromPem=function(t){if("ENCRYPTED PRIVATE KEY"!==(t=e.pem.decode(t)[0]).type){var i=Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw i.headerType=t.type,i}if(t.procType&&"ENCRYPTED"===t.procType.type)throw Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return a.fromDer(t.body)},o.encryptRsaPrivateKey=function(t,i,n){if(!(n=n||{}).legacy)return t=o.wrapRsaPrivateKey(o.privateKeyToAsn1(t)),t=o.encryptPrivateKeyInfo(t,i,n),o.encryptedPrivateKeyToPem(t);switch(n.algorithm){case"aes128":n="AES-128-CBC";var r=16,s=e.random.getBytesSync(16),l=e.aes.createEncryptionCipher;break;case"aes192":n="AES-192-CBC",r=24,s=e.random.getBytesSync(16),l=e.aes.createEncryptionCipher;break;case"aes256":n="AES-256-CBC",r=32,s=e.random.getBytesSync(16),l=e.aes.createEncryptionCipher;break;case"3des":n="DES-EDE3-CBC",r=24,s=e.random.getBytesSync(8),l=e.des.createEncryptionCipher;break;case"des":n="DES-CBC",r=8,s=e.random.getBytesSync(8),l=e.des.createEncryptionCipher;break;default:throw(t=Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".')).algorithm=n.algorithm,t}return(i=l(i=e.pbe.opensslDeriveBytes(i,s.substr(0,8),r))).start(s),i.update(a.toDer(o.privateKeyToAsn1(t))),i.finish(),t={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:n,parameters:e.util.bytesToHex(s).toUpperCase()},body:i.output.getBytes()},e.pem.encode(t)},o.decryptRsaPrivateKey=function(t,i){var n=null,r=e.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==r.type&&"PRIVATE KEY"!==r.type&&"RSA PRIVATE KEY"!==r.type)throw(n=Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=n,n;if(r.procType&&"ENCRYPTED"===r.procType.type){switch(r.dekInfo.algorithm){case"DES-CBC":var s=8,l=e.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,l=e.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,l=e.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,l=e.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,l=e.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,l=function(t){return e.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":s=8,l=function(t){return e.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":s=16,l=function(t){return e.rc2.createDecryptionCipher(t,128)};break;default:throw(n=Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".')).algorithm=r.dekInfo.algorithm,n}var c=e.util.hexToBytes(r.dekInfo.parameters);if((l=l(s=e.pbe.opensslDeriveBytes(i,c.substr(0,8),s))).start(c),l.update(e.util.createBuffer(r.body)),!l.finish())return n;n=l.output.getBytes()}else n=r.body;return null!==(n="ENCRYPTED PRIVATE KEY"===r.type?o.decryptPrivateKeyInfo(a.fromDer(n),i):a.fromDer(n))&&(n=o.privateKeyFromAsn1(n)),n},o.pbe.generatePkcs12Key=function(t,i,n,r,a,o){var s,l;"undefined"!=typeof o&&null!==o||(o=e.md.sha1.create());var c=o.digestLength,u=o.blockLength,h=new e.util.ByteBuffer,d=new e.util.ByteBuffer;if(null!==t&&void 0!==t){for(l=0;l<t.length;l++)d.putInt16(t.charCodeAt(l));d.putInt16(0)}t=d.length();var p=i.length(),f=new e.util.ByteBuffer;f.fillWithByte(n,u);var g=u*Math.ceil(p/u);for(n=new e.util.ByteBuffer,l=0;l<g;l++)n.putByte(i.at(l%p));for(g=u*Math.ceil(t/u),i=new e.util.ByteBuffer,l=0;l<g;l++)i.putByte(d.at(l%t));for((d=n).putBuffer(i),i=Math.ceil(a/c),n=1;n<=i;n++){for((g=new e.util.ByteBuffer).putBytes(f.bytes()),g.putBytes(d.bytes()),l=0;l<r;l++)o.start(),o.update(g.getBytes()),g=o.digest();var m=new e.util.ByteBuffer;for(l=0;l<u;l++)m.putByte(g.at(l%c));var y=Math.ceil(p/u)+Math.ceil(t/u),v=new e.util.ByteBuffer;for(s=0;s<y;s++){var b=new e.util.ByteBuffer(d.getBytes(u)),C=511;for(l=m.length()-1;0<=l;l--)C>>=8,C+=m.at(l)+b.at(l),b.setAt(l,255&C);v.putBuffer(b)}d=v,h.putBuffer(g)}return h.truncate(h.length()-a),h},o.pbe.getCipher=function(e,t,i){switch(e){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(e,t,i);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(e,t,i);default:throw(t=Error("Cannot read encrypted PBE data block. Unsupported OID.")).oid=e,t.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],t}},o.pbe.getCipherForPBES2=function(t,n,r){var s={};if(!a.validate(n,c,s,t=[])){var l=Error("Cannot read pdw-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=t,l}if((t=a.derToOid(s.kdfOid))!==o.oids.pkcs5PBKDF2)throw(l=Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=t,l.supportedOids=["pkcs5PBKDF2"],l;if((t=a.derToOid(s.encOid))!==o.oids["aes128-CBC"]&&t!==o.oids["aes192-CBC"]&&t!==o.oids["aes256-CBC"]&&t!==o.oids["des-EDE3-CBC"]&&t!==o.oids.desCBC)throw(l=Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=t,l.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],l;n=s.kdfSalt;var u=e.util.createBuffer(s.kdfIterationCount);switch(u=u.getInt(u.length()<<3),o.oids[t]){case"aes128-CBC":var h=16;l=e.aes.createDecryptionCipher;break;case"aes192-CBC":h=24,l=e.aes.createDecryptionCipher;break;case"aes256-CBC":h=32,l=e.aes.createDecryptionCipher;break;case"des-EDE3-CBC":h=24,l=e.des.createDecryptionCipher;break;case"desCBC":h=8,l=e.des.createDecryptionCipher}return t=i(s.prfOid),r=e.pkcs5.pbkdf2(r,n,u,h,t),s=s.encIv,(l=l(r)).start(s),l},o.pbe.getCipherForPKCS12PBE=function(t,n,r){var s={},l=[];if(!a.validate(n,u,s,l))throw(r=Error("Cannot read pdw-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=l,r;switch(l=e.util.createBuffer(s.salt),n=(n=e.util.createBuffer(s.iterations)).getInt(n.length()<<3),t){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:var c=24,h=8;t=e.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,h=8,t=function(t,i){var n=e.rc2.createDecryptionCipher(t,40);return n.start(i,null),n};break;default:throw(r=Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=t,r}return s=i(s.prfOid),c=o.pbe.generatePkcs12Key(r,l,1,n,c,s),s.start(),t(c,r=o.pbe.generatePkcs12Key(r,l,2,n,h,s))},o.pbe.opensslDeriveBytes=function(i,n,r,a){"undefined"!=typeof a&&null!==a||(a=e.md.md5.create()),null===n&&(n="");for(var o=[t(a,i+n)],s=16,l=1;s<r;++l,s+=16)o.push(t(a,o[l-1]+i+n));return o.join("").substr(0,r)}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/pbe","require module ./aes ./asn1 ./des ./md ./oids ./pem ./pbkdf2 ./random ./rc2 ./rsa ./util".split(" "),function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.pbe)return i.pbe;i.defined.pbe=!0;for(var a=0;a<n.length;++a)n[a](i);return i.pbe}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1,i=e.pkcs7asn1=e.pkcs7asn1||{};e.pkcs7=e.pkcs7||{},e.pkcs7.asn1=i,i.contentInfoValidator=e={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};var n={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};i.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(n)},i.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(n)},i.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},e,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[{name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]}]}]},i.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/pkcs7asn1",["require","module","./asn1","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.pkcs7asn1)return i.pkcs7asn1;i.defined.pkcs7asn1=!0;for(var a=0;a<n.length;++a)n[a](i);return i.pkcs7asn1}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.mgf=e.mgf||{},(e.mgf.mgf1=e.mgf1=e.mgf1||{}).create=function(t){return{generate:function(i,n){for(var r=new e.util.ByteBuffer,a=Math.ceil(n/t.digestLength),o=0;o<a;o++){var s=new e.util.ByteBuffer;s.putInt32(o),t.start(),t.update(i+s.getBytes()),r.putBuffer(t.digest())}return r.truncate(r.length()-n),r.getBytes()}}}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/mgf1",["require","module","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.mgf1)return i.mgf1;i.defined.mgf1=!0;for(var a=0;a<n.length;++a)n[a](i);return i.mgf1}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.mgf=e.mgf||{},e.mgf.mgf1=e.mgf1}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/mgf",["require","module","./mgf1"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.mgf)return i.mgf;i.defined.mgf=!0;for(var a=0;a<n.length;++a)n[a](i);return i.mgf}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){(e.pss=e.pss||{}).create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var i=t.md,n=t.mgf,r=i.digestLength,a=t.salt||null;if("string"==typeof a&&(a=e.util.createBuffer(a)),"saltLength"in t)var o=t.saltLength;else{if(null===a)throw Error("Salt length not specified or specific salt not given.");o=a.length()}if(null!==a&&a.length()!==o)throw Error("Given salt length does not match length of given salt.");var s=t.prng||e.random;return{encode:function(t,l){var c=l-1,u=Math.ceil(c/8),h=t.digest().getBytes();if(u<r+o+2)throw Error("Message is too long to encrypt.");var d=null===a?s.getBytesSync(o):a.bytes(),p=new e.util.ByteBuffer;p.fillWithByte(0,8),p.putBytes(h),p.putBytes(d),i.start(),i.update(p.getBytes()),h=i.digest().getBytes(),(p=new e.util.ByteBuffer).fillWithByte(0,u-o-r-2),p.putByte(1),p.putBytes(d);var f=p.getBytes(),g=u-r-1,m=n.generate(h,g);for(d="",p=0;p<g;p++)d+=String.fromCharCode(f.charCodeAt(p)^m.charCodeAt(p));return c=65280>>8*u-c&255,(d=String.fromCharCode(d.charCodeAt(0)&~c)+d.substr(1))+h+String.fromCharCode(188)},verify:function(t,a,s){var l=s-1;if(s=Math.ceil(l/8),a=a.substr(-s),s<r+o+2)throw Error("Inconsistent parameters to PSS signature verification.");if(188!==a.charCodeAt(s-1))throw Error("Encoded message does not end in 0xBC.");var c=s-r-1,u=a.substr(0,c);a=a.substr(c,r);var h=65280>>8*s-l&255;if(0!=(u.charCodeAt(0)&h))throw Error("Bits beyond keysize not zero as expected.");var d=n.generate(a,c),p="";for(l=0;l<c;l++)p+=String.fromCharCode(u.charCodeAt(l)^d.charCodeAt(l));for(p=String.fromCharCode(p.charCodeAt(0)&~h)+p.substr(1),s=s-r-o-2,l=0;l<s;l++)if(0!==p.charCodeAt(l))throw Error("Leftmost octets not zero as expected");if(1!==p.charCodeAt(s))throw Error("Inconsistent PSS signature, 0x01 marker not found");return s=p.substr(-o),(c=new e.util.ByteBuffer).fillWithByte(0,8),c.putBytes(t),c.putBytes(s),i.start(),i.update(c.getBytes()),a===i.digest().getBytes()}}}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/pss",["require","module","./random","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.pss)return i.pss;i.defined.pss=!0;for(var a=0;a<n.length;++a)n[a](i);return i.pss}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t){"string"==typeof t&&(t={shortName:t});for(var i,n=null,r=0;null===n&&r<e.attributes.length;++r)i=e.attributes[r],t.type&&t.type===i.type?n=i:t.name&&t.name===i.name?n=i:t.shortName&&t.shortName===i.shortName&&(n=i);return n}function i(t){var i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);t=t.attributes;for(var n=0;n<t.length;++n){var r=t[n],a=r.value,o=s.Type.PRINTABLESTRING;"valueTagClass"in r&&(o=r.valueTagClass)===s.Type.UTF8&&(a=e.util.encodeUtf8(a)),r=s.create(s.Class.UNIVERSAL,s.Type.SET,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(r.type).getBytes()),s.create(s.Class.UNIVERSAL,o,!1,a)])]),i.value.push(r)}return i}function n(e){for(var t,i=0;i<e.length;++i){if("undefined"==typeof(t=e[i]).name&&(t.type&&t.type in l.oids?t.name=l.oids[t.type]:t.shortName&&t.shortName in u&&(t.name=l.oids[u[t.shortName]])),"undefined"==typeof t.type){if(!(t.name&&t.name in l.oids))throw(e=Error("Attribute type not specified.")).attribute=t,e;t.type=l.oids[t.name]}if("undefined"==typeof t.shortName&&t.name&&t.name in u&&(t.shortName=u[t.name]),t.type===c.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=s.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(l.certificateExtensionToAsn1(r(t.extensions[n])))}if("undefined"==typeof t.value)throw(e=Error("Attribute value not specified.")).attribute=t,e}}function r(t,n){if(n=n||{},"undefined"==typeof t.name&&t.id&&t.id in l.oids&&(t.name=l.oids[t.id]),"undefined"==typeof t.id){if(!(t.name&&t.name in l.oids)){var r=Error("Extension ID not specified.");throw r.extension=t,r}t.id=l.oids[t.name]}if("undefined"!=typeof t.value)return t;if("keyUsage"===t.name){var a=0,o=r=0;t.digitalSignature&&(r|=128,a=7),t.nonRepudiation&&(r|=64,a=6),t.keyEncipherment&&(r|=32,a=5),t.dataEncipherment&&(r|=16,a=4),t.keyAgreement&&(r|=8,a=3),t.keyCertSign&&(r|=4,a=2),t.cRLSign&&(r|=2,a=1),t.encipherOnly&&(r|=1,a=0),t.decipherOnly&&(o|=128,a=7),a=String.fromCharCode(a),0!==o?a+=String.fromCharCode(r)+String.fromCharCode(o):0!==r&&(a+=String.fromCharCode(r)),t.value=s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,a)}else if("basicConstraints"===t.name)t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(s.create(s.Class.UNIVERSAL,s.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name)for(a in t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),r=t.value.value,t)!0===t[a]&&(a in c?r.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c[a]).getBytes())):-1!==a.indexOf(".")&&r.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a).getBytes())));else if("nsCertType"===t.name)r=a=0,t.client&&(r|=128,a=7),t.server&&(r|=64,a=6),t.email&&(r|=32,a=5),t.objsign&&(r|=16,a=4),t.reserved&&(r|=8,a=3),t.sslCA&&(r|=4,a=2),t.emailCA&&(r|=2,a=1),t.objCA&&(r|=1,a=0),a=String.fromCharCode(a),0!==r&&(a+=String.fromCharCode(r)),t.value=s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,a);else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);for(var u=0;u<t.altNames.length;++u){if(a=(o=t.altNames[u]).value,7===o.type&&o.ip){if(null===(a=e.util.bytesFromIP(o.ip)))throw(r=Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,r}else 8===o.type&&(a=s.oidToDer(o.oid?s.oidToDer(o.oid):a));t.value.value.push(s.create(s.Class.CONTEXT_SPECIFIC,o.type,!1,a))}}else if("subjectKeyIdentifier"===t.name&&n.cert)r=n.cert.generateSubjectKeyIdentifier(),t.subjectKeyIdentifier=r.toHex(),t.value=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,r.getBytes());else if("authorityKeyIdentifier"===t.name&&n.cert)t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),r=t.value.value,t.keyIdentifier&&(a=!0===t.keyIdentifier?n.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier,r.push(s.create(s.Class.CONTEXT_SPECIFIC,0,!1,a))),t.authorityCertIssuer&&(a=[s.create(s.Class.CONTEXT_SPECIFIC,4,!0,[i(!0===t.authorityCertIssuer?n.cert.issuer:t.authorityCertIssuer)])],r.push(s.create(s.Class.CONTEXT_SPECIFIC,1,!0,a))),t.serialNumber&&(a=e.util.hexToBytes(!0===t.serialNumber?n.cert.serialNumber:t.serialNumber),r.push(s.create(s.Class.CONTEXT_SPECIFIC,2,!1,a)));else if("cRLDistributionPoints"===t.name){t.value=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),r=t.value.value;var h=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),d=s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[]);for(u=0;u<t.altNames.length;++u){if(a=(o=t.altNames[u]).value,7===o.type&&o.ip){if(null===(a=e.util.bytesFromIP(o.ip)))throw(r=Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,r}else 8===o.type&&(a=s.oidToDer(o.oid?s.oidToDer(o.oid):a));d.value.push(s.create(s.Class.CONTEXT_SPECIFIC,o.type,!1,a))}h.value.push(s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[d])),r.push(h)}if("undefined"==typeof t.value)throw(r=Error("Extension value not specified.")).extension=t,r;return t}function a(e,t){switch(e){case c["RSASSA-PSS"]:var i=[];return void 0!==t.hash.algorithmOid&&i.push(s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.hash.algorithmOid).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&i.push(s.create(s.Class.CONTEXT_SPECIFIC,1,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.mgf.algorithmOid).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.mgf.hash.algorithmOid).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&i.push(s.create(s.Class.CONTEXT_SPECIFIC,2,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(t.saltLength).getBytes())])),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,i);default:return s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")}}function o(t){var i=s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return i;t=t.attributes;for(var n=0;n<t.length;++n){var r=t[n],a=r.value,o=s.Type.UTF8;"valueTagClass"in r&&(o=r.valueTagClass),o===s.Type.UTF8&&(a=e.util.encodeUtf8(a));var l=!1;"valueConstructed"in r&&(l=r.valueConstructed),r=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(r.type).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SET,!0,[s.create(s.Class.UNIVERSAL,o,l,a)])]),i.value.push(r)}return i}var s=e.asn1,l=e.pki=e.pki||{},c=l.oids,u={};u.CN=c.commonName,u.commonName="CN",u.C=c.countryName,u.countryName="C",u.L=c.localityName,u.localityName="L",u.ST=c.stateOrProvinceName,u.stateOrProvinceName="ST",u.O=c.organizationName,u.organizationName="O",u.OU=c.organizationalUnitName,u.organizationalUnitName="OU",u.E=c.emailAddress,u.emailAddress="E";var h=e.pki.rsa.publicKeyValidator,d={name:"Certificate",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:s.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:s.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:s.Class.UNIVERSAL,type:s.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:s.Class.UNIVERSAL,type:s.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:s.Class.UNIVERSAL,type:s.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:s.Class.UNIVERSAL,type:s.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},h,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:s.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:s.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:s.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:s.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},p={name:"rsapss",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:s.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:s.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:s.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:s.Class.UNIVERSAL,type:s.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:s.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:s.Class.UNIVERSAL,type:s.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},f={name:"CertificationRequest",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[{name:"CertificationRequestInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},h,{name:"CertificationRequestInfo.attributes",tagClass:s.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:s.Class.UNIVERSAL,type:s.Type.SET,constructed:!0}]}]}]},{name:"CertificationRequest.signatureAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:s.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,capture:"csrSignature"}]};l.RDNAttributesAsArray=function(e,t){for(var i,n,r,a=[],o=0;o<e.value.length;++o){i=e.value[o];for(var l=0;l<i.value.length;++l)(r={}).type=s.derToOid((n=i.value[l]).value[0].value),r.value=n.value[1].value,r.valueTagClass=n.value[1].type,r.type in c&&(r.name=c[r.type],r.name in u&&(r.shortName=u[r.name])),t&&(t.update(r.type),t.update(r.value)),a.push(r)}return a},l.CRIAttributesAsArray=function(e){for(var t=[],i=0;i<e.length;++i){var n=e[i],r=s.derToOid(n.value[0].value);n=n.value[1].value;for(var a=0;a<n.length;++a){var o={};if(o.type=r,o.value=n[a].value,o.valueTagClass=n[a].type,o.type in c&&(o.name=c[o.type],o.name in u&&(o.shortName=u[o.name])),o.type===c.extensionRequest){o.extensions=[];for(var h=0;h<o.value.length;++h)o.extensions.push(l.certificateExtensionFromAsn1(o.value[h]))}t.push(o)}}return t};var g=function(e,t,i){var n={};if(e!==c["RSASSA-PSS"])return n;if(i&&(n={hash:{algorithmOid:c.sha1},mgf:{algorithmOid:c.mgf1,hash:{algorithmOid:c.sha1}},saltLength:20}),!s.validate(t,p,i={},e=[]))throw(t=Error("Cannot read RSASSA-PSS parameter block.")).errors=e,t;return void 0!==i.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=s.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=s.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=s.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(n.saltLength=i.saltLength.charCodeAt(0)),n};l.certificateFromPem=function(t,i,n){if("CERTIFICATE"!==(t=e.pem.decode(t)[0]).type&&"X509 CERTIFICATE"!==t.type&&"TRUSTED CERTIFICATE"!==t.type)throw(i=Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".')).headerType=t.type,i;if(t.procType&&"ENCRYPTED"===t.procType.type)throw Error("Could not convert certificate from PEM; PEM is encrypted.");return n=s.fromDer(t.body,n),l.certificateFromAsn1(n,i)},l.certificateToPem=function(t,i){var n={type:"CERTIFICATE",body:s.toDer(l.certificateToAsn1(t)).getBytes()};return e.pem.encode(n,{maxline:i})},l.publicKeyFromPem=function(t){if("PUBLIC KEY"!==(t=e.pem.decode(t)[0]).type&&"RSA PUBLIC KEY"!==t.type){var i=Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw i.headerType=t.type,i}if(t.procType&&"ENCRYPTED"===t.procType.type)throw Error("Could not convert public key from PEM; PEM is encrypted.");return t=s.fromDer(t.body),l.publicKeyFromAsn1(t)},l.publicKeyToPem=function(t,i){var n={type:"PUBLIC KEY",body:s.toDer(l.publicKeyToAsn1(t)).getBytes()};return e.pem.encode(n,{maxline:i})},l.publicKeyToRSAPublicKeyPem=function(t,i){var n={type:"RSA PUBLIC KEY",body:s.toDer(l.publicKeyToRSAPublicKey(t)).getBytes()};return e.pem.encode(n,{maxline:i})},l.getPublicKeyFingerprint=function(t,i){var n=(i=i||{}).md||e.md.sha1.create();switch(i.type||"RSAPublicKey"){case"RSAPublicKey":var r=s.toDer(l.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":r=s.toDer(l.publicKeyToAsn1(t)).getBytes();break;default:throw Error('Unknown fingerprint type "'+i.type+'".')}if(n.start(),n.update(r),n=n.digest(),"hex"===i.encoding)return n=n.toHex(),i.delimiter?n.match(/.{2}/g).join(i.delimiter):n;if("binary"===i.encoding)return n.getBytes();if(i.encoding)throw Error('Unknown encoding "'+i.encoding+'".');return n},l.certificationRequestFromPem=function(t,i,n){if("CERTIFICATE REQUEST"!==(t=e.pem.decode(t)[0]).type)throw(i=Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".')).headerType=t.type,i;if(t.procType&&"ENCRYPTED"===t.procType.type)throw Error("Could not convert certification request from PEM; PEM is encrypted.");return n=s.fromDer(t.body,n),l.certificationRequestFromAsn1(n,i)},l.certificationRequestToPem=function(t,i){var n={type:"CERTIFICATE REQUEST",body:s.toDer(l.certificationRequestToAsn1(t)).getBytes()};return e.pem.encode(n,{maxline:i})},l.createCertificate=function(){var i={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return i.siginfo.algorithmOid=null,i.validity={},i.validity.notBefore=new Date,i.validity.notAfter=new Date,i.issuer={},i.issuer.getField=function(e){return t(i.issuer,e)},i.issuer.addField=function(e){n([e]),i.issuer.attributes.push(e)},i.issuer.attributes=[],i.issuer.hash=null,i.subject={},i.subject.getField=function(e){return t(i.subject,e)},i.subject.addField=function(e){n([e]),i.subject.attributes.push(e)},i.subject.attributes=[],i.subject.hash=null,i.extensions=[],i.publicKey=null,i.md=null,i.setSubject=function(e,t){n(e),i.subject.attributes=e,delete i.subject.uniqueId,t&&(i.subject.uniqueId=t),i.subject.hash=null},i.setIssuer=function(e,t){n(e),i.issuer.attributes=e,delete i.issuer.uniqueId,t&&(i.issuer.uniqueId=t),i.issuer.hash=null},i.setExtensions=function(e){for(var t=0;t<e.length;++t)r(e[t],{cert:i});i.extensions=e},i.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var t,n=null,r=0;null===n&&r<i.extensions.length;++r)t=i.extensions[r],e.id&&t.id===e.id?n=t:e.name&&t.name===e.name&&(n=t);return n},i.sign=function(t,n){i.md=n||e.md.sha1.create();var r=c[i.md.algorithm+"WithRSAEncryption"];if(!r)throw(r=Error("Could not compute certificate digest. Unknown message digest algorithm OID.")).algorithm=i.md.algorithm,r;i.signatureOid=i.siginfo.algorithmOid=r,i.tbsCertificate=l.getTBSCertificate(i),r=s.toDer(i.tbsCertificate),i.md.update(r.getBytes()),i.signature=t.sign(i.md)},i.verify=function(t){var n=!1;if(!i.issued(t)){n=i.subject;var r=Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw r.expectedIssuer=t.issuer.attributes,r.actualIssuer=n.attributes,r}if(null===(r=t.md)){if(t.signatureOid in c)switch(c[t.signatureOid]){case"sha1WithRSAEncryption":r=e.md.sha1.create();break;case"md5WithRSAEncryption":r=e.md.md5.create();break;case"sha256WithRSAEncryption":r=e.md.sha256.create();break;case"sha512WithRSAEncryption":r=e.md.sha512.create();break;case"RSASSA-PSS":r=e.md.sha256.create()}if(null===r)throw(r=Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=t.signatureOid,r;var a=t.tbsCertificate||l.getTBSCertificate(t);a=s.toDer(a),r.update(a.getBytes())}if(null!==r){switch(t.signatureOid){case c.sha1WithRSAEncryption:var o=void 0;break;case c["RSASSA-PSS"]:if(void 0===(n=c[t.signatureParameters.mgf.hash.algorithmOid])||void 0===e.md[n])throw(r=Error("Unsupported MGF hash function.")).oid=t.signatureParameters.mgf.hash.algorithmOid,r.name=n,r;if(void 0===(o=c[t.signatureParameters.mgf.algorithmOid])||void 0===e.mgf[o])throw(r=Error("Unsupported MGF function.")).oid=t.signatureParameters.mgf.algorithmOid,r.name=o,r;if(o=e.mgf[o].create(e.md[n].create()),void 0===(n=c[t.signatureParameters.hash.algorithmOid])||void 0===e.md[n])throw{message:"Unsupported RSASSA-PSS hash function.",oid:t.signatureParameters.hash.algorithmOid,name:n};o=e.pss.create(e.md[n].create(),o,t.signatureParameters.saltLength)}n=i.publicKey.verify(r.digest().getBytes(),t.signature,o)}return n},i.isIssuer=function(e){var t=!1,n=i.issuer;if(e=e.subject,n.hash&&e.hash)t=n.hash===e.hash;else if(n.attributes.length===e.attributes.length){t=!0;for(var r,a,o=0;t&&o<n.attributes.length;++o)((r=n.attributes[o]).type!==(a=e.attributes[o]).type||r.value!==a.value)&&(t=!1)}return t},i.issued=function(e){return e.isIssuer(i)},i.generateSubjectKeyIdentifier=function(){return l.getPublicKeyFingerprint(i.publicKey,{type:"RSAPublicKey"})},i.verifySubjectKeyIdentifier=function(){for(var t=c.subjectKeyIdentifier,n=0;n<i.extensions.length;++n){var r=i.extensions[n];if(r.id===t)return t=i.generateSubjectKeyIdentifier().getBytes(),e.util.hexToBytes(r.subjectKeyIdentifier)===t}return!1},i},l.certificateFromAsn1=function(i,r){var a={},o=[];if(!s.validate(i,d,a,o))throw(a=Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.")).errors=o,a;if("string"!=typeof a.certSignature){o="\0";for(var u=0;u<a.certSignature.length;++u)o+=s.toDer(a.certSignature[u]).getBytes();a.certSignature=o}if((o=s.derToOid(a.publicKeyOid))!==l.oids.rsaEncryption)throw Error("Cannot read public key. OID is not RSA.");var h=l.createCertificate();if(h.version=a.certVersion?a.certVersion.charCodeAt(0):0,o=e.util.createBuffer(a.certSerialNumber),h.serialNumber=o.toHex(),h.signatureOid=e.asn1.derToOid(a.certSignatureOid),h.signatureParameters=g(h.signatureOid,a.certSignatureParams,!0),h.siginfo.algorithmOid=e.asn1.derToOid(a.certinfoSignatureOid),h.siginfo.parameters=g(h.siginfo.algorithmOid,a.certinfoSignatureParams,!1),++(o=e.util.createBuffer(a.certSignature)).read,h.signature=o.getBytes(),o=[],void 0!==a.certValidity1UTCTime&&o.push(s.utcTimeToDate(a.certValidity1UTCTime)),void 0!==a.certValidity2GeneralizedTime&&o.push(s.generalizedTimeToDate(a.certValidity2GeneralizedTime)),void 0!==a.certValidity3UTCTime&&o.push(s.utcTimeToDate(a.certValidity3UTCTime)),void 0!==a.certValidity4GeneralizedTime&&o.push(s.generalizedTimeToDate(a.certValidity4GeneralizedTime)),2<o.length)throw Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(2>o.length)throw Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(h.validity.notBefore=o[0],h.validity.notAfter=o[1],h.tbsCertificate=a.tbsCertificate,r){if(h.md=null,h.signatureOid in c)switch(o=c[h.signatureOid],o){case"sha1WithRSAEncryption":h.md=e.md.sha1.create();break;case"md5WithRSAEncryption":h.md=e.md.md5.create();break;case"sha256WithRSAEncryption":h.md=e.md.sha256.create();break;case"sha512WithRSAEncryption":h.md=e.md.sha512.create();break;case"RSASSA-PSS":h.md=e.md.sha256.create()}if(null===h.md)throw(a=Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=h.signatureOid,a;o=s.toDer(h.tbsCertificate),h.md.update(o.getBytes())}return o=e.md.sha1.create(),h.issuer.getField=function(e){return t(h.issuer,e)},h.issuer.addField=function(e){n([e]),h.issuer.attributes.push(e)},h.issuer.attributes=l.RDNAttributesAsArray(a.certIssuer,o),a.certIssuerUniqueId&&(h.issuer.uniqueId=a.certIssuerUniqueId),h.issuer.hash=o.digest().toHex(),o=e.md.sha1.create(),h.subject.getField=function(e){return t(h.subject,e)},h.subject.addField=function(e){n([e]),h.subject.attributes.push(e)},h.subject.attributes=l.RDNAttributesAsArray(a.certSubject,o),a.certSubjectUniqueId&&(h.subject.uniqueId=a.certSubjectUniqueId),h.subject.hash=o.digest().toHex(),h.extensions=a.certExtensions?l.certificateExtensionsFromAsn1(a.certExtensions):[],h.publicKey=l.publicKeyFromAsn1(a.subjectPublicKeyInfo),h},l.certificateExtensionsFromAsn1=function(e){for(var t=[],i=0;i<e.value.length;++i)for(var n=e.value[i],r=0;r<n.value.length;++r)t.push(l.certificateExtensionFromAsn1(n.value[r]));return t},l.certificateExtensionFromAsn1=function(t){var i={};if(i.id=s.derToOid(t.value[0].value),i.critical=!1,t.value[1].type===s.Type.BOOLEAN?(i.critical=0!==t.value[1].value.charCodeAt(0),i.value=t.value[2].value):i.value=t.value[1].value,i.id in c)if(i.name=c[i.id],"keyUsage"===i.name){var n=0,r=0;1<(t=s.fromDer(i.value)).value.length&&(n=t.value.charCodeAt(1),r=2<t.value.length?t.value.charCodeAt(2):0),i.digitalSignature=128==(128&n),i.nonRepudiation=64==(64&n),i.keyEncipherment=32==(32&n),i.dataEncipherment=16==(16&n),i.keyAgreement=8==(8&n),i.keyCertSign=4==(4&n),i.cRLSign=2==(2&n),i.encipherOnly=1==(1&n),i.decipherOnly=128==(128&r)}else if("basicConstraints"===i.name)t=s.fromDer(i.value),i.cA=0<t.value.length&&t.value[0].type===s.Type.BOOLEAN&&0!==t.value[0].value.charCodeAt(0),n=null,0<t.value.length&&t.value[0].type===s.Type.INTEGER?n=t.value[0].value:1<t.value.length&&(n=t.value[1].value),null!==n&&(i.pathLenConstraint=s.derToInteger(n));else if("extKeyUsage"===i.name)for(t=s.fromDer(i.value),n=0;n<t.value.length;++n)(r=s.derToOid(t.value[n].value))in c?i[c[r]]=!0:i[r]=!0;else if("nsCertType"===i.name)n=0,1<(t=s.fromDer(i.value)).value.length&&(n=t.value.charCodeAt(1)),i.client=128==(128&n),i.server=64==(64&n),i.email=32==(32&n),i.objsign=16==(16&n),i.reserved=8==(8&n),i.sslCA=4==(4&n),i.emailCA=2==(2&n),i.objCA=1==(1&n);else if("subjectAltName"===i.name||"issuerAltName"===i.name)for(i.altNames=[],t=s.fromDer(i.value),r=0;r<t.value.length;++r){var a={type:(n=t.value[r]).type,value:n.value};switch(i.altNames.push(a),n.type){case 7:a.ip=e.util.bytesToIP(n.value);break;case 8:a.oid=s.derToOid(n.value)}}else"subjectKeyIdentifier"===i.name&&(t=s.fromDer(i.value),i.subjectKeyIdentifier=e.util.bytesToHex(t.value));return i},l.certificationRequestFromAsn1=function(i,r){var a={},o=[];if(!s.validate(i,f,a,o))throw(a=Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.")).errors=o,a;if("string"!=typeof a.csrSignature){o="\0";for(var u=0;u<a.csrSignature.length;++u)o+=s.toDer(a.csrSignature[u]).getBytes();a.csrSignature=o}if((o=s.derToOid(a.publicKeyOid))!==l.oids.rsaEncryption)throw Error("Cannot read public key. OID is not RSA.");var h=l.createCertificationRequest();if(h.version=a.csrVersion?a.csrVersion.charCodeAt(0):0,h.signatureOid=e.asn1.derToOid(a.csrSignatureOid),h.signatureParameters=g(h.signatureOid,a.csrSignatureParams,!0),h.siginfo.algorithmOid=e.asn1.derToOid(a.csrSignatureOid),h.siginfo.parameters=g(h.siginfo.algorithmOid,a.csrSignatureParams,!1),++(o=e.util.createBuffer(a.csrSignature)).read,h.signature=o.getBytes(),h.certificationRequestInfo=a.certificationRequestInfo,r){if(h.md=null,h.signatureOid in c)switch(o=c[h.signatureOid],o){case"sha1WithRSAEncryption":h.md=e.md.sha1.create();break;case"md5WithRSAEncryption":h.md=e.md.md5.create();break;case"sha256WithRSAEncryption":h.md=e.md.sha256.create();break;case"sha512WithRSAEncryption":h.md=e.md.sha512.create();break;case"RSASSA-PSS":h.md=e.md.sha256.create()}if(null===h.md)throw(a=Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=h.signatureOid,a;o=s.toDer(h.certificationRequestInfo),h.md.update(o.getBytes())}return o=e.md.sha1.create(),h.subject.getField=function(e){return t(h.subject,e)},h.subject.addField=function(e){n([e]),h.subject.attributes.push(e)},h.subject.attributes=l.RDNAttributesAsArray(a.certificationRequestInfoSubject,o),h.subject.hash=o.digest().toHex(),h.publicKey=l.publicKeyFromAsn1(a.subjectPublicKeyInfo),h.getAttribute=function(e){return t(h,e)},h.addAttribute=function(e){n([e]),h.attributes.push(e)},h.attributes=l.CRIAttributesAsArray(a.certificationRequestInfoAttributes||[]),h},l.createCertificationRequest=function(){var i={version:0,signatureOid:null,signature:null,siginfo:{}};return i.siginfo.algorithmOid=null,i.subject={},i.subject.getField=function(e){return t(i.subject,e)},i.subject.addField=function(e){n([e]),i.subject.attributes.push(e)},i.subject.attributes=[],i.subject.hash=null,i.publicKey=null,i.attributes=[],i.getAttribute=function(e){return t(i,e)},i.addAttribute=function(e){n([e]),i.attributes.push(e)},i.md=null,i.setSubject=function(e){n(e),i.subject.attributes=e,i.subject.hash=null},i.setAttributes=function(e){n(e),i.attributes=e},i.sign=function(t,n){i.md=n||e.md.sha1.create();var r=c[i.md.algorithm+"WithRSAEncryption"];if(!r)throw(r=Error("Could not compute certification request digest. Unknown message digest algorithm OID.")).algorithm=i.md.algorithm,r;i.signatureOid=i.siginfo.algorithmOid=r,i.certificationRequestInfo=l.getCertificationRequestInfo(i),r=s.toDer(i.certificationRequestInfo),i.md.update(r.getBytes()),i.signature=t.sign(i.md)},i.verify=function(){var t=!1,n=i.md;if(null===n){if(i.signatureOid in c)switch(c[i.signatureOid]){case"sha1WithRSAEncryption":n=e.md.sha1.create();break;case"md5WithRSAEncryption":n=e.md.md5.create();break;case"sha256WithRSAEncryption":n=e.md.sha256.create();break;case"sha512WithRSAEncryption":n=e.md.sha512.create();break;case"RSASSA-PSS":n=e.md.sha256.create()}if(null===n)throw(n=Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=i.signatureOid,n;var r=i.certificationRequestInfo||l.getCertificationRequestInfo(i);r=s.toDer(r),n.update(r.getBytes())}if(null!==n){switch(i.signatureOid){case c["RSASSA-PSS"]:if(void 0===(t=c[i.signatureParameters.mgf.hash.algorithmOid])||void 0===e.md[t])throw(n=Error("Unsupported MGF hash function.")).oid=i.signatureParameters.mgf.hash.algorithmOid,n.name=t,n;var a=c[i.signatureParameters.mgf.algorithmOid];if(void 0===a||void 0===e.mgf[a])throw(n=Error("Unsupported MGF function.")).oid=i.signatureParameters.mgf.algorithmOid,n.name=a,n;if(a=e.mgf[a].create(e.md[t].create()),void 0===(t=c[i.signatureParameters.hash.algorithmOid])||void 0===e.md[t])throw(n=Error("Unsupported RSASSA-PSS hash function.")).oid=i.signatureParameters.hash.algorithmOid,n.name=t,n;a=e.pss.create(e.md[t].create(),a,i.signatureParameters.saltLength)}t=i.publicKey.verify(n.digest().getBytes(),i.signature,a)}return t},i},l.getTBSCertificate=function(t){var n=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.CONTEXT_SPECIFIC,0,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(t.version).getBytes())]),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber)),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(t.siginfo.algorithmOid).getBytes()),a(t.siginfo.algorithmOid,t.siginfo.parameters)]),i(t.issuer),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.UTCTIME,!1,s.dateToUtcTime(t.validity.notBefore)),s.create(s.Class.UNIVERSAL,s.Type.UTCTIME,!1,s.dateToUtcTime(t.validity.notAfter))]),i(t.subject),l.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(s.create(s.Class.CONTEXT_SPECIFIC,1,!0,[s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(s.create(s.Class.CONTEXT_SPECIFIC,2,!0,[s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),0<t.extensions.length&&n.value.push(l.certificateExtensionsToAsn1(t.extensions)),n},l.getCertificationRequestInfo=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(e.version).getBytes()),i(e.subject),l.publicKeyToAsn1(e.publicKey),o(e)])},l.distinguishedNameToAsn1=function(e){return i(e)},l.certificateToAsn1=function(e){var t=e.tbsCertificate||l.getTBSCertificate(e);return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[t,s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(e.signatureOid).getBytes()),a(e.signatureOid,e.signatureParameters)]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},l.certificateExtensionsToAsn1=function(e){var t=s.create(s.Class.CONTEXT_SPECIFIC,3,!0,[]),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);t.value.push(i);for(var n=0;n<e.length;++n)i.value.push(l.certificateExtensionToAsn1(e[n]));return t},l.certificateExtensionToAsn1=function(e){var t=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);t.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(e.id).getBytes())),e.critical&&t.value.push(s.create(s.Class.UNIVERSAL,s.Type.BOOLEAN,!1,String.fromCharCode(255)));var i=e.value;return"string"!=typeof e.value&&(i=s.toDer(i).getBytes()),t.value.push(s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,i)),t},l.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||l.getCertificationRequestInfo(e);return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[t,s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(e.signatureOid).getBytes()),a(e.signatureOid,e.signatureParameters)]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},l.createCaStore=function(t){function n(e){return r(e),a.certs[e.hash]||null}function r(t){if(!t.hash){var n=e.md.sha1.create();t.attributes=l.RDNAttributesAsArray(i(t),n),t.hash=n.digest().toHex()}}var a={certs:{},getIssuer:function(e){return n(e.issuer)},addCertificate:function(t){if("string"==typeof t&&(t=e.pki.certificateFromPem(t)),r(t.subject),!a.hasCertificate(t))if(t.subject.hash in a.certs){var i=a.certs[t.subject.hash];e.util.isArray(i)||(i=[i]),i.push(t),a.certs[t.subject.hash]=i}else a.certs[t.subject.hash]=t},hasCertificate:function(t){"string"==typeof t&&(t=e.pki.certificateFromPem(t));var i=n(t.subject);if(!i)return!1;e.util.isArray(i)||(i=[i]),t=s.toDer(l.certificateToAsn1(t)).getBytes();for(var r=0;r<i.length;++r)if(t===s.toDer(l.certificateToAsn1(i[r])).getBytes())return!0;return!1},listAllCertificates:function(){var t,i=[];for(t in a.certs)if(a.certs.hasOwnProperty(t)){var n=a.certs[t];if(e.util.isArray(n))for(var r=0;r<n.length;++r)i.push(n[r]);else i.push(n)}return i},removeCertificate:function(t){if("string"==typeof t&&(t=e.pki.certificateFromPem(t)),r(t.subject),!a.hasCertificate(t))return null;var i=n(t.subject);if(!e.util.isArray(i)){var o=a.certs[t.subject.hash];return delete a.certs[t.subject.hash],o}for(var c=s.toDer(l.certificateToAsn1(t)).getBytes(),u=0;u<i.length;++u)c===s.toDer(l.certificateToAsn1(i[u])).getBytes()&&(o=i[u],i.splice(u,1));return 0===i.length&&delete a.certs[t.subject.hash],o}};if(t)for(var o=0;o<t.length;++o)a.addCertificate(t[o]);return a},l.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},l.verifyCertificateChain=function(t,i,n){var r=(i=i.slice(0)).slice(0),a=new Date,o=!0,s=null,c=0;do{var u=i.shift(),h=null,d=!1;if((a<u.validity.notBefore||a>u.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:l.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:a}),null===s){if(null===(h=i[0]||t.getIssuer(u))&&u.isIssuer(u)&&(d=!0,h=u),h){var p=h;e.util.isArray(p)||(p=[p]);for(var f=!1;!f&&0<p.length;){h=p.shift();try{f=h.verify(u)}catch(e){}}f||(s={message:"Certificate signature is invalid.",error:l.certificateError.bad_certificate})}null!==s||h&&!d||t.hasCertificate(u)||(s={message:"Certificate is not trusted.",error:l.certificateError.unknown_ca})}if(null===s&&h&&!u.isIssuer(h)&&(s={message:"Certificate issuer is invalid.",error:l.certificateError.bad_certificate}),null===s)for(p={keyUsage:!0,basicConstraints:!0},f=0;null===s&&f<u.extensions.length;++f){var g=u.extensions[f];!g.critical||g.name in p||(s={message:"Certificate has an unsupported critical extension.",error:l.certificateError.unsupported_certificate})}if(null!==s||o&&(0!==i.length||h&&!d)||(o=u.getExtension("basicConstraints"),null!==(u=u.getExtension("keyUsage"))&&(u.keyCertSign&&null!==o||(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:l.certificateError.bad_certificate})),null!==s||null===o||o.cA||(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:l.certificateError.bad_certificate}),null===s&&null!==u&&"pathLenConstraint"in o&&c-1>o.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:l.certificateError.bad_certificate})),u=null===s||s.error,!0!==(o=n?n(u,c,r):u))throw!0===u&&(s={message:"The application rejected the certificate.",error:l.certificateError.bad_certificate}),(o||0===o)&&("object"!=typeof o||e.util.isArray(o)?"string"==typeof o&&(s.error=o):(o.message&&(s.message=o.message),o.error&&(s.error=o.error))),s;s=null,o=!1,++c}while(0<i.length);return!0}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/x509","require module ./aes ./asn1 ./des ./md ./mgf ./oids ./pem ./pss ./rsa ./util".split(" "),function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.x509)return i.x509;i.defined.x509=!0;for(var a=0;a<n.length;++a)n[a](i);return i.pki}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(e,t,i,n){for(var r=[],a=0;a<e.length;a++)for(var o=0;o<e[a].safeBags.length;o++){var s=e[a].safeBags[o];void 0!==n&&s.type!==n||(null===t?r.push(s):void 0!==s.attributes[t]&&0<=s.attributes[t].indexOf(i)&&r.push(s))}return r}function i(t){if(t.composed||t.constructed){for(var i=e.util.createBuffer(),n=0;n<t.value.length;++n)i.putBytes(t.value[n].value);t.composed=t.constructed=!1,t.value=i.getBytes()}return t}function n(t,n,a,l){if((n=o.fromDer(n,a)).tagClass!==o.Class.UNIVERSAL||n.type!==o.Type.SEQUENCE||!0!==n.constructed)throw Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var u=0;u<n.value.length;u++){var h={},d=[];if(!o.validate(n.value[u],c,h,d))throw(t=Error("Cannot read ContentInfo.")).errors=d,t;d={encrypted:!1};var p=h.content.value[0];switch(o.derToOid(h.contentType)){case s.oids.data:if(p.tagClass!==o.Class.UNIVERSAL||p.type!==o.Type.OCTETSTRING)throw Error("PKCS#12 SafeContents Data is not an OCTET STRING.");h=i(p).value;break;case s.oids.encryptedData:var f=l,g=[];if(!o.validate(p,e.pkcs7.asn1.encryptedDataValidator,h={},g))throw(t=Error("Cannot read EncryptedContentInfo.")).errors=g,t;if((p=o.derToOid(h.contentType))!==s.oids.data)throw(t=Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=p,t;if(p=o.derToOid(h.encAlgorithm),p=s.pbe.getCipher(p,h.encParameter,f),h=i(h.encryptedContentAsn1),h=e.util.createBuffer(h.value),p.update(h),!p.finish())throw Error("Failed to decrypt PKCS#12 SafeContents.");h=p.output.getBytes(),d.encrypted=!0;break;default:throw(t=Error("Unsupported PKCS#12 contentType.")).contentType=o.derToOid(h.contentType),t}d.safeBags=r(h,a,l),t.safeContents.push(d)}}function r(e,t,i){if(!t&&0===e.length)return[];if((e=o.fromDer(e,t)).tagClass!==o.Class.UNIVERSAL||e.type!==o.Type.SEQUENCE||!0!==e.constructed)throw Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],r=0;r<e.value.length;r++){var l={},c=[];if(!o.validate(e.value[r],h,l,c))throw(e=Error("Cannot read SafeBag.")).errors=c,e;var u={type:o.derToOid(l.bagId),attributes:a(l.bagAttributes)};n.push(u);var d=l.bagValue.value[0];switch(u.type){case s.oids.pkcs8ShroudedKeyBag:if(null===(d=s.decryptPrivateKeyInfo(d,i)))throw Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong pdw?");case s.oids.keyBag:try{u.key=s.privateKeyFromAsn1(d)}catch(e){u.key=null,u.asn1=d}continue;case s.oids.certBag:var f=p,g=function(){if(o.derToOid(l.certId)!==s.oids.x509Certificate){var e=Error("Unsupported certificate type, only X.509 supported.");throw e.oid=o.derToOid(l.certId),e}e=o.fromDer(l.cert,t);try{u.cert=s.certificateFromAsn1(e,!0)}catch(t){u.cert=null,u.asn1=e}};break;default:throw(e=Error("Unsupported PKCS#12 SafeBag type.")).oid=u.type,e}if(void 0!==f&&!o.validate(d,f,l,c))throw(e=Error("Cannot read PKCS#12 "+f.name)).errors=c,e;g()}return n}function a(e){var t={};if(void 0!==e)for(var i=0;i<e.length;++i){var n={},r=[];if(!o.validate(e[i],d,n,r))throw(e=Error("Cannot read PKCS#12 BagAttribute.")).errors=r,e;if(r=o.derToOid(n.oid),void 0!==s.oids[r]){t[s.oids[r]]=[];for(var a=0;a<n.values.length;++a)t[s.oids[r]].push(n.values[a].value)}}return t}var o=e.asn1,s=e.pki,l=e.pkcs12=e.pkcs12||{},c={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},u={name:"PFX",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},c,{name:"PFX.macData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},h={name:"SafeBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},d={name:"Attribute",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,capture:"values"}]},p={name:"CertBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:o.Class.UNIVERSAL,type:o.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};l.pkcs12FromAsn1=function(r,a,c){"string"==typeof a?(c=a,a=!0):void 0===a&&(a=!0);var h={};if(!o.validate(r,u,h,[]))throw(a=Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=a,a;var d={version:h.version.charCodeAt(0),safeContents:[],getBags:function(i){var n,r={};return"localKeyId"in i?n=i.localKeyId:"localKeyIdHex"in i&&(n=e.util.hexToBytes(i.localKeyIdHex)),void 0===n&&!("friendlyName"in i)&&"bagType"in i&&(r[i.bagType]=t(d.safeContents,null,null,i.bagType)),void 0!==n&&(r.localKeyId=t(d.safeContents,"localKeyId",n,i.bagType)),"friendlyName"in i&&(r.friendlyName=t(d.safeContents,"friendlyName",i.friendlyName,i.bagType)),r},getBagsByFriendlyName:function(e,i){return t(d.safeContents,"friendlyName",e,i)},getBagsByLocalKeyId:function(e,i){return t(d.safeContents,"localKeyId",e,i)}};if(3!==h.version.charCodeAt(0))throw(a=Error("PKCS#12 PFX of version other than 3 not supported.")).version=h.version.charCodeAt(0),a;if(o.derToOid(h.contentType)!==s.oids.data)throw(a=Error("Only PKCS#12 PFX in pdw integrity mode supported.")).oid=o.derToOid(h.contentType),a;if((r=h.content.value[0]).tagClass!==o.Class.UNIVERSAL||r.type!==o.Type.OCTETSTRING)throw Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(r=i(r),h.mac){var p=null,f=0,g=o.derToOid(h.macAlgorithm);switch(g){case s.oids.sha1:p=e.md.sha1.create(),f=20;break;case s.oids.sha256:p=e.md.sha256.create(),f=32;break;case s.oids.sha384:p=e.md.sha384.create(),f=48;break;case s.oids.sha512:p=e.md.sha512.create(),f=64;break;case s.oids.md5:p=e.md.md5.create(),f=16}if(null===p)throw Error("PKCS#12 uses unsupported MAC algorithm: "+g);g=new e.util.ByteBuffer(h.macSalt);var m="macIterations"in h?parseInt(e.util.bytesToHex(h.macIterations),16):1;if(f=l.generateKey(c,g,3,m,f,p),(g=e.hmac.create()).start(p,f),g.update(r.value),g.getMac().getBytes()!==h.macDigest)throw Error("PKCS#12 MAC could not be verified. Invalid pdw?")}return n(d,r.value,a,c),d},l.toPkcs12Asn1=function(t,i,n,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||r.encAlgorithm||"aes128","useMac"in r||(r.useMac=!0),"localKeyId"in r||(r.localKeyId=null),"generateLocalKeyId"in r||(r.generateLocalKeyId=!0);var a,c=r.localKeyId;if(null!==c)c=e.util.hexToBytes(c);else if(r.generateLocalKeyId)if(i){var u=e.util.isArray(i)?i[0]:i;"string"==typeof u&&(u=s.certificateFromPem(u)),(c=e.md.sha1.create()).update(o.toDer(s.certificateToAsn1(u)).getBytes()),c=c.digest().getBytes()}else c=e.random.getBytes(20);u=[],null!==c&&u.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids.localKeyId).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,c)])])),"friendlyName"in r&&u.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids.friendlyName).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.BMPSTRING,!1,r.friendlyName)])])),0<u.length&&(a=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,u)),c=[],u=[],null!==i&&(u=e.util.isArray(i)?i:[i]);for(var h=[],d=0;d<u.length;++d){"string"==typeof(i=u[d])&&(i=s.certificateFromPem(i));var p=0===d?a:void 0;i=s.certificateToAsn1(i),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids.certBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids.x509Certificate).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(i).getBytes())])])]),p]),h.push(i)}if(0<h.length&&(i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,h),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(i).getBytes())])]),c.push(i)),null!==t&&(t=s.wrapRsaPrivateKey(s.privateKeyToAsn1(t)),t=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,null===n?[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids.keyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[t]),a]:[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids.pkcs8ShroudedKeyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[s.encryptPrivateKeyInfo(t,n,r)]),a]),t=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[t]),t=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(t).getBytes())])]),c.push(t)),a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,c),r.useMac){c=e.md.sha1.create();var f=new e.util.ByteBuffer(e.random.getBytes(r.saltSize));t=l.generateKey(n,f,3,r=r.count,20),(n=e.hmac.create()).start(c,t),n.update(o.toDer(a).getBytes()),n=n.getMac(),f=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids.sha1).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,n.getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,f.getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(r).getBytes())])}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(3).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(a).getBytes())])]),f])},l.generateKey=e.pbe.generatePkcs12Key}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/pkcs12","require module ./asn1 ./hmac ./oids ./pkcs7asn1 ./pbe ./random ./rsa ./sha1 ./util ./x509".split(" "),function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.pkcs12)return i.pkcs12;i.defined.pkcs12=!0;for(var a=0;a<n.length;++a)n[a](i);return i.pkcs12}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1,i=e.pki=e.pki||{};i.pemToDer=function(t){if((t=e.pem.decode(t)[0]).procType&&"ENCRYPTED"===t.procType.type)throw Error("Could not convert PEM to DER; PEM is encrypted.");return e.util.createBuffer(t.body)},i.privateKeyFromPem=function(n){if("PRIVATE KEY"!==(n=e.pem.decode(n)[0]).type&&"RSA PRIVATE KEY"!==n.type){var r=Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=n.type,r}if(n.procType&&"ENCRYPTED"===n.procType.type)throw Error("Could not convert private key from PEM; PEM is encrypted.");return n=t.fromDer(n.body),i.privateKeyFromAsn1(n)},i.privateKeyToPem=function(n,r){var a={type:"RSA PRIVATE KEY",body:t.toDer(i.privateKeyToAsn1(n)).getBytes()};return e.pem.encode(a,{maxline:r})},i.privateKeyInfoToPem=function(i,n){var r={type:"PRIVATE KEY",body:t.toDer(i).getBytes()};return e.pem.encode(r,{maxline:n})}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/pki","require module ./asn1 ./oids ./pbe ./pem ./pbkdf2 ./pkcs12 ./pss ./rsa ./util ./x509".split(" "),function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.pki)return i.pki;i.defined.pki=!0;for(var a=0;a<n.length;++a)n[a](i);return i.pki}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=function(t,i,n,r){var a=e.util.createBuffer(),o=t.length>>1,s=o+(1&t.length),l=t.substr(0,s);s=t.substr(o,s),t=e.util.createBuffer(),o=e.hmac.create(),n=i+n;var c=Math.ceil(r/16);i=Math.ceil(r/20),o.start("MD5",l),l=e.util.createBuffer(),t.putBytes(n);for(var u=0;u<c;++u)o.start(null,null),o.update(t.getBytes()),t.putBuffer(o.digest()),o.start(null,null),o.update(t.bytes()+n),l.putBuffer(o.digest());for(o.start("SHA1",s),s=e.util.createBuffer(),t.clear(),t.putBytes(n),u=0;u<i;++u)o.start(null,null),o.update(t.getBytes()),t.putBuffer(o.digest()),o.start(null,null),o.update(t.bytes()+n),s.putBuffer(o.digest());return a.putBytes(e.util.xorBytes(l.getBytes(),s.getBytes(),r)),a},i=function(t,i,n){n=!1;try{var r=t.deflate(i.fragment.getBytes());i.fragment=e.util.createBuffer(r),i.length=r.length,n=!0}catch(e){}return n},n=function(t,i,n){n=!1;try{var r=t.inflate(i.fragment.getBytes());i.fragment=e.util.createBuffer(r),i.length=r.length,n=!0}catch(e){}return n},r=function(t,i){var n=0;switch(i){case 1:n=t.getByte();break;case 2:n=t.getInt16();break;case 3:n=t.getInt24();break;case 4:n=t.getInt32()}return e.util.createBuffer(t.getBytes(n))},a=function(e,t,i){e.putInt(i.length(),t<<3),e.putBuffer(i)},o={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};o.SupportedVersions=[o.Versions.TLS_1_1,o.Versions.TLS_1_0],o.Version=o.SupportedVersions[0],o.MaxFragment=15360,o.ConnectionEnd={server:0,client:1},o.PRFAlgorithm={tls_prf_sha256:0},o.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},o.CipherType={stream:0,block:1,aead:2},o.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},o.CompressionMethod={none:0,deflate:1},o.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},o.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},o.Alert={},o.Alert.Level={warning:1,fatal:2},o.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},o.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},o.CipherSuites={},o.getCipherSuite=function(e){var t,i=null;for(t in o.CipherSuites){var n=o.CipherSuites[t];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){i=n;break}}return i},o.handleUnexpected=function(e,t){(e.open||e.entity!==o.ConnectionEnd.client)&&e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.unexpected_message}})},o.handleHelloRequest=function(e,t,i){!e.handshaking&&0<e.handshakes&&(o.queue(e,o.createAlert(e,{level:o.Alert.Level.warning,description:o.Alert.Description.no_renegotiation})),o.flush(e)),e.process()},o.parseHelloMessage=function(t,i,n){var a=null,s=t.entity===o.ConnectionEnd.client;if(38>n)t.error(t,{message:s?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.illegal_parameter}});else{var l=(i=i.fragment).length();if(a={version:{major:i.getByte(),minor:i.getByte()},random:e.util.createBuffer(i.getBytes(32)),session_id:r(i,1),extensions:[]},s?(a.cipher_suite=i.getBytes(2),a.compression_method=i.getByte()):(a.cipher_suites=r(i,2),a.compression_methods=r(i,1)),0<(l=n-(l-i.length()))){for(n=r(i,2);0<n.length();)a.extensions.push({type:[n.getByte(),n.getByte()],data:r(n,2)});if(!s)for(n=0;n<a.extensions.length;++n)if(0===(i=a.extensions[n]).type[0]&&0===i.type[1])for(i=r(i.data,2);0<i.length()&&0===i.getByte();)t.session.extensions.server_name.serverNameList.push(r(i,2).getBytes())}if(t.session.version&&(a.version.major!==t.session.version.major||a.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.protocol_version}});if(s)t.session.cipherSuite=o.getCipherSuite(a.cipher_suite);else for(n=e.util.createBuffer(a.cipher_suites.bytes());0<n.length()&&(t.session.cipherSuite=o.getCipherSuite(n.getBytes(2)),null===t.session.cipherSuite););if(null===t.session.cipherSuite)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.handshake_failure},cipherSuite:e.util.bytesToHex(a.cipher_suite)});t.session.compressionMethod=s?a.compression_method:o.CompressionMethod.none}return a},o.createSecurityParameters=function(e,t){var i=e.entity===o.ConnectionEnd.client,n=t.random.bytes(),r=i?e.session.sp.client_random:n;i=i?n:o.createRandom().getBytes(),e.session.sp={entity:e.entity,prf_algorithm:o.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:r,server_random:i}},o.handleServerHello=function(e,t,i){if(t=o.parseHelloMessage(e,t,i),!e.fail){if(!(t.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.protocol_version}});e.version.minor=t.version.minor,e.session.version=e.version,0<(i=t.session_id.bytes()).length&&i===e.session.id?(e.expect=h,e.session.resuming=!0,e.session.sp.server_random=t.random.bytes()):(e.expect=s,e.session.resuming=!1,o.createSecurityParameters(e,t)),e.session.id=i,e.process()}},o.handleClientHello=function(t,i,n){if(i=o.parseHelloMessage(t,i,n),!t.fail){var r=i.session_id.bytes();if(n=null,t.sessionCache&&(null===(n=t.sessionCache.getSession(r))?r="":(n.version.major!==i.version.major||n.version.minor>i.version.minor)&&(n=null,r="")),0===r.length&&(r=e.random.getBytes(32)),t.session.id=r,t.session.clientHelloVersion=i.version,t.session.sp={},n)t.version=t.session.version=n.version,t.session.sp=n.sp;else{for(r=1;r<o.SupportedVersions.length;++r){var a=o.SupportedVersions[r];if(a.minor<=i.version.minor)break}t.version={major:a.major,minor:a.minor},t.session.version=t.version}null!==n?(t.expect=v,t.session.resuming=!0,t.session.sp.client_random=i.random.bytes()):(t.expect=!1!==t.verifyClient?g:m,t.session.resuming=!1,o.createSecurityParameters(t,i)),t.open=!0,o.queue(t,o.createRecord(t,{type:o.ContentType.handshake,data:o.createServerHello(t)})),t.session.resuming?(o.queue(t,o.createRecord(t,{type:o.ContentType.change_cipher_spec,data:o.createChangeCipherSpec()})),t.state.pending=o.createConnectionState(t),t.state.current.write=t.state.pending.write,o.queue(t,o.createRecord(t,{type:o.ContentType.handshake,data:o.createFinished(t)}))):(o.queue(t,o.createRecord(t,{type:o.ContentType.handshake,data:o.createCertificate(t)})),t.fail||(o.queue(t,o.createRecord(t,{type:o.ContentType.handshake,data:o.createServerKeyExchange(t)})),!1!==t.verifyClient&&o.queue(t,o.createRecord(t,{type:o.ContentType.handshake,data:o.createCertificateRequest(t)})),o.queue(t,o.createRecord(t,{type:o.ContentType.handshake,data:o.createServerHelloDone(t)})))),o.flush(t),t.process()}},o.handleCertificate=function(t,i,n){if(3>n)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.illegal_parameter}});n=r(i.fragment,3),i=[];try{for(;0<n.length();){var a=r(n,3),s=e.asn1.fromDer(a);a=e.pki.certificateFromAsn1(s,!0),i.push(a)}}catch(e){return t.error(t,{message:"Could not parse certificate list.",cause:e,send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.bad_certificate}})}!(a=t.entity===o.ConnectionEnd.client)&&!0!==t.verifyClient||0!==i.length?0===i.length?t.expect=a?l:m:(a?t.session.serverCertificate=i[0]:t.session.clientCertificate=i[0],o.verifyCertificateChain(t,i)&&(t.expect=a?l:m)):t.error(t,{message:a?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.illegal_parameter}}),t.process()},o.handleServerKeyExchange=function(e,t,i){if(0<i)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.unsupported_certificate}});e.expect=c,e.process()},o.handleClientKeyExchange=function(t,i,n){if(48>n)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.unsupported_certificate}});if(i=r(i.fragment,2).getBytes(),n=null,t.getPrivateKey)try{n=t.getPrivateKey(t,t.session.serverCertificate),n=e.pki.privateKeyFromPem(n)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.internal_error}})}if(null===n)return t.error(t,{message:"No private key set.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=n.decrypt(i);var s=t.session.clientHelloVersion;if(s.major!==a.pre_master_secret.charCodeAt(0)||s.minor!==a.pre_master_secret.charCodeAt(1))throw Error("TLS version rollback attack detected.")}catch(t){a.pre_master_secret=e.random.getBytes(48)}t.expect=v,null!==t.session.clientCertificate&&(t.expect=y),t.process()},o.handleCertificateRequest=function(e,t,i){if(3>i)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.illegal_parameter}});t={certificate_types:r(t=t.fragment,1),certificate_authorities:r(t,2)},e.session.certificateRequest=t,e.expect=u,e.process()},o.handleCertificateVerify=function(t,i,n){if(2>n)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.illegal_parameter}});(n=i.fragment).read-=4,i=n.bytes(),n.read+=4,n=r(n,2).getBytes();var a=e.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{if(!t.session.clientCertificate.publicKey.verify(a,n,"NONE"))throw Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch(e){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.handshake_failure}})}t.expect=v,t.process()},o.handleServerHelloDone=function(t,i,n){return 0<n?t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.record_overflow}}):null===t.serverCertificate&&!0!==(n=t.verify(t,(i={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.insufficient_security}}).alert.description,0,[]))?((n||0===n)&&("object"!=typeof n||e.util.isArray(n)?"number"==typeof n&&(i.alert.description=n):(n.message&&(i.message=n.message),n.alert&&(i.alert.description=n.alert))),t.error(t,i)):(null!==t.session.certificateRequest&&(i=o.createRecord(t,{type:o.ContentType.handshake,data:o.createCertificate(t)}),o.queue(t,i)),i=o.createRecord(t,{type:o.ContentType.handshake,data:o.createClientKeyExchange(t)}),o.queue(t,i),t.expect=f,i=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&o.queue(e,o.createRecord(e,{type:o.ContentType.handshake,data:o.createCertificateVerify(e,t)})),o.queue(e,o.createRecord(e,{type:o.ContentType.change_cipher_spec,data:o.createChangeCipherSpec()})),e.state.pending=o.createConnectionState(e),e.state.current.write=e.state.pending.write,o.queue(e,o.createRecord(e,{type:o.ContentType.handshake,data:o.createFinished(e)})),e.expect=h,o.flush(e),e.process()},null===t.session.certificateRequest||null===t.session.clientCertificate?i(t,null):void o.getClientSignature(t,i))},o.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.illegal_parameter}});var i=e.entity===o.ConnectionEnd.client;(e.session.resuming&&i||!e.session.resuming&&!i)&&(e.state.pending=o.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&i||e.session.resuming&&!i)&&(e.state.pending=null),e.expect=i?d:b,e.process()},o.handleFinished=function(i,n,r){(r=n.fragment).read-=4;var a=r.bytes();r.read+=4,n=n.fragment.getBytes(),(r=e.util.createBuffer()).putBuffer(i.session.md5.digest()),r.putBuffer(i.session.sha1.digest());var s=i.entity===o.ConnectionEnd.client;if((r=t(i.session.sp.master_secret,s?"server finished":"client finished",r.getBytes(),12)).getBytes()!==n)return i.error(i,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.decrypt_error}});i.session.md5.update(a),i.session.sha1.update(a),(i.session.resuming&&s||!i.session.resuming&&!s)&&(o.queue(i,o.createRecord(i,{type:o.ContentType.change_cipher_spec,data:o.createChangeCipherSpec()})),i.state.current.write=i.state.pending.write,i.state.pending=null,o.queue(i,o.createRecord(i,{type:o.ContentType.handshake,data:o.createFinished(i)}))),i.expect=s?p:C,i.handshaking=!1,++i.handshakes,i.peerCertificate=s?i.session.serverCertificate:i.session.clientCertificate,o.flush(i),i.isConnected=!0,i.connected(i),i.process()},o.handleAlert=function(e,t){var i=t.fragment;switch((i={level:i.getByte(),description:i.getByte()}).description){case o.Alert.Description.close_notify:var n="Connection closed.";break;case o.Alert.Description.unexpected_message:n="Unexpected message.";break;case o.Alert.Description.bad_record_mac:n="Bad record MAC.";break;case o.Alert.Description.decryption_failed:n="Decryption failed.";break;case o.Alert.Description.record_overflow:n="Record overflow.";break;case o.Alert.Description.decompression_failure:n="Decompression failed.";break;case o.Alert.Description.handshake_failure:n="Handshake failure.";break;case o.Alert.Description.bad_certificate:n="Bad certificate.";break;case o.Alert.Description.unsupported_certificate:n="Unsupported certificate.";break;case o.Alert.Description.certificate_revoked:n="Certificate revoked.";break;case o.Alert.Description.certificate_expired:n="Certificate expired.";break;case o.Alert.Description.certificate_unknown:n="Certificate unknown.";break;case o.Alert.Description.illegal_parameter:n="Illegal parameter.";break;case o.Alert.Description.unknown_ca:n="Unknown certificate authority.";break;case o.Alert.Description.access_denied:n="Access denied.";break;case o.Alert.Description.decode_error:n="Decode error.";break;case o.Alert.Description.decrypt_error:n="Decrypt error.";break;case o.Alert.Description.export_restriction:n="Export restriction.";break;case o.Alert.Description.protocol_version:n="Unsupported protocol version.";break;case o.Alert.Description.insufficient_security:n="Insufficient security.";break;case o.Alert.Description.internal_error:n="Internal error.";break;case o.Alert.Description.user_canceled:n="User canceled.";break;case o.Alert.Description.no_renegotiation:n="Renegotiation not supported.";break;default:n="Unknown error."}if(i.description===o.Alert.Description.close_notify)return e.close();e.error(e,{message:n,send:!1,origin:e.entity===o.ConnectionEnd.client?"server":"client",alert:i}),e.process()},o.handleHandshake=function(t,i){var n=i.fragment,r=n.getByte(),a=n.getInt24();if(a>n.length())return t.fragmented=i,i.fragment=e.util.createBuffer(),n.read-=4,t.process();t.fragmented=null,n.read-=4;var s=n.bytes(a+4);n.read+=4,r in D[t.entity][t.expect]?(t.entity!==o.ConnectionEnd.server||t.open||t.fail||(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:e.md.md5.create(),sha1:e.md.sha1.create()}),r!==o.HandshakeType.hello_request&&r!==o.HandshakeType.certificate_verify&&r!==o.HandshakeType.finished&&(t.session.md5.update(s),t.session.sha1.update(s)),D[t.entity][t.expect][r](t,i,a)):o.handleUnexpected(t,i)},o.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},o.handleHeartbeat=function(t,i){var n=i.fragment,r=n.getByte(),a=n.getInt16();if(n=n.getBytes(a),r===o.HeartbeatMessageType.heartbeat_request){if(t.handshaking||a>n.length)return t.process();o.queue(t,o.createRecord(t,{type:o.ContentType.heartbeat,data:o.createHeartbeat(o.HeartbeatMessageType.heartbeat_response,n)})),o.flush(t)}else if(r===o.HeartbeatMessageType.heartbeat_response){if(n!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,e.util.createBuffer(n))}t.process()};var s=1,l=2,c=3,u=4,h=5,d=6,p=7,f=8,g=1,m=2,y=3,v=4,b=5,C=6,S=o.handleUnexpected,w=o.handleChangeCipherSpec,x=o.handleAlert,T=o.handleHandshake,k=o.handleApplicationData,E=o.handleHeartbeat,A=[];A[o.ConnectionEnd.client]=[[S,x,T,S,E],[S,x,T,S,E],[S,x,T,S,E],[S,x,T,S,E],[S,x,T,S,E],[w,x,S,S,E],[S,x,T,S,E],[S,x,T,k,E],[S,x,T,S,E]],A[o.ConnectionEnd.server]=[[S,x,T,S,E],[S,x,T,S,E],[S,x,T,S,E],[S,x,T,S,E],[w,x,S,S,E],[S,x,T,S,E],[S,x,T,k,E],[S,x,T,S,E]];var I=o.handleFinished,D=[];D[o.ConnectionEnd.client]=[[S,S,o.handleServerHello,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[w=o.handleHelloRequest,S,S,S,S,S,S,S,S,S,S,x=o.handleCertificate,T=o.handleServerKeyExchange,k=o.handleCertificateRequest,E=o.handleServerHelloDone,S,S,S,S,S,S],[w,S,S,S,S,S,S,S,S,S,S,S,T,k,E,S,S,S,S,S,S],[w,S,S,S,S,S,S,S,S,S,S,S,S,k,E,S,S,S,S,S,S],[w,S,S,S,S,S,S,S,S,S,S,S,S,S,E,S,S,S,S,S,S],[w,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[w,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,I],[w,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[w,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S]],D[o.ConnectionEnd.server]=[[S,o.handleClientHello,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,x,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,o.handleClientKeyExchange,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,o.handleCertificateVerify,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,I],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S]],o.generateKeys=function(e,i){var n=i.client_random+i.server_random;e.session.resuming||(i.master_secret=t(i.pre_master_secret,"master secret",n,48).bytes(),i.pre_master_secret=null),n=i.server_random+i.client_random;var r=2*i.mac_key_length+2*i.enc_key_length,a=e.version.major===o.Versions.TLS_1_0.major&&e.version.minor===o.Versions.TLS_1_0.minor;return a&&(r+=2*i.fixed_iv_length),r={client_write_MAC_key:(n=t(i.master_secret,"key expansion",n,r)).getBytes(i.mac_key_length),server_write_MAC_key:n.getBytes(i.mac_key_length),client_write_key:n.getBytes(i.enc_key_length),server_write_key:n.getBytes(i.enc_key_length)},a&&(r.client_write_IV=n.getBytes(i.fixed_iv_length),r.server_write_IV=n.getBytes(i.fixed_iv_length)),r},o.createConnectionState=function(e){var t=e.entity===o.ConnectionEnd.client,r=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},a={read:r(),write:r()};if(a.read.update=function(e,t){return a.read.cipherFunction(t,a.read)?a.read.compressFunction(e,t,a.read)||e.error(e,{message:"Could not decompress record.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.decompression_failure}}):e.error(e,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.bad_record_mac}}),!e.fail},a.write.update=function(e,t){return a.write.compressFunction(e,t,a.write)?a.write.cipherFunction(t,a.write)||e.error(e,{message:"Could not encrypt record.",send:!1,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.internal_error}}):e.error(e,{message:"Could not compress record.",send:!1,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.internal_error}}),!e.fail},e.session)switch(r=e.session.sp,e.session.cipherSuite.initSecurityParameters(r),r.keys=o.generateKeys(e,r),a.read.macKey=t?r.keys.server_write_MAC_key:r.keys.client_write_MAC_key,a.write.macKey=t?r.keys.client_write_MAC_key:r.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(a,e,r),r.compression_algorithm){case o.CompressionMethod.none:break;case o.CompressionMethod.deflate:a.read.compressFunction=n,a.write.compressFunction=i;break;default:throw Error("Unsupported compression algorithm.")}return a},o.createRandom=function(){var t=new Date;t=+t+6e4*t.getTimezoneOffset();var i=e.util.createBuffer();return i.putInt32(t),i.putBytes(e.random.getBytes(28)),i},o.createRecord=function(e,t){return t.data?{type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data}:null},o.createAlert=function(t,i){var n=e.util.createBuffer();return n.putByte(i.level),n.putByte(i.description),o.createRecord(t,{type:o.ContentType.alert,data:n})},o.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var i=e.util.createBuffer(),n=0;n<t.cipherSuites.length;++n){var r=t.cipherSuites[n];i.putByte(r.id[0]),i.putByte(r.id[1])}var s=i.length();(n=e.util.createBuffer()).putByte(o.CompressionMethod.none);var l=n.length();if(r=e.util.createBuffer(),t.virtualHost){var c=e.util.createBuffer();c.putByte(0),c.putByte(0);var u=e.util.createBuffer();u.putByte(0),a(u,2,e.util.createBuffer(t.virtualHost));var h=e.util.createBuffer();a(h,2,u),a(c,2,h),r.putBuffer(c)}return 0<(c=r.length())&&(c+=2),s=(u=t.session.id).length+1+2+4+28+2+s+1+l+c,(l=e.util.createBuffer()).putByte(o.HandshakeType.client_hello),l.putInt24(s),l.putByte(t.version.major),l.putByte(t.version.minor),l.putBytes(t.session.sp.client_random),a(l,1,e.util.createBuffer(u)),a(l,2,i),a(l,1,n),0<c&&a(l,2,r),l},o.createServerHello=function(t){var i=t.session.id,n=i.length+1+2+4+28+2+1,r=e.util.createBuffer();return r.putByte(o.HandshakeType.server_hello),r.putInt24(n),r.putByte(t.version.major),r.putByte(t.version.minor),r.putBytes(t.session.sp.server_random),a(r,1,e.util.createBuffer(i)),r.putByte(t.session.cipherSuite.id[0]),r.putByte(t.session.cipherSuite.id[1]),r.putByte(t.session.compressionMethod),r},o.createCertificate=function(t){var i=t.entity===o.ConnectionEnd.client,n=null;t.getCertificate&&(n=t.getCertificate(t,i?t.session.certificateRequest:t.session.extensions.server_name.serverNameList));var r=e.util.createBuffer();if(null!==n)try{e.util.isArray(n)||(n=[n]);for(var s=null,l=0;l<n.length;++l){var c=e.pem.decode(n[l])[0];if("CERTIFICATE"!==c.type&&"X509 CERTIFICATE"!==c.type&&"TRUSTED CERTIFICATE"!==c.type){var u=Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=c.type,u}if(c.procType&&"ENCRYPTED"===c.procType.type)throw Error("Could not convert certificate from PEM; PEM is encrypted.");var h=e.util.createBuffer(c.body);null===s&&(s=e.asn1.fromDer(h.bytes(),!1));var d=e.util.createBuffer();a(d,3,h),r.putBuffer(d)}n=e.pki.certificateFromAsn1(s),i?t.session.clientCertificate=n:t.session.serverCertificate=n}catch(e){return t.error(t,{message:"Could not send certificate list.",cause:e,send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.bad_certificate}})}return t=3+r.length(),(i=e.util.createBuffer()).putByte(o.HandshakeType.certificate),i.putInt24(t),a(i,3,r),i},o.createClientKeyExchange=function(t){var i=e.util.createBuffer();i.putByte(t.session.clientHelloVersion.major),i.putByte(t.session.clientHelloVersion.minor),i.putBytes(e.random.getBytes(46));var n=t.session.sp;return n.pre_master_secret=i.getBytes(),t=(i=t.session.serverCertificate.publicKey.encrypt(n.pre_master_secret)).length+2,(n=e.util.createBuffer()).putByte(o.HandshakeType.client_key_exchange),n.putInt24(t),n.putInt16(i.length),n.putBytes(i),n},o.createServerKeyExchange=function(t){return e.util.createBuffer()},o.getClientSignature=function(t,i){var n=e.util.createBuffer();n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest()),n=n.getBytes(),t.getSignature=t.getSignature||function(t,i,n){var r=null;if(t.getPrivateKey)try{r=t.getPrivateKey(t,t.session.clientCertificate),r=e.pki.privateKeyFromPem(r)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.internal_error}})}null===r?t.error(t,{message:"No private key set.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.internal_error}}):i=r.sign(i,null),n(t,i)},t.getSignature(t,n,i)},o.createCertificateVerify=function(t,i){var n=i.length+2,r=e.util.createBuffer();return r.putByte(o.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(i.length),r.putBytes(i),r},o.createCertificateRequest=function(t){var i=e.util.createBuffer();i.putByte(1);var n=e.util.createBuffer();for(s in t.caStore.certs){var r=e.pki.distinguishedNameToAsn1(t.caStore.certs[s].subject);r=e.asn1.toDer(r),n.putInt16(r.length()),n.putBuffer(r)}t=1+i.length()+2+n.length();var s=e.util.createBuffer();return s.putByte(o.HandshakeType.certificate_request),s.putInt24(t),a(s,1,i),a(s,2,n),s},o.createServerHelloDone=function(t){return(t=e.util.createBuffer()).putByte(o.HandshakeType.server_hello_done),t.putInt24(0),t},o.createChangeCipherSpec=function(){var t=e.util.createBuffer();return t.putByte(1),t},o.createFinished=function(i){var n=e.util.createBuffer();return n.putBuffer(i.session.md5.digest()),n.putBuffer(i.session.sha1.digest()),n=t(i.session.sp.master_secret,i.entity===o.ConnectionEnd.client?"client finished":"server finished",n.getBytes(),12),(i=e.util.createBuffer()).putByte(o.HandshakeType.finished),i.putInt24(n.length()),i.putBuffer(n),i},o.createHeartbeat=function(t,i,n){"undefined"==typeof n&&(n=i.length);var r=e.util.createBuffer();return r.putByte(t),r.putInt16(n),r.putBytes(i),t=r.length(),r.putBytes(e.random.getBytes(Math.max(16,t-n-3))),r},o.queue=function(t,i){if(i&&(0!==i.fragment.length()||i.type!==o.ContentType.handshake&&i.type!==o.ContentType.alert&&i.type!==o.ContentType.change_cipher_spec)){if(i.type===o.ContentType.handshake){var n=i.fragment.bytes();t.session.md5.update(n),t.session.sha1.update(n)}if(i.fragment.length()<=o.MaxFragment)n=[i];else{n=[];for(var r=i.fragment.bytes();r.length>o.MaxFragment;)n.push(o.createRecord(t,{type:i.type,data:e.util.createBuffer(r.slice(0,o.MaxFragment))})),r=r.slice(o.MaxFragment);0<r.length&&n.push(o.createRecord(t,{type:i.type,data:e.util.createBuffer(r)}))}for(r=0;r<n.length&&!t.fail;++r){var a=n[r];t.state.current.write.update(t,a)&&t.records.push(a)}}},o.flush=function(e){for(var t=0;t<e.records.length;++t){var i=e.records[t];e.tlsData.putByte(i.type),e.tlsData.putByte(i.version.major),e.tlsData.putByte(i.version.minor),e.tlsData.putInt16(i.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var B=function(t){switch(t){case!0:return!0;case e.pki.certificateError.bad_certificate:return o.Alert.Description.bad_certificate;case e.pki.certificateError.unsupported_certificate:return o.Alert.Description.unsupported_certificate;case e.pki.certificateError.certificate_revoked:return o.Alert.Description.certificate_revoked;case e.pki.certificateError.certificate_expired:return o.Alert.Description.certificate_expired;case e.pki.certificateError.certificate_unknown:return o.Alert.Description.certificate_unknown;case e.pki.certificateError.unknown_ca:return o.Alert.Description.unknown_ca;default:return o.Alert.Description.bad_certificate}};for(var _ in o.verifyCertificateChain=function(t,i){try{e.pki.verifyCertificateChain(t.caStore,i,function(i,n,r){if(B(i),!0!==(n=t.verify(t,i,n,r))){if("object"==typeof n&&!e.util.isArray(n))throw(i=Error("The application rejected the certificate.")).send=!0,i.alert={level:o.Alert.Level.fatal,description:o.Alert.Description.bad_certificate},n.message&&(i.message=n.message),n.alert&&(i.alert.description=n.alert),i;n!==i&&(n=function(t){switch(n){case!0:return!0;case o.Alert.Description.bad_certificate:return e.pki.certificateError.bad_certificate;case o.Alert.Description.unsupported_certificate:return e.pki.certificateError.unsupported_certificate;case o.Alert.Description.certificate_revoked:return e.pki.certificateError.certificate_revoked;case o.Alert.Description.certificate_expired:return e.pki.certificateError.certificate_expired;case o.Alert.Description.certificate_unknown:return e.pki.certificateError.certificate_unknown;case o.Alert.Description.unknown_ca:return e.pki.certificateError.unknown_ca;default:return e.pki.certificateError.bad_certificate}}())}return n})}catch(i){var n=i;("object"!=typeof n||e.util.isArray(n))&&(n={send:!0,alert:{level:o.Alert.Level.fatal,description:B(i)}}),"send"in n||(n.send=!0),"alert"in n||(n.alert={level:o.Alert.Level.fatal,description:B(n.error)}),t.error(t,n)}return!t.fail},o.createSessionCache=function(t,i){var n=null;if(t&&t.getSession&&t.setSession&&t.order)n=t;else{for(var r in(n={}).cache=t||{},n.capacity=Math.max(i||100,1),n.order=[],t)n.order.length<=i?n.order.push(r):delete t[r];n.getSession=function(t){var i=null,r=null;if(t?r=e.util.bytesToHex(t):0<n.order.length&&(r=n.order[0]),null!==r&&r in n.cache)for(var a in i=n.cache[r],delete n.cache[r],n.order)if(n.order[a]===r){n.order.splice(a,1);break}return i},n.setSession=function(t,i){if(n.order.length===n.capacity){var r=n.order.shift();delete n.cache[r]}r=e.util.bytesToHex(t),n.order.push(r),n.cache[r]=i}}return n},o.createConnection=function(t){var i;i=t.caStore?e.util.isArray(t.caStore)?e.pki.createCaStore(t.caStore):t.caStore:e.pki.createCaStore();var n=t.cipherSuites||null;if(null===n)for(var r in n=[],o.CipherSuites)n.push(o.CipherSuites[r]);r=t.server?o.ConnectionEnd.server:o.ConnectionEnd.client;var a=t.sessionCache?o.createSessionCache(t.sessionCache):null,s={version:{major:o.Version.major,minor:o.Version.minor},entity:r,sessionId:t.sessionId,caStore:i,sessionCache:a,cipherSuites:n,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(e,t,i,n){return t},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:e.util.createBuffer(),tlsData:e.util.createBuffer(),data:e.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(e,i){i.origin=i.origin||(e.entity===o.ConnectionEnd.client?"client":"server"),i.send&&(o.queue(e,o.createAlert(e,i.alert)),o.flush(e));var n=!1!==i.fatal;n&&(e.fail=!0),t.error(e,i),n&&e.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null,reset:function(e){s.version={major:o.Version.major,minor:o.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=0,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(e||"undefined"==typeof e),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=o.createConnectionState(s)}};return s.reset(),s.handshake=function(t){if(s.entity!==o.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&0===s.handshakes&&(s.fail=!1),s.handshaking=!0;var i=null;0<(t=t||"").length&&(s.sessionCache&&(i=s.sessionCache.getSession(t)),null===i&&(t="")),0===t.length&&s.sessionCache&&null!==(i=s.sessionCache.getSession())&&(t=i.id),s.session={id:t,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:e.md.md5.create(),sha1:e.md.sha1.create()},i&&(s.version=i.version,s.session.sp=i.sp),s.session.sp.client_random=o.createRandom().getBytes(),s.open=!0,o.queue(s,o.createRecord(s,{type:o.ContentType.handshake,data:o.createClientHello(s)})),o.flush(s)}},s.process=function(t){var i=0;if(t&&s.input.putBytes(t),!s.fail){if(null!==s.record&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),null===s.record){i=0;var n=(t=s.input).length();5>n?i=5-n:(s.record={type:t.getByte(),version:{major:t.getByte(),minor:t.getByte()},length:t.getInt16(),fragment:e.util.createBuffer(),ready:!1},(t=s.record.version.major===s.version.major)&&s.session&&s.session.version&&(t=s.record.version.minor===s.version.minor),t||s.error(s,{message:"Incompatible TLS version.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.protocol_version}}))}if(!s.fail&&null!==s.record&&!s.record.ready){t=0;var r=(n=(i=s).input).length();r<i.record.length?t=i.record.length-r:(i.record.fragment.putBytes(n.getBytes(i.record.length)),n.compact(),i.state.current.read.update(i,i.record)&&(null!==i.fragmented&&(i.fragmented.type===i.record.type?(i.fragmented.fragment.putBuffer(i.record.fragment),i.record=i.fragmented):i.error(i,{message:"Invalid fragmented record.",send:!0,alert:{level:o.Alert.Level.fatal,description:o.Alert.Description.unexpected_message}})),i.record.ready=!0)),i=t}!s.fail&&null!==s.record&&s.record.ready&&((n=(t=s.record).type-o.ContentType.change_cipher_spec)in(r=A[s.entity][s.expect])?r[n](s,t):o.handleUnexpected(s,t))}return i},s.prepare=function(t){return o.queue(s,o.createRecord(s,{type:o.ContentType.application_data,data:e.util.createBuffer(t)})),o.flush(s)},s.prepareHeartbeatRequest=function(t,i){return t instanceof e.util.ByteBuffer&&(t=t.bytes()),"undefined"==typeof i&&(i=t.length),s.expectedHeartbeatPayload=t,o.queue(s,o.createRecord(s,{type:o.ContentType.heartbeat,data:o.createHeartbeat(o.HeartbeatMessageType.heartbeat_request,t,i)})),o.flush(s)},s.close=function(e){if(!s.fail&&s.sessionCache&&s.session){var t={id:s.session.id,version:s.session.version,sp:s.session.sp};t.sp.keys=null,s.sessionCache.setSession(t.id,t)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,o.queue(s,o.createAlert(s,{level:o.Alert.Level.warning,description:o.Alert.Description.close_notify})),o.flush(s)),s.closed(s)),s.reset(e)},s},e.tls=e.tls||{},o)"function"!=typeof o[_]&&(e.tls[_]=o[_]);e.tls.prf_tls1=t,e.tls.hmac_sha1=function(t,i,n){var r=e.hmac.create();return r.start("SHA1",t),(t=e.util.createBuffer()).putInt32(i[0]),t.putInt32(i[1]),t.putByte(n.type),t.putByte(n.version.major),t.putByte(n.version.minor),t.putInt16(n.length),t.putBytes(n.fragment.bytes()),r.update(t.getBytes()),r.digest().getBytes()},e.tls.createSessionCache=o.createSessionCache,e.tls.createConnection=o.createConnection}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/tls","require module ./asn1 ./hmac ./md ./pem ./pki ./random ./util".split(" "),function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.tls)return i.tls;i.defined.tls=!0;for(var a=0;a<n.length;++a)n[a](i);return i.tls}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,n,r){t.read.cipherState={init:!1,cipher:e.cipher.createDecipher("AES-CBC",(n=n.entity===e.tls.ConnectionEnd.client)?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:e.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=a,t.write.cipherFunction=i,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=o.hmac_sha1}function i(t,i){var r=!1,a=i.macFunction(i.macKey,i.sequenceNumber,t);t.fragment.putBytes(a),i.updateSequenceNumber(),a=t.version.minor===o.Versions.TLS_1_0.minor?i.cipherState.init?null:i.cipherState.iv:e.random.getBytesSync(16),i.cipherState.init=!0;var s=i.cipherState.cipher;return s.start({iv:a}),t.version.minor>=o.Versions.TLS_1_1.minor&&s.output.putBytes(a),s.update(t.fragment),s.finish(n)&&(t.fragment=s.output,t.length=t.fragment.length(),r=!0),r}function n(e,t,i){return i||(e-=t.length()%e,t.fillWithByte(e-1,e)),!0}function r(e,t,i){if(e=!0,i){i=t.length();for(var n=t.last(),r=i-1-n;r<i-1;++r)e=e&&t.at(r)==n;e&&t.truncate(n+1)}return e}function a(t,i){var n=t.version.minor===o.Versions.TLS_1_0.minor?i.cipherState.init?null:i.cipherState.iv:t.fragment.getBytes(16);i.cipherState.init=!0;var a=i.cipherState.cipher;a.start({iv:n}),a.update(t.fragment),n=a.finish(r);var s=i.macLength,l=e.random.getBytesSync(s),c=a.output.length();return c>=s?(t.fragment=a.output.getBytes(c-s),l=a.output.getBytes(s)):t.fragment=a.output.getBytes(),t.fragment=e.util.createBuffer(t.fragment),t.length=t.fragment.length(),s=i.macFunction(i.macKey,i.sequenceNumber,t),i.updateSequenceNumber(),a=i.macKey,(c=e.hmac.create()).start("SHA1",a),c.update(l),l=c.digest().getBytes(),c.start(null,null),c.update(s),l===(s=c.digest().getBytes())&&n}var o=e.tls;o.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=o.BulkCipherAlgorithm.aes,e.cipher_type=o.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=o.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:t},o.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=o.BulkCipherAlgorithm.aes,e.cipher_type=o.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=o.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:t}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/aesCipherSuites",["require","module","./aes","./tls"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.aesCipherSuites)return i.aesCipherSuites;i.defined.aesCipherSuites=!0;for(var a=0;a<n.length;++a)n[a](i);return i.aesCipherSuites}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.debug=e.debug||{},e.debug.storage={},e.debug.get=function(t,i){var n;return"undefined"==typeof t?n=e.debug.storage:t in e.debug.storage&&(n="undefined"==typeof i?e.debug.storage[t]:e.debug.storage[t][i]),n},e.debug.set=function(t,i,n){t in e.debug.storage||(e.debug.storage[t]={}),e.debug.storage[t][i]=n},e.debug.clear=function(t,i){"undefined"==typeof t?e.debug.storage={}:t in e.debug.storage&&("undefined"==typeof i?delete e.debug.storage[t]:delete e.debug.storage[t][i])}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/debug",["require","module"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.debug)return i.debug;i.defined.debug=!0;for(var a=0;a<n.length;++a)n[a](i);return i.debug}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,i,n,r){t.generate=function(t,a){for(var o=new e.util.ByteBuffer,s=Math.ceil(a/r)+n,l=new e.util.ByteBuffer,c=n;c<s;++c){l.putInt32(c),i.start(),i.update(t+l.getBytes());var u=i.digest();o.putBytes(u.getBytes(r))}return o.truncate(o.length()-a),o.getBytes()}}e.kem=e.kem||{};var i=e.jsbn.BigInteger;e.kem.rsa={},e.kem.rsa.create=function(t,n){var r=(n=n||{}).prng||e.random;return{encrypt:function(n,a){var o=Math.ceil(n.n.bitLength()/8);do{var s=new i(e.util.bytesToHex(r.getBytesSync(o)),16).mod(n.n)}while(s.equals(i.ZERO));return 0<(o-=(s=e.util.hexToBytes(s.toString(16))).length)&&(s=e.util.fillString(String.fromCharCode(0),o)+s),{encapsulation:o=n.encrypt(s,"NONE"),key:s=t.generate(s,a)}},decrypt:function(e,i,n){return e=e.decrypt(i,"NONE"),t.generate(e,n)}}},e.kem.kdf1=function(e,i){t(this,e,0,i||e.digestLength)},e.kem.kdf2=function(e,i){t(this,e,1,i||e.digestLength)}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/kem",["require","module","./util","./random","./jsbn"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.kem)return i.kem;i.defined.kem=!0;for(var a=0;a<n.length;++a)n[a](i);return i.kem}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.log=e.log||{},e.log.levels="none error warning info debug verbose max".split(" ");var t={},i=[],n=null;e.log.LEVEL_LOCKED=2,e.log.NO_LEVEL_CHECK=4,e.log.INTERPOLATE=8;for(var r=0;r<e.log.levels.length;++r){var a=e.log.levels[r];t[a]={index:r,name:a.toUpperCase()}}for(e.log.logMessage=function(n){for(var r=t[n.level].index,a=0;a<i.length;++a){var o=i[a];o.flags&e.log.NO_LEVEL_CHECK?o.f(n):r<=t[o.level].index&&o.f(o,n)}},e.log.prepareStandard=function(e){"standard"in e||(e.standard=t[e.level].name+" ["+e.category+"] "+e.message)},e.log.prepareFull=function(t){if(!("full"in t)){var i=[t.message];i=i.concat([]),t.full=e.util.format.apply(this,i)}},e.log.prepareStandardFull=function(t){"standardFull"in t||(e.log.prepareStandard(t),t.standardFull=t.standard)},a=["error","warning","info","debug","verbose"],r=0;r<a.length;++r)!function(t){e.log[t]=function(i,n){var r=Array.prototype.slice.call(arguments).slice(2);e.log.logMessage({timestamp:new Date,level:t,category:i,message:n,arguments:r})}}(a[r]);if(e.log.makeLogger=function(t){return e.log.setLevel(t={flags:0,f:t},"none"),t},e.log.setLevel=function(t,i){var n=!1;if(t&&!(t.flags&e.log.LEVEL_LOCKED))for(var r=0;r<e.log.levels.length;++r)if(i==e.log.levels[r]){t.level=i,n=!0;break}return n},e.log.lock=function(t,i){t.flags="undefined"==typeof i||i?t.flags|e.log.LEVEL_LOCKED:t.flags&~e.log.LEVEL_LOCKED},e.log.addLogger=function(e){i.push(e)},"undefined"!=typeof console&&"log"in console){if(console.error&&console.warn&&console.info&&console.debug){var o={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug};n=function(t,i){e.log.prepareStandard(i);var n=o[i.level],r=[i.standard];r=r.concat(i.arguments.slice()),n.apply(console,r)}}else n=function(t,i){e.log.prepareStandardFull(i)};n=e.log.makeLogger(n),e.log.setLevel(n,"debug"),e.log.addLogger(n)}else console={log:function(){}};null!==n&&("console.level"in(r=e.util.getQueryVariables())&&e.log.setLevel(n,r["console.level"].slice(-1)[0]),"console.lock"in r&&"true"==r["console.lock"].slice(-1)[0]&&e.log.lock(n)),e.log.consoleLogger=n}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/log",["require","module","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.log)return i.log;i.defined.log=!0;for(var a=0;a<n.length;++a)n[a](i);return i.log}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t){var i={},n=[];if(!l.validate(t,c.asn1.recipientInfoValidator,i,n))throw(t=Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.")).errors=n,t;return{version:i.version.charCodeAt(0),issuer:e.pki.RDNAttributesAsArray(i.issuer),serialNumber:e.util.createBuffer(i.serial).toHex(),encryptedContent:{algorithm:l.derToOid(i.encAlgorithm),parameter:i.encParameter.value,content:i.encKey}}}function i(t){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(t.version).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:t.issuer}),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber))]),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(t.encryptedContent.algorithm).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")]),l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function n(e){for(var t=[],n=0;n<e.length;++n)t.push(i(e[n]));return t}function r(t){var i=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(t.version).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:t.issuer}),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,e.util.hexToBytes(t.serialNumber))]),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(t.digestAlgorithm).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&i.value.push(t.authenticatedAttributesAsn1),i.value.push(l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(t.signatureAlgorithm).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")])),i.value.push(l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,t.signature)),0<t.unauthenticatedAttributes.length){for(var n=l.create(l.Class.CONTEXT_SPECIFIC,1,!0,[]),r=0;r<t.unauthenticatedAttributes.length;++r)n.values.push(a(t.unauthenticatedAttributes[r]));i.value.push(n)}return i}function a(t){if(t.type===e.pki.oids.contentType)var i=l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(t.value).getBytes());else if(t.type===e.pki.oids.messageDigest)i=l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===e.pki.oids.signingTime){i=new Date("1950-01-01T00:00:00Z");var n=new Date("2050-01-01T00:00:00Z"),r=t.value;if("string"==typeof r){var a=Date.parse(r);r=isNaN(a)?13===r.length?l.utcTimeToDate(r):l.generalizedTimeToDate(r):new Date(a)}i=r>=i&&r<n?l.create(l.Class.UNIVERSAL,l.Type.UTCTIME,!1,l.dateToUtcTime(r)):l.create(l.Class.UNIVERSAL,l.Type.GENERALIZEDTIME,!1,l.dateToGeneralizedTime(r))}return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(t.type).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SET,!0,[i])])}function o(t,i,n){var r={};if(!l.validate(i,n,r,[]))throw(t=Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.")).errors=t,t;if(l.derToOid(r.contentType)!==e.pki.oids.data)throw Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(r.encryptedContent){if(i="",e.util.isArray(r.encryptedContent))for(n=0;n<r.encryptedContent.length;++n){if(r.encryptedContent[n].type!==l.Type.OCTETSTRING)throw Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");i+=r.encryptedContent[n].value}else i=r.encryptedContent;t.encryptedContent={algorithm:l.derToOid(r.encAlgorithm),parameter:e.util.createBuffer(r.encParameter.value),content:e.util.createBuffer(i)}}if(r.content){if(i="",e.util.isArray(r.content))for(n=0;n<r.content.length;++n){if(r.content[n].type!==l.Type.OCTETSTRING)throw Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");i+=r.content[n].value}else i=r.content;t.content=e.util.createBuffer(i)}return t.version=r.version.charCodeAt(0),t.rawCapture=r}function s(t){if(void 0===t.encryptedContent.key)throw Error("Symmetric key not available.");if(void 0===t.content){switch(t.encryptedContent.algorithm){case e.pki.oids["aes128-CBC"]:case e.pki.oids["aes192-CBC"]:case e.pki.oids["aes256-CBC"]:var i=e.aes.createDecryptionCipher(t.encryptedContent.key);break;case e.pki.oids.desCBC:case e.pki.oids["des-EDE3-CBC"]:i=e.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(i.start(t.encryptedContent.parameter),i.update(t.encryptedContent.content),!i.finish())throw Error("Symmetric decryption failed.");t.content=i.output}}var l=e.asn1,c=e.pkcs7=e.pkcs7||{};c.messageFromPem=function(t){if("PKCS7"!==(t=e.pem.decode(t)[0]).type){var i=Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw i.headerType=t.type,i}if(t.procType&&"ENCRYPTED"===t.procType.type)throw Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");return t=l.fromDer(t.body),c.messageFromAsn1(t)},c.messageToPem=function(t,i){var n={type:"PKCS7",body:l.toDer(t.toAsn1()).getBytes()};return e.pem.encode(n,{maxline:i})},c.messageFromAsn1=function(t){var i={},n=[];if(!l.validate(t,c.asn1.contentInfoValidator,i,n))throw(i=Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.")).errors=n,i;switch(n=l.derToOid(i.contentType)){case e.pki.oids.envelopedData:n=c.createEnvelopedData();break;case e.pki.oids.encryptedData:n=c.createEncryptedData();break;case e.pki.oids.signedData:n=c.createSignedData();break;default:throw Error("Cannot read PKCS#7 message. ContentType with OID "+n+" is not (yet) supported.")}return n.fromAsn1(i.content.value[0]),n},c.createSignedData=function(){var t=null;return t={type:e.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(i){o(t,i,c.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],i=t.rawCapture.certificates.value;for(var n=0;n<i.length;++n)t.certificates.push(e.pki.certificateFromAsn1(i[n]))},toAsn1:function(){t.contentInfo||t.sign();for(var i=[],n=0;n<t.certificates.length;++n)i.push(e.pki.certificateToAsn1(t.certificates[n]));n=[];var r=l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(t.version).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return 0<i.length&&r.value[0].value.push(l.create(l.Class.CONTEXT_SPECIFIC,0,!0,i)),0<n.length&&r.value[0].value.push(l.create(l.Class.CONTEXT_SPECIFIC,1,!0,n)),r.value[0].value.push(l.create(l.Class.UNIVERSAL,l.Type.SET,!0,t.signerInfos)),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(t.type).getBytes()),r])},addSigner:function(i){var n=i.issuer,r=i.serialNumber;i.certificate&&("string"==typeof(r=i.certificate)&&(r=e.pki.certificateFromPem(r)),n=r.issuer.attributes,r=r.serialNumber);var a=i.key;if(!a)throw Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof a&&(a=e.pki.privateKeyFromPem(a));var o=i.digestAlgorithm||e.pki.oids.sha1;switch(o){case e.pki.oids.sha1:case e.pki.oids.sha256:case e.pki.oids.sha384:case e.pki.oids.sha512:case e.pki.oids.md5:break;default:throw Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+o)}if(0<(i=i.authenticatedAttributes||[]).length){for(var s=!1,l=!1,c=0;c<i.length;++c){var u=i[c];if(s||u.type!==e.pki.oids.contentType){if(!l&&u.type===e.pki.oids.messageDigest&&(l=!0,s))break}else if(s=!0,l)break}if(!s||!l)throw Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:n,serialNumber:r,digestAlgorithm:o,signatureAlgorithm:e.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:i,unauthenticatedAttributes:[]})},sign:function(){var i;if(("object"!=typeof t.content||null===t.contentInfo)&&(t.contentInfo=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(e.pki.oids.data).getBytes())]),"content"in t)&&(t.content instanceof e.util.ByteBuffer?i=t.content.bytes():"string"==typeof t.content&&(i=e.util.encodeUtf8(t.content)),t.contentInfo.value.push(l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,i)]))),0!==t.signers.length){i={};for(var n=0;n<t.signers.length;++n){var o=t.signers[n],s=o.digestAlgorithm;s in i||(i[s]=e.md[e.pki.oids[s]].create()),o.md=0===o.authenticatedAttributes.length?i[s]:e.md[e.pki.oids[s]].create()}for(s in t.digestAlgorithmIdentifiers=[],i)t.digestAlgorithmIdentifiers.push(l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(s).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")]));if(2>t.contentInfo.value.length)throw Error("Could not sign PKCS#7 message; there is no content to sign.");s=l.derToOid(t.contentInfo.value[0].value);var c=l.toDer(n=(n=t.contentInfo.value[1]).value[0]);for(var u in c.getByte(),l.getBerValueLength(c),c=c.getBytes(),i)i[u].start().update(c);for(u=new Date,n=0;n<t.signers.length;++n){if(0===(o=t.signers[n]).authenticatedAttributes.length){if(s!==e.pki.oids.data)throw Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{o.authenticatedAttributesAsn1=l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[]),c=l.create(l.Class.UNIVERSAL,l.Type.SET,!0,[]);for(var h=0;h<o.authenticatedAttributes.length;++h){var d=o.authenticatedAttributes[h];d.type===e.pki.oids.messageDigest?d.value=i[o.digestAlgorithm].digest():d.type!==e.pki.oids.signingTime||d.value||(d.value=u),c.value.push(a(d)),o.authenticatedAttributesAsn1.value.push(a(d))}c=l.toDer(c).getBytes(),o.md.start().update(c)}o.signature=o.key.sign(o.md,"RSASSA-PKCS1-V1_5")}for(i=t,s=t.signers,u=[],n=0;n<s.length;++n)u.push(r(s[n]));i.signerInfos=u}},verify:function(){throw Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(i){"string"==typeof i&&(i=e.pki.certificateFromPem(i)),t.certificates.push(i)},addCertificateRevokationList:function(e){throw Error("PKCS#7 CRL support not yet implemented.")}}},c.createEncryptedData=function(){var t=null;return t={type:e.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(e){o(t,e,c.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),s(t)}}},c.createEnvelopedData=function(){var i=null;return i={type:e.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(e){var n=o(i,e,c.asn1.envelopedDataValidator);e=i,n=n.recipientInfos.value;for(var r=[],a=0;a<n.length;++a)r.push(t(n[a]));e.recipients=r},toAsn1:function(){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(i.type).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(i.version).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SET,!0,n(i.recipients)),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,function(t){return[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(e.pki.oids.data).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(t.algorithm).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,t.parameter.getBytes())]),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,t.content.getBytes())])]}(i.encryptedContent))])])])},findRecipient:function(e){for(var t=e.issuer.attributes,n=0;n<i.recipients.length;++n){var r=i.recipients[n],a=r.issuer;if(r.serialNumber===e.serialNumber&&a.length===t.length){for(var o=!0,s=0;s<t.length;++s)if(a[s].type!==t[s].type||a[s].value!==t[s].value){o=!1;break}if(o)return r}}return null},decrypt:function(t,n){if(void 0===i.encryptedContent.key&&void 0!==t&&void 0!==n)switch(t.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:case e.pki.oids.desCBC:var r=n.decrypt(t.encryptedContent.content);i.encryptedContent.key=e.util.createBuffer(r);break;default:throw Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}s(i)},addRecipient:function(t){i.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:e.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(void 0===i.encryptedContent.content){var r;switch(n=n||i.encryptedContent.algorithm,t=t||i.encryptedContent.key,n){case e.pki.oids["aes128-CBC"]:var a=r=16,o=e.aes.createEncryptionCipher;break;case e.pki.oids["aes192-CBC"]:r=24,a=16,o=e.aes.createEncryptionCipher;break;case e.pki.oids["aes256-CBC"]:r=32,a=16,o=e.aes.createEncryptionCipher;break;case e.pki.oids["des-EDE3-CBC"]:r=24,a=8,o=e.des.createEncryptionCipher;break;default:throw Error("Unsupported symmetric cipher, OID "+n)}if(void 0===t)t=e.util.createBuffer(e.random.getBytes(r));else if(t.length()!=r)throw Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+r+".");if(i.encryptedContent.algorithm=n,i.encryptedContent.key=t,i.encryptedContent.parameter=e.util.createBuffer(e.random.getBytes(a)),(r=o(t)).start(i.encryptedContent.parameter.copy()),r.update(i.content),!r.finish())throw Error("Symmetric encryption failed.");i.encryptedContent.content=r.output}for(r=0;r<i.recipients.length;++r)if(void 0===(a=i.recipients[r]).encryptedContent.content)switch(a.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:a.encryptedContent.content=a.encryptedContent.key.encrypt(i.encryptedContent.key.data);break;default:throw Error("Unsupported asymmetric cipher, OID "+a.encryptedContent.algorithm)}}}}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/pkcs7","require module ./aes ./asn1 ./des ./oids ./pem ./pkcs7asn1 ./random ./util ./x509".split(" "),function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.pkcs7)return i.pkcs7;i.defined.pkcs7=!0;for(var a=0;a<n.length;++a)n[a](i);return i.pkcs7}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,i){var n=i.toString(16);"8"<=n[0]&&(n="00"+n),n=e.util.hexToBytes(n),t.putInt32(n.length),t.putBytes(n)}function i(e,t){e.putInt32(t.length),e.putString(t)}function n(){for(var t=e.md.sha1.create(),i=arguments.length,n=0;n<i;++n)t.update(arguments[n]);return t.digest()}var r=e.ssh=e.ssh||{};r.privateKeyToPutty=function(r,a,o){o=o||"";var s=""===(a=a||"")?"none":"aes256-cbc",l="PuTTY-User-Key-File-2: ssh-rsa\r\nEncryption: "+s+"\r\nComment: "+o+"\r\n",c=e.util.createBuffer();i(c,"ssh-rsa"),t(c,r.e),t(c,r.n);var u=e.util.encode64(c.bytes(),64),h=Math.floor(u.length/66)+1;return l+="Public-Lines: "+h+"\r\n",l+=u,t(u=e.util.createBuffer(),r.d),t(u,r.p),t(u,r.q),t(u,r.qInv),a?(h=u.length()+16-1,h-=h%16,(r=n(u.bytes())).truncate(r.length()-h+u.length()),u.putBuffer(r),(h=e.util.createBuffer()).putBuffer(n("\0\0\0\0",a)),h.putBuffer(n("\0\0\0\x01",a)),(h=e.aes.createEncryptionCipher(h.truncate(8),"CBC")).start(e.util.createBuffer().fillWithByte(0,16)),h.update(u.copy()),h.finish(),(h=h.output).truncate(16),r=e.util.encode64(h.bytes(),64)):r=e.util.encode64(u.bytes(),64),l+="\r\nPrivate-Lines: "+(h=Math.floor(r.length/66)+1)+"\r\n",l+=r,a=n("putty-private-key-file-mac-key",a),i(h=e.util.createBuffer(),"ssh-rsa"),i(h,s),i(h,o),h.putInt32(c.length()),h.putBuffer(c),h.putInt32(u.length()),h.putBuffer(u),(o=e.hmac.create()).start("sha1",a),o.update(h.bytes()),l+"\r\nPrivate-MAC: "+o.digest().toHex()+"\r\n"},r.publicKeyToOpenSSH=function(n,r){r=r||"";var a=e.util.createBuffer();return i(a,"ssh-rsa"),t(a,n.e),t(a,n.n),"ssh-rsa "+e.util.encode64(a.bytes())+" "+r},r.privateKeyToOpenSSH=function(t,i){return i?e.pki.encryptRsaPrivateKey(t,i,{legacy:!0,algorithm:"aes128"}):e.pki.privateKeyToPem(t)},r.getPublicKeyFingerprint=function(n,r){var a=(r=r||{}).md||e.md.md5.create(),o=e.util.createBuffer();if(i(o,"ssh-rsa"),t(o,n.e),t(o,n.n),a.start(),a.update(o.getBytes()),a=a.digest(),"hex"===r.encoding)return a=a.toHex(),r.delimiter?a.match(/.{2}/g).join(r.delimiter):a;if("binary"===r.encoding)return a.getBytes();if(r.encoding)throw Error('Unknown encoding "'+r.encoding+'".');return a}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/ssh","require module ./aes ./hmac ./md5 ./sha1 ./util".split(" "),function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.ssh)return i.ssh;i.defined.ssh=!0;for(var a=0;a<n.length;++a)n[a](i);return i.ssh}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t={},i=0;e.debug.set("forge.task","tasks",t);var n={};e.debug.set("forge.task","queues",n);var r={ready:{}};r.ready.stop="ready",r.ready.start="running",r.ready.cancel="done",r.ready.fail="error",r.running={},r.running.stop="ready",r.running.start="running",r.running.block="blocked",r.running.unblock="running",r.running.sleep="sleeping",r.running.wakeup="running",r.running.cancel="done",r.running.fail="error",r.blocked={},r.blocked.stop="blocked",r.blocked.start="blocked",r.blocked.block="blocked",r.blocked.unblock="blocked",r.blocked.sleep="blocked",r.blocked.wakeup="blocked",r.blocked.cancel="done",r.blocked.fail="error",r.sleeping={},r.sleeping.stop="sleeping",r.sleeping.start="sleeping",r.sleeping.block="sleeping",r.sleeping.unblock="sleeping",r.sleeping.sleep="sleeping",r.sleeping.wakeup="sleeping",r.sleeping.cancel="done",r.sleeping.fail="error",r.done={},r.done.stop="done",r.done.start="done",r.done.block="done",r.done.unblock="done",r.done.sleep="done",r.done.wakeup="done",r.done.cancel="done",r.done.fail="error",r.error={},r.error.stop="error",r.error.start="error",r.error.block="error",r.error.unblock="error",r.error.sleep="error",r.error.wakeup="error",r.error.cancel="error",r.error.fail="error";var a=function(e){this.id=-1,this.name=e.name||"?",this.parent=e.parent||null,this.run=e.run,this.subtasks=[],this.error=!1,this.state="ready",this.blocks=0,this.userData=this.swapTime=this.timeoutId=null,this.id=i++,t[this.id]=this};a.prototype.debug=function(t){e.log.debug("forge.task",t||"","[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",n)},a.prototype.next=function(e,t){"function"==typeof e&&(t=e,e=this.name);var i=new a({run:t,name:e,parent:this});return i.state="running",i.type=this.type,i.successCallback=this.successCallback||null,i.failureCallback=this.failureCallback||null,this.subtasks.push(i),this},a.prototype.parallel=function(t,i){return e.util.isArray(t)&&(i=t,t=this.name),this.next(t,function(n){n.block(i.length);for(var r=function(t,r){e.task.start({type:t,run:function(e){i[r](e)},success:function(e){n.unblock()},failure:function(e){n.unblock()}})},a=0;a<i.length;a++)r(t+"__parallel-"+n.id+"-"+a,a)})},a.prototype.stop=function(){this.state=r[this.state].stop},a.prototype.start=function(){this.error=!1,this.state=r[this.state].start,"running"===this.state&&(this.start=new Date,this.run(this),s(this,0))},a.prototype.block=function(e){this.blocks+="undefined"==typeof e?1:e,0<this.blocks&&(this.state=r[this.state].block)},a.prototype.unblock=function(e){return this.blocks-="undefined"==typeof e?1:e,0===this.blocks&&"done"!==this.state&&(this.state="running",s(this,0)),this.blocks},a.prototype.sleep=function(e){this.state=r[this.state].sleep;var t=this;this.timeoutId=setTimeout(function(){t.timeoutId=null,t.state="running",s(t,0)},"undefined"==typeof e?0:e)},a.prototype.wait=function(e){e.wait(this)},a.prototype.wakeup=function(){"sleeping"===this.state&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state="running",s(this,0))},a.prototype.cancel=function(){this.state=r[this.state].cancel,this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},a.prototype.fail=function(e){if(this.error=!0,l(this,!0),e)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,s(e,0);else{if(null!==this.parent){for(e=this.parent;null!==e.parent;)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,e=e.parent;l(e,!0)}this.failureCallback&&this.failureCallback(this)}};var o=function(e){e.error=!1,e.state=r[e.state].start,setTimeout(function(){"running"===e.state&&(e.swapTime=+new Date,e.run(e),s(e,0))},0)},s=function(e,t){var i=30<t||20<+new Date-e.swapTime,n=function(t){if(t++,"running"===e.state)if(i&&(e.swapTime=+new Date),0<e.subtasks.length){var n=e.subtasks.shift();n.error=e.error,n.swapTime=e.swapTime,n.userData=e.userData,n.run(n),n.error||s(n,t)}else l(e),e.error||null===e.parent||(e.parent.error=e.error,e.parent.swapTime=e.swapTime,e.parent.userData=e.userData,s(e.parent,t))};i?setTimeout(n,0):n(t)},l=function(i,r){i.state="done",delete t[i.id],null===i.parent&&(i.type in n?0===n[i.type].length?e.log.error("forge.task","[%s][%s] task queue empty [%s]",i.id,i.name,i.type):n[i.type][0]!==i?e.log.error("forge.task","[%s][%s] task not first in queue [%s]",i.id,i.name,i.type):(n[i.type].shift(),0===n[i.type].length?delete n[i.type]:n[i.type][0].start()):e.log.error("forge.task","[%s][%s] task queue missing [%s]",i.id,i.name,i.type),r||(i.error&&i.failureCallback?i.failureCallback(i):!i.error&&i.successCallback&&i.successCallback(i)))};e.task=e.task||{},e.task.start=function(e){var t=new a({run:e.run,name:e.name||"?"});t.type=e.type,t.successCallback=e.success||null,t.failureCallback=e.failure||null,t.type in n?n[e.type].push(t):(n[t.type]=[t],o(t))},e.task.cancel=function(e){e in n&&(n[e]=[n[e][0]])},e.task.createCondition=function(){var e={tasks:{},wait:function(t){t.id in e.tasks||(t.block(),e.tasks[t.id]=t)},notify:function(){var t=e.tasks;for(var i in e.tasks={},t)t[i].unblock()}};return e}}if("function"!=typeof i){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),e(forge);var n=!0;i=function(e,i){i(t,module)}}var r,a=i;(i=function(e,t){return r="string"==typeof e?t.slice(2):e.slice(2),n?a.apply(null,Array.prototype.slice.call(arguments,0)):(i=a).apply(null,Array.prototype.slice.call(arguments,0))})("js/task",["require","module","./debug","./log","./util"],function(){(function(t,i){i.exports=function(i){var n=r.map(function(e){return t(e)}).concat(e);if((i=i||{}).defined=i.defined||{},i.defined.task)return i.task;i.defined.task=!0;for(var a=0;a<n.length;++a)n[a](i);return i.task}}).apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){if("function"!=typeof i){if("object"!=typeof module||!module.exports)return void("undefined"==typeof forge&&(forge={disableNativeCode:!1}));var e=!0;i=function(e,i){i(t,module)}}var n,r=i;(i=function(t,a){return n="string"==typeof t?a.slice(2):t.slice(2),e?r.apply(null,Array.prototype.slice.call(arguments,0)):(i=r).apply(null,Array.prototype.slice.call(arguments,0))})("js/forge","require module ./aes ./aesCipherSuites ./asn1 ./cipher ./cipherModes ./debug ./des ./hmac ./kem ./log ./md ./mgf1 ./pbkdf2 ./pem ./pkcs7 ./pkcs1 ./pkcs12 ./pki ./prime ./prng ./pss ./random ./rc2 ./ssh ./task ./tls ./util".split(" "),function(){(function(e,t){t.exports=function(t){var i=n.map(function(t){return e(t)});if((t=t||{}).defined=t.defined||{},t.defined.forge)return t.forge;t.defined.forge=!0;for(var r=0;r<i.length;++r)"function"==typeof i[r]&&i[r](t);return t},t.exports.disableNativeCode=!1,t.exports(t.exports)}).apply(null,Array.prototype.slice.call(arguments,0))})}(),t("js/forge")})}!function(){function e(e){return a(">"+s("B",e.length),e)}function t(e){return a(">"+s("H",e.length),e)}function i(e){return a(">"+s("L",e.length),e)}function n(n,r,o){var l=Object.keys(n).length,c=a(">H",[l]);l=-1<["0th","1st"].indexOf(r)?12*l+6:2+12*l;var u,h="",f="";for(u in n)if("string"==typeof u&&(u=parseInt(u)),!("0th"==r&&-1<[34665,34853].indexOf(u)||"Exif"==r&&40965==u||"1st"==r&&-1<[513,514].indexOf(u))){var g=n[u],m=a(">H",[u]),y=p[r][u].type,v=a(">H",[d[y]]);"number"==typeof g&&(g=[g]);var b,C=void 0,S=y;y=8+l+o+f.length;var w=b="";if("Byte"==S)4>=(C=g.length)?w=e(g)+s("\0",4-C):(w=a(">L",[y]),b=e(g));else if("Short"==S)2>=(C=g.length)?w=t(g)+s("\0\0",2-C):(w=a(">L",[y]),b=t(g));else if("Long"==S)1>=(C=g.length)?w=i(g):(w=a(">L",[y]),b=i(g));else if("Ascii"==S)4<(C=(S=g+"\0").length)?(w=a(">L",[y]),b=S):w=S+s("\0",4-C);else if("Rational"==S){if("number"==typeof g[0])C=1,b=g[1],S=a(">L",[w=g[0]])+a(">L",[b]);else{C=g.length,S="";for(var x=0;x<C;x++)b=g[x][1],S+=a(">L",[w=g[x][0]])+a(">L",[b])}w=a(">L",[y]),b=S}else if("SRational"==S){if("number"==typeof g[0])C=1,b=g[1],S=a(">l",[w=g[0]])+a(">l",[b]);else for(C=g.length,S="",x=0;x<C;x++)b=g[x][1],S+=a(">l",[w=g[x][0]])+a(">l",[b]);w=a(">L",[y]),b=S}else"Undefined"==S&&(4<(C=g.length)?(w=a(">L",[y]),b=g):w=g+s("\0",4-C));h+=m+v+(C=[a(">L",[C]),w,b])[0]+C[1],f+=g=C[2]}return[c+h,f]}function r(e){if("\xff\xd8"==e.slice(0,2)){e=l(e);e:{for(var t,i=0;i<e.length;i++)if("\xff\xe1"==(t=e[i]).slice(0,2)&&"Exif\0\0"==t.slice(4,10)){e=t;break e}e=null}this.tiftag=e?e.slice(10):null}else if(-1<["II","MM"].indexOf(e.slice(0,2)))this.tiftag=e;else{if("Exif"!=e.slice(0,4))throw"Given file is neither JPEG nor TIFF.";this.tiftag=e.slice(6)}}function a(e,t){if(!(t instanceof Array))throw"'pack' error. Got invalid type argument.";if(e.length-1!=t.length)throw"'pack' error. "+(e.length-1)+" marks, "+t.length+" elements.";if("<"==e[0])var i=!0;else{if(">"!=e[0])throw"";i=!1}for(var n,r,a="",o=1;r=e[o];){if("b"==r.toLowerCase()){if(n=t[o-1],"b"==r&&0>n&&(n+=256),255<n||0>n)throw"'pack' error.";n=String.fromCharCode(n)}else if("H"==r){if(65535<(n=t[o-1])||0>n)throw"'pack' error.";n=String.fromCharCode(Math.floor(n%65536/256))+String.fromCharCode(n%256),i&&(n=n.split("").reverse().join(""))}else{if("l"!=r.toLowerCase())throw"'pack' error.";if(n=t[o-1],"l"==r&&0>n&&(n+=4294967296),4294967295<n||0>n)throw"'pack' error.";n=String.fromCharCode(Math.floor(n/16777216))+String.fromCharCode(Math.floor(n%16777216/65536))+String.fromCharCode(Math.floor(n%65536/256))+String.fromCharCode(n%256),i&&(n=n.split("").reverse().join(""))}a+=n,o+=1}return a}function o(e,t){if("string"!=typeof t)throw"'unpack' error. Got invalid type argument.";for(var i=0,n=1;n<e.length;n++)if("b"==e[n].toLowerCase())i+=1;else if("h"==e[n].toLowerCase())i+=2;else{if("l"!=e[n].toLowerCase())throw"'unpack' error. Got invalid mark.";i+=4}if(i!=t.length)throw"'unpack' error. Mismatch between symbol and string length. "+i+":"+t.length;if("<"==e[0])i=!0;else{if(">"!=e[0])throw"'unpack' error.";i=!1}n=[];for(var r,a,o,s=0,l=1;a=e[l];){if("b"==a.toLowerCase())r=(r=t.slice(s,s+(o=1))).charCodeAt(0),"b"==a&&128<=r&&(r-=256);else if("H"==a)r=t.slice(s,s+(o=2)),i&&(r=r.split("").reverse().join("")),r=256*r.charCodeAt(0)+r.charCodeAt(1);else{if("l"!=a.toLowerCase())throw"'unpack' error. "+a;r=t.slice(s,s+(o=4)),i&&(r=r.split("").reverse().join("")),r=16777216*r.charCodeAt(0)+65536*r.charCodeAt(1)+256*r.charCodeAt(2)+r.charCodeAt(3),"l"==a&&2147483648<=r&&(r-=4294967296)}n.push(r),s+=o,l+=1}return n}function s(e,t){for(var i="",n=0;n<t;n++)i+=e;return i}function l(e){if("\xff\xd8"!=e.slice(0,2))throw"Given data isn't JPEG.";for(var t=2,i=["\xff\xd8"];;){if("\xff\xda"==e.slice(t,t+2)){i.push(e.slice(t));break}var n=o(">H",e.slice(t+2,t+4))[0];if(i.push(e.slice(t,n=t+n+2)),(t=n)>=e.length)throw"Wrong JPEG data."}return i}var c={version:"1.03",remove:function(e){var t=!1;if("\xff\xd8"!=e.slice(0,2)){if("data:image/jpeg;base64,"!=e.slice(0,23)&&"data:image/jpg;base64,"!=e.slice(0,22))throw"Given data is not jpeg.";e=h(e.split(",")[1]),t=!0}if("\xff\xe1"==(e=l(e))[1].slice(0,2)&&"Exif\0\0"==e[1].slice(4,10))e=[e[0]].concat(e.slice(2));else{if("\xff\xe1"!=e[2].slice(0,2)||"Exif\0\0"!=e[2].slice(4,10))throw"Exif not found.";e=e.slice(0,2).concat(e.slice(3))}return e=e.join(""),t&&(e="data:image/jpeg;base64,"+u(e)),e},insert:function(e,t){var i=!1;if("Exif\0\0"!=e.slice(0,6))throw"Given data is not exif.";if("\xff\xd8"!=t.slice(0,2)){if("data:image/jpeg;base64,"!=t.slice(0,23)&&"data:image/jpg;base64,"!=t.slice(0,22))throw"Given data is not jpeg.";t=h(t.split(",")[1]),i=!0}var n="\xff\xe1"+a(">H",[e.length+2])+e,r=l(t);return"\xff\xe0"==r[1].slice(0,2)&&"\xff\xe1"==r[2].slice(0,2)&&"Exif\0\0"==r[2].slice(4,10)?n?(r[2]=n,r=["\xff\xd8"].concat(r.slice(2))):r=null==n?r.slice(0,2).concat(r.slice(3)):r.slice(0).concat(r.slice(2)):"\xff\xe0"==r[1].slice(0,2)?n&&(r[1]=n):"\xff\xe1"==r[1].slice(0,2)&&"Exif\0\0"==r[1].slice(4,10)?n?r[1]=n:null==n&&(r=r.slice(0).concat(r.slice(2))):n&&(r=[r[0],n].concat(r.slice(1))),n=r.join(""),i&&(n="data:image/jpeg;base64,"+u(n)),n},load:function(e){if("string"!=typeof e)throw"'load' gots invalid type argument.";if("\xff\xd8"==e.slice(0,2))var t=e;else if("data:image/jpeg;base64,"==e.slice(0,23)||"data:image/jpg;base64,"==e.slice(0,22))t=h(e.split(",")[1]);else{if("Exif"!=e.slice(0,4))throw"'load' gots invalid file data.";t=e.slice(6)}if(e={"0th":{},Exif:{},GPS:{},Interop:{},"1st":{},thumbnail:null},null===(t=new r(t)).tiftag)return e;t.endian_mark="II"==t.tiftag.slice(0,2)?"<":">";var i=o(t.endian_mark+"L",t.tiftag.slice(4,8))[0];e["0th"]=t.get_ifd(i,"0th");var n=e["0th"].first_ifd_pointer;return delete e["0th"].first_ifd_pointer,34665 in e["0th"]&&(e.Exif=t.get_ifd(i=e["0th"][34665],"Exif")),34853 in e["0th"]&&(e.GPS=t.get_ifd(i=e["0th"][34853],"GPS")),40965 in e.Exif&&(e.Interop=t.get_ifd(i=e.Exif[40965],"Interop")),"\0\0\0\0"!=n&&(i=o(t.endian_mark+"L",n)[0],e["1st"]=t.get_ifd(i,"1st"),513 in e["1st"]&&514 in e["1st"]&&(t=t.tiftag.slice(e["1st"][513],e["1st"][513]+e["1st"][514]),e.thumbnail=t)),e},dump:function(e){var t=JSON.parse(JSON.stringify(e)),i=e=!1,r=!1,o=!1,s="0th"in t?t["0th"]:{};if("Exif"in t&&Object.keys(t.Exif).length||"Interop"in t&&Object.keys(t.Interop).length){s[34665]=1,e=!0;var u=t.Exif;if("Interop"in t&&Object.keys(t.Interop).length){u[40965]=1,r=!0;var h=t.Interop}else-1<Object.keys(u).indexOf(c.ExifIFD.InteroperabilityTag.toString())&&delete u[40965]}else-1<Object.keys(s).indexOf(c.ImageIFD.ExifTag.toString())&&delete s[34665];if("GPS"in t&&Object.keys(t.GPS).length){s[c.ImageIFD.GPSTag]=1,i=!0;var p=t.GPS}else-1<Object.keys(s).indexOf(c.ImageIFD.GPSTag.toString())&&delete s[c.ImageIFD.GPSTag];if("1st"in t&&"thumbnail"in t&&null!=t.thumbnail){o=!0,t["1st"][513]=1,t["1st"][514]=1;var f=t["1st"]}var g=n(s,"0th",0),m=g[0].length+12*e+12*i+4+g[1].length;s="";var y,v=0,b="",C=0,S="",w=0,x="";if(e){var T=n(u,"Exif",m);v=T[0].length+12*r+T[1].length}if(i&&(C=(b=(b=n(p,"GPS",m+v)).join("")).length),r&&(w=(S=(S=n(h,"Interop",m+v+C)).join("")).length),o){var k=n(f,"1st",m+v+C+w);for(y=l(t.thumbnail);"\xff\xe0"<=y[1].slice(0,2)&&"\xff\xef">=y[1].slice(0,2);)y=[y[0]].concat(y.slice(2));if(64e3<(y=y.join("")).length)throw"Given thumbnail is too large. max 64kB"}if(f=h=t="",u="\0\0\0\0",e){p=a(">L",[8+m]);var E=a(">H",[34665]),A=a(">H",[d.Long]),I=a(">L",[1]);t=E+A+I+p}return i&&(p=a(">L",[8+m+v]),h=(E=a(">H",[34853]))+(A=a(">H",[d.Long]))+(I=a(">L",[1]))+p),r&&(p=a(">L",[8+m+v+C]),f=(E=a(">H",[40965]))+(A=a(">H",[d.Long]))+(I=a(">L",[1]))+p),o&&(u=a(">L",[i=8+m+v+C+w]),i="\x02\x01\0\x04\0\0\0\x01"+a(">L",[i+k[0].length+24+4+k[1].length]),r="\x02\x02\0\x04\0\0\0\x01"+a(">L",[y.length]),x=k[0]+i+r+"\0\0\0\0"+k[1]+y),k=g[0]+t+h+u+g[1],e&&(s=T[0]+f+T[1]),"Exif\0\0MM\0*\0\0\0\b"+k+s+b+S+x}};if(r.prototype={get_ifd:function(e,t){for(var i={},n=o(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],r=e+2,a=-1<["0th","1st"].indexOf(t)?"Image":t,s=0;s<n;s++){var l=o(this.endian_mark+"H",this.tiftag.slice(e=r+12*s,e+2))[0],c=o(this.endian_mark+"H",this.tiftag.slice(e+2,e+4))[0];c=[c,o(this.endian_mark+"L",this.tiftag.slice(e+4,e+8))[0],this.tiftag.slice(e+8,e+12)],l in p[a]&&(i[l]=this.convert_value(c))}return"0th"==t&&(i.first_ifd_pointer=this.tiftag.slice(e=r+12*n,e+4)),i},convert_value:function(e){var t=e[0],i=e[1];if(e=e[2],1==t)4<i?(e=o(this.endian_mark+"L",e)[0],t=o(this.endian_mark+s("B",i),this.tiftag.slice(e,e+i))):t=o(this.endian_mark+s("B",i),e.slice(0,i));else if(2==t)4<i?(e=o(this.endian_mark+"L",e)[0],t=this.tiftag.slice(e,e+i-1)):t=e.slice(0,i-1);else if(3==t)2<i?(e=o(this.endian_mark+"L",e)[0],t=o(this.endian_mark+s("H",i),this.tiftag.slice(e,e+2*i))):t=o(this.endian_mark+s("H",i),e.slice(0,2*i));else if(4==t)1<i?(e=o(this.endian_mark+"L",e)[0],t=o(this.endian_mark+s("L",i),this.tiftag.slice(e,e+4*i))):t=o(this.endian_mark+s("L",i),e);else if(5==t)if(e=o(this.endian_mark+"L",e)[0],1<i){t=[];for(var n=0;n<i;n++)t.push([o(this.endian_mark+"L",this.tiftag.slice(e+8*n,e+4+8*n))[0],o(this.endian_mark+"L",this.tiftag.slice(e+4+8*n,e+8+8*n))[0]])}else t=[o(this.endian_mark+"L",this.tiftag.slice(e,e+4))[0],o(this.endian_mark+"L",this.tiftag.slice(e+4,e+8))[0]];else if(7==t)4<i?(e=o(this.endian_mark+"L",e)[0],t=this.tiftag.slice(e,e+i)):t=e.slice(0,i);else{if(10!=t)throw"Exif might be wrong. Got incorrect value type to decode. type:"+t;if(e=o(this.endian_mark+"L",e)[0],1<i)for(t=[],n=0;n<i;n++)t.push([o(this.endian_mark+"l",this.tiftag.slice(e+8*n,e+4+8*n))[0],o(this.endian_mark+"l",this.tiftag.slice(e+4+8*n,e+8+8*n))[0]]);else t=[o(this.endian_mark+"l",this.tiftag.slice(e,e+4))[0],o(this.endian_mark+"l",this.tiftag.slice(e+4,e+8))[0]]}return t instanceof Array&&1==t.length?t[0]:t}},"undefined"!=typeof window&&"function"==typeof window.btoa)var u=window.btoa;if("undefined"==typeof u&&(u=function(e){for(var t,i,n,r,a,o,s="",l=0;l<e.length;)r=(t=e.charCodeAt(l++))>>2,t=(3&t)<<4|(i=e.charCodeAt(l++))>>4,a=(15&i)<<2|(n=e.charCodeAt(l++))>>6,o=63&n,isNaN(i)?a=o=64:isNaN(n)&&(o=64),s=s+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o);return s}),"undefined"!=typeof window&&"function"==typeof window.atob)var h=window.atob;"undefined"==typeof h&&(h=function(e){var t="",i=0;for(e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");i<e.length;){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++)),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(i++));n=n<<2|r>>4,r=(15&r)<<4|a>>2;var s=(3&a)<<6|o;t+=String.fromCharCode(n),64!=a&&(t+=String.fromCharCode(r)),64!=o&&(t+=String.fromCharCode(s))}return t});var d={Byte:1,Ascii:2,Short:3,Long:4,Rational:5,Undefined:7,SLong:9,SRational:10},p={Image:{11:{name:"ProcessingSoftware",type:"Ascii"},254:{name:"NewSubfileType",type:"Long"},255:{name:"SubfileType",type:"Short"},256:{name:"ImageWidth",type:"Long"},257:{name:"ImageLength",type:"Long"},258:{name:"BitsPerSample",type:"Short"},259:{name:"Compression",type:"Short"},262:{name:"PhotometricInterpretation",type:"Short"},263:{name:"Threshholding",type:"Short"},264:{name:"CellWidth",type:"Short"},265:{name:"CellLength",type:"Short"},266:{name:"FillOrder",type:"Short"},269:{name:"DocumentName",type:"Ascii"},270:{name:"ImageDescription",type:"Ascii"},271:{name:"Make",type:"Ascii"},272:{name:"Model",type:"Ascii"},273:{name:"StripOffsets",type:"Long"},274:{name:"Orientation",type:"Short"},277:{name:"SamplesPerPixel",type:"Short"},278:{name:"RowsPerStrip",type:"Long"},279:{name:"StripByteCounts",type:"Long"},282:{name:"XResolution",type:"Rational"},283:{name:"YResolution",type:"Rational"},284:{name:"PlanarConfiguration",type:"Short"},290:{name:"GrayResponseUnit",type:"Short"},291:{name:"GrayResponseCurve",type:"Short"},292:{name:"T4Options",type:"Long"},293:{name:"T6Options",type:"Long"},296:{name:"ResolutionUnit",type:"Short"},301:{name:"TransferFunction",type:"Short"},305:{name:"Software",type:"Ascii"},306:{name:"DateTime",type:"Ascii"},315:{name:"Artist",type:"Ascii"},316:{name:"HostComputer",type:"Ascii"},317:{name:"Predictor",type:"Short"},318:{name:"WhitePoint",type:"Rational"},319:{name:"PrimaryChromaticities",type:"Rational"},320:{name:"ColorMap",type:"Short"},321:{name:"HalftoneHints",type:"Short"},322:{name:"TileWidth",type:"Short"},323:{name:"TileLength",type:"Short"},324:{name:"TileOffsets",type:"Short"},325:{name:"TileByteCounts",type:"Short"},330:{name:"SubIFDs",type:"Long"},332:{name:"InkSet",type:"Short"},333:{name:"InkNames",type:"Ascii"},334:{name:"NumberOfInks",type:"Short"},336:{name:"DotRange",type:"Byte"},337:{name:"TargetPrinter",type:"Ascii"},338:{name:"ExtraSamples",type:"Short"},339:{name:"SampleFormat",type:"Short"},340:{name:"SMinSampleValue",type:"Short"},341:{name:"SMaxSampleValue",type:"Short"},342:{name:"TransferRange",type:"Short"},343:{name:"ClipPath",type:"Byte"},344:{name:"XClipPathUnits",type:"Long"},345:{name:"YClipPathUnits",type:"Long"},346:{name:"Indexed",type:"Short"},347:{name:"JPEGTables",type:"Undefined"},351:{name:"OPIProxy",type:"Short"},512:{name:"JPEGProc",type:"Long"},513:{name:"JPEGInterchangeFormat",type:"Long"},514:{name:"JPEGInterchangeFormatLength",type:"Long"},515:{name:"JPEGRestartInterval",type:"Short"},517:{name:"JPEGLosslessPredictors",type:"Short"},518:{name:"JPEGPointTransforms",type:"Short"},519:{name:"JPEGQTables",type:"Long"},520:{name:"JPEGDCTables",type:"Long"},521:{name:"JPEGACTables",type:"Long"},529:{name:"YCbCrCoefficients",type:"Rational"},530:{name:"YCbCrSubSampling",type:"Short"},531:{name:"YCbCrPositioning",type:"Short"},532:{name:"ReferenceBlackWhite",type:"Rational"},700:{name:"XMLPacket",type:"Byte"},18246:{name:"Rating",type:"Short"},18249:{name:"RatingPercent",type:"Short"},32781:{name:"ImageID",type:"Ascii"},33421:{name:"CFARepeatPatternDim",type:"Short"},33422:{name:"CFAPattern",type:"Byte"},33423:{name:"BatteryLevel",type:"Rational"},33432:{name:"Copyright",type:"Ascii"},33434:{name:"ExposureTime",type:"Rational"},34377:{name:"ImageResources",type:"Byte"},34665:{name:"ExifTag",type:"Long"},34675:{name:"InterColorProfile",type:"Undefined"},34853:{name:"GPSTag",type:"Long"},34857:{name:"Interlace",type:"Short"},34858:{name:"TimeZoneOffset",type:"Long"},34859:{name:"SelfTimerMode",type:"Short"},37387:{name:"FlashEnergy",type:"Rational"},37388:{name:"SpatialFrequencyResponse",type:"Undefined"},37389:{name:"Noise",type:"Undefined"},37390:{name:"FocalPlaneXResolution",type:"Rational"},37391:{name:"FocalPlaneYResolution",type:"Rational"},37392:{name:"FocalPlaneResolutionUnit",type:"Short"},37393:{name:"ImageNumber",type:"Long"},37394:{name:"SecurityClassification",type:"Ascii"},37395:{name:"ImageHistory",type:"Ascii"},37397:{name:"ExposureIndex",type:"Rational"},37398:{name:"TIFFEPStandardID",type:"Byte"},37399:{name:"SensingMethod",type:"Short"},40091:{name:"XPTitle",type:"Byte"},40092:{name:"XPComment",type:"Byte"},40093:{name:"XPAuthor",type:"Byte"},40094:{name:"XPKeywords",type:"Byte"},40095:{name:"XPSubject",type:"Byte"},50341:{name:"PrintImageMatching",type:"Undefined"},50706:{name:"DNGVersion",type:"Byte"},50707:{name:"DNGBackwardVersion",type:"Byte"},50708:{name:"UniqueCameraModel",type:"Ascii"},50709:{name:"LocalizedCameraModel",type:"Byte"},50710:{name:"CFAPlaneColor",type:"Byte"},50711:{name:"CFALayout",type:"Short"},50712:{name:"LinearizationTable",type:"Short"},50713:{name:"BlackLevelRepeatDim",type:"Short"},50714:{name:"BlackLevel",type:"Rational"},50715:{name:"BlackLevelDeltaH",type:"SRational"},50716:{name:"BlackLevelDeltaV",type:"SRational"},50717:{name:"WhiteLevel",type:"Short"},50718:{name:"DefaultScale",type:"Rational"},50719:{name:"DefaultCropOrigin",type:"Short"},50720:{name:"DefaultCropSize",type:"Short"},50721:{name:"ColorMatrix1",type:"SRational"},50722:{name:"ColorMatrix2",type:"SRational"},50723:{name:"CameraCalibration1",type:"SRational"},50724:{name:"CameraCalibration2",type:"SRational"},50725:{name:"ReductionMatrix1",type:"SRational"},50726:{name:"ReductionMatrix2",type:"SRational"},50727:{name:"AnalogBalance",type:"Rational"},50728:{name:"AsShotNeutral",type:"Short"},50729:{name:"AsShotWhiteXY",type:"Rational"},50730:{name:"BaselineExposure",type:"SRational"},50731:{name:"BaselineNoise",type:"Rational"},50732:{name:"BaselineSharpness",type:"Rational"},50733:{name:"BayerGreenSplit",type:"Long"},50734:{name:"LinearResponseLimit",type:"Rational"},50735:{name:"CameraSerialNumber",type:"Ascii"},50736:{name:"LensInfo",type:"Rational"},50737:{name:"ChromaBlurRadius",type:"Rational"},50738:{name:"AntiAliasStrength",type:"Rational"},50739:{name:"ShadowScale",type:"SRational"},50740:{name:"DNGPrivateData",type:"Byte"},50741:{name:"MakerNoteSafety",type:"Short"},50778:{name:"CalibrationIlluminant1",type:"Short"},50779:{name:"CalibrationIlluminant2",type:"Short"},50780:{name:"BestQualityScale",type:"Rational"},50781:{name:"RawDataUniqueID",type:"Byte"},50827:{name:"OriginalRawFileName",type:"Byte"},50828:{name:"OriginalRawFileData",type:"Undefined"},50829:{name:"ActiveArea",type:"Short"},50830:{name:"MaskedAreas",type:"Short"},50831:{name:"AsShotICCProfile",type:"Undefined"},50832:{name:"AsShotPreProfileMatrix",type:"SRational"},50833:{name:"CurrentICCProfile",type:"Undefined"},50834:{name:"CurrentPreProfileMatrix",type:"SRational"},50879:{name:"ColorimetricReference",type:"Short"},50931:{name:"CameraCalibrationSignature",type:"Byte"},50932:{name:"ProfileCalibrationSignature",type:"Byte"},50934:{name:"AsShotProfileName",type:"Byte"},50935:{name:"NoiseReductionApplied",type:"Rational"},50936:{name:"ProfileName",type:"Byte"},50937:{name:"ProfileHueSatMapDims",type:"Long"},50938:{name:"ProfileHueSatMapData1",type:"Float"},50939:{name:"ProfileHueSatMapData2",type:"Float"},50940:{name:"ProfileToneCurve",type:"Float"},50941:{name:"ProfileEmbedPolicy",type:"Long"},50942:{name:"ProfileCopyright",type:"Byte"},50964:{name:"ForwardMatrix1",type:"SRational"},50965:{name:"ForwardMatrix2",type:"SRational"},50966:{name:"PreviewApplicationName",type:"Byte"},50967:{name:"PreviewApplicationVersion",type:"Byte"},50968:{name:"PreviewSettingsName",type:"Byte"},50969:{name:"PreviewSettingsDigest",type:"Byte"},50970:{name:"PreviewColorSpace",type:"Long"},50971:{name:"PreviewDateTime",type:"Ascii"},50972:{name:"RawImageDigest",type:"Undefined"},50973:{name:"OriginalRawFileDigest",type:"Undefined"},50974:{name:"SubTileBlockSize",type:"Long"},50975:{name:"RowInterleaveFactor",type:"Long"},50981:{name:"ProfileLookTableDims",type:"Long"},50982:{name:"ProfileLookTableData",type:"Float"},51008:{name:"OpcodeList1",type:"Undefined"},51009:{name:"OpcodeList2",type:"Undefined"},51022:{name:"OpcodeList3",type:"Undefined"}},Exif:{33434:{name:"ExposureTime",type:"Rational"},33437:{name:"FNumber",type:"Rational"},34850:{name:"ExposureProgram",type:"Short"},34852:{name:"SpectralSensitivity",type:"Ascii"},34855:{name:"ISOSpeedRatings",type:"Short"},34856:{name:"OECF",type:"Undefined"},34864:{name:"SensitivityType",type:"Short"},34865:{name:"StandardOutputSensitivity",type:"Long"},34866:{name:"RecommendedExposureIndex",type:"Long"},34867:{name:"ISOSpeed",type:"Long"},34868:{name:"ISOSpeedLatitudeyyy",type:"Long"},34869:{name:"ISOSpeedLatitudezzz",type:"Long"},36864:{name:"ExifVersion",type:"Undefined"},36867:{name:"DateTimeOriginal",type:"Ascii"},36868:{name:"DateTimeDigitized",type:"Ascii"},37121:{name:"ComponentsConfiguration",type:"Undefined"},37122:{name:"CompressedBitsPerPixel",type:"Rational"},37377:{name:"ShutterSpeedValue",type:"SRational"},37378:{name:"ApertureValue",type:"Rational"},37379:{name:"BrightnessValue",type:"SRational"},37380:{name:"ExposureBiasValue",type:"SRational"},37381:{name:"MaxApertureValue",type:"Rational"},37382:{name:"SubjectDistance",type:"Rational"},37383:{name:"MeteringMode",type:"Short"},37384:{name:"LightSource",type:"Short"},37385:{name:"Flash",type:"Short"},37386:{name:"FocalLength",type:"Rational"},37396:{name:"SubjectArea",type:"Short"},37500:{name:"MakerNote",type:"Undefined"},37510:{name:"UserComment",type:"Ascii"},37520:{name:"SubSecTime",type:"Ascii"},37521:{name:"SubSecTimeOriginal",type:"Ascii"},37522:{name:"SubSecTimeDigitized",type:"Ascii"},40960:{name:"FlashpixVersion",type:"Undefined"},40961:{name:"ColorSpace",type:"Short"},40962:{name:"PixelXDimension",type:"Long"},40963:{name:"PixelYDimension",type:"Long"},40964:{name:"RelatedSoundFile",type:"Ascii"},40965:{name:"InteroperabilityTag",type:"Long"},41483:{name:"FlashEnergy",type:"Rational"},41484:{name:"SpatialFrequencyResponse",type:"Undefined"},41486:{name:"FocalPlaneXResolution",type:"Rational"},41487:{name:"FocalPlaneYResolution",type:"Rational"},41488:{name:"FocalPlaneResolutionUnit",type:"Short"},41492:{name:"SubjectLocation",type:"Short"},41493:{name:"ExposureIndex",type:"Rational"},41495:{name:"SensingMethod",type:"Short"},41728:{name:"FileSource",type:"Undefined"},41729:{name:"SceneType",type:"Undefined"},41730:{name:"CFAPattern",type:"Undefined"},41985:{name:"CustomRendered",type:"Short"},41986:{name:"ExposureMode",type:"Short"},41987:{name:"WhiteBalance",type:"Short"},41988:{name:"DigitalZoomRatio",type:"Rational"},41989:{name:"FocalLengthIn35mmFilm",type:"Short"},41990:{name:"SceneCaptureType",type:"Short"},41991:{name:"GainControl",type:"Short"},41992:{name:"Contrast",type:"Short"},41993:{name:"Saturation",type:"Short"},41994:{name:"Sharpness",type:"Short"},41995:{name:"DeviceSettingDescription",type:"Undefined"},41996:{name:"SubjectDistanceRange",type:"Short"},42016:{name:"ImageUniqueID",type:"Ascii"},42032:{name:"CameraOwnerName",type:"Ascii"},42033:{name:"BodySerialNumber",type:"Ascii"},42034:{name:"LensSpecification",type:"Rational"},42035:{name:"LensMake",type:"Ascii"},42036:{name:"LensModel",type:"Ascii"},42037:{name:"LensSerialNumber",type:"Ascii"},42240:{name:"Gamma",type:"Rational"}},GPS:{0:{name:"GPSVersionID",type:"Byte"},1:{name:"GPSLatitudeRef",type:"Ascii"},2:{name:"GPSLatitude",type:"Rational"},3:{name:"GPSLongitudeRef",type:"Ascii"},4:{name:"GPSLongitude",type:"Rational"},5:{name:"GPSAltitudeRef",type:"Byte"},6:{name:"GPSAltitude",type:"Rational"},7:{name:"GPSTimeStamp",type:"Rational"},8:{name:"GPSSatellites",type:"Ascii"},9:{name:"GPSStatus",type:"Ascii"},10:{name:"GPSMeasureMode",type:"Ascii"},11:{name:"GPSDOP",type:"Rational"},12:{name:"GPSSpeedRef",type:"Ascii"},13:{name:"GPSSpeed",type:"Rational"},14:{name:"GPSTrackRef",type:"Ascii"},15:{name:"GPSTrack",type:"Rational"},16:{name:"GPSImgDirectionRef",type:"Ascii"},17:{name:"GPSImgDirection",type:"Rational"},18:{name:"GPSMapDatum",type:"Ascii"},19:{name:"GPSDestLatitudeRef",type:"Ascii"},20:{name:"GPSDestLatitude",type:"Rational"},21:{name:"GPSDestLongitudeRef",type:"Ascii"},22:{name:"GPSDestLongitude",type:"Rational"},23:{name:"GPSDestBearingRef",type:"Ascii"},24:{name:"GPSDestBearing",type:"Rational"},25:{name:"GPSDestDistanceRef",type:"Ascii"},26:{name:"GPSDestDistance",type:"Rational"},27:{name:"GPSProcessingMethod",type:"Undefined"},28:{name:"GPSAreaInformation",type:"Undefined"},29:{name:"GPSDateStamp",type:"Ascii"},30:{name:"GPSDifferential",type:"Short"},31:{name:"GPSHPositioningError",type:"Rational"}},Interop:{1:{name:"InteroperabilityIndex",type:"Ascii"}}};p["0th"]=p.Image,p["1st"]=p.Image,c.TAGS=p,c.ImageIFD={ProcessingSoftware:11,NewSubfileType:254,SubfileType:255,ImageWidth:256,ImageLength:257,BitsPerSample:258,Compression:259,PhotometricInterpretation:262,Threshholding:263,CellWidth:264,CellLength:265,FillOrder:266,DocumentName:269,ImageDescription:270,Make:271,Model:272,StripOffsets:273,Orientation:274,SamplesPerPixel:277,RowsPerStrip:278,StripByteCounts:279,XResolution:282,YResolution:283,PlanarConfiguration:284,GrayResponseUnit:290,GrayResponseCurve:291,T4Options:292,T6Options:293,ResolutionUnit:296,TransferFunction:301,Software:305,DateTime:306,Artist:315,HostComputer:316,Predictor:317,WhitePoint:318,PrimaryChromaticities:319,ColorMap:320,HalftoneHints:321,TileWidth:322,TileLength:323,TileOffsets:324,TileByteCounts:325,SubIFDs:330,InkSet:332,InkNames:333,NumberOfInks:334,DotRange:336,TargetPrinter:337,ExtraSamples:338,SampleFormat:339,SMinSampleValue:340,SMaxSampleValue:341,TransferRange:342,ClipPath:343,XClipPathUnits:344,YClipPathUnits:345,Indexed:346,JPEGTables:347,OPIProxy:351,JPEGProc:512,JPEGInterchangeFormat:513,JPEGInterchangeFormatLength:514,JPEGRestartInterval:515,JPEGLosslessPredictors:517,JPEGPointTransforms:518,JPEGQTables:519,JPEGDCTables:520,JPEGACTables:521,YCbCrCoefficients:529,YCbCrSubSampling:530,YCbCrPositioning:531,ReferenceBlackWhite:532,XMLPacket:700,Rating:18246,RatingPercent:18249,ImageID:32781,CFARepeatPatternDim:33421,CFAPattern:33422,BatteryLevel:33423,Copyright:33432,ExposureTime:33434,ImageResources:34377,ExifTag:34665,InterColorProfile:34675,GPSTag:34853,Interlace:34857,TimeZoneOffset:34858,SelfTimerMode:34859,FlashEnergy:37387,SpatialFrequencyResponse:37388,Noise:37389,FocalPlaneXResolution:37390,FocalPlaneYResolution:37391,FocalPlaneResolutionUnit:37392,ImageNumber:37393,SecurityClassification:37394,ImageHistory:37395,ExposureIndex:37397,TIFFEPStandardID:37398,SensingMethod:37399,XPTitle:40091,XPComment:40092,XPAuthor:40093,XPKeywords:40094,XPSubject:40095,PrintImageMatching:50341,DNGVersion:50706,DNGBackwardVersion:50707,UniqueCameraModel:50708,LocalizedCameraModel:50709,CFAPlaneColor:50710,CFALayout:50711,LinearizationTable:50712,BlackLevelRepeatDim:50713,BlackLevel:50714,BlackLevelDeltaH:50715,BlackLevelDeltaV:50716,WhiteLevel:50717,DefaultScale:50718,DefaultCropOrigin:50719,DefaultCropSize:50720,ColorMatrix1:50721,ColorMatrix2:50722,CameraCalibration1:50723,CameraCalibration2:50724,ReductionMatrix1:50725,ReductionMatrix2:50726,AnalogBalance:50727,AsShotNeutral:50728,AsShotWhiteXY:50729,BaselineExposure:50730,BaselineNoise:50731,BaselineSharpness:50732,BayerGreenSplit:50733,LinearResponseLimit:50734,CameraSerialNumber:50735,LensInfo:50736,ChromaBlurRadius:50737,AntiAliasStrength:50738,ShadowScale:50739,DNGPrivateData:50740,MakerNoteSafety:50741,CalibrationIlluminant1:50778,CalibrationIlluminant2:50779,BestQualityScale:50780,RawDataUniqueID:50781,OriginalRawFileName:50827,OriginalRawFileData:50828,ActiveArea:50829,MaskedAreas:50830,AsShotICCProfile:50831,AsShotPreProfileMatrix:50832,CurrentICCProfile:50833,CurrentPreProfileMatrix:50834,ColorimetricReference:50879,CameraCalibrationSignature:50931,ProfileCalibrationSignature:50932,AsShotProfileName:50934,NoiseReductionApplied:50935,ProfileName:50936,ProfileHueSatMapDims:50937,ProfileHueSatMapData1:50938,ProfileHueSatMapData2:50939,ProfileToneCurve:50940,ProfileEmbedPolicy:50941,ProfileCopyright:50942,ForwardMatrix1:50964,ForwardMatrix2:50965,PreviewApplicationName:50966,PreviewApplicationVersion:50967,PreviewSettingsName:50968,PreviewSettingsDigest:50969,PreviewColorSpace:50970,PreviewDateTime:50971,RawImageDigest:50972,OriginalRawFileDigest:50973,SubTileBlockSize:50974,RowInterleaveFactor:50975,ProfileLookTableDims:50981,ProfileLookTableData:50982,OpcodeList1:51008,OpcodeList2:51009,OpcodeList3:51022,NoiseProfile:51041},c.ExifIFD={ExposureTime:33434,FNumber:33437,ExposureProgram:34850,SpectralSensitivity:34852,ISOSpeedRatings:34855,OECF:34856,SensitivityType:34864,StandardOutputSensitivity:34865,RecommendedExposureIndex:34866,ISOSpeed:34867,ISOSpeedLatitudeyyy:34868,ISOSpeedLatitudezzz:34869,ExifVersion:36864,DateTimeOriginal:36867,DateTimeDigitized:36868,ComponentsConfiguration:37121,CompressedBitsPerPixel:37122,ShutterSpeedValue:37377,ApertureValue:37378,BrightnessValue:37379,ExposureBiasValue:37380,MaxApertureValue:37381,SubjectDistance:37382,MeteringMode:37383,LightSource:37384,Flash:37385,FocalLength:37386,SubjectArea:37396,MakerNote:37500,UserComment:37510,SubSecTime:37520,SubSecTimeOriginal:37521,SubSecTimeDigitized:37522,FlashpixVersion:40960,ColorSpace:40961,PixelXDimension:40962,PixelYDimension:40963,RelatedSoundFile:40964,InteroperabilityTag:40965,FlashEnergy:41483,SpatialFrequencyResponse:41484,FocalPlaneXResolution:41486,FocalPlaneYResolution:41487,FocalPlaneResolutionUnit:41488,SubjectLocation:41492,ExposureIndex:41493,SensingMethod:41495,FileSource:41728,SceneType:41729,CFAPattern:41730,CustomRendered:41985,ExposureMode:41986,WhiteBalance:41987,DigitalZoomRatio:41988,FocalLengthIn35mmFilm:41989,SceneCaptureType:41990,GainControl:41991,Contrast:41992,Saturation:41993,Sharpness:41994,DeviceSettingDescription:41995,SubjectDistanceRange:41996,ImageUniqueID:42016,CameraOwnerName:42032,BodySerialNumber:42033,LensSpecification:42034,LensMake:42035,LensModel:42036,LensSerialNumber:42037,Gamma:42240},c.GPSIFD={GPSVersionID:0,GPSLatitudeRef:1,GPSLatitude:2,GPSLongitudeRef:3,GPSLongitude:4,GPSAltitudeRef:5,GPSAltitude:6,GPSTimeStamp:7,GPSSatellites:8,GPSStatus:9,GPSMeasureMode:10,GPSDOP:11,GPSSpeedRef:12,GPSSpeed:13,GPSTrackRef:14,GPSTrack:15,GPSImgDirectionRef:16,GPSImgDirection:17,GPSMapDatum:18,GPSDestLatitudeRef:19,GPSDestLatitude:20,GPSDestLongitudeRef:21,GPSDestLongitude:22,GPSDestBearingRef:23,GPSDestBearing:24,GPSDestDistanceRef:25,GPSDestDistance:26,GPSProcessingMethod:27,GPSAreaInformation:28,GPSDateStamp:29,GPSDifferential:30,GPSHPositioningError:31},c.InteropIFD={InteroperabilityIndex:1},c.GPSHelper={degToDmsRational:function(e){var t=e%1*60;return[[Math.floor(e),1],[Math.floor(t),1],[Math.round(t%1*6e3),100]]},dmsRationalToDeg:function(e,t){return("S"===t||"W"===t?-1:1)*e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.piexif=c):window.piexif=c}();var twcaLib=new twidCryptoLibSync,twcaCryptoLibAlertDialog=new TwcaCryptoLibAlertDialog,twcaDialogParams;function twidCryptoLibSync(){function e(){var e=!1;try{window.opener&&window.opener.twcaLib&&window.location.hostname===window.opener.location.hostname&&(window.opener.twcaLib.setOpenWindowObject(window),e=!0)}catch(t){e=!1}return e}function t(e,t,i,n){function a(e,t,i,n,r,a){var o=forge.pkcs7.createSignedData();switch(i){case 0:o.content=forge.util.createBuffer(l(e),"raw");break;case 1:o.content=forge.util.createBuffer(e,"utf8");break;case 2:o.content="undefined"==typeof Big5Encoding?forge.util.createBuffer(e,"utf8"):forge.util.createBuffer(Big5Encoding.getBig5Encoding(e),"raw");break;default:o.content=forge.util.createBuffer(l(e),"raw")}return o.addCertificate(r),e={key:a,certificate:r,digestAlgorithm:t},u&&(e.authenticatedAttributes=[{type:forge.pki.oids.contentType,value:forge.pki.oids.data},{type:forge.pki.oids.messageDigest},{type:forge.pki.oids.signingTime}]),o.addSigner(e),o.sign(),(n=(n=(n=n?forge.pkcs7.messageToPem(o):forge.pkcs7.messageToPemWithoutContent(o)).replace(/\-----BEGIN PKCS7-----/g,"")).replace(/\-----END PKCS7-----/g,"")).replace(/(?:\\[rn]|[\r\n]+)+/g,"")}var o="",s=null,c=null;if(null==g.selectedCertInfo||null!=t)r(t,i);else{switch(61440&n){case 0:t=forge.pki.oids.sha1;break;case 4096:t=forge.pki.oids.md5;break;case 8192:t=forge.pki.oids.sha256;break;case 16384:t=forge.pki.oids.sha512;break;default:t=forge.pki.oids.sha1}i=1024!=(3840&n),n&=15;var u=!1;if(c=(s=h()).oPrivateKey,s=s.oCert,"string"==typeof e)o=a(e,t,n,i,s,c);else if(Array.isArray(e)){o="";for(var d=0;d<e.length;d++)o=o+"||"+a(e[d],t,n,i,s,c);o=o.substring(2,o.length)}}return o}function i(e,t,i,n){function a(e,t,i,n,r){switch(s=t.create(),i){case 0:s.update(l(e));break;case 1:s.update(e,"utf8");break;case 2:"undefined"==typeof Big5Encoding?s.update(e,"utf8"):s.update(Big5Encoding.getBig5Encoding(e));break;default:s.update(l(e))}return n?forge.util.bytesToHex(r.sign(s)):forge.util.encode64(r.sign(s))}var o=null,s=null;if(null==g.selectedCertInfo||null!=t)r(t,i);else{switch(61440&n){case 0:t=forge.md.sha1;break;case 4096:t=forge.md.md5;break;case 8192:t=forge.md.sha256;break;case 16384:t=forge.md.sha512;break;default:t=forge.md.sha1}if(i=256!=(3840&n),n&=15,o=h().oPrivateKey,"string"==typeof e)var c=a(e,t,n,i,o);else if(Array.isArray(e)){c="";for(var u=0;u<e.length;u++)c=c+"||"+a(e[u],t,n,i,o);c=c.substring(2,c.length)}}return c}function n(e,t,i){function n(e,t){var i=forge.asn1.oidToDer(forge.pki.oids[t]).getBytes(),n=forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.SEQUENCE,!0,[]),r=forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.SEQUENCE,!0,[]);return r.value.push(forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.OID,!1,i)),r.value.push(forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.NULL,!1,"")),i=forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.OCTETSTRING,!1,forge.util.hexToBytes(e)),n.value.push(r),n.value.push(i),forge.asn1.toDer(n).getBytes()}function a(e){if(0>=e.length)return!1;for(var t=!0,i=e[0].length,n=1;n<e.length;n++)if(e[n].length!=i){t=!1;break}return t}var o=null;do{if(null==g.selectedCertInfo||null!=t)r(t,i);else{if("string"==typeof e)o=e.length;else{if(!a(e))break;o=e[0].length}switch(o){case 20:var s="md5";break;case 40:s="sha1";break;case 64:s="sha256";break;case 128:s="sha512"}if(o=h(),"string"==typeof e){p1Encoded=n(e,s);var l=forge.pki.rsa.encrypt(p1Encoded,o.oPrivateKey,1);l=forge.util.encode64(l)}else if(Array.isArray(e)){l="";for(var c=0;c<e.length;c++){p1Encoded=n(e[c],s);var u=forge.pki.rsa.encrypt(p1Encoded,o.oPrivateKey,1);l=l+"||"+forge.util.encode64(u)}l=l.substring(2,l.length)}}}while(0);return l}function r(e,t,i,n){var r=-1,o=[],l=null,h=localStorage.getItem("TWCACertIdxRef");if(null==h)l={};else if(""==h)l={};else try{l=JSON.parse(h)}catch(e){l={}}h=l,l={};var g=null,m="",y=!1,v=!1,b=!1;do{4096==(61440&i)&&(y=!0),4==(4&i)&&(v=!0),8==(8&i)&&(b=!0);var C=240&i;if(null==e||""==e)r=5005,g=null;else if("//S"!=e.substring(0,3)&&"//I"!=e.substring(0,3)||"//"!=e.substring(e.length-2,e.length))r=5005,g=null;else if(null==t||""==t||14==t.length&&!isNaN(t)){for(var S=e.replace(/^\/\/|\/\/\s*$/g,"").replace(/\s*=\s*/gm,"=").split("//"),w=0;w<S.length;w++)o[w]=u(S[w]);if(d(o,5005)||""==o[0])r=5005,g=null;else{for(var x in h){if((S=h[x]).certb64=JSON.parse(localStorage.getItem(x)).certb64,b)w=a(S,o);else{for(var T=o,k=c((w=S).certb64).subject,E=!1,A=0;A<T.length;A++){var I=!1;if(T[A].S_C==k.C&&(null==k.O||null!=T[A].S_O&&T[A].S_O.length==k.O.length)){for(var D=0;null!=k.O&&D<k.O.length;D++)d(T[A].S_O,k.O[D])||(I=!0);if(!I&&(null==k.OU||null!=T[A].S_OU&&T[A].S_OU.length==k.OU.length)){for(D=0;null!=k.OU&&D<k.OU.length;D++)d(T[A].S_OU,k.OU[D])||(I=!0);if(!I&&T[A].S_CN==k.CN&&T[A].S_CS==w.cs){E=!0;break}}}}w=E}""!=t?S.notAfter<t&&(w=!1):v&&(T=s(new Date),S.notAfter<T&&(w=!1)),w&&null!=localStorage.getItem(x)&&""!=localStorage.getItem(x)&&(l[x]=S)}for(var B in l)if(null==g)m=B,g=l[B];else switch(C){case 0:case 16:g.notBefore<=l[B].notBefore&&(m=B,g=l[B]);break;case 32:g.notBefore>=l[B].notBefore&&(m=B,g=l[B]);break;case 64:g.notAfter<=l[B].notAfter&&(m=B,g=l[B]);break;case 128:g.notAfter>=l[B].notAfter&&(m=B,g=l[B]);break;default:g.notAfter<=l[B].notAfter&&(m=B,g=l[B])}if(null==g)r=5010,g=null;else if(g.b64P12Cert=JSON.parse(localStorage.getItem(m)).b64P12Cert,g.keySet=JSON.parse(localStorage.getItem(m)).keySet,g.certfinger=JSON.parse(localStorage.getItem(m)).certfinger,g.certb64=JSON.parse(localStorage.getItem(m)).certb64,!y){if(sessionStorage.removeItem("twcaSelectedKey"),g.b64P12Cert){C=n,S=null;try{S=forge.pkcs12.pkcs12FromAsn1(forge.asn1.fromDer(forge.util.decode64(g.b64P12Cert)),C)}catch(e){}if(!(C=S)){r=5071,g=null;break}if(!(C=C.getBags({bagType:forge.pki.oids.pkcs8ShroudedKeyBag})[forge.pki.oids.pkcs8ShroudedKeyBag][0].key)){r=5071,g=null;break}JSON.stringify(f(C))}else{if(!g.keySet){r=5112,g=null;break}if(!(C=p(g.keySet,n))){r=5071,g=null;break}JSON.stringify(f(C))}sessionStorage.setItem("twcaSelectedKey",forge.util.encode64(n))}}}else r=5005,rtnCodeInfo=null}while(0);return null!=g?g:r}function a(e,t){var i=c(e.certb64),n=i.subject;i=i.issuer;for(var r=!1,a=0;a<t.length;a++){var o,s=!0;for(o in t[a])if("S_SN"==o)t[a][o].toUpperCase()!=n.SN&&(s=!1);else if("S_CN"==o)0>n.CN.indexOf(t[a][o])&&(s=!1);else if("S_OU"==o)for(var l=0;l<t[a][o].length;l++)d(n.OU,t[a][o][l])||(s=!1);else if("S_O"==o)for(l=0;l<t[a][o].length;l++)d(n.O,t[a][o][l])||(s=!1);else if("S_C"==o)t[a][o]!=n.C&&(s=!1);else if("I_CN"==o)t[a][o]!=i.CN&&(s=!1);else if("I_OU"==o)for(l=0;l<t[a][o].length;l++)d(i.OU,t[a][o][l])||(s=!1);else if("I_O"==o)for(l=0;l<t[a][o].length;l++)d(i.O,t[a][o][l])||(s=!1);else"I_C"==o?t[a][o]!=i.C&&(s=!1):"S_CS"==o&&t[a][o]!=e.cs&&(s=!1);if(r=r||s)break}return r}function o(e){return e?'"sn":"'+e.serial+'","cn":"'+e.cn+'","ntb":"'+e.notBefore+'","nta":"'+e.notAfter+'","issdn":"'+e.issuer+'","subdn":"'+e.subject+'","certfinger":"'+e.certfinger+'","certb64":"'+e.certb64+'"':""}function s(e){var t=e.getFullYear(),i=e.getMonth()+1,n=e.getDate(),r=e.getHours(),a=e.getMinutes();return e=e.getSeconds(),(t=(t="0000"+t).substring(t.length-4,t.length))+(i=(i="00"+i).substring(i.length-2,i.length))+(n=(n="00"+n).substring(n.length-2,n.length))+(r=(r="00"+r).substring(r.length-2,r.length))+(a=(a="00"+a).substring(a.length-2,a.length))+(e="00"+e).substring(e.length-2,e.length)}function l(e){for(var t=new Uint8Array(2*e.length),i=0;i<e.length;i++){var n=e.charCodeAt(i);t[2*i]=255&n,t[2*i+1]=n>>8&255}for(e="",i=0;i<t.length;i++)e=16>t[i]?e+"%0":e+"%",e+=t[i].toString(16);return unescape(e)}function c(e){ret={};try{var t=forge.asn1.fromDer(forge.util.decode64(e));t=forge.pki.certificateFromAsn1(t)}catch(e){return null}for(ret.subject={},e=0;e<t.subject.attributes.length;e++){var i=t.subject.attributes[e];"C"==i.shortName&&(ret.subject.C=i.value),"O"==i.shortName&&(null==ret.subject.O&&(ret.subject.O=[]),ret.subject.O.push(i.value)),"OU"==i.shortName&&(null==ret.subject.OU&&(ret.subject.OU=[]),ret.subject.OU.push(i.value)),"CN"==i.shortName&&(ret.subject.CN=i.value)}for(ret.subject.SN=t.serialNumber.toUpperCase(),ret.issuer={},e=0;e<t.issuer.attributes.length;e++)"C"==(i=t.issuer.attributes[e]).shortName&&(ret.issuer.C=i.value),"O"==i.shortName&&(null==ret.issuer.O&&(ret.issuer.O=[]),ret.issuer.O.push(i.value)),"OU"==i.shortName&&(null==ret.issuer.OU&&(ret.issuer.OU=[]),ret.issuer.OU.push(i.value)),"CN"==i.shortName&&(ret.issuer.CN=i.value);return ret}function u(e){for(var t={},i="S_CS S_CL S_SN S_CN S_OU S_O S_C I_CN I_OU I_O I_C".split(" ");0<e.length;){var n=e.substring(0,e.indexOf("="));if(!d(i,n))return 5005;var r=(e=e.substring(e.indexOf("=")+1,e.length)).length,a=e.indexOf(",S_"),o=e.indexOf(",I_");0<a&&a<r&&(r=a),0<o&&o<r&&(r=o),a=e.substring(0,r),"S_O"==n||"S_OU"==n||"I_O"==n||"I_OU"==n?(t[n]||(t[n]=[]),t[n].push(a)):t[n]=a,e=e.substring(r+1,e.length)}return t}function h(){var e={},t=sessionStorage.getItem("twcaSelectedKey");if(g.selectedCertInfo.b64P12Cert){p12Cert=forge.pkcs12.pkcs12FromAsn1(forge.asn1.fromDer(forge.util.decode64(g.selectedCertInfo.b64P12Cert)),forge.util.decode64(t));var i=p12Cert.getBags({bagType:forge.pki.oids.pkcs8ShroudedKeyBag})[forge.pki.oids.pkcs8ShroudedKeyBag][0].key;t=p12Cert.getBags({bagType:forge.pki.oids.certBag})[forge.pki.oids.certBag];for(var n=0;n<t.length;n++){var r=t[n].cert;if(r.publicKey.n.data[0]==i.n.data[0]&&r.publicKey.n.data[1]==i.n.data[1]){oCert=p12Cert.getBags({bagType:forge.pki.oids.certBag})[forge.pki.oids.certBag][n].cert;break}}oCert||(oCert=p12Cert.getBags({bagType:forge.pki.oids.certBag})[forge.pki.oids.certBag][0].cert)}else g.selectedCertInfo.keySet&&(oCert=forge.asn1.fromDer(forge.util.decode64(g.selectedCertInfo.certb64)),oCert=forge.pki.certificateFromAsn1(oCert),i=p(g.selectedCertInfo.keySet,forge.util.decode64(t)));return e.oPrivateKey=i,e.oCert=oCert,e}function d(e,t){for(var i in e)if(e[i]==t)return!0;return!1}function p(e,t,i){var n=null;try{if(3>arguments.length){var r=forge.md.sha256.create();r.update(t);var a=r.digest().getBytes(),o=forge.cipher.createDecipher("AES-CBC",a);o.start({iv:""}),o.update(forge.util.createBuffer(forge.util.decode64(e))),o.finish();var s=o.output.data.split("||");"TWCA"==s[8]&&(n=forge.pki.setRsaPrivateKey(new forge.jsbn.BigInteger(s[1],16),new forge.jsbn.BigInteger(s[0],16),new forge.jsbn.BigInteger(s[7],16),new forge.jsbn.BigInteger(s[2],16),new forge.jsbn.BigInteger(s[3],16),new forge.jsbn.BigInteger(s[4],16),new forge.jsbn.BigInteger(s[5],16),new forge.jsbn.BigInteger(s[6],16)))}else n=forge.pki.setRsaPrivateKey(new forge.jsbn.BigInteger(i.n,16),new forge.jsbn.BigInteger(i.e,16),new forge.jsbn.BigInteger(i.d,16),new forge.jsbn.BigInteger(i.p,16),new forge.jsbn.BigInteger(i.q,16),new forge.jsbn.BigInteger(i.dP,16),new forge.jsbn.BigInteger(i.dQ,16),new forge.jsbn.BigInteger(i.qInv,16))}catch(e){n=null}return n}function f(e){if(e){var t={};return t.n=e.n.toString(16),t.e=e.e.toString(16),t.d=e.d.toString(16),t.p=e.p.toString(16),t.q=e.q.toString(16),t.dP=e.dP.toString(16),t.dQ=e.dQ.toString(16),t.qInv=e.qInv.toString(16),t}}var g=this,m=null,y=null,v=null,b=!1;if(-1<navigator.userAgent.indexOf("TWID")&&(b=!0),this.SelectSignerEx=function(t,i,n,a,s,l,c,u,h){if(e()&&0==(15728640&l))m=[t,i,n,a,s,l,c,u,h],window.opener.twcaLib.SelectSignerEx(t,i,n,a,s,l,c,u,"oTwcaLib._childWindow.twcaLib.SelectSignerExFromChildWindowHandler");else{if(b)try{"undefined"==typeof h&&(h="ret_SelectSignerEx");var d=MobileUtils.registerFunction(h),p=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.SelectSignerEx(t,i,n,a,s,MobileUtils.toNumber(l),c,u,d),0):0<p.indexOf("iPhone")||0<p.indexOf("iPad")?(document.location="PKI::SelectSignerEx::"+encodeURI(t+separation+i+separation+n+separation+a+separation+s+separation+l+separation+c+separation+u+separation+d),0):1}catch(e){return alert(e),-1}if(4>=arguments.length)return r(t,s,l,a);d=0,p="\u6210\u529f";var f="",y=r(t,s,l,a);if("number"==typeof y)switch(y){case 5005:d=5005,p="\u53c3\u6578\u932f\u8aa4";break;case 5010:d=5010,p="\u7121\u6191\u8b49";break;case 5071:if(null==a&&0>"oTwcaLib._childWindow.twcaLib.SelectSignerExFromChildWindowHandler".indexOf(h))return void twcaCryptoLibAlertDialog.show("\u8f38\u5165\u5bc6\u78bc","\u8acb\u8f38\u5165\u6191\u8b49\u5bc6\u78bc","","\u53d6\u6d88","\u78ba\u8a8d",["SelectSignerEx",t,i,n,a,s,l,c,u,h,twcaLib]);d=5071,p="\u6191\u8b49\u5bc6\u78bc\u932f\u8aa4";break;case 5112:d=5112,p="\u8b80\u53d6\u6191\u8b49\u5931\u6557";break;default:d=5001,p="\u4e00\u822c\u932f\u8aa4"}else 0==(61440&l)&&(g.selectedCertInfo=y,sessionStorage.setItem("selectedCertInfo",JSON.stringify(y))),f="{"+o(y)+"}";g.callback(h,d,p,f)}},this.SignPkcs7=function(i,n,r,a){if(e())m=[i,n,r],window.opener.twcaLib.SignPkcs7(i,n,"oTwcaLib._childWindow.twcaLib.SignPkcs7FromChildWindowHandler");else{if(b)try{"undefined"==typeof r&&(r="ret_SignPkcs7");var s=!1,l=i;if("[object Array]"===Object.prototype.toString.call(i)){for(s=!0,index=0;index<i.length;++index){var c=forge.util.binary.raw.encode(forge.util.text.utf8.encode(i[index])),u=forge.util.binary.base64.encode(forge.util.binary.raw.decode(c));i[index]=u}l=i.join("#")}var h=MobileUtils.registerFunction(r),d=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(s?MobileUtils.androidInterface.SignPkcs7Batch(l,MobileUtils.toNumber(n),h):MobileUtils.androidInterface.SignPkcs7(l,MobileUtils.toNumber(n),h),0):0<d.indexOf("iPhone")||0<d.indexOf("iPad")?(document.location=s?"PKI::SignPkcs7Batch::"+encodeURI(l+separation+n+separation+h):"PKI::SignPkcs7::"+encodeURI(l+separation+n+separation+h),0):1}catch(e){return alert(e),-1}if(4<=arguments.length)return t(i,n,r,a);s=0,l="\u6210\u529f",c="",null==i||0>=i.length?(s=5005,l="\u53c3\u6578\u932f\u8aa4"):((u=sessionStorage.getItem("selectedCertInfo"))&&(g.selectedCertInfo=JSON.parse(u)),u=sessionStorage.getItem("twcaSelectedKey"),g.selectedCertInfo&&null!=u?null==(u=t(i,null,null,n))||""==u?(s=5061,l="\u7c3d\u7ae0\u5931\u6557"):c="{"+o(g.selectedCertInfo)+',"signature":"'+u+'"}':(s=5067,l="\u57f7\u884c\u7c3d\u7ae0\u6642\uff0c\u5c1a\u672a\u9078\u64c7\u7c3d\u7ae0\u6191\u8b49")),g.callback(r,s,l,c)}},this.SignPkcs1=function(t,n,r,a){if(e())m=[t,n,r],window.opener.twcaLib.SignPkcs1(t,n,"oTwcaLib._childWindow.twcaLib.SignPkcs1FromChildWindowHandler");else{if(b)try{"undefined"==typeof r&&(r="ret_SignPkcs1");var s=!1,l=t;if("[object Array]"===Object.prototype.toString.call(t)){for(s=!0,index=0;index<t.length;++index){var c=forge.util.binary.raw.encode(forge.util.text.utf8.encode(t[index])),u=forge.util.binary.base64.encode(forge.util.binary.raw.decode(c));t[index]=u}l=t.join("#")}var h=MobileUtils.registerFunction(r),d=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(s?MobileUtils.androidInterface.SignPkcs1Batch(l,MobileUtils.toNumber(n),h):MobileUtils.androidInterface.SignPkcs1(l,MobileUtils.toNumber(n),h),0):0<d.indexOf("iPhone")||0<d.indexOf("iPad")?(document.location=s?"PKI::SignPkcs1Batch::"+encodeURI(l+separation+n+separation+h):"PKI::SignPkcs1::"+encodeURI(l+separation+n+separation+h),0):1}catch(e){return alert(e),-1}if(4<=arguments.length)return i(t,n,r,a);s=0,l="\u6210\u529f",c="",null==t||0>=t.length?(s=5005,l="\u53c3\u6578\u932f\u8aa4"):((u=sessionStorage.getItem("selectedCertInfo"))&&(g.selectedCertInfo=JSON.parse(u)),u=sessionStorage.getItem("twcaSelectedKey"),g.selectedCertInfo&&null!=u?null==(u=i(t,null,null,n))||""==u?(s=5061,l="\u7c3d\u7ae0\u5931\u6557"):c='{"signature":"'+u+'",'+o(g.selectedCertInfo)+"}":(s=5067,l="\u57f7\u884c\u7c3d\u7ae0\u6642\uff0c\u5c1a\u672a\u9078\u64c7\u7c3d\u7ae0\u6191\u8b49")),g.callback(r,s,l,c)}},this.SignPkcs1FromHash=function(t,i,r){if(e())m=[t,i],window.opener.twcaLib.SignPkcs1FromHash(t,"oTwcaLib._childWindow.twcaLib.SignPkcs1FromChildWindowHandler");else{if(b)try{"undefined"==typeof i&&(i="ret_SignPkcs1FromHash");var a=!1,s=t;if("[object Array]"===Object.prototype.toString.call(t)){for(a=!0,index=0;index<t.length;++index){var l=forge.util.binary.raw.encode(forge.util.text.utf8.encode(t[index])),c=forge.util.binary.base64.encode(forge.util.binary.raw.decode(l));t[index]=c}s=t.join("#")}var u=MobileUtils.registerFunction(i),h=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(a?MobileUtils.androidInterface.SignPkcs1FromHashBatch(s,u):MobileUtils.androidInterface.SignPkcs1FromHash(s,u),0):0<h.indexOf("iPhone")||0<h.indexOf("iPad")?(document.location=a?"PKI::SignPkcs1FromHashBatch::"+encodeURI(s+separation+u):"PKI::SignPkcs1FromHash::"+encodeURI(s+separation+u),0):1}catch(e){return alert(e),-1}if(3<=arguments.length)return n(t,i,dwFlags2);a=0,s="\u6210\u529f",l="",null==t||0>=t.length?(a=5005,s="\u53c3\u6578\u932f\u8aa4"):((c=sessionStorage.getItem("selectedCertInfo"))&&(g.selectedCertInfo=JSON.parse(c)),c=sessionStorage.getItem("twcaSelectedKey"),g.selectedCertInfo&&null!=c?null==(c=n(t,null,null))||""==c?(a=5061,s="\u7c3d\u7ae0\u5931\u6557"):l=Array.isArray(c)?'{"signature":'+JSON.stringify(c)+","+o(g.selectedCertInfo)+"}":'{"signature":"'+c+'",'+o(g.selectedCertInfo)+"}":(a=5067,s="\u57f7\u884c\u7c3d\u7ae0\u6642\uff0c\u5c1a\u672a\u9078\u64c7\u7c3d\u7ae0\u6191\u8b49")),g.callback(i,a,s,l)}},this.ResetKey=function(t){if(e())m=[t],window.opener.twcaLib.ResetKey("oTwcaLib._childWindow.twcaLib.ResetKeyFromChildWindowHandler");else{if(b)try{"undefined"==typeof t&&(t="ret_ResetKey");var i=MobileUtils.registerFunction(t),n=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ResetKey(i),0):0<n.indexOf("iPhone")||0<n.indexOf("iPad")?(document.location="PKI::ResetKey::"+encodeURI(i),0):1}catch(e){return alert(e),-1}if(g.selectedCertInfo=null,sessionStorage.removeItem("selectedCertInfo"),sessionStorage.removeItem("twcaSelectedKey"),0>=arguments.length)return 0;g.callback(t,0,"\u6210\u529f","")}},this.GetVersion=function(t){if(e())m=[t],window.opener.twcaLib.GetVersion("oTwcaLib._childWindow.twcaLib.GetVersionFromChildWindowHandler");else{if(b)try{"undefined"==typeof t&&(t="ret_GetVersion");var i=MobileUtils.registerFunction(t),n=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.GetVersion(i),0):0<n.indexOf("iPhone")||0<n.indexOf("iPad")?(document.location="PKI::GetVersion::"+encodeURI(i),0):1}catch(e){return alert(e),-1}if(0>=arguments.length)return"1.4.0.1";g.callback(t,0,"\u6210\u529f",'{"version":"1.4.0.1"}')}},this.Hash=function(e,t,i){try{"undefined"==typeof i&&(i="ret_Hash");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;if(MobileUtils.supportTwidAndroid())return MobileUtils.androidInterface.Hash(e,MobileUtils.toNumber(t),n),0;if(0<r.indexOf("iPhone")||0<r.indexOf("iPad"))return document.location="PKI::Hash::"+encodeURI(e+separation+t+separation+n),0;n=null,r="";var a=performance.now();switch(61440&t){case 0:var o=forge.md.sha1;break;case 4096:o=forge.md.md5;break;case 8192:o=forge.md.sha256;break;case 16384:o=forge.md.sha512;break;default:o=forge.md.sha1}var s=o.create();switch(15&t){case 0:s.update(l(e));break;case 1:s.update(e,"utf8");break;case 2:"undefined"==typeof Big5Encoding?s.update(e,"utf8"):s.update(Big5Encoding.getBig5Encoding(e));break;default:s.update(l(e))}if(r='{"hashValue":"'+(n=s.digest().toHex())+'","time":"'+(performance.now()-a)+'","length":"'+e.length+'","length":"'+e.length+'"}',!(3<=arguments.length))return r;g.callback(i,0,"\u6210\u529f",r)}catch(e){return alert(e),-1}},this.Hmac=function(e,t,i,n){var r=0,a="\u6210\u529f",o="";switch(i){case 1:i="md5";break;case 3:i="sha256";break;default:i="sha1"}e=forge.util.binary.raw.encode(forge.util.binary.hex.decode(e));var s=forge.hmac.create();return s.start(i,e),s.update(forge.util.binary.raw.encode(forge.util.text.utf16.encode(t))),(t=forge.util.binary.base64.encode(forge.util.binary.raw.decode(s.getMac().getBytes())))?o='{"hmacValue":"'+t+'"}':(r=5001,a="\u932f\u8aa4"),"string"==typeof n?g.callback(n,r,a,o):n(r,a,"",o),0},this.CreatePKCS7FromSignedData=function(e,t,i,n,r){var a=0,o="\u6210\u529f",s="",c=performance.now();e:{var u=null;if(e&&t&&i){switch(61440&n){case 0:var h=forge.pki.oids.sha1;break;case 4096:h=forge.pki.oids.md5;break;case 8192:h=forge.pki.oids.sha256;break;case 16384:h=forge.pki.oids.sha512;break;default:h=forge.pki.oids.sha1}switch(15&n){case 0:var d=forge.util.createBuffer(l(e),"raw");break;case 1:d=forge.util.createBuffer(e,"utf8");break;case 2:d="undefined"==typeof Big5Encoding?forge.util.createBuffer(e,"utf8"):forge.util.createBuffer(Big5Encoding.getBig5Encoding(e),"raw");break;default:d=forge.util.createBuffer(l(e),"raw")}try{u=forge.asn1.fromDer(forge.util.decode64(t)),u=forge.pki.certificateFromAsn1(u)}catch(e){p7Value={errCode:2,errMsg:"\u6191\u8b49\u89e3\u6790\u932f\u8aa4"};break e}if(t!=v){var p=forge.pkcs7.createSignedData();p.content=d,p.addCertificate(u),p.addSigner({key:"-----BEGIN RSA PRIVATE KEY-----MIIEowIBAAKCAQBbE4weWXGL8ehZU2UsCeRRBcU6S09/ph5IW4QtZKic1GDnanM1Ur/ohPHQsFLg6xBFiIBGPz/96eGAlg/NjcU/D3S4OmEF9PLxOT+Vg3I+dRZjmXFRrlfkmZ4ATNbZI4gzTrPUN9CV1soNlWQ/ClAniF+mqHLYFBXUhk8BCyV8j1SNp4sdiO4fHHCRZp44ppqRyG4op5/c9DUjeAsi4qgQyvxpO5lxzBZ73IkQ2aP/DKMF8rjKxKWM3JjInadcru/aAUO5TimDUrSMCaGYo5fzjqTCGD4iuz3J3tFoh20Z7H7s/kj4YK2l+YXbemCp0F13o70Hyb21Z87YqCzber5RAgMBAAECggEAMKI7jGlOzOAcprZ1rBKMLQfbzckxZoSaXyEfb+30a+qs5GZfpvXNLKjxR/MgDqL3SWoetWRJE5m0pSl8vtMZpRbnyQjDjp7CrDVZ0skiVF/J2N2zOV7T6GpviNF/WOw0atF4DbbQV3Me6ioAIfmr27BjA2eoC+KN1bLytSfymJR8G0CktovhhkD3wUZVuTcUGbg0yyif74y9dwmnHOQbOMdSWIHuIpTzQSGelRoQCmbLmhE2hAbIlT5mz6vFZCSmgTFSPk87sonHaFrBeesu5ut8LG686s97n78oPz27U/ek7lV/Cj/UJeljuRM5tDoCJJKkTB+0xsNrfNayWEQcwQKBgQCyGWMsRw1tprYqXp7nLS/nja6qf3bIs/IwtO1wsxmmtxXcXnb+/D285mUDsEelPB0AXJcOe1SP0fDFB1HMAFlJ5hWATbUveSEk5U2L+LjeREhCDlH0MJBDBc+vixo8MoHXq3sjpe3/HP76V+fvUOSx7vtasGG1I4fGUDMxLhbLzQKBgQCC6c0L4+idGcg5P7KvHlSwYHHKbLpuDiRNnSjqgQZ7EUxohYOCOk9tLFPaxMhhzgjI5hFPY48+Kv8NCCzzNWc25VI82qFcG6a8Mw1bUXb2/8/FKhUqTdaLlOZuVZW6LobxEM4Z4hEUnLfgrFbvlMKopbynwZ82UK5rm25Y0i6glQKBgQCobAm1HZw9TaKHfuOWisz6lKnQ4qlaM5GdLfw8z6I6Xnl15H9zsuZPdTGhw1p9j9N9PBI9x7O4LjkamkloOgw2Lje3FcV6F3qYgaBL9fIdf0U18oTd/+7s8tnskAdHVhwj8C6LD6d50dnutKLJVh5vhih9Ir/DpM4JZF6E66jzIQKBgGQy8RcltJfx8NcokuoIDAgHeXDW8YZk2pJxNKzwXnZ5kgL6FeLqIHrOD8yFC14YpY6m0R7zc+LAZACkfksUV9CjiuM674AhRegMJy/61VRODce54wNDGnAxYoGWjgg3rl76XtVeu3YMUYzsO4oaUTdly1SXFPYsoKOKDtZ64OdVAoGBAK14Yk03Hr8fR3F0uqmt8uu9GN7tNfzvifRPYQ+/sfMUDG1C2+gh/roSKnHX8p1Wwtf26cv5Klq5ySxUT3NxJErf1I7voDiLVM4pmq8DKiebsl/8QbJv3e3DMbGqiRAmfRNJqb7UcQsDEWORFt7U9XcCncCzIBuO2ETzDQshlcNE-----END RSA PRIVATE KEY-----",certificate:u,digestAlgorithm:h}),p.sign(),y=p,v=t}else if((p=y).content=d,p.contentInfo=null,p.contentInfo=forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.SEQUENCE,!0,[forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.OID,!1,forge.asn1.oidToDer(forge.pki.oids.data).getBytes())]),"content"in p){var f;p.content instanceof forge.util.ByteBuffer?f=p.content.bytes():"string"==typeof p.content&&(f=forge.util.encodeUtf8(p.content)),p.contentInfo.value.push(forge.asn1.create(forge.asn1.Class.CONTEXT_SPECIFIC,0,!0,[forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.OCTETSTRING,!1,f)]))}if(p.signers[0].signature=forge.util.decode64(i),u=forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.SEQUENCE,!0,[forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.INTEGER,!1,forge.asn1.integerToDer(p.signers[0].version).getBytes()),forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.SEQUENCE,!0,[forge.pki.distinguishedNameToAsn1({attributes:p.signers[0].issuer}),forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.INTEGER,!1,forge.util.hexToBytes(p.signers[0].serialNumber))]),forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.SEQUENCE,!0,[forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.OID,!1,forge.asn1.oidToDer(p.signers[0].digestAlgorithm).getBytes()),forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.NULL,!1,"")])]),p.signers[0].authenticatedAttributesAsn1&&u.value.push(p.signers[0].authenticatedAttributesAsn1),u.value.push(forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.SEQUENCE,!0,[forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.OID,!1,forge.asn1.oidToDer(p.signers[0].signatureAlgorithm).getBytes()),forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.NULL,!1,"")])),u.value.push(forge.asn1.create(forge.asn1.Class.UNIVERSAL,forge.asn1.Type.OCTETSTRING,!1,p.signers[0].signature)),0<p.signers[0].unauthenticatedAttributes.length){for(h=forge.asn1.create(forge.asn1.Class.CONTEXT_SPECIFIC,1,!0,[]),d=0;d<p.signers[0].unauthenticatedAttributes.length;++d)h.values.push(_attributeToAsn1(p.signers[0].unauthenticatedAttributes[d]));u.value.push(h)}p.signerInfos[0]=u,signValue=forge.pkcs7.messageToPem(p),signValue=signValue.replace(/\-----BEGIN PKCS7-----/g,""),signValue=signValue.replace(/\-----END PKCS7-----/g,""),p7Value=signValue=signValue.replace(/(?:\\[rn]|[\r\n]+)+/g,"")}else p7Value={errCode:2,errMsg:"\u53c3\u6578\u932f\u8aa4"}}if(p=performance.now(),"string"!=typeof p7Value?(a=p7Value.errCode,o=p7Value.errMsg):s='{"p7Value":"'+p7Value+'","time":"'+(p-c)+'","length":"'+e.length+'","length":"'+e.length+'"}',!(5<=arguments.length))return s;g.callback(r,a,o,s)},this.EncrytAESCBC=function(e,t,i){var n=0,r="\u6210\u529f",a="";do{var o=/[^A-Fa-f0-9]/;if(64!=t.length||0>=e.length||o.test(e)||o.test(t))n=5005,r="\u53c3\u6578\u932f\u8aa4";else{try{var s=forge.util.binary.raw.encode(forge.util.binary.hex.decode(e)),l=forge.util.binary.raw.encode(forge.util.binary.hex.decode(t))}catch(e){n=5005,r="\u53c3\u6578\u932f\u8aa4";break}a=s;var c=l;o=forge.util.createBuffer(new Uint8Array(16),"raw"),(c=forge.cipher.createCipher("AES-CBC",c)).start({iv:o}),c.update(forge.util.createBuffer(a,"raw")),c.finish(),a='{"encryptedHexString":"'+(a=c.output.toHex())+'","key":"'+t+'","plain":"'+e+'"}'}}while(0);if(!(3<=arguments.length))return""==a?n:a;g.callback(i,n,r,a)},this.DecrytAESCBC=function(e,t,i){var n=0,r="\u6210\u529f",a="";do{var o=/[^A-Fa-f0-9]/;if(64!=t.length||0>=e.length||o.test(e)||o.test(t))n=5005,r="\u53c3\u6578\u932f\u8aa4";else{try{var s=forge.util.binary.raw.encode(forge.util.binary.hex.decode(e)),l=forge.util.binary.raw.encode(forge.util.binary.hex.decode(t))}catch(e){n=5005,r="\u53c3\u6578\u932f\u8aa4";break}o=s;var c=l,u=forge.util.createBuffer(new Uint8Array(16),"raw");(c=forge.cipher.createDecipher("AES-CBC",c)).start({iv:u}),c.update(forge.util.createBuffer(o,"raw")),null==(o=c.finish()?c.output.toHex():null)?(n=5080,r="\u52a0\u89e3\u5bc6\u5931\u6557"):a='{"plainString":"'+o+'","key":"'+t+'","encrypted":"'+e+'"}'}}while(0);if(!(3<=arguments.length))return 0==n?a:n;g.callback(i,n,r,a)},b)this.CheckCert=function(e,t,i){try{"undefined"==typeof i&&(i="ret_CheckCert");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.CheckCert(e,t,n),0):0<r.indexOf("iPhone")||0<r.indexOf("iPad")?(document.location="PKI::CheckCert::"+encodeURI(e+separation+t+separation+n),0):1}catch(e){return alert(e),-1}},this.MakeCSR=function(e,t,i,n,r,a){try{"undefined"==typeof a&&(a="ret_MakeCSR");var o=MobileUtils.registerFunction(a),s=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.MakeCSR(MobileUtils.toNumber(e),t,i,n,MobileUtils.toNumber(r),o),0):0<s.indexOf("iPhone")||0<s.indexOf("iPad")?(document.location="PKI::MakeCSR::"+encodeURI(e+separation+t+separation+i+separation+n+separation+r+separation+o),0):1}catch(e){return alert(e),-1}},this.MakeCSREx=function(e,t,i,n,r,a,o){try{"undefined"==typeof o&&(o="ret_MakeCSREx");var s=MobileUtils.registerFunction(o),l=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.MakeCSREx(MobileUtils.toNumber(e),t,i,n,MobileUtils.toNumber(r),JSON.stringify(a),s),0):0<l.indexOf("iPhone")||0<l.indexOf("iPad")?(document.location="PKI::MakeCSREx::"+encodeURI(e+separation+t+separation+i+separation+n+separation+r+separation+JSON.stringify(a)+separation+s),0):1}catch(e){return alert(e),-1}},this.ImportCert=function(e,t,i,n,r){try{"undefined"==typeof r&&(r="ret_ImportCert");var a=MobileUtils.registerFunction(r),o=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ImportCert(e,t,i,n,a),0):0<o.indexOf("iPhone")||0<o.indexOf("iPad")?(document.location="PKI::ImportCert::"+encodeURI(e+separation+t+separation+i+separation+n+separation+a),0):1}catch(e){return alert(e),-1}},this.ChangePIN=function(e,t,i,n,r,a){try{"undefined"==typeof a&&(a="ret_ChangePIN");var o=MobileUtils.registerFunction(a),s=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ChangePIN(e,t,i,n,r,o),0):0<s.indexOf("iPhone")||0<s.indexOf("iPad")?(document.location="PKI::ChangePIN::"+encodeURI(e+separation+t+separation+i+separation+n+separation+r+separation+o),0):1}catch(e){return alert(e),-1}},this.DeleteCert=function(e,t,i){try{"undefined"==typeof i&&(i="ret_DeleteCert");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.DeleteCert(e,t,n),0):0<r.indexOf("iPhone")||0<r.indexOf("iPad")?(document.location="PKI::DeleteCert::"+encodeURI(e+separation+t+separation+n),0):1}catch(e){return alert(e),-1}},this.QueryDeviceID=function(e,t,i){try{"undefined"==typeof i&&(i="ret_QueryDeviceID");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.QueryDeviceID(e,t,n),0):0<r.indexOf("iPhone")||0<r.indexOf("iPad")?(document.location="PKI::QueryDeviceID::"+encodeURI(e+separation+t+separation+n),0):1}catch(e){return alert(e),-1}},this.DeleteBrowserCert=function(e,t,i){try{var n=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.DeleteBrowserCert(e,t,i),0):0<n.indexOf("iPhone")||0<n.indexOf("iPad")?(document.location="PKI::DeleteBrowserCert::"+encodeURI(e+separation+t+separation+i),0):1}catch(e){return alert(e),-1}},this.CertEncryptPkcs7=function(e,t,i,n){try{var r=MobileUtils.registerFunction(n),a=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.CertEncryptPkcs7(e,t,MobileUtils.toNumber(i),r),0):0<a.indexOf("iPhone")||0<a.indexOf("iPad")?(document.location="PKI::CertEncryptPkcs7::"+encodeURI(e+separation+t+separation+i+separation+r),0):1}catch(e){return alert(e),-1}},this.SymEncrypt=function(e,t,i,n,r){try{"undefined"==typeof r&&(r="ret_SymEncrypt");var a=MobileUtils.registerFunction(r),o=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.SymEncrypt(e,t,i,MobileUtils.toNumber(n),a),0):0<o.indexOf("iPhone")||0<o.indexOf("iPad")?(document.location="PKI::SymEncrypt::"+encodeURI(e+separation+t+separation+i+separation+n+separation+a),0):1}catch(e){return alert(e),-1}},this.SymDecrypt=function(e,t,i,n,r){try{"undefined"==typeof r&&(r="ret_SymDecrypt");var a=MobileUtils.registerFunction(r),o=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.SymDecrypt(e,t,i,MobileUtils.toNumber(n),a),0):0<o.indexOf("iPhone")||0<o.indexOf("iPad")?(document.location="PKI::SymDecrypt::"+encodeURI(e+separation+t+separation+i+separation+n+separation+a),0):1}catch(e){return alert(e),-1}},this.ChangeWeb=function(e,t,i){try{"undefined"==typeof i&&(i="ret_ChangeWeb");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ChangeWeb(MobileUtils.toNumber(e),t,n),0):0<r.indexOf("iPhone")||0<r.indexOf("iPad")?(document.location="PKI::ChangeWeb::"+encodeURI(e+separation+t+separation+n),0):1}catch(e){return alert(e),-1}},this.SetErrorCode=function(e,t,i){try{"undefined"==typeof i&&(i="ret_SetErrorCode");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.SetErrorCode(MobileUtils.toNumber(e),t,n),0):0<r.indexOf("iPhone")||0<r.indexOf("iPad")?(document.location="PKI::SetErrorCode::"+encodeURI(e+separation+t+separation+n),0):1}catch(e){return alert(e),-1}},this.ExitWebview=function(){try{var e=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ExitWebview(),0):0<e.indexOf("iPhone")||0<e.indexOf("iPad")?(document.location="PKI::ExitWebview::",0):1}catch(e){return alert(e),-1}},this.ExitWebview2=function(e){try{var t=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ExitWebview2(e),0):0<t.indexOf("iPhone")||0<t.indexOf("iPad")?(document.location="PKI::ExitWebview2::"+encodeURI(e),0):1}catch(e){return alert(e),-1}},this.CheckCert=function(e,t,i){try{"undefined"==typeof i&&(i="ret_CheckCert");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.CheckCert(e,t,n),0):0<r.indexOf("iPhone")||0<r.indexOf("iPad")?(document.location="PKI::CheckCert::"+encodeURI(e+separation+t+separation+n),0):1}catch(e){return alert(e),-1}},this.OpenBrowser=function(e,t){try{var i=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(t?MobileUtils.androidInterface.OpenBrowser(e,t):MobileUtils.androidInterface.OpenBrowser(e),0):0<i.indexOf("iPhone")||0<i.indexOf("iPad")?(document.location=t?"PKI::OpenBrowser::"+encodeURI(e+separation+t):"PKI::OpenBrowser::"+encodeURI(e),0):1}catch(e){return alert(e),-1}},this.GetServerAuth=function(e){try{"undefined"==typeof e&&(e="ret_GetServerAuth");var t=MobileUtils.registerFunction(e),i=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.GetServerAuth(t),0):0<i.indexOf("iPhone")||0<i.indexOf("iPad")?(document.location="PKI::GetServerAuth::"+encodeURI(t),0):1}catch(e){return alert(e),-1}},this.VerifyServerResponse=function(e,t){try{"undefined"==typeof t&&(t="ret_VerifyServerResponse");var i=MobileUtils.registerFunction(t),n=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.VerifyServerResponse(e,i),0):0<n.indexOf("iPhone")||0<n.indexOf("iPad")?(document.location="PKI::VerifyServerResponse::"+encodeURI(e+separation+i),0):1}catch(e){return alert(e),-1}},this.ManageLocalAuth=function(e,t,i,n,r){try{"undefined"==typeof r&&(r="ret_ManageLocalAuth");var a=MobileUtils.registerFunction(r),o=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ManageLocalAuth(e,t,i,n,a),0):0<o.indexOf("iPhone")||0<o.indexOf("iPad")?(document.location="PKI::ManageLocalAuth::"+encodeURI(e+separation+t+separation+i+separation+n+separation+a),0):1}catch(e){return alert(e),-1}},this.CertProcessDone=function(){try{var e=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.CertProcessDone(),0):0<e.indexOf("iPhone")||0<e.indexOf("iPad")?(document.location="PKI::CertProcessDone",0):1}catch(e){return alert(e),-1}},this.DecryptAndShowPdf=function(e,t,i,n){try{"undefined"==typeof n&&(n="ret_DecryptAndShowPdf");var r=MobileUtils.registerFunction(n),a=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.DecryptAndShowPdf(e,t,i,r),0):0<a.indexOf("iPhone")||0<a.indexOf("iPad")?(document.location="PKI::DecryptAndShowPdf::"+encodeURI(e+separation+t+separation+i+separation+r),0):1}catch(e){return alert(e),-1}};else{var C=function(e){var t=null;if(e){if(t="","C"==e.attributes[0].shortName)for(var i=0;i<e.attributes.length;i++)t=t+e.attributes[i].shortName+"="+e.attributes[i].value+", ";else for(i=e.attributes.length-1;0<=i;i--)t=t+e.attributes[i].shortName+"="+e.attributes[i].value+", ";2<t.length&&(t=t.substring(0,t.length-2))}return t},S=function(e,t){var i=null;try{i=forge.pkcs12.pkcs12FromAsn1(forge.asn1.fromDer(forge.util.decode64(e)),t)}catch(e){}return i},w=function(e,t){if("undefined"==typeof localStorage)return!1;var i="TWCA"+(new Date).getTime().toString(),n=null;if(null==localStorage.getItem("TWCACertIdxRef"))n={};else if(""==localStorage.getItem("TWCACertIdxRef"))n={};else try{n=JSON.parse(localStorage.getItem("TWCACertIdxRef"))}catch(e){n={}}for(var r in n)if(n[r].issuer==e.issuer){var a=e.cn.replace(/^\s+|\s+$/,"").replace(/^0*/,"").toUpperCase().split("-")[0],o=n[r].cn.replace(/^\s+|\s+$/,"").replace(/^0*/,"").toUpperCase().split("-")[0],s=n[r].cs;s||(s=""),t||(t=""),a==o&&s===t&&(n[r]=null,delete n[r],localStorage.removeItem(r))}n[i]={cn:e.cn,issuer:e.issuer,subject:e.subject,serial:e.serial,notBefore:e.notBefore,notAfter:e.notAfter,cs:e.cs};try{localStorage.setItem("TWCACertIdxRef",JSON.stringify(n)),localStorage.setItem(i,JSON.stringify(e))}catch(e){return!1}return i},x=function(e,t,i){if(!e)return null;var n={};if(n.serial=e.serialNumber.toUpperCase(),n.issuer=C(e.issuer),n.subject=C(e.subject),n.notBefore=s(new Date(e.validity.notBefore)),n.notAfter=s(new Date(e.validity.notAfter)),0<n.subject.length&&0<=n.subject.indexOf("CN=")){var r=n.subject.substring(n.subject.indexOf("CN=")+3,n.subject.length),a=r.length;0<=r.indexOf(", ")&&(a=r.indexOf(", ")),n.cn=r.substring(0,a)}return e=(e=(e=(e=forge.pki.certificateToPem(e)).replace(/\-----BEGIN CERTIFICATE-----/g,"")).replace(/\-----END CERTIFICATE-----/g,"")).replace(/(?:\\[rn]|[\r\n]+)+/g,""),n.certb64=e,(r=forge.md.sha1.create()).update(forge.util.decode64(e)),n.certfinger=r.digest().toHex(),n.b64P12Cert=t,n.cs=i||"",n},T=function(e,t){for(var i=[],n=t.replace(/^\/\/|\/\/\s*$/g,"").replace(/\s*=\s*/gm,"=").split("//"),r=0;r<n.length;r++)i[r]=u(n[r]);return a(e,i)},k=function(e,t){var i=!1;if(!(t&&e&&e.subject&&e.subject.attributes))return i;for(var n=0;n<e.subject.attributes.length;n++){var r=e.subject.attributes[n];r&&r.value&&0<=r.value.indexOf(t)&&(i=!0)}return i};this.QueryDeviceID=function(e,t,i){function n(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}e=0;var r="\u6210\u529f",a="";try{if("undefined"==typeof i&&(i="ret_QueryDeviceID"),t){var o=localStorage.getItem("TWCAAccountUqiDeviceID");o?((o=JSON.parse(o))[t]||(o[t]=n()+"-"+(new Date).getTime(),localStorage.setItem("TWCAAccountUqiDeviceID",JSON.stringify(o))),s=o[t]):(s=n()+"-"+(new Date).getTime(),(o={})[t]=s,localStorage.setItem("TWCAAccountUqiDeviceID",JSON.stringify(o)))}else{var s=localStorage.getItem("TWCABrowserUqiDeviceID");s||(s=n()+"-"+(new Date).getTime(),localStorage.setItem("TWCABrowserUqiDeviceID",s))}a='{"deviceType":"'+function(){if(-1<navigator.platform.indexOf("Win"))var e="PC";else-1<navigator.platform.indexOf("Mac")?e="PC":navigator.userAgent.match(/iPhone/i)?e="IP":navigator.userAgent.match(/iPad/i)?e="IA":navigator.userAgent.match(/Android/i)?(e="GP",navigator.userAgent.match(/Mobile/i)||(e="GA")):e="";return e}()+'","deviceId":"'+s+'","osVersion":"","appVersion":""}'}catch(t){console.error(t),e=5999,r="\u8b80\u53d6DeviceID\u5931\u6557"}g.callback(i,e,r,a)},this.MakeCSR=function(e,t,i,n,r){function a(e){var t=forge.pki.rsa.generateKeyPair({bits:2048,e:65537});null==t?g.callback(r,5065,"\u7522\u751f\u91d1\u9470\u5931\u6557",""):s(t.privateKey,t.publicKey,e)}function o(e,t){var i=forge.pki.privateKeyFromAsn1(forge.asn1.fromDer(forge.util.createBuffer(e)));s(i,forge.pki.setRsaPublicKey(i.n,i.e),t)}function s(e,t,n){var a=forge.pki.encryptRsaPrivateKey(e,i),o=forge.pki.createCertificationRequest();o.publicKey=t,n&&o.setSubject([{name:"commonName",value:n}]),o.sign(e),o=forge.pki.certificationRequestToPem(o),a=(a=(a=a.replace(/(?:\\[rn]|[\r\n]+)+/g,"")).replace("-----BEGIN ENCRYPTED PRIVATE KEY-----","")).replace("-----END ENCRYPTED PRIVATE KEY-----",""),o=(o=(o=o.replace(/(?:\\[rn]|[\r\n]+)+/g,"")).replace("-----BEGIN CERTIFICATE REQUEST-----","")).replace("-----END CERTIFICATE REQUEST-----",""),g.callback(r,0,"\u6210\u529f",u='{"b64Key":"'+a+'","csr":"'+o+'"}')}var l=0,c="\u6210\u529f",u="";if(i)if(1024!=e&&2048!=e&&4096!=e)l=5005,c="\u53c3\u6578\u932f\u8aa4\uff0c\u4e0d\u652f\u63f4\u7684\u91d1\u9470\u9577\u5ea6";else if(0!=t&&512!=t&&1024!=t)l=5005,c="\u53c3\u6578\u932f\u8aa4\uff0c\u4e0d\u652f\u63f4\u7684\u6f14\u7b97\u6cd5";else{switch(t){case 0:t="SHA-1";break;case 512:t="SHA-256";break;case 768:t="SHA-512";break;default:t="SHA-256"}e={name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:t}};try{if(window.crypto){if(!crypto.subtle||!crypto.subtle.generateKey)return void a(n);crypto.subtle.generateKey(e,!0,["sign","verify"]).then(function(e){return crypto.subtle.exportKey("pkcs8",e.privateKey)}).then(function(e){o(e,n)}).catch(function(e){console.error(e),a(n)})}else{if(!window.msCrypto)return void a(n);var h=window.msCrypto.subtle.generateKey(e,!0,["sign","verify"]);h.onerror=function(e){console.log("genOp.onerror event handler fired."),a(n)},h.oncomplete=function(e){(e=window.msCrypto.subtle.exportKey("pkcs8",e.target.result.privateKey)).onerror=function(e){console.log("expOp.onerror event handler fired."),a(n)},e.oncomplete=function(e){o(e.target.result,n)}}}}catch(e){return void a(n)}}else l=5005,c="\u53c3\u6578\u932f\u8aa4\uff0c\u5bc6\u78bc\u4e0d\u53ef\u7a7a\u767d";0!=l&&g.callback(r,l,c,u)},this.ImportCert=function(e,t,i,n,r,a){var s=0,l="\u6210\u529f",c="";if(e&&t&&i&&n&&a){if(0<=e.indexOf("::"))var u=(e=e.split("::"))[0],h=e[1];else u=e;0>n.indexOf("-----BEGIN CERTIFICATE-----")&&(n="-----BEGIN CERTIFICATE-----"+n),0>n.indexOf("-----END CERTIFICATE-----")&&(n+="-----END CERTIFICATE-----"),0>i.indexOf("-----BEGIN ENCRYPTED PRIVATE KEY-----")&&(i="-----BEGIN ENCRYPTED PRIVATE KEY-----"+i),0>i.indexOf("-----END ENCRYPTED PRIVATE KEY-----")&&(i+="-----END ENCRYPTED PRIVATE KEY-----");try{try{n=forge.pki.certificateFromPem(n)}catch(t){n=(n=n.replace("CERTIFICATE","PKCS7")).replace("CERTIFICATE","PKCS7");var d=forge.pkcs7.messageFromPem(n).certificates;for(e=0;e<d.length&&(n=d[e],!k(d[e],u));e++);}if(i=forge.pki.decryptRsaPrivateKey(i,t),d=!1,i&&n&&i.n.data&&n.publicKey.n.data&&i.n.data.length==n.publicKey.n.data.length){for(e=0;e<n.publicKey.n.data.length&&i.n.data[e]==n.publicKey.n.data[e];e++);d=!0}if(d)if(k(n,u)){var p=forge.pkcs12.toPkcs12Asn1(i,n,t,{algorithm:"3des"}),f=forge.asn1.toDer(p).getBytes(),m=forge.util.encode64(f),y=x(n,m,h);T(y,r)?w(y,h)?c="{"+o(y)+"}":(s=5110,l="\u5132\u5b58\u6191\u8b49\u5931\u6557"):(s=5115,l="\u6191\u8b49\u9a57\u8b49\u932f\u8aa4\uff1a\u6191\u8b49\u689d\u4ef6\u4e0d\u7b26")}else s=5115,l="\u6191\u8b49\u9a57\u8b49\u932f\u8aa4\uff1a\u6191\u8b49\u8207\u4f7f\u7528\u8005\u4e0d\u7b26";else s=5115,l="\u6191\u8b49\u9a57\u8b49\u932f\u8aa4\uff1a\u6191\u8b49\u8207\u91d1\u9470\u4e0d\u7b26"}catch(e){console.error(e),s=5111,l="\u532f\u5165\u6191\u8b49\u5931\u6557"}}else s=5005,l="\u53c3\u6578\u932f\u8aa4";g.callback(a,s,l,c)},this.ImportCertStore=function(e,t,i,n,r){var a=0,s="\u6210\u529f",l="";do{if(e&&t&&i){if(0<=e.indexOf("::"))var c=(e=e.split("::"))[0],u=e[1];else c=e,u="";if(/.*Android.*/.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent))try{var h=piexif.load(i);if(null==h){console.error(ex),a=5005,s="\u53c3\u6578\u932f\u8aa4\uff1a\u5716\u7247\u683c\u5f0f\u932f\u8aa4";break}i=h["0th"][33432]}catch(e){console.error(e),a=5005,s="\u53c3\u6578\u932f\u8aa4\uff1a\u5716\u7247\u683c\u5f0f\u932f\u8aa4";break}if(i)try{try{if(0>=forge.asn1.fromDer(forge.util.decode64(i)).value.length){a=5040,s="\u6191\u8b49\u683c\u5f0f\u932f\u8aa4";break}}catch(e){console.error(e),a=5040,s="\u6191\u8b49\u683c\u5f0f\u932f\u8aa4";break}if(pkcs12=S(i,t),null==pkcs12)a=5071,s="\u6191\u8b49\u5bc6\u78bc\u932f\u8aa4";else{for(var d=-1,p=pkcs12.getBags({bagType:forge.pki.oids.certBag})[forge.pki.oids.certBag],f=0;f<p.length;f++)if(k(p[f].cert,c)){d=f;break}if(0>d)a=5115,s="\u6191\u8b49\u9a57\u8b49\u932f\u8aa4\uff1a\u6191\u8b49\u8207\u4f7f\u7528\u8005\u4e0d\u7b26";else{var m=x(p[d].cert,i,u);T(m,n)?w(m,u)?l="{"+o(m)+"}":(a=5110,s="\u5132\u5b58\u6191\u8b49\u5931\u6557"):(a=5115,s="\u6191\u8b49\u9a57\u8b49\u932f\u8aa4\uff1a\u6191\u8b49\u689d\u4ef6\u4e0d\u7b26")}}}catch(e){console.error(e),a=5111,s="\u532f\u5165\u6191\u8b49\u5931\u6557"}else a=5005,s="\u53c3\u6578\u932f\u8aa4"}else a=5005,s="\u53c3\u6578\u932f\u8aa4"}while(0);g.callback(r,a,s,l)},this.ExportCertStore=function(e,t,i){var n=0,r="\u6210\u529f",a="";do{var o=null,s="";if(i&&t){try{if(!(o=sessionStorage.getItem("selectedCertInfo"))){n=5067,r="\u5c1a\u672a\u9078\u64c7\u6191\u8b49";break}}catch(e){console.error(e),n=5112,r="\u8b80\u53d6\u6191\u8b49\u5931\u6557";break}if((o=JSON.parse(o)).b64P12Cert){if(/.*Android.*/.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(!e){n=5005,r="\u53c3\u6578\u932f\u8aa4";break}try{var l=piexif.load(e);if(null==l){console.error(ex),n=5005,r="\u53c3\u6578\u932f\u8aa4\uff1a\u5716\u7247\u683c\u5f0f\u932f\u8aa4";break}l["0th"][33432]=o.b64P12Cert,s=piexif.insert(piexif.dump(l),e)}catch(e){console.error(e),n=5005,r="\u53c3\u6578\u932f\u8aa4\uff1a\u5716\u7247\u683c\u5f0f\u932f\u8aa4";break}}else s=o.b64P12Cert;a='{"certStore":"'+s+'","userId":"'+t+'"}'}else n=5060,r="\u91d1\u9470\u4e0d\u5b58\u5728"}else n=5005,r="\u53c3\u6578\u932f\u8aa4"}while(0);g.callback(i,n,r,a)},this.ChangePIN=function(e,t,i){var n=0,r="\u6210\u529f",a="";do{try{var s=null;if(e&&t&&i){try{if(!(s=JSON.parse(sessionStorage.getItem("selectedCertInfo")))){n=5067,r="\u5c1a\u672a\u9078\u64c7\u6191\u8b49";break}}catch(e){console.error(e),n=5112,r="\u8b80\u53d6\u6191\u8b49\u5931\u6557";break}var l=s.b64P12Cert;if(null==(l=S(l,e)))n=5071,r="\u6191\u8b49\u5bc6\u78bc\u932f\u8aa4";else{for(var c=l.getBags({bagType:forge.pki.oids.certBag})[forge.pki.oids.certBag],u=l.getBags({bagType:forge.pki.oids.pkcs8ShroudedKeyBag})[forge.pki.oids.pkcs8ShroudedKeyBag][0].key,h=[],d=0;d<c.length;d++)h.push(c[d].cert);var p=forge.pkcs12.toPkcs12Asn1(u,h,t,{algorithm:"3des"}),f=forge.asn1.toDer(p).getBytes(),m=forge.util.encode64(f);e:{h=void 0,d=s;var y=null;if(localStorage.getItem("TWCACertIdxRef")){try{y=JSON.parse(localStorage.getItem("TWCACertIdxRef"))}catch(e){var v=null;break e}for(h in y)if(y[h].issuer==d.issuer&&d.cn.replace(/^\s+|\s+$/,"").replace(/^0*/,"").toUpperCase().split("-")[0]==y[h].cn.replace(/^\s+|\s+$/,"").replace(/^0*/,"").toUpperCase().split("-")[0]){v=h;break e}v=void 0}else v=null}v?(s.b64P12Cert=m,localStorage.setItem(v,JSON.stringify(s)),sessionStorage.setItem("selectedCertInfo",JSON.stringify(s)),sessionStorage.setItem("twcaSelectedKey",forge.util.encode64(t)),a="{"+o(s)+"}"):(console.error(ex),n=5121,r="\u8b8a\u66f4\u5bc6\u78bc\u5931\u6557")}}else n=5005,r="\u53c3\u6578\u932f\u8aa4"}catch(e){console.error(e),n=5121,r="\u8b8a\u66f4\u5bc6\u78bc\u5931\u6557"}}while(0);g.callback(i,n,r,a)}}this.GetCertSubjectCN=function(){return g.getSelectedCertFieldValue("cn")},this.GetCertSubject=function(){return g.getSelectedCertFieldValue("subject")},this.GetCertIssuer=function(){return g.getSelectedCertFieldValue("issuer")},this.GetCertSerial=function(){return g.getSelectedCertFieldValue("serial")},this.GetCertNotBefore=function(){return g.getSelectedCertFieldValue("notBefore")},this.GetCertNotAfter=function(){return g.getSelectedCertFieldValue("notAfter")},this.getSelectedCertFieldValue=function(e){return g.selectedCertInfo&&"undefined"!=typeof g.selectedCertInfo[e]?g.selectedCertInfo[e]:""},this.setOpenWindowObject=function(e){if("object"!=typeof e)return 5005;g._childWindow=e},this.SelectSignerExFromChildWindowHandler=function(e,t,i,n){5071==e&&null==m[3]?twcaCryptoLibAlertDialog.show("\u8f38\u5165\u5bc6\u78bc","\u8acb\u8f38\u5165\u6191\u8b49\u5bc6\u78bc","","\u53d6\u6d88","\u78ba\u8a8d",["SelectSignerExFromChild",m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],twcaLib]):(i=m[8],m=null,g.callback(i,e,t,n))},this.SignPkcs7FromChildWindowHandler=function(e,t,i,n){i=m[2],m=null,g.callback(i,e,t,n)},this.SignPkcs1FromChildWindowHandler=function(e,t,i,n){i=m[2],m=null,g.callback(i,e,t,n)},this.ResetKeyFromChildWindowHandler=function(e,t,i,n){i=m[0],m=null,g.callback(i,e,t,n)},this.GetVersionFromChildWindowHandler=function(e,t,i,n){i=m[0],m=null,g.callback(i,e,t,n)},this.callback=function(e,t,i,n){"string"==typeof e&&0==e.indexOf("oTwcaLib._childWindow.twcaLib.")?(e=e.substring(30,e.length),g._childWindow.twcaLib[e](t,i,"",n)):"string"==typeof e&&0==e.indexOf("twcaLib.")?(e=e.substring(8,e.length),g[e](t,i,"",n)):e&&"[object Function]"==={}.toString.call(e)?e(t,i,"",n):window[e](t,i,"",n)}}try{support_amd=define.amd}catch(D){}support_amd&&define(function(e){var t=require("twca/forge");return new function(){function e(){var e=!1;try{window.opener&&window.opener.twcaLib&&window.location.hostname===window.opener.location.hostname&&(window.opener.twcaLib.setOpenWindowObject(window),e=!0)}catch(t){e=!1}return e}function i(e,i,n,r){function o(e,i,n,r,a,o){var s=t.pkcs7.createSignedData();switch(n){case 0:s.content=t.util.createBuffer(u(e),"raw");break;case 1:s.content=t.util.createBuffer(e,"utf8");break;case 2:s.content="undefined"==typeof Big5Encoding?t.util.createBuffer(e,"utf8"):t.util.createBuffer(Big5Encoding.getBig5Encoding(e),"raw");break;default:s.content=t.util.createBuffer(u(e),"raw")}return s.addCertificate(a),e={key:o,certificate:a,digestAlgorithm:i},h&&(e.authenticatedAttributes=[{type:t.pki.oids.contentType,value:t.pki.oids.data},{type:t.pki.oids.messageDigest},{type:t.pki.oids.signingTime}]),s.addSigner(e),s.sign(),(r=(r=(r=r?t.pkcs7.messageToPem(s):t.pkcs7.messageToPemWithoutContent(s)).replace(/\-----BEGIN PKCS7-----/g,"")).replace(/\-----END PKCS7-----/g,"")).replace(/(?:\\[rn]|[\r\n]+)+/g,"")}var s="",l=null,c=null;if(null==g.selectedCertInfo||null!=i)a(i,n);else{switch(61440&r){case 0:i=t.pki.oids.sha1;break;case 4096:i=t.pki.oids.md5;break;case 8192:i=t.pki.oids.sha256;break;case 16384:i=t.pki.oids.sha512;break;default:i=t.pki.oids.sha1}n=1024!=(3840&r),r&=15;var h=!1;if(c=(l=d()).oPrivateKey,l=l.oCert,"string"==typeof e)s=o(e,i,r,n,l,c);else if(Array.isArray(e)){s="";for(var p=0;p<e.length;p++)s=s+"||"+o(e[p],i,r,n,l,c);s=s.substring(2,s.length)}}return s}function n(e,i,n,r){function o(e,i,n,r,a){switch(l=i.create(),n){case 0:l.update(u(e));break;case 1:l.update(e,"utf8");break;case 2:"undefined"==typeof Big5Encoding?l.update(e,"utf8"):l.update(Big5Encoding.getBig5Encoding(e));break;default:l.update(u(e))}return r?t.util.bytesToHex(a.sign(l)):t.util.encode64(a.sign(l))}var s=null,l=null;if(null==g.selectedCertInfo||null!=i)a(i,n);else{switch(61440&r){case 0:i=t.md.sha1;break;case 4096:i=t.md.md5;break;case 8192:i=t.md.sha256;break;case 16384:i=t.md.sha512;break;default:i=t.md.sha1}if(n=256!=(3840&r),r&=15,s=d().oPrivateKey,"string"==typeof e)var c=o(e,i,r,n,s);else if(Array.isArray(e)){c="";for(var h=0;h<e.length;h++)c=c+"||"+o(e[h],i,r,n,s);c=c.substring(2,c.length)}}return c}function r(e,i,n){function r(e,i){var n=t.asn1.oidToDer(t.pki.oids[i]).getBytes(),r=t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.SEQUENCE,!0,[]),a=t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.SEQUENCE,!0,[]);return a.value.push(t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.OID,!1,n)),a.value.push(t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.NULL,!1,"")),n=t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.OCTETSTRING,!1,t.util.hexToBytes(e)),r.value.push(a),r.value.push(n),t.asn1.toDer(r).getBytes()}function o(e){if(0>=e.length)return!1;for(var t=!0,i=e[0].length,n=1;n<e.length;n++)if(e[n].length!=i){t=!1;break}return t}var s=null;do{if(null==g.selectedCertInfo||null!=i)a(i,n);else{if("string"==typeof e)s=e.length;else{if(!o(e))break;s=e[0].length}switch(s){case 20:var l="md5";break;case 40:l="sha1";break;case 64:l="sha256";break;case 128:l="sha512"}if(s=d(),"string"==typeof e){p1Encoded=r(e,l);var c=t.pki.rsa.encrypt(p1Encoded,s.oPrivateKey,1);c=t.util.encode64(c)}else if(Array.isArray(e)){c="";for(var u=0;u<e.length;u++){p1Encoded=r(e[u],l);var h=t.pki.rsa.encrypt(p1Encoded,s.oPrivateKey,1);c=c+"||"+t.util.encode64(h)}c=c.substring(2,c.length)}}}while(0);return c}function a(e,i,n,r){var a=-1,s=[],l=c("TWCACertIdxRef"),u={},d=null,g="",m=!1,y=!1,v=!1;do{4096==(61440&n)&&(m=!0),4==(4&n)&&(y=!0),8==(8&n)&&(v=!0);var b=240&n;if(null==e||""==e)a=5005,d=null;else if("//S"!=e.substring(0,3)&&"//I"!=e.substring(0,3)||"//"!=e.substring(e.length-2,e.length))a=5005,d=null;else if(null==i||""==i||14==i.length&&!isNaN(i)){for(var C=e.replace(/^\/\/|\/\/\s*$/g,"").replace(/\s*=\s*/gm,"=").split("//"),S=0;S<C.length;S++){var w=S;e:for(var x={},T="S_CS S_CL S_SN S_CN S_OU S_O S_C I_CN I_OU I_O I_C".split(" "),k=C[S];0<k.length;){var E=k.substring(0,k.indexOf("="));if(!p(T,E)){x=5005;break e}var A=(k=k.substring(k.indexOf("=")+1,k.length)).length,I=k.indexOf(",S_"),D=k.indexOf(",I_");0<I&&I<A&&(A=I),0<D&&D<A&&(A=D),I=k.substring(0,A),"S_O"==E||"S_OU"==E||"I_O"==E||"I_OU"==E?(x[E]||(x[E]=[]),x[E].push(I)):x[E]=I,k=k.substring(A+1,k.length)}s[w]=x}if(p(s,5005)||""==s[0])a=5005,d=null;else{for(var B in l){if((C=l[B]).certb64=JSON.parse(localStorage.getItem(B)).certb64,v){for(w=s,x=(T=h((S=C).certb64)).subject,T=T.issuer,k=!1,E=0;E<w.length;E++){for(var _ in A=!0,w[E])if("S_SN"==_)w[E][_].toUpperCase()!=x.SN&&(A=!1);else if("S_CN"==_)0>x.CN.indexOf(w[E][_])&&(A=!1);else if("S_OU"==_)for(I=0;I<w[E][_].length;I++)p(x.OU,w[E][_][I])||(A=!1);else if("S_O"==_)for(I=0;I<w[E][_].length;I++)p(x.O,w[E][_][I])||(A=!1);else if("S_C"==_)w[E][_]!=x.C&&(A=!1);else if("I_CN"==_)w[E][_]!=T.CN&&(A=!1);else if("I_OU"==_)for(I=0;I<w[E][_].length;I++)p(T.OU,w[E][_][I])||(A=!1);else if("I_O"==_)for(I=0;I<w[E][_].length;I++)p(T.O,w[E][_][I])||(A=!1);else"I_C"==_?w[E][_]!=T.C&&(A=!1):"S_CS"==_&&w[E][_]!=S.cs&&(A=!1);if(k=k||A)break}S=k}else{for(w=s,x=h((S=C).certb64).subject,T=!1,k=0;k<w.length;k++)if(E=!1,w[k].S_C==x.C&&(null==x.O||null!=w[k].S_O&&w[k].S_O.length==x.O.length)){for(A=0;null!=x.O&&A<x.O.length;A++)p(w[k].S_O,x.O[A])||(E=!0);if(!E&&(null==x.OU||null!=w[k].S_OU&&w[k].S_OU.length==x.OU.length)){for(A=0;null!=x.OU&&A<x.OU.length;A++)p(w[k].S_OU,x.OU[A])||(E=!0);if(!E&&w[k].S_CN==x.CN&&w[k].S_CS==S.cs){T=!0;break}}}S=T}""!=i?C.notAfter<i&&(S=!1):y&&(w=(E=new Date).getFullYear(),x=E.getMonth()+1,E.getDate(),T=E.getHours(),k=E.getMinutes(),A=E.getSeconds(),w=(w="0000"+w).substring(w.length-4,w.length),E=(E="00"+(x=(x="00"+x).substring(x.length-2,x.length))).substring(E.length-2,E.length),T=(T="00"+T).substring(T.length-2,T.length),k=(k="00"+k).substring(k.length-2,k.length),A=(A="00"+A).substring(A.length-2,A.length),C.notAfter<w+x+E+T+k+A&&(S=!1)),S&&null!=localStorage.getItem(B)&&""!=localStorage.getItem(B)&&(u[B]=C)}for(var M in u)if(null==d)g=M,d=u[M];else switch(b){case 0:case 16:d.notBefore<=u[M].notBefore&&(g=M,d=u[M]);break;case 32:d.notBefore>=u[M].notBefore&&(g=M,d=u[M]);break;case 64:d.notAfter<=u[M].notAfter&&(g=M,d=u[M]);break;case 128:d.notAfter>=u[M].notAfter&&(g=M,d=u[M]);break;default:d.notAfter<=u[M].notAfter&&(g=M,d=u[M])}if(null==d)a=5010,d=null;else if(d.b64P12Cert=JSON.parse(localStorage.getItem(g)).b64P12Cert,d.keySet=JSON.parse(localStorage.getItem(g)).keySet,d.certfinger=JSON.parse(localStorage.getItem(g)).certfinger,d.certb64=JSON.parse(localStorage.getItem(g)).certb64,!m){if(sessionStorage.removeItem("twcaSelectedKey"),d.b64P12Cert){if(!(b=o(d.b64P12Cert,r))){a=5071,d=null;break}if(!(b=b.getBags({bagType:t.pki.oids.pkcs8ShroudedKeyBag})[t.pki.oids.pkcs8ShroudedKeyBag][0].key)){a=5071,d=null;break}}else{if(!d.keySet){a=5112,d=null;break}if(!(b=f(d.keySet,r))){a=5071,d=null;break}}sessionStorage.setItem("twcaSelectedKey",t.util.encode64(r))}}}else a=5005,rtnCodeInfo=null}while(0);return null!=d?d:a}function o(e,i){var n=null;try{n=t.pkcs12.pkcs12FromAsn1(t.asn1.fromDer(t.util.decode64(e)),i)}catch(e){}return n}function s(e,t){var i="TWCA"+(new Date).getTime().toString(),n=c("TWCACertIdxRef");return n[i]={cn:e.cn,issuer:e.issuer,subject:e.subject,serial:e.serial,notBefore:e.notBefore,notAfter:e.notAfter,cs:e.cs},localStorage.setItem("TWCACertIdxRef",JSON.stringify(n)),localStorage.setItem(i,JSON.stringify(e)),i}function l(e){return e?'"sn":"'+e.serial+'","cn":"'+e.cn+'","ntb":"'+e.notBefore+'","nta":"'+e.notAfter+'","issdn":"'+e.issuer+'","subdn":"'+e.subject+'","certfinger":"'+e.certfinger+'","certb64":"'+e.certb64+'","cs":"'+e.cs+'"':""}function c(e){var t=null;if(null==(e=localStorage.getItem(e)))t={};else if(""==e)t={};else try{t=JSON.parse(e)}catch(e){t={}}return t}function u(e){for(var t=new Uint8Array(2*e.length),i=0;i<e.length;i++){var n=e.charCodeAt(i);t[2*i]=255&n,t[2*i+1]=n>>8&255}for(e="",i=0;i<t.length;i++)e=16>t[i]?e+"%0":e+"%",e+=t[i].toString(16);return unescape(e)}function h(e){ret={};try{var i=t.asn1.fromDer(t.util.decode64(e));i=t.pki.certificateFromAsn1(i)}catch(e){return null}for(ret.subject={},e=0;e<i.subject.attributes.length;e++){var n=i.subject.attributes[e];"C"==n.shortName&&(ret.subject.C=n.value),"O"==n.shortName&&(null==ret.subject.O&&(ret.subject.O=[]),ret.subject.O.push(n.value)),"OU"==n.shortName&&(null==ret.subject.OU&&(ret.subject.OU=[]),ret.subject.OU.push(n.value)),"CN"==n.shortName&&(ret.subject.CN=n.value)}for(ret.subject.SN=i.serialNumber.toUpperCase(),ret.issuer={},e=0;e<i.issuer.attributes.length;e++)"C"==(n=i.issuer.attributes[e]).shortName&&(ret.issuer.C=n.value),"O"==n.shortName&&(null==ret.issuer.O&&(ret.issuer.O=[]),ret.issuer.O.push(n.value)),"OU"==n.shortName&&(null==ret.issuer.OU&&(ret.issuer.OU=[]),ret.issuer.OU.push(n.value)),"CN"==n.shortName&&(ret.issuer.CN=n.value);return ret}function d(){var e={},i=sessionStorage.getItem("twcaSelectedKey");if(g.selectedCertInfo.b64P12Cert){p12Cert=t.pkcs12.pkcs12FromAsn1(t.asn1.fromDer(t.util.decode64(g.selectedCertInfo.b64P12Cert)),t.util.decode64(i));var n=p12Cert.getBags({bagType:t.pki.oids.pkcs8ShroudedKeyBag})[t.pki.oids.pkcs8ShroudedKeyBag][0].key;i=p12Cert.getBags({bagType:t.pki.oids.certBag})[t.pki.oids.certBag];for(var r=0;r<i.length;r++){var a=i[r].cert;if(a.publicKey.n.data[0]==n.n.data[0]&&a.publicKey.n.data[1]==n.n.data[1]){oCert=p12Cert.getBags({bagType:t.pki.oids.certBag})[t.pki.oids.certBag][r].cert;break}}oCert||(oCert=p12Cert.getBags({bagType:t.pki.oids.certBag})[t.pki.oids.certBag][0].cert)}else g.selectedCertInfo.keySet&&(oCert=t.asn1.fromDer(t.util.decode64(g.selectedCertInfo.certb64)),oCert=t.pki.certificateFromAsn1(oCert),n=f(g.selectedCertInfo.keySet,t.util.decode64(i)));return e.oPrivateKey=n,e.oCert=oCert,e}function p(e,t){for(var i in e)if(e[i]==t)return!0;return!1}function f(e,i,n){var r=null;try{if(3>arguments.length){var a=t.md.sha256.create();a.update(i);var o=a.digest().getBytes(),s=t.cipher.createDecipher("AES-CBC",o);s.start({iv:""}),s.update(t.util.createBuffer(t.util.decode64(e))),s.finish();var l=s.output.data.split("||");"TWCA"==l[8]&&(r=t.pki.setRsaPrivateKey(new t.jsbn.BigInteger(l[1],16),new t.jsbn.BigInteger(l[0],16),new t.jsbn.BigInteger(l[7],16),new t.jsbn.BigInteger(l[2],16),new t.jsbn.BigInteger(l[3],16),new t.jsbn.BigInteger(l[4],16),new t.jsbn.BigInteger(l[5],16),new t.jsbn.BigInteger(l[6],16)))}else r=t.pki.setRsaPrivateKey(new t.jsbn.BigInteger(n.n,16),new t.jsbn.BigInteger(n.e,16),new t.jsbn.BigInteger(n.d,16),new t.jsbn.BigInteger(n.p,16),new t.jsbn.BigInteger(n.q,16),new t.jsbn.BigInteger(n.dP,16),new t.jsbn.BigInteger(n.dQ,16),new t.jsbn.BigInteger(n.qInv,16))}catch(e){r=null}return r}var g=this;twcaLib=g;var m=null,y=null,v=null,b=!1;-1<navigator.userAgent.indexOf("TWID")&&(b=!0),this.SelectSignerEx=function(t,i,n,r,o,s,c,u,h){if(e()&&0==(15728640&s))m=[t,i,n,r,o,s,c,u,h],window.opener.twcaLib.SelectSignerEx(t,i,n,r,o,s,c,u,"oTwcaLib._childWindow.twcaLib.SelectSignerExFromChildWindowHandler");else{if(b)try{"undefined"==typeof h&&(h="ret_SelectSignerEx");var d=MobileUtils.registerFunction(h),p=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.SelectSignerEx(t,i,n,r,o,MobileUtils.toNumber(s),c,u,d),0):0<p.indexOf("iPhone")||0<p.indexOf("iPad")?(document.location="PKI::SelectSignerEx::"+encodeURI(t+separation+i+separation+n+separation+r+separation+o+separation+s+separation+c+separation+u+separation+d),0):1}catch(e){return alert(e),-1}if(4>=arguments.length)return a(t,o,s,r);d=0,p="\u6210\u529f";var f="",y=a(t,o,s,r);if("number"==typeof y)switch(y){case 5005:d=5005,p="\u53c3\u6578\u932f\u8aa4";break;case 5010:d=5010,p="\u7121\u6191\u8b49";break;case 5071:if(null==r&&0>"oTwcaLib._childWindow.twcaLib.SelectSignerExFromChildWindowHandler".indexOf(h))return void twcaCryptoLibAlertDialog.show("\u8f38\u5165\u5bc6\u78bc","\u8acb\u8f38\u5165\u6191\u8b49\u5bc6\u78bc","","\u53d6\u6d88","\u78ba\u8a8d",["SelectSignerEx",t,i,n,r,o,s,c,u,h,twcaLib]);d=5071,p="\u6191\u8b49\u5bc6\u78bc\u932f\u8aa4";break;case 5112:d=5112,p="\u8b80\u53d6\u6191\u8b49\u5931\u6557";break;default:d=5001,p="\u4e00\u822c\u932f\u8aa4"}else 0==(61440&s)&&(g.selectedCertInfo=y,sessionStorage.setItem("selectedCertInfo",JSON.stringify(y))),f="{"+l(y)+"}";g.callback(h,d,p,f)}},this.SignPkcs7=function(n,r,a,o){if(e())m=[n,r,a],window.opener.twcaLib.SignPkcs7(n,r,"oTwcaLib._childWindow.twcaLib.SignPkcs7FromChildWindowHandler");else{if(b)try{"undefined"==typeof a&&(a="ret_SignPkcs7");var s=!1,c=n;if("[object Array]"===Object.prototype.toString.call(n)){for(s=!0,index=0;index<n.length;++index){var u=t.util.binary.raw.encode(t.util.text.utf8.encode(n[index])),h=t.util.binary.base64.encode(t.util.binary.raw.decode(u));n[index]=h}c=n.join("#")}var d=MobileUtils.registerFunction(a),p=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(s?MobileUtils.androidInterface.SignPkcs7Batch(n,MobileUtils.toNumber(r),d):MobileUtils.androidInterface.SignPkcs7(n,MobileUtils.toNumber(r),d),0):0<p.indexOf("iPhone")||0<p.indexOf("iPad")?(document.location=s?"PKI::SignPkcs7Batch::"+encodeURI(c+separation+r+separation+d):"PKI::SignPkcs7::"+encodeURI(c+separation+r+separation+d),0):1}catch(e){return alert(e),-1}if(4<=arguments.length)return i(n,r,a,o);s=0,c="\u6210\u529f",u="",null==n||0>=n.length?(s=5005,c="\u53c3\u6578\u932f\u8aa4"):((h=sessionStorage.getItem("selectedCertInfo"))&&(g.selectedCertInfo=JSON.parse(h)),h=sessionStorage.getItem("twcaSelectedKey"),g.selectedCertInfo&&null!=h?null==(h=i(n,null,null,r))||""==h?(s=5061,c="\u7c3d\u7ae0\u5931\u6557"):u="{"+l(g.selectedCertInfo)+',"signature":"'+h+'"}':(s=5067,c="\u57f7\u884c\u7c3d\u7ae0\u6642\uff0c\u5c1a\u672a\u9078\u64c7\u7c3d\u7ae0\u6191\u8b49")),g.callback(a,s,c,u)}},this.SignPkcs1=function(i,r,a,o){if(e())m=[i,r,a],window.opener.twcaLib.SignPkcs1(i,r,"oTwcaLib._childWindow.twcaLib.SignPkcs1FromChildWindowHandler");else{if(b)try{"undefined"==typeof a&&(a="ret_SignPkcs1");var s=!1,c=i;if("[object Array]"===Object.prototype.toString.call(i)){for(s=!0,index=0;index<i.length;++index){var u=t.util.binary.raw.encode(t.util.text.utf8.encode(i[index])),h=t.util.binary.base64.encode(t.util.binary.raw.decode(u));i[index]=h}c=i.join("#")}var d=MobileUtils.registerFunction(a),p=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(s?MobileUtils.androidInterface.SignPkcs1Batch(c,MobileUtils.toNumber(r),d):MobileUtils.androidInterface.SignPkcs1(c,MobileUtils.toNumber(r),d),0):0<p.indexOf("iPhone")||0<p.indexOf("iPad")?(document.location=s?"PKI::SignPkcs1Batch::"+encodeURI(c+separation+r+separation+d):"PKI::SignPkcs1::"+encodeURI(c+separation+r+separation+d),0):1}catch(e){return alert(e),-1}if(4<=arguments.length)return n(i,r,a,o);s=0,c="\u6210\u529f",u="",null==i||0>=i.length?(s=5005,c="\u53c3\u6578\u932f\u8aa4"):((h=sessionStorage.getItem("selectedCertInfo"))&&(g.selectedCertInfo=JSON.parse(h)),h=sessionStorage.getItem("twcaSelectedKey"),g.selectedCertInfo&&null!=h?null==(h=n(i,null,null,r))||""==h?(s=5061,c="\u7c3d\u7ae0\u5931\u6557"):u='{"signature":"'+h+'",'+l(g.selectedCertInfo)+"}":(s=5067,c="\u57f7\u884c\u7c3d\u7ae0\u6642\uff0c\u5c1a\u672a\u9078\u64c7\u7c3d\u7ae0\u6191\u8b49")),g.callback(a,s,c,u)}},this.SignPkcs1FromHash=function(i,n,a){if(e())m=[i,n],window.opener.twcaLib.SignPkcs1FromHash(i,"oTwcaLib._childWindow.twcaLib.SignPkcs1FromChildWindowHandler");else{if(b)try{"undefined"==typeof n&&(n="ret_SignPkcs1FromHash");var o=!1,s=i;if("[object Array]"===Object.prototype.toString.call(i)){for(o=!0,index=0;index<i.length;++index){var c=t.util.binary.raw.encode(t.util.text.utf8.encode(i[index])),u=t.util.binary.base64.encode(t.util.binary.raw.decode(c));i[index]=u}s=i.join("#")}var h=MobileUtils.registerFunction(n),d=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(o?MobileUtils.androidInterface.SignPkcs1FromHashBatch(s,h):MobileUtils.androidInterface.SignPkcs1FromHash(s,h),0):0<d.indexOf("iPhone")||0<d.indexOf("iPad")?(document.location=o?"PKI::SignPkcs1FromHashBatch::"+encodeURI(s+separation+h):"PKI::SignPkcs1FromHash::"+encodeURI(s+separation+h),0):1}catch(e){return alert(e),-1}if(3<=arguments.length)return r(i,n,dwFlags2);o=0,s="\u6210\u529f",c="",null==i||0>=i.length?(o=5005,s="\u53c3\u6578\u932f\u8aa4"):((u=sessionStorage.getItem("selectedCertInfo"))&&(g.selectedCertInfo=JSON.parse(u)),u=sessionStorage.getItem("twcaSelectedKey"),g.selectedCertInfo&&null!=u?null==(u=r(i,null,null))||""==u?(o=5061,s="\u7c3d\u7ae0\u5931\u6557"):c=Array.isArray(u)?'{"signature":'+JSON.stringify(u)+","+l(g.selectedCertInfo)+"}":'{"signature":"'+u+'",'+l(g.selectedCertInfo)+"}":(o=5067,s="\u57f7\u884c\u7c3d\u7ae0\u6642\uff0c\u5c1a\u672a\u9078\u64c7\u7c3d\u7ae0\u6191\u8b49")),g.callback(n,o,s,c)}},this.ResetKey=function(t){if(e())m=[t],window.opener.twcaLib.ResetKey("oTwcaLib._childWindow.twcaLib.ResetKeyFromChildWindowHandler");else{if(b)try{"undefined"==typeof t&&(t="ret_ResetKey");var i=MobileUtils.registerFunction(t),n=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ResetKey(i),0):0<n.indexOf("iPhone")||0<n.indexOf("iPad")?(document.location="PKI::ResetKey::"+encodeURI(i),0):1}catch(e){return alert(e),-1}if(g.selectedCertInfo=null,sessionStorage.removeItem("selectedCertInfo"),sessionStorage.removeItem("twcaSelectedKey"),0>=arguments.length)return 0;g.callback(t,0,"\u6210\u529f","")}},this.GetVersion=function(t){if(e())m=[t],window.opener.twcaLib.GetVersion("oTwcaLib._childWindow.twcaLib.GetVersionFromChildWindowHandler");else{if(b)try{"undefined"==typeof t&&(t="ret_GetVersion");var i=MobileUtils.registerFunction(t),n=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.GetVersion(i),0):0<n.indexOf("iPhone")||0<n.indexOf("iPad")?(document.location="PKI::GetVersion::"+encodeURI(i),0):1}catch(e){return alert(e),-1}if(0>=arguments.length)return"1.4.0.1";g.callback(t,0,"\u6210\u529f",'{"version":"1.4.0.1"}')}},this.Hash=function(e,i,n){try{"undefined"==typeof n&&(n="ret_Hash");var r=MobileUtils.registerFunction(n),a=navigator.userAgent;if(MobileUtils.supportTwidAndroid())return MobileUtils.androidInterface.Hash(e,MobileUtils.toNumber(i),r),0;if(0<a.indexOf("iPhone")||0<a.indexOf("iPad"))return document.location="PKI::Hash::"+encodeURI(e+separation+i+separation+r),0;r=null,a="";var o=performance.now();switch(61440&i){case 0:var s=t.md.sha1;break;case 4096:s=t.md.md5;break;case 8192:s=t.md.sha256;break;case 16384:s=t.md.sha512;break;default:s=t.md.sha1}var l=s.create();switch(15&i){case 0:l.update(u(e));break;case 1:l.update(e,"utf8");break;case 2:"undefined"==typeof Big5Encoding?l.update(e,"utf8"):l.update(Big5Encoding.getBig5Encoding(e));break;default:l.update(u(e))}if(a='{"hashValue":"'+(r=l.digest().toHex())+'","time":"'+(performance.now()-o)+'","length":"'+e.length+'","length":"'+e.length+'"}',!(3<=arguments.length))return a;g.callback(n,0,"\u6210\u529f",a)}catch(e){return alert(e),-1}},this.Hmac=function(e,i,n,r){var a=0,o="\u6210\u529f",s="";switch(n){case 1:n="md5";break;case 3:n="sha256";break;default:n="sha1"}e=t.util.binary.raw.encode(t.util.binary.hex.decode(e));var l=t.hmac.create();return l.start(n,e),l.update(t.util.binary.raw.encode(t.util.text.utf16.encode(i))),(i=t.util.binary.base64.encode(t.util.binary.raw.decode(l.getMac().getBytes())))?s='{"hmacValue":"'+i+'"}':(a=5001,o="\u932f\u8aa4"),"string"==typeof r?g.callback(r,a,o,s):r(a,o,"",s),0},this.CreatePKCS7FromSignedData=function(e,i,n,r,a){var o=0,s="\u6210\u529f",l="",c=performance.now();e:{var h=null;if(e&&i&&n){switch(61440&r){case 0:var d=t.pki.oids.sha1;break;case 4096:d=t.pki.oids.md5;break;case 8192:d=t.pki.oids.sha256;break;case 16384:d=t.pki.oids.sha512;break;default:d=t.pki.oids.sha1}switch(15&r){case 0:var p=t.util.createBuffer(u(e),"raw");break;case 1:p=t.util.createBuffer(e,"utf8");break;case 2:p="undefined"==typeof Big5Encoding?t.util.createBuffer(e,"utf8"):t.util.createBuffer(Big5Encoding.getBig5Encoding(e),"raw");break;default:p=t.util.createBuffer(u(e),"raw")}try{h=t.asn1.fromDer(t.util.decode64(i)),h=t.pki.certificateFromAsn1(h)}catch(e){p7Value={errCode:2,errMsg:"\u6191\u8b49\u89e3\u6790\u932f\u8aa4"};break e}if(i!=v){var f=t.pkcs7.createSignedData();f.content=p,f.addCertificate(h),f.addSigner({key:"-----BEGIN RSA PRIVATE KEY-----MIIEowIBAAKCAQBbE4weWXGL8ehZU2UsCeRRBcU6S09/ph5IW4QtZKic1GDnanM1Ur/ohPHQsFLg6xBFiIBGPz/96eGAlg/NjcU/D3S4OmEF9PLxOT+Vg3I+dRZjmXFRrlfkmZ4ATNbZI4gzTrPUN9CV1soNlWQ/ClAniF+mqHLYFBXUhk8BCyV8j1SNp4sdiO4fHHCRZp44ppqRyG4op5/c9DUjeAsi4qgQyvxpO5lxzBZ73IkQ2aP/DKMF8rjKxKWM3JjInadcru/aAUO5TimDUrSMCaGYo5fzjqTCGD4iuz3J3tFoh20Z7H7s/kj4YK2l+YXbemCp0F13o70Hyb21Z87YqCzber5RAgMBAAECggEAMKI7jGlOzOAcprZ1rBKMLQfbzckxZoSaXyEfb+30a+qs5GZfpvXNLKjxR/MgDqL3SWoetWRJE5m0pSl8vtMZpRbnyQjDjp7CrDVZ0skiVF/J2N2zOV7T6GpviNF/WOw0atF4DbbQV3Me6ioAIfmr27BjA2eoC+KN1bLytSfymJR8G0CktovhhkD3wUZVuTcUGbg0yyif74y9dwmnHOQbOMdSWIHuIpTzQSGelRoQCmbLmhE2hAbIlT5mz6vFZCSmgTFSPk87sonHaFrBeesu5ut8LG686s97n78oPz27U/ek7lV/Cj/UJeljuRM5tDoCJJKkTB+0xsNrfNayWEQcwQKBgQCyGWMsRw1tprYqXp7nLS/nja6qf3bIs/IwtO1wsxmmtxXcXnb+/D285mUDsEelPB0AXJcOe1SP0fDFB1HMAFlJ5hWATbUveSEk5U2L+LjeREhCDlH0MJBDBc+vixo8MoHXq3sjpe3/HP76V+fvUOSx7vtasGG1I4fGUDMxLhbLzQKBgQCC6c0L4+idGcg5P7KvHlSwYHHKbLpuDiRNnSjqgQZ7EUxohYOCOk9tLFPaxMhhzgjI5hFPY48+Kv8NCCzzNWc25VI82qFcG6a8Mw1bUXb2/8/FKhUqTdaLlOZuVZW6LobxEM4Z4hEUnLfgrFbvlMKopbynwZ82UK5rm25Y0i6glQKBgQCobAm1HZw9TaKHfuOWisz6lKnQ4qlaM5GdLfw8z6I6Xnl15H9zsuZPdTGhw1p9j9N9PBI9x7O4LjkamkloOgw2Lje3FcV6F3qYgaBL9fIdf0U18oTd/+7s8tnskAdHVhwj8C6LD6d50dnutKLJVh5vhih9Ir/DpM4JZF6E66jzIQKBgGQy8RcltJfx8NcokuoIDAgHeXDW8YZk2pJxNKzwXnZ5kgL6FeLqIHrOD8yFC14YpY6m0R7zc+LAZACkfksUV9CjiuM674AhRegMJy/61VRODce54wNDGnAxYoGWjgg3rl76XtVeu3YMUYzsO4oaUTdly1SXFPYsoKOKDtZ64OdVAoGBAK14Yk03Hr8fR3F0uqmt8uu9GN7tNfzvifRPYQ+/sfMUDG1C2+gh/roSKnHX8p1Wwtf26cv5Klq5ySxUT3NxJErf1I7voDiLVM4pmq8DKiebsl/8QbJv3e3DMbGqiRAmfRNJqb7UcQsDEWORFt7U9XcCncCzIBuO2ETzDQshlcNE-----END RSA PRIVATE KEY-----",certificate:h,digestAlgorithm:d}),f.sign(),y=f,v=i}else if((f=y).content=p,f.contentInfo=null,f.contentInfo=t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.SEQUENCE,!0,[t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.OID,!1,t.asn1.oidToDer(t.pki.oids.data).getBytes())]),"content"in f){var m;f.content instanceof t.util.ByteBuffer?m=f.content.bytes():"string"==typeof f.content&&(m=t.util.encodeUtf8(f.content)),f.contentInfo.value.push(t.asn1.create(t.asn1.Class.CONTEXT_SPECIFIC,0,!0,[t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.OCTETSTRING,!1,m)]))}if(f.signers[0].signature=t.util.decode64(n),h=t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.SEQUENCE,!0,[t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.INTEGER,!1,t.asn1.integerToDer(f.signers[0].version).getBytes()),t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.SEQUENCE,!0,[t.pki.distinguishedNameToAsn1({attributes:f.signers[0].issuer}),t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.INTEGER,!1,t.util.hexToBytes(f.signers[0].serialNumber))]),t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.SEQUENCE,!0,[t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.OID,!1,t.asn1.oidToDer(f.signers[0].digestAlgorithm).getBytes()),t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.NULL,!1,"")])]),f.signers[0].authenticatedAttributesAsn1&&h.value.push(f.signers[0].authenticatedAttributesAsn1),h.value.push(t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.SEQUENCE,!0,[t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.OID,!1,t.asn1.oidToDer(f.signers[0].signatureAlgorithm).getBytes()),t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.NULL,!1,"")])),h.value.push(t.asn1.create(t.asn1.Class.UNIVERSAL,t.asn1.Type.OCTETSTRING,!1,f.signers[0].signature)),0<f.signers[0].unauthenticatedAttributes.length){for(d=t.asn1.create(t.asn1.Class.CONTEXT_SPECIFIC,1,!0,[]),p=0;p<f.signers[0].unauthenticatedAttributes.length;++p)d.values.push(_attributeToAsn1(f.signers[0].unauthenticatedAttributes[p]));h.value.push(d)}f.signerInfos[0]=h,signValue=t.pkcs7.messageToPem(f),signValue=signValue.replace(/\-----BEGIN PKCS7-----/g,""),signValue=signValue.replace(/\-----END PKCS7-----/g,""),p7Value=signValue=signValue.replace(/(?:\\[rn]|[\r\n]+)+/g,"")}else p7Value={errCode:2,errMsg:"\u53c3\u6578\u932f\u8aa4"}}if(f=performance.now(),"string"!=typeof p7Value?(o=p7Value.errCode,s=p7Value.errMsg):l='{"p7Value":"'+p7Value+'","time":"'+(f-c)+'","length":"'+e.length+'","length":"'+e.length+'"}',!(5<=arguments.length))return l;g.callback(a,o,s,l)},this.EncrytAESCBC=function(e,i,n){var r=0,a="\u6210\u529f",o="";do{var s=/[^A-Fa-f0-9]/;if(64!=i.length||0>=e.length||s.test(e)||s.test(i))r=5005,a="\u53c3\u6578\u932f\u8aa4";else{try{var l=t.util.binary.raw.encode(t.util.binary.hex.decode(e)),c=t.util.binary.raw.encode(t.util.binary.hex.decode(i))}catch(e){r=5005,a="\u53c3\u6578\u932f\u8aa4";break}o='{"encryptedHexString":"'+(o=_encryptAESCBC(l,c))+'","key":"'+i+'","plain":"'+e+'"}'}}while(0);if(!(3<=arguments.length))return""==o?r:o;g.callback(n,r,a,o)},this.DecrytAESCBC=function(e,i,n){var r=0,a="\u6210\u529f",o="";do{var s=/[^A-Fa-f0-9]/;if(64!=i.length||0>=e.length||s.test(e)||s.test(i))r=5005,a="\u53c3\u6578\u932f\u8aa4";else{try{var l=t.util.binary.raw.encode(t.util.binary.hex.decode(e)),c=t.util.binary.raw.encode(t.util.binary.hex.decode(i))}catch(e){r=5005,a="\u53c3\u6578\u932f\u8aa4";break}null==(s=_decryptAESCBC(l,c))?(r=5080,a="\u52a0\u89e3\u5bc6\u5931\u6557"):o='{"plainString":"'+s+'","key":"'+i+'","encrypted":"'+e+'"}'}}while(0);if(!(3<=arguments.length))return 0==r?o:r;g.callback(n,r,a,o)},b?(this.CheckCert=function(e,t,i){try{"undefined"==typeof i&&(i="ret_CheckCert");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.CheckCert(e,t,n),0):0<r.indexOf("iPhone")||0<r.indexOf("iPad")?(document.location="PKI::CheckCert::"+encodeURI(e+separation+t+separation+n),0):1}catch(e){return alert(e),-1}},this.MakeCSR=function(e,t,i,n,r,a){try{"undefined"==typeof a&&(a="ret_MakeCSR");var o=MobileUtils.registerFunction(a),s=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.MakeCSR(MobileUtils.toNumber(e),t,i,n,MobileUtils.toNumber(r),o),0):0<s.indexOf("iPhone")||0<s.indexOf("iPad")?(document.location="PKI::MakeCSR::"+encodeURI(e+separation+t+separation+i+separation+n+separation+r+separation+o),0):1}catch(e){return alert(e),-1}},this.MakeCSREx=function(e,t,i,n,r,a,o){try{"undefined"==typeof o&&(o="ret_MakeCSREx");var s=MobileUtils.registerFunction(o),l=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.MakeCSREx(MobileUtils.toNumber(e),t,i,n,MobileUtils.toNumber(r),JSON.stringify(a),s),0):0<l.indexOf("iPhone")||0<l.indexOf("iPad")?(document.location="PKI::MakeCSREx::"+encodeURI(e+separation+t+separation+i+separation+n+separation+r+separation+JSON.stringify(a)+separation+s),0):1}catch(e){return alert(e),-1}},this.ImportCert=function(e,t,i,n,r){try{"undefined"==typeof r&&(r="ret_ImportCert");var a=MobileUtils.registerFunction(r),o=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ImportCert(e,t,i,n,a),0):0<o.indexOf("iPhone")||0<o.indexOf("iPad")?(document.location="PKI::ImportCert::"+encodeURI(e+separation+t+separation+i+separation+n+separation+a),0):1}catch(e){return alert(e),-1}},this.ChangePIN=function(e,t,i,n,r,a){try{"undefined"==typeof a&&(a="ret_ChangePIN");var o=MobileUtils.registerFunction(a),s=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ChangePIN(e,t,i,n,r,o),0):0<s.indexOf("iPhone")||0<s.indexOf("iPad")?(document.location="PKI::ChangePIN::"+encodeURI(e+separation+t+separation+i+separation+n+separation+r+separation+o),0):1}catch(e){return alert(e),-1}},this.DeleteCert=function(e,t,i){try{"undefined"==typeof i&&(i="ret_DeleteCert");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.DeleteCert(e,t,n),0):0<r.indexOf("iPhone")||0<r.indexOf("iPad")?(document.location="PKI::DeleteCert::"+encodeURI(e+separation+t+separation+n),0):1}catch(e){return alert(e),-1}},this.QueryDeviceID=function(e,t,i){try{"undefined"==typeof i&&(i="ret_QueryDeviceID");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.QueryDeviceID(e,t,n),0):0<r.indexOf("iPhone")||0<r.indexOf("iPad")?(document.location="PKI::QueryDeviceID::"+encodeURI(e+separation+t+separation+n),0):1}catch(e){return alert(e),-1}},this.DeleteBrowserCert=function(e,t,i){try{var n=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.DeleteBrowserCert(e,t,i),0):0<n.indexOf("iPhone")||0<n.indexOf("iPad")?(document.location="PKI::DeleteBrowserCert::"+encodeURI(e+separation+t+separation+i),0):1}catch(e){return alert(e),-1}},this.CertEncryptPkcs7=function(e,t,i,n){try{var r=MobileUtils.registerFunction(n),a=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.CertEncryptPkcs7(e,t,MobileUtils.toNumber(i),r),0):0<a.indexOf("iPhone")||0<a.indexOf("iPad")?(document.location="PKI::CertEncryptPkcs7::"+encodeURI(e+separation+t+separation+i+separation+r),0):1}catch(e){return alert(e),-1}},this.SymEncrypt=function(e,t,i,n,r){try{"undefined"==typeof r&&(r="ret_SymEncrypt");var a=MobileUtils.registerFunction(r),o=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.SymEncrypt(e,t,i,MobileUtils.toNumber(n),a),0):0<o.indexOf("iPhone")||0<o.indexOf("iPad")?(document.location="PKI::SymEncrypt::"+encodeURI(e+separation+t+separation+i+separation+n+separation+a),0):1}catch(e){return alert(e),-1}},this.SymDecrypt=function(e,t,i,n,r){try{"undefined"==typeof r&&(r="ret_SymDecrypt");var a=MobileUtils.registerFunction(r),o=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.SymDecrypt(e,t,i,MobileUtils.toNumber(n),a),0):0<o.indexOf("iPhone")||0<o.indexOf("iPad")?(document.location="PKI::SymDecrypt::"+encodeURI(e+separation+t+separation+i+separation+n+separation+a),0):1}catch(e){return alert(e),-1}},this.ChangeWeb=function(e,t,i){try{"undefined"==typeof i&&(i="ret_ChangeWeb");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ChangeWeb(MobileUtils.toNumber(e),t,n),0):0<r.indexOf("iPhone")||0<r.indexOf("iPad")?(document.location="PKI::ChangeWeb::"+encodeURI(e+separation+t+separation+n),0):1}catch(e){return alert(e),-1}},this.SetErrorCode=function(e,t,i){try{"undefined"==typeof i&&(i="ret_SetErrorCode");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.SetErrorCode(MobileUtils.toNumber(e),t,n),0):0<r.indexOf("iPhone")||0<r.indexOf("iPad")?(document.location="PKI::SetErrorCode::"+encodeURI(e+separation+t+separation+n),0):1}catch(e){return alert(e),-1}},this.ExitWebview=function(){try{var e=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ExitWebview(),0):0<e.indexOf("iPhone")||0<e.indexOf("iPad")?(document.location="PKI::ExitWebview::",0):1}catch(e){return alert(e),-1}},this.ExitWebview2=function(e){try{var t=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ExitWebview2(e),0):0<t.indexOf("iPhone")||0<t.indexOf("iPad")?(document.location="PKI::ExitWebview2::"+encodeURI(e),0):1}catch(e){return alert(e),-1}},this.CheckCert=function(e,t,i){try{"undefined"==typeof i&&(i="ret_CheckCert");var n=MobileUtils.registerFunction(i),r=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.CheckCert(e,t,n),0):0<r.indexOf("iPhone")||0<r.indexOf("iPad")?(document.location="PKI::CheckCert::"+encodeURI(e+separation+t+separation+n),0):1}catch(e){return alert(e),-1}},this.OpenBrowser=function(e,t){try{var i=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(t?MobileUtils.androidInterface.OpenBrowser(e,t):MobileUtils.androidInterface.OpenBrowser(e),0):0<i.indexOf("iPhone")||0<i.indexOf("iPad")?(document.location=t?"PKI::OpenBrowser::"+encodeURI(e+separation+t):"PKI::OpenBrowser::"+encodeURI(e),0):1}catch(e){return alert(e),-1}},this.GetServerAuth=function(e){try{"undefined"==typeof e&&(e="ret_GetServerAuth");var t=MobileUtils.registerFunction(e),i=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.GetServerAuth(t),0):0<i.indexOf("iPhone")||0<i.indexOf("iPad")?(document.location="PKI::GetServerAuth::"+encodeURI(t),0):1}catch(e){return alert(e),-1}},this.VerifyServerResponse=function(e,t){try{"undefined"==typeof t&&(t="ret_VerifyServerResponse");var i=MobileUtils.registerFunction(t),n=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.VerifyServerResponse(e,i),0):0<n.indexOf("iPhone")||0<n.indexOf("iPad")?(document.location="PKI::VerifyServerResponse::"+encodeURI(e+separation+i),0):1}catch(e){return alert(e),-1}},this.ManageLocalAuth=function(e,t,i,n,r){try{"undefined"==typeof r&&(r="ret_ManageLocalAuth");var a=MobileUtils.registerFunction(r),o=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.ManageLocalAuth(e,t,i,n,a),0):0<o.indexOf("iPhone")||0<o.indexOf("iPad")?(document.location="PKI::ManageLocalAuth::"+encodeURI(e+separation+t+separation+i+separation+n+separation+a),0):1}catch(e){return alert(e),-1}},this.CertProcessDone=function(){try{var e=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.CertProcessDone(),0):0<e.indexOf("iPhone")||0<e.indexOf("iPad")?(document.location="PKI::CertProcessDone",0):1}catch(e){return alert(e),-1}},this.DecryptAndShowPdf=function(e,t,i,n){try{"undefined"==typeof n&&(n="ret_DecryptAndShowPdf");var r=MobileUtils.registerFunction(n),a=navigator.userAgent;return MobileUtils.supportTwidAndroid()?(MobileUtils.androidInterface.DecryptAndShowPdf(e,t,i,r),0):0<a.indexOf("iPhone")||0<a.indexOf("iPad")?(document.location="PKI::DecryptAndShowPdf::"+encodeURI(e+separation+t+separation+i+separation+r),0):1}catch(e){return alert(e),-1}}):(this.QueryDeviceID=function(e,t,i){function n(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}e=0;var r="\u6210\u529f",a="";try{if("undefined"==typeof i&&(i="ret_QueryDeviceID"),t){var o=localStorage.getItem("TWCAAccountUqiDeviceID");o?((o=JSON.parse(o))[t]||(o[t]=n()+"-"+(new Date).getTime(),localStorage.setItem("TWCAAccountUqiDeviceID",JSON.stringify(o))),s=o[t]):(s=n()+"-"+(new Date).getTime(),(o={})[t]=s,localStorage.setItem("TWCAAccountUqiDeviceID",JSON.stringify(o)))}else{var s=localStorage.getItem("TWCABrowserUqiDeviceID");s||(s=n()+"-"+(new Date).getTime(),localStorage.setItem("TWCABrowserUqiDeviceID",s))}a='{"deviceType":"'+function(){if(-1<navigator.platform.indexOf("Win"))var e="PC";else-1<navigator.platform.indexOf("Mac")?e="PC":navigator.userAgent.match(/iPhone/i)?e="IP":navigator.userAgent.match(/iPad/i)?e="IA":navigator.userAgent.match(/Android/i)?(e="GP",navigator.userAgent.match(/Mobile/i)||(e="GA")):e="";return e}()+'","deviceId":"'+s+'","osVersion":"","appVersion":""}'}catch(t){console.error(t),e=5999,r="\u8b80\u53d6DeviceID\u5931\u6557"}g.callback(i,e,r,a)},this.MakeCSR=function(e,i,n,r,a){function o(e){var i=t.pki.rsa.generateKeyPair({bits:2048,e:65537});null==i?g.callback(a,5065,"\u7522\u751f\u91d1\u9470\u5931\u6557",""):l(i.privateKey,i.publicKey,e)}function s(e,i){var n=t.pki.privateKeyFromAsn1(t.asn1.fromDer(t.util.createBuffer(e)));l(n,t.pki.setRsaPublicKey(n.n,n.e),i)}function l(e,i,r){var o=t.pki.encryptRsaPrivateKey(e,n),s=t.pki.createCertificationRequest();s.publicKey=i,r&&s.setSubject([{name:"commonName",value:r}]),s.sign(e),s=t.pki.certificationRequestToPem(s),o=(o=(o=o.replace(/(?:\\[rn]|[\r\n]+)+/g,"")).replace("-----BEGIN ENCRYPTED PRIVATE KEY-----","")).replace("-----END ENCRYPTED PRIVATE KEY-----",""),s=(s=(s=s.replace(/(?:\\[rn]|[\r\n]+)+/g,"")).replace("-----BEGIN CERTIFICATE REQUEST-----","")).replace("-----END CERTIFICATE REQUEST-----",""),g.callback(a,0,"\u6210\u529f",h='{"b64Key":"'+o+'","csr":"'+s+'"}')}var c=0,u="\u6210\u529f",h="";if(n)if(1024!=e&&2048!=e&&4096!=e)c=5005,u="\u53c3\u6578\u932f\u8aa4\uff0c\u4e0d\u652f\u63f4\u7684\u91d1\u9470\u9577\u5ea6";else if(0!=i&&512!=i&&1024!=i)c=5005,u="\u53c3\u6578\u932f\u8aa4\uff0c\u4e0d\u652f\u63f4\u7684\u6f14\u7b97\u6cd5";else{switch(i){case 0:i="SHA-1";break;case 512:i="SHA-256";break;case 768:i="SHA-512";break;default:i="SHA-256"}e={name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:i}};try{if(window.crypto){if(!crypto.subtle||!crypto.subtle.generateKey)return void o(r);crypto.subtle.generateKey(e,!0,["sign","verify"]).then(function(e){return crypto.subtle.exportKey("pkcs8",e.privateKey)}).then(function(e){s(e,r)}).catch(function(e){console.error(e),o(r)})}else{if(!window.msCrypto)return void o(r);var d=window.msCrypto.subtle.generateKey(e,!0,["sign","verify"]);d.onerror=function(e){console.log("genOp.onerror event handler fired."),o(r)},d.oncomplete=function(e){(e=window.msCrypto.subtle.exportKey("pkcs8",e.target.result.privateKey)).onerror=function(e){console.log("expOp.onerror event handler fired."),o(r)},e.oncomplete=function(e){s(e.target.result,r)}}}}catch(e){return void o(r)}}else c=5005,u="\u53c3\u6578\u932f\u8aa4\uff0c\u5bc6\u78bc\u4e0d\u53ef\u7a7a\u767d";0!=c&&g.callback(a,c,u,h)},this.ImportCert=function(e,i,n,r,a,o){var c=0,u="\u6210\u529f",h="";if(e&&i&&n&&r&&o){0>r.indexOf("-----BEGIN CERTIFICATE-----")&&(r="-----BEGIN CERTIFICATE-----"+r),0>r.indexOf("-----END CERTIFICATE-----")&&(r+="-----END CERTIFICATE-----"),0>n.indexOf("-----BEGIN ENCRYPTED PRIVATE KEY-----")&&(n="-----BEGIN ENCRYPTED PRIVATE KEY-----"+n),0>n.indexOf("-----END ENCRYPTED PRIVATE KEY-----")&&(n+="-----END ENCRYPTED PRIVATE KEY-----");try{try{r=t.pki.certificateFromPem(r)}catch(i){r=(r=r.replace("CERTIFICATE","PKCS7")).replace("CERTIFICATE","PKCS7");for(var d=t.pkcs7.messageFromPem(r).certificates,p=0;p<d.length&&(r=d[p],!isIdInSubject(d[p],e));p++);}if(n=t.pki.decryptRsaPrivateKey(n,i),isPrivateKeyMatchesCert(n,r))if(isIdInSubject(r,e)){var f=t.pkcs12.toPkcs12Asn1(n,r,i,{algorithm:"3des"}),m=t.asn1.toDer(f).getBytes(),y=t.util.encode64(m),v=parseCertObjToCertInfo(r,y);isCertMatchesFilter(v,a)?s(v)?h="{"+l(v)+"}":(c=5110,u="\u5132\u5b58\u6191\u8b49\u5931\u6557"):(c=5115,u="\u6191\u8b49\u9a57\u8b49\u932f\u8aa4\uff1a\u6191\u8b49\u689d\u4ef6\u4e0d\u7b26")}else c=5115,u="\u6191\u8b49\u9a57\u8b49\u932f\u8aa4\uff1a\u6191\u8b49\u8207\u4f7f\u7528\u8005\u4e0d\u7b26";else c=5115,u="\u6191\u8b49\u9a57\u8b49\u932f\u8aa4\uff1a\u6191\u8b49\u8207\u91d1\u9470\u4e0d\u7b26"}catch(e){console.error(e),c=5111,u="\u532f\u5165\u6191\u8b49\u5931\u6557"}}else c=5005,u="\u53c3\u6578\u932f\u8aa4";g.callback(o,c,u,h)},this.ImportCertStore=function(e,i,n,r,a){var c=0,u="\u6210\u529f",h="";do{if(e&&i&&n){if(isMobile())try{var d=piexif.load(n);if(null==d){console.error(ex),c=5005,u="\u53c3\u6578\u932f\u8aa4\uff1a\u5716\u7247\u683c\u5f0f\u932f\u8aa4";break}n=d["0th"][33432]}catch(e){console.error(e),c=5005,u="\u53c3\u6578\u932f\u8aa4\uff1a\u5716\u7247\u683c\u5f0f\u932f\u8aa4";break}if(n)try{try{if(0>=t.asn1.fromDer(t.util.decode64(n)).value.length){c=5040,u="\u6191\u8b49\u683c\u5f0f\u932f\u8aa4";break}}catch(e){console.error(e),c=5040,u="\u6191\u8b49\u683c\u5f0f\u932f\u8aa4";break}if(pkcs12=o(n,i),null==pkcs12)c=5071,u="\u6191\u8b49\u5bc6\u78bc\u932f\u8aa4";else{for(var p=-1,f=pkcs12.getBags({bagType:t.pki.oids.certBag})[t.pki.oids.certBag],m=0;m<f.length;m++)if(isIdInSubject(f[m].cert,e)){p=m;break}if(0>p)c=5115,u="\u6191\u8b49\u9a57\u8b49\u932f\u8aa4\uff1a\u6191\u8b49\u8207\u4f7f\u7528\u8005\u4e0d\u7b26";else{var y=parseCertObjToCertInfo(f[p].cert,n);isCertMatchesFilter(y,r)?s(y)?h="{"+l(y)+"}":(c=5110,u="\u5132\u5b58\u6191\u8b49\u5931\u6557"):(c=5115,u="\u6191\u8b49\u9a57\u8b49\u932f\u8aa4\uff1a\u6191\u8b49\u689d\u4ef6\u4e0d\u7b26")}}}catch(e){console.error(e),c=5111,u="\u532f\u5165\u6191\u8b49\u5931\u6557"}else c=5005,u="\u53c3\u6578\u932f\u8aa4"}else c=5005,u="\u53c3\u6578\u932f\u8aa4"}while(0);g.callback(a,c,u,h)},this.ExportCertStore=function(e,t,i){var n=0,r="\u6210\u529f",a="";do{var o=null,s="";if(i&&t){try{if(!(o=sessionStorage.getItem("selectedCertInfo"))){n=5067,r="\u5c1a\u672a\u9078\u64c7\u6191\u8b49";break}}catch(e){console.error(e),n=5112,r="\u8b80\u53d6\u6191\u8b49\u5931\u6557";break}if((o=JSON.parse(o)).b64P12Cert){if(isMobile()){if(!e){n=5005,r="\u53c3\u6578\u932f\u8aa4";break}try{var l=piexif.load(e);if(null==l){console.error(ex),n=5005,r="\u53c3\u6578\u932f\u8aa4\uff1a\u5716\u7247\u683c\u5f0f\u932f\u8aa4";break}l["0th"][33432]=o.b64P12Cert,s=piexif.insert(piexif.dump(l),e)}catch(e){console.error(e),n=5005,r="\u53c3\u6578\u932f\u8aa4\uff1a\u5716\u7247\u683c\u5f0f\u932f\u8aa4";break}}else s=o.b64P12Cert;a='{"certStore":"'+s+'","userId":"'+t+'"}'}else n=5060,r="\u91d1\u9470\u4e0d\u5b58\u5728"}else n=5005,r="\u53c3\u6578\u932f\u8aa4"}while(0);g.callback(i,n,r,a)},this.ChangePIN=function(e,i,n){var r=0,a="\u6210\u529f",s="";do{try{var c=null;if(e&&i&&n){try{if(!(c=JSON.parse(sessionStorage.getItem("selectedCertInfo")))){r=5067,a="\u5c1a\u672a\u9078\u64c7\u6191\u8b49";break}}catch(e){console.error(e),r=5112,a="\u8b80\u53d6\u6191\u8b49\u5931\u6557";break}var u=c.b64P12Cert;if(null==(u=o(u,e)))r=5071,a="\u6191\u8b49\u5bc6\u78bc\u932f\u8aa4";else{for(var h=u.getBags({bagType:t.pki.oids.certBag})[t.pki.oids.certBag],d=u.getBags({bagType:t.pki.oids.pkcs8ShroudedKeyBag})[t.pki.oids.pkcs8ShroudedKeyBag][0].key,p=[],f=0;f<h.length;f++)p.push(h[f].cert);var m=t.pkcs12.toPkcs12Asn1(d,p,i,{algorithm:"3des"}),y=t.asn1.toDer(m).getBytes(),v=t.util.encode64(y),b=getCertIndexByCertInfo(c);b?(c.b64P12Cert=v,localStorage.setItem(b,JSON.stringify(c)),sessionStorage.setItem("selectedCertInfo",JSON.stringify(c)),sessionStorage.setItem("twcaSelectedKey",t.util.encode64(i)),s="{"+l(c)+"}"):(console.error(ex),r=5121,a="\u8b8a\u66f4\u5bc6\u78bc\u5931\u6557")}}else r=5005,a="\u53c3\u6578\u932f\u8aa4"}catch(e){console.error(e),r=5121,a="\u8b8a\u66f4\u5bc6\u78bc\u5931\u6557"}}while(0);g.callback(n,r,a,s)}),this.GetCertSubjectCN=function(){return g.getSelectedCertFieldValue("cn")},this.GetCertSubject=function(){return g.getSelectedCertFieldValue("subject")},this.GetCertIssuer=function(){return g.getSelectedCertFieldValue("issuer")},this.GetCertSerial=function(){return g.getSelectedCertFieldValue("serial")},this.GetCertNotBefore=function(){return g.getSelectedCertFieldValue("notBefore")},this.GetCertNotAfter=function(){return g.getSelectedCertFieldValue("notAfter")},this.getSelectedCertFieldValue=function(e){return g.selectedCertInfo&&"undefined"!=typeof g.selectedCertInfo[e]?g.selectedCertInfo[e]:""},this.setOpenWindowObject=function(e){if("object"!=typeof e)return 5005;g._childWindow=e},this.SelectSignerExFromChildWindowHandler=function(e,t,i,n){5071==e&&null==m[3]?twcaCryptoLibAlertDialog.show("\u8f38\u5165\u5bc6\u78bc","\u8acb\u8f38\u5165\u6191\u8b49\u5bc6\u78bc","","\u53d6\u6d88","\u78ba\u8a8d",["SelectSignerExFromChild",m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],g]):(i=m[8],m=null,g.callback(i,e,t,n))},this.SignPkcs7FromChildWindowHandler=function(e,t,i,n){i=m[2],m=null,g.callback(i,e,t,n)},this.SignPkcs1FromChildWindowHandler=function(e,t,i,n){i=m[2],m=null,g.callback(i,e,t,n)},this.ResetKeyFromChildWindowHandler=function(e,t,i,n){i=m[0],m=null,g.callback(i,e,t,n)},this.GetVersionFromChildWindowHandler=function(e,t,i,n){i=m[0],m=null,g.callback(i,e,t,n)},this.callback=function(e,t,i,n){"string"==typeof e&&0==e.indexOf("oTwcaLib._childWindow.twcaLib.")?(e=e.substring(30,e.length),g._childWindow.twcaLib[e](t,i,"",n)):"string"==typeof e&&0==e.indexOf("twcaLib.")?(e=e.substring(8,e.length),g[e](t,i,"",n)):e&&"[object Function]"==={}.toString.call(e)?e(t,i,"",n):window[e](t,i,"",n)}}});