webpackJsonp([36],{irYS:function(n,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var u=t("LMZF"),e=function(){},i=t("Un6q"),o=t("0nO6"),a=t("wywC"),r=t("PGCm"),c=t("AMGi"),s=t("NDpq"),h=t("xllO"),_=t("I4HG"),g=t("6Xbx"),d=t("rM26"),p=t("E+l/"),f=t("bkgj"),b=function(n){function l(){var l=null!==n&&n.apply(this,arguments)||this;return l.pageTitle=getBundleString("\u7e73\u6b3e\u5165\u5e33\u901a\u77e5","notice_ag014.00004413"),l.returnKey="ag014",l.controlNames=[],l.channels=[{display:"Email",name:"Email",confirm:"confirmPass",source:"emailFlag"},{display:getBundleString("\u624b\u6a5f<br>\u63a8\u64ad","notice_ag014.00002616"),name:getBundleString("\u624b\u6a5f\u63a8\u64ad","notice_ag014.00002624"),confirm:"confirmPass",source:"pushFlag"},{display:getBundleString("\u4e2d\u4fe1\u5361<br>\u512a\u60e0","notice_ag014.00000655"),name:getBundleString("\u4e2d\u4fe1\u5361\u512a\u60e0","notice_ag014.00000662"),confirm:"confirmMCardApp",source:"cardBonusFlag"}],l.defaults=[0,1],l.showSwitch=!1,l.noneEnabledHighlight=!1,l.hasNewSettings=!1,l.disableSave=!0,l.remarkAEMKey="TWRBMNoticeAG014_remark",l}return Object(g.__extends)(l,n),l.prototype.init=function(l){var t=this;n.prototype.changePageTitle.call(this,this.pageTitle),this.extendInit(l),n.prototype.getUtils.call(this).getNoticeItem("cardBill","ag014").then(function(l){console.log("rsData==>",l),n.prototype.sendAndReceiveAsync.call(t,"/twrbm-notice/ag014/010",l),t.initWithData(l)}).catch(function(l){p.a.isNotNullOrNotEmptyObject(l)?t.handleResponseError(l):(console.log("noprefired"),n.prototype.sendAndReceiveAsync.call(t,"/twrbm-notice/ag014/010",{}).then(function(n){console.log("rsData010 noItem ==>",n),t.initWithData(n)}).catch(function(n){return t.handleResponseError(n)}))})},l.prototype.initWithData=function(l){var t=this;n.prototype.showLoader.call(this);var u=this.channels.length;this.switchOn=l.isSwitchOn||!1,this.disableSave=!this.switchOn,this.channelEnabled=this.channels.map(function(n){return"1"==l[n.source]||!1}),this.channelEnabling=this.channelEnabled.slice(),this.switchOn&&-1==this.channelEnabling.indexOf(!0)&&this.preset(),this.channelStatus=new Array(u).fill("disabled"),this.buildPageForm(l),this.renderChannelStatus(),setTimeout(function(){n.prototype.hideLoader.call(t),t.showSwitch=!0},500)},l.prototype.buildPageForm=function(n){this.formClazz=new f.a(null,function(n){},null,{},this.formRef)},l.prototype.extendInit=function(n){},l.prototype.extendLateInit=function(n){},l.prototype.control=function(n){return this.formClazz.getForm().controls[n]},l.prototype.preset=function(){var n=this;this.defaults.forEach(function(l){n.channelEnabling[l]=!0})},l.prototype.confirmPass=function(){return new Promise(function(n,l){return n()})},l.prototype.confirmMCardApp=function(){var l=this;return new Promise(function(t,u){n.prototype.getUtils.call(l).isMCardAppInstalled(t,function(){return n.prototype.showConfirm.call(l,getBundleString("\u60a8\u7684\u88dd\u7f6e\u5c1a\u672a\u5b89\u88dd\u4e2d\u4fe1\u5361\u512a\u60e0APP\uff0c\u8acb\u554f\u60a8\u662f\u5426\u8981\u958b\u555f\u901a\u77e5\uff1f","notice_ag014.00002453"),function(n){n(),t()},function(n){n(),u()},getBundleString("\u78ba\u8a8d\u8a0a\u606f","notice_ag014.00004055"))})})},l.prototype.toggleChannelEnabling=function(n){var l=this;this.channelEnabling[n]=!this.channelEnabling[n],this.channelEnabling[0]||this.channelEnabling[2]?this.controlNames.forEach(function(n){return l.control(n).enable()}):(this.controlNames.map(function(n){return l.control(n).setValue("")}),this.controlNames.forEach(function(n){return l.control(n).disable()})),this.renderChannelStatus()},l.prototype.clickChannelEnabling=function(l,t){var u=this;this.switchOn&&n.prototype.preventEvent.call(this,l,function(){u.channelEnabling[t]?u.toggleChannelEnabling(t):u[u.channels[t].confirm]().then(function(){console.log("resolved"),u.toggleChannelEnabling(t)}).catch(function(){console.log("rejected")})})},l.prototype.renderChannelStatus=function(){this.noneEnabledHighlight=!1,this.switchOn?(console.log("channel enabling",this.channelEnabling),this.channelStatus=this.channelEnabling.map(function(n){return n?"active":""})):this.channelStatus.fill("disabled")},l.prototype.toggleSwitch=function(l){var t=this;console.log("toggle switch to",!this.switchOn),n.prototype.preventEvent.call(this,l,function(){t.disableSave=!1,t.switchOn=!t.switchOn,t.channelEnabling.fill(!1),t.controlNames.map(function(n){return t.control(n).setValue("")}),t.switchOn?(t.preset(),t.controlNames.forEach(function(n){return t.control(n).enable()})):t.controlNames.forEach(function(n){return t.control(n).disable()}),t.renderChannelStatus()})},l.prototype.save=function(l,t){var u=this;n.prototype.showLoader.call(this),n.prototype.getSharedService.call(this).clearNoticeItemsCfg(),this.disableSave=!this.switchOn,n.prototype.sendAndReceiveAsync.call(this,l,t).then(function(l){u.channelEnabled=u.channelEnabling.slice(),u.inputHistory=u.controlNames.map(function(n){return u.control(n).value.toString()}),n.prototype.hideLoader.call(u),u.hasNewSettings=!0,n.prototype.showToast.call(u,getBundleString("\u8a2d\u5b9a\u6210\u529f","notice_ag014.00004710"))},function(n){return u.handleResponseError(n)})},l.prototype.saveConfirm=function(){var l=this;this.noneEnabledHighlight=this.switchOn&&-1==this.channelEnabling.indexOf(!0);var t="/twrbm-notice/ag014/011",u={isEmailFlagOn:this.channelEnabling[0],isPushFlagOn:this.channelEnabling[1],isCardBonusFlagOn:this.channelEnabling[2],isSwithOn:this.switchOn};console.log("payLoad==>",u),this.switchOn?this.noneEnabledHighlight||n.prototype.showConfirm.call(this,getBundleString("\u7e73\u6b3e\u5165\u5e33\u901a\u77e5\u5c07\u900f\u904e","notice_ag014.00004415")+this.channels.map(function(n){return n.name}).filter(function(n,t){return l.channelEnabling[t]}).join("\u3001")+getBundleString("\u901a\u77e5\u60a8\uff0c\u8acb\u78ba\u8a8d\u662f\u5426\u8981\u57f7\u884c\u672c\u6b21\u8a2d\u5b9a\uff1f","notice_ag014.00005771"),function(n){n(),l.save(t,u)},function(n){return n()},getBundleString("\u78ba\u8a8d\u8a0a\u606f","notice_ag014.00004055")):this.save(t,u)},l.prototype.haveSettingsChanged=function(){console.log(this.channelEnabled,this.channelEnabling);for(var n=0;n<this.channels.length;n++)if(this.channelEnabled[n]!=this.channelEnabling[n])return!0;for(n=0;n<this.controlNames.length;n++)if(this.control(this.controlNames[n]).value!=this.inputHistory[n])return!0;return!1},l.prototype.clickSave=function(l){var t=this;n.prototype.preventEvent.call(this,l,function(){t.formClazz.resetFormErrors(),t.haveSettingsChanged()?t.saveConfirm():n.prototype.showAlert.call(t,getBundleString("\u60a8\u672a\u7570\u52d5\u4efb\u4f55\u8a2d\u5b9a\uff0c\u8acb\u518d\u6b21\u78ba\u8a8d","notice_ag014.00002414"),null,null,getBundleString("\u6211\u77e5\u9053\u4e86","notice_ag014.00002567"))})},l.prototype.pageBack=function(){var l=this;this.haveSettingsChanged()?n.prototype.showConfirm.call(this,getBundleString("\u60a8\u5c1a\u672a\u8a2d\u5b9a\u6b64\u6b21\u8a2d\u5b9a\uff0c\u78ba\u5b9a\u8981\u53d6\u6d88\u8a2d\u5b9a\uff1f","notice_ag014.00002372"),function(t){t(),n.prototype.previousPage.call(l,1,!1,null)},function(n){return n()},getBundleString("\u78ba\u8a8d\u8a0a\u606f","notice_ag014.00004055")):n.prototype.previousPage.call(this,1,!1,this.hasNewSettings?{chgType:"cardBill",key:this.returnKey}:{})},l}(d.a),m=u._3({encapsulation:0,styles:[[""]],data:{}});function v(n){return u._29(0,[(n()(),u._5(0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                                "])),(n()(),u._5(2,0,null,null,0,"div",[],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                            "]))],null,null)}function y(n){return u._29(0,[(n()(),u._5(0,0,null,null,4,"li",[["class","word"]],null,[[null,"click"]],function(n,l,t){var u=!0,e=n.component;return"click"===l&&(u=!1!==e.clickChannelEnabling(e.$evnet,n.context.index)&&u),u},null,null)),(n()(),u._27(-1,null,["\n                                    "])),(n()(),u._5(2,0,null,null,1,"a",[],[[8,"innerHTML",1]],null,null,null,null)),u._4(3,278528,null,0,i.k,[u.q,u.r,u.k,u.C],{ngClass:[0,"ngClass"]},null),(n()(),u._27(-1,null,["\n                                "]))],function(n,l){n(l,3,0,l.component.channelStatus[l.context.index])},function(n,l){n(l,2,0,l.context.$implicit.display)})}function w(n){return u._29(0,[(n()(),u._5(0,0,[[1,0],["formRef",1]],null,89,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,t){var e=!0;return"submit"===l&&(e=!1!==u._19(n,2).onSubmit(t)&&e),"reset"===l&&(e=!1!==u._19(n,2).onReset()&&e),e},null,null)),u._4(1,16384,null,0,o.A,[],null,null),u._4(2,540672,null,0,o.k,[[8,null],[8,null]],{form:[0,"form"]},null),u._24(2048,null,o.c,null,[o.k]),u._4(4,16384,null,0,o.r,[o.c],null,null),(n()(),u._27(-1,null,["\n            "])),(n()(),u._5(6,0,null,null,60,"ul",[["class","card-list reduse"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                "])),(n()(),u._5(8,0,null,null,21,"li",[],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                    "])),(n()(),u._5(10,0,null,null,18,"div",[["class","div-tb"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                        "])),(n()(),u._5(12,0,null,null,4,"div",[["class","td vmid wid_80per"]],null,null,null,null,null)),(n()(),u._5(13,0,null,null,3,"i18n",[["translate","notice_ag014.00005807"]],null,null,null,a.b,a.a)),u._4(14,81920,null,0,r.a,[u.k,c.b],{bundleKey:[0,"bundleKey"]},null),u._4(15,114688,null,0,s.a,[],null,null),(n()(),u._27(-1,null,["\u901a\u77e5\u8a2d\u5b9a "])),(n()(),u._27(-1,null,["\n                        "])),(n()(),u._5(18,0,null,null,9,"div",[["class","td rt"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                            "])),(n()(),u._5(20,0,null,null,6,"label",[["for","ios_btn"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.toggleSwitch(t)&&u),u},null,null)),(n()(),u._27(-1,null,["\n                            "])),(n()(),u._5(22,0,null,null,0,"input",[["class","ios-switch bigswitch"],["id","ios_btn"],["readonly",""],["type","checkbox"]],[[8,"checked",0]],null,null,null,null)),(n()(),u._27(-1,null,["\n                            "])),(n()(),u._0(16777216,null,null,1,null,v)),u._4(25,16384,null,0,i.m,[u.N,u.K],{ngIf:[0,"ngIf"]},null),(n()(),u._27(-1,null,["\n                        "])),(n()(),u._27(-1,null,["\n                        "])),(n()(),u._27(-1,null,["\n                    "])),(n()(),u._27(-1,null,["\n                "])),(n()(),u._27(-1,null,["\n                "])),(n()(),u._5(31,0,null,null,34,"li",[],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                    "])),(n()(),u._5(33,0,null,null,19,"div",[["class","div-tb"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                        "])),(n()(),u._5(35,0,null,null,7,"div",[["class","td vmid wid_40per"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                            "])),(n()(),u._5(37,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),u._5(38,0,null,null,3,"i18n",[["translate","notice_ag014.00005794"]],null,null,null,a.b,a.a)),u._4(39,81920,null,0,r.a,[u.k,c.b],{bundleKey:[0,"bundleKey"]},null),u._4(40,114688,null,0,s.a,[],null,null),(n()(),u._27(-1,null,["\u901a\u77e5\u7ba1\u9053 "])),(n()(),u._27(-1,null,["\n                        "])),(n()(),u._27(-1,null,["\n                        "])),(n()(),u._5(44,0,null,null,7,"div",[["class","td rt vmid"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                            "])),(n()(),u._5(46,0,null,null,4,"ul",[["class","foot-link for-list pull-right"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                                "])),(n()(),u._0(16777216,null,null,1,null,y)),u._4(49,802816,null,0,i.l,[u.N,u.K,u.q],{ngForOf:[0,"ngForOf"]},null),(n()(),u._27(-1,null,["\n                            "])),(n()(),u._27(-1,null,["\n                        "])),(n()(),u._27(-1,null,["\n                    "])),(n()(),u._27(-1,null,["\n                    "])),(n()(),u._5(54,0,null,null,10,"span",[],[[8,"hidden",0]],null,null,null,null)),(n()(),u._27(-1,null,["\n                    "])),(n()(),u._5(56,0,null,null,7,"div",[["class","form_group"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                        "])),(n()(),u._5(58,0,null,null,4,"div",[["class","form_error"]],null,null,null,null,null)),(n()(),u._5(59,0,null,null,3,"i18n",[["translate","notice_ag014.00004957"]],null,null,null,a.b,a.a)),u._4(60,81920,null,0,r.a,[u.k,c.b],{bundleKey:[0,"bundleKey"]},null),u._4(61,114688,null,0,s.a,[],null,null),(n()(),u._27(-1,null,["\u8acb\u81f3\u5c11\u9078\u64c7\u4e00\u500b\u7ba1\u9053"])),(n()(),u._27(-1,null,["\n                    "])),(n()(),u._27(-1,null,["\n                "])),(n()(),u._27(-1,null,["\n                "])),(n()(),u._27(-1,null,["\n            "])),(n()(),u._27(-1,null,["\n            "])),(n()(),u._27(-1,null,["\n            "])),(n()(),u._5(69,0,null,null,19,"div",[["class","container pad_top30"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n\n                "])),(n()(),u._5(71,0,null,null,10,"div",[["class","btn_group mt30"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                    "])),(n()(),u._5(73,0,null,null,7,"a",[["class","btn btn-block btn-success"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.clickSave(t)&&u),u},null,null)),u._4(74,278528,null,0,i.k,[u.q,u.r,u.k,u.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),u._27(-1,null,["\n                        "])),(n()(),u._5(76,0,null,null,3,"i18n",[["translate","notice_ag014.00001099"]],null,null,null,a.b,a.a)),u._4(77,81920,null,0,r.a,[u.k,c.b],{bundleKey:[0,"bundleKey"]},null),u._4(78,114688,null,0,s.a,[],null,null),(n()(),u._27(-1,null,["\u5132\u5b58\u8a2d\u5b9a"])),(n()(),u._27(-1,null,["\n                    "])),(n()(),u._27(-1,null,["\n                "])),(n()(),u._27(-1,null,["\n\n                "])),(n()(),u._5(83,0,null,null,4,"div",[["class","remarks pad_top30"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n                    "])),(n()(),u._5(85,0,null,null,1,"memo-remarks",[],null,null,null,h.b,h.a)),u._4(86,4964352,null,0,_.a,[],{key:[0,"key"],format:[1,"format"]},null),(n()(),u._27(-1,null,["\n                "])),(n()(),u._27(-1,null,["\n\n            "])),(n()(),u._27(-1,null,["\n\n        "]))],function(n,l){var t=l.component;n(l,2,0,t.formClazz.form),n(l,14,0,"notice_ag014.00005807"),n(l,15,0),n(l,25,0,t.showSwitch),n(l,39,0,"notice_ag014.00005794"),n(l,40,0),n(l,49,0,t.channels),n(l,60,0,"notice_ag014.00004957"),n(l,61,0),n(l,74,0,"btn btn-block btn-success",t.disableSave?"disabled":""),n(l,77,0,"notice_ag014.00001099"),n(l,78,0),n(l,86,0,t.remarkAEMKey,1)},function(n,l){var t=l.component;n(l,0,0,u._19(l,4).ngClassUntouched,u._19(l,4).ngClassTouched,u._19(l,4).ngClassPristine,u._19(l,4).ngClassDirty,u._19(l,4).ngClassValid,u._19(l,4).ngClassInvalid,u._19(l,4).ngClassPending),n(l,22,0,t.switchOn),n(l,54,0,!t.noneEnabledHighlight)})}function E(n){return u._29(0,[u._25(671088640,1,{formRef:0}),(n()(),u._5(1,0,null,null,9,"div",[["class","body-wrap bg_white scroll"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n    "])),(n()(),u._5(3,0,null,null,5,"div",[["class","main_container"]],null,null,null,null,null)),(n()(),u._27(-1,null,["\n        "])),(n()(),u._27(-1,null,["\n        "])),(n()(),u._0(16777216,null,null,1,null,w)),u._4(7,16384,null,0,i.m,[u.N,u.K],{ngIf:[0,"ngIf"]},null),(n()(),u._27(-1,null,["\n    "])),(n()(),u._27(-1,null,["\n    "])),(n()(),u._27(-1,null,["\n"])),(n()(),u._27(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,7,0,t.formClazz&&t.formClazz.form)},null)}var S=u._1("twrbm-notice-ag014-010",b,function(n){return u._29(0,[(n()(),u._5(0,0,null,null,1,"twrbm-notice-ag014-010",[],null,null,null,E,m)),u._4(1,4440064,null,0,b,[],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),C=t("TvUf"),k=t("4SdM"),O=t("UtI1"),N=t("v7k6"),B=t("Xb6M"),A=t("3glH"),P=t("UHIZ"),M=function(){};t.d(l,"TWRBMNoticeAG014ModuleNgFactory",function(){return x});var x=u._2(e,[],function(n){return u._16([u._17(512,u.j,u.X,[[8,[S]],[3,u.j],u.v]),u._17(4608,i.o,i.n,[u.s,[2,i.x]]),u._17(4608,o.B,o.B,[]),u._17(4608,o.g,o.g,[]),u._17(512,i.b,i.b,[]),u._17(512,o.y,o.y,[]),u._17(512,o.l,o.l,[]),u._17(512,o.w,o.w,[]),u._17(512,C.a,C.a,[]),u._17(512,k.a,k.a,[]),u._17(512,O.a,O.a,[]),u._17(512,N.a,N.a,[]),u._17(512,B.a,B.a,[]),u._17(512,A.a,A.a,[]),u._17(512,P.l,P.l,[[2,P.q],[2,P.k]]),u._17(512,M,M,[]),u._17(512,e,e,[]),u._17(1024,P.i,function(){return[[{path:"",redirectTo:"010",pathMatch:"full"},{path:"010",component:b}]]},[])])})}});